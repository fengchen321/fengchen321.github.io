[{"categories":["Computer"],"content":"æ±‡ç¼–è¯­è¨€","date":"2024-12-24","objectID":"/posts/computer/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/","tags":["Computer","æ±‡ç¼–è¯­è¨€"],"title":"æ±‡ç¼–è¯­è¨€","uri":"/posts/computer/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/"},{"categories":["Computer"],"content":"æ±‡ç¼–è¯­è¨€ ","date":"2024-12-24","objectID":"/posts/computer/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/:1:0","tags":["Computer","æ±‡ç¼–è¯­è¨€"],"title":"æ±‡ç¼–è¯­è¨€","uri":"/posts/computer/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/"},{"categories":["Computer"],"content":"å‚è€ƒé˜…è¯» æ±‡ç¼–è¯­è¨€-Bç«™ Arch Linux - v86 (copy.sh) ","date":"2024-12-24","objectID":"/posts/computer/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/:2:0","tags":["Computer","æ±‡ç¼–è¯­è¨€"],"title":"æ±‡ç¼–è¯­è¨€","uri":"/posts/computer/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/"},{"categories":null,"content":"fengchen çš„ä¸ªäººä»‹ç»","date":"2024-12-01","objectID":"/about/","tags":null,"title":"About","uri":"/about/"},{"categories":null,"content":"fengchen ğŸ‘ ","date":"2024-12-01","objectID":"/about/:1:0","tags":null,"title":"About","uri":"/about/"},{"categories":["Other"],"content":"Record","date":"2024-12-01","objectID":"/posts/other/record/","tags":["Other"],"title":"Record","uri":"/posts/other/record/"},{"categories":["Other"],"content":"å¸¸ç”¨å·¥å…· ","date":"2024-12-01","objectID":"/posts/other/record/:1:0","tags":["Other"],"title":"Record","uri":"/posts/other/record/"},{"categories":["Other"],"content":"MobaXterm MobaXtermçš„åŸºæœ¬ä½¿ç”¨ä¸å¿«æ·é”®ä»‹ç» - æœ¨å¯ç”Ÿåæœ¨ - åšå®¢å›­ (cnblogs.com) ","date":"2024-12-01","objectID":"/posts/other/record/:2:0","tags":["Other"],"title":"Record","uri":"/posts/other/record/"},{"categories":["Other"],"content":"Source Insight New project -\u003e æ–°å»ºå·¥ç¨‹åå­—ï¼›ä¿å­˜è·¯å¾„ï¼› project source directory:è¾“å…¥ç¨‹åºæºä»£ç çš„è·¯å¾„ add all ä¸ºå·¥ç¨‹æ·»åŠ æ–‡ä»¶ ï¼Œå…¨éƒ¨å‹¾é€‰ï¼›Show only known file typesè¿™ä¸€é€‰é¡¹æ¥é€‰æ‹©æ˜¾ç¤ºå…¶å®ƒç±»å‹çš„æ–‡ä»¶ ","date":"2024-12-01","objectID":"/posts/other/record/:3:0","tags":["Other"],"title":"Record","uri":"/posts/other/record/"},{"categories":["Other"],"content":"è½¯ä»¶ é”®ç›˜/ğŸ®æ‰‹æŸ„æŒ‰é”® æ£€æµ‹åŠå†å²è®°å½•æ˜¾ç¤ºå·¥å…· Windows11ã€Win10å®Œç¾å»é™¤å¿«æ·æ–¹å¼å°ç®­å¤´çš„æ–¹æ³• - çŸ¥ä¹ (zhihu.com) # .bat ç®¡ç†å‘˜è¿è¡Œ å»é™¤ç®­å¤´ win11 reg add \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Shell Icons\" /v 29 /d \"%systemroot%\\system32\\imageres.dll,197\" /t reg_sz /f taskkill /f /im explorer.exe attrib -s -r -h \"%userprofile%\\AppData\\Local\\iconcache.db\" del \"%userprofile%\\AppData\\Local\\iconcache.db\" /f /q start explorer pause # win10 reg add \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Shell Icons\" /v 29 /d \"%systemroot%\\system32\\imageres.dll,197\" /t reg_sz /f taskkill /f /im explorer.exe start explorer pause # æ¢å¤ç®­å¤´ reg delete \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Shell Icons\" /v 29 /f taskkill /f /im explorer.exe start explorer pause ","date":"2024-12-01","objectID":"/posts/other/record/:4:0","tags":["Other"],"title":"Record","uri":"/posts/other/record/"},{"categories":["Other"],"content":"ä¸“åˆ©æ£€ç´¢å¹³å° è®¿é—®ç½‘å€ï¼› ","date":"2024-12-01","objectID":"/posts/other/record/:5:0","tags":["Other"],"title":"Record","uri":"/posts/other/record/"},{"categories":["Other"],"content":"pycharmæ¿€æ´»æ’ä»¶ åœ¨File-Settings -\u003e Plugins å†…æ‰‹åŠ¨æ·»åŠ ç¬¬ä¸‰æ–¹æ’ä»¶ä»“åº“åœ°å€ï¼šhttps://plugins.zhile.io IDE Eval Reset ","date":"2024-12-01","objectID":"/posts/other/record/:6:0","tags":["Other"],"title":"Record","uri":"/posts/other/record/"},{"categories":["Other"],"content":"VSCodeè¿œç¨‹è¿æ¥ACå¹³å° vscode1.86æ— æ³•è¿œç¨‹è¿æ¥waiting the server log-CSDNåšå®¢ åœ¨windowsç³»ç»Ÿä¸Šå®‰è£…vscodeï¼Œå¹¶åœ¨æ‰©å±•ä¸­å¿ƒæœç´¢å¹¶å®‰è£…Remote Developmentæ’ä»¶ã€‚ åœ¨windowsç³»ç»Ÿä¸Šç”Ÿæˆä¸€å¯¹å…¬é’¥å’Œç§é’¥ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ssh-keygen -t rsaï¼Œç„¶åä¸€è·¯å›è½¦ã€‚æ³¨æ„ä¿å­˜å¥½æ‚¨çš„ç§é’¥æ–‡ä»¶ï¼ˆid_rsaï¼‰å’Œå…¬é’¥æ–‡ä»¶ï¼ˆid_rsa.pubï¼‰çš„è·¯å¾„ã€‚ åœ¨linuxæœåŠ¡å™¨ä¸Šå®‰è£…sshæœåŠ¡ï¼Œå¦‚æœå·²ç»å®‰è£…äº†ï¼Œè¯·ç¡®ä¿22ç«¯å£æ˜¯å¼€æ”¾çš„ã€‚ï¼ˆACå¹³å°å¿½ç•¥è¿™æ­¥ï¼‰ åœ¨linuxæœåŠ¡å™¨ä¸Šåœ¨.sshç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºauthorized_keysçš„æ–‡ä»¶ï¼Œç„¶åå°†æ‚¨çš„å…¬é’¥æ–‡ä»¶ï¼ˆid_rsa.pubï¼‰çš„å†…å®¹å¤åˆ¶åˆ°è¯¥æ–‡ä»¶ä¸­ã€‚ åœ¨æ‚¨çš„vscodeä¸­æŒ‰F1é”®ï¼ˆæˆ–è€…å·¦ä¸‹è§’å°å›¾æ ‡-è®¾ç½®ä¸‹é¢ï¼‰ï¼Œè¾“å…¥sshï¼Œç„¶åé€‰æ‹©æ‰“å¼€SSHé…ç½®æ–‡ä»¶ï¼Œç¼–è¾‘configæ–‡ä»¶ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ ¼å¼å¡«å†™æœåŠ¡å™¨ä¿¡æ¯ï¼š Host ä¸»æœºå HostName IPåœ°å€ Port ç«¯å£å· User ç”¨æˆ·å ForwardAgent yes ä¿å­˜configæ–‡ä»¶åï¼Œç‚¹å‡»å·¦ä¾§çš„å°å›¾æ ‡é€‰æ‹©``è¿æ¥åˆ°ä¸»æœºRemote-ssh`,é€‰æ‹©é…ç½®å¥½çš„æœåŠ¡å™¨å³å¯ã€‚ ç»ˆç«¯ä¸»é¢˜é€‰æ‹© å¤åˆ¶åˆ°vscodeä¸­çš„settings.jsonä¸­ \"workbench.colorCustomizations\": { \"terminal.background\": \"#1D2021\", \"terminal.foreground\": \"#D5C4A1\", \"terminalCursor.background\": \"#D5C4A1\", \"terminalCursor.foreground\": \"#D5C4A1\", \"terminal.ansiBlack\": \"#1D2021\", \"terminal.ansiBlue\": \"#83A598\", \"terminal.ansiBrightBlack\": \"#665C54\", \"terminal.ansiBrightBlue\": \"#83A598\", \"terminal.ansiBrightCyan\": \"#8EC07C\", \"terminal.ansiBrightGreen\": \"#B8BB26\", \"terminal.ansiBrightMagenta\": \"#D3869B\", \"terminal.ansiBrightRed\": \"#FB4934\", \"terminal.ansiBrightWhite\": \"#FBF1C7\", \"terminal.ansiBrightYellow\": \"#FABD2F\", \"terminal.ansiCyan\": \"#8EC07C\", \"terminal.ansiGreen\": \"#B8BB26\", \"terminal.ansiMagenta\": \"#D3869B\", \"terminal.ansiRed\": \"#FB4934\", \"terminal.ansiWhite\": \"#D5C4A1\", \"terminal.ansiYellow\": \"#FABD2F\" } ","date":"2024-12-01","objectID":"/posts/other/record/:7:0","tags":["Other"],"title":"Record","uri":"/posts/other/record/"},{"categories":["Other"],"content":"vscode æ’ä»¶ vscode é›†æˆ Neovim - ç®€ä¹¦ (jianshu.com) ","date":"2024-12-01","objectID":"/posts/other/record/:7:1","tags":["Other"],"title":"Record","uri":"/posts/other/record/"},{"categories":["Other"],"content":"Scientific Toolworks Understandå®‰è£… Setup x64.exeå®‰è£… å®‰è£…ç›®å½•çš„binæ–‡ä»¶å¤¹ä¸‹æ›¿æ¢crackçš„understand.exe Understand 6.4.1141ç ´è§£_understandç¦»çº¿æ¿€æ´»-CSDNåšå®¢ ","date":"2024-12-01","objectID":"/posts/other/record/:8:0","tags":["Other"],"title":"Record","uri":"/posts/other/record/"},{"categories":["Other"],"content":"typora ä½¿ç”¨ Typora ç”»å›¾ï¼ˆç±»å›¾ã€æµç¨‹å›¾ã€æ—¶åºå›¾ï¼‰ - çŸ¥ä¹ (zhihu.com) ","date":"2024-12-01","objectID":"/posts/other/record/:9:0","tags":["Other"],"title":"Record","uri":"/posts/other/record/"},{"categories":["Other"],"content":"Latex KaTeX é»˜è®¤ä¸æ”¯æŒ numcases ç¯å¢ƒï¼Œè¿˜æ˜¯ä½¿ç”¨caseså§ã€‚ katexåœ¨çº¿ ","date":"2024-12-01","objectID":"/posts/other/record/:10:0","tags":["Other"],"title":"Record","uri":"/posts/other/record/"},{"categories":["Other"],"content":"Blogé…ç½®","date":"2024-11-24","objectID":"/posts/other/blog/","tags":["Other"],"title":"Blogé…ç½®","uri":"/posts/other/blog/"},{"categories":["Other"],"content":"å®‰è£…Hugo winget install Hugo.Hugo.Extended å®‰è£…å®ŒæˆåæŸ¥çœ‹hugoç‰ˆæœ¬éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ hugo version ","date":"2024-11-24","objectID":"/posts/other/blog/:1:0","tags":["Other"],"title":"Blogé…ç½®","uri":"/posts/other/blog/"},{"categories":["Other"],"content":"é…ç½®åšå®¢æº ","date":"2024-11-24","objectID":"/posts/other/blog/:2:0","tags":["Other"],"title":"Blogé…ç½®","uri":"/posts/other/blog/"},{"categories":["Other"],"content":"ä½¿ç”¨hugoåˆ›å»ºç½‘ç«™ hugo new site blog # å¯ä»¥æ›¿æ¢æˆä»»æ„ä½ æƒ³è¦çš„åå­— # githubé‡Œåˆ›å»ºåŒåä»“åº“ï¼Œåˆ°æ—¶å€™git pushè¿›å»å°±è¡Œ ","date":"2024-11-24","objectID":"/posts/other/blog/:3:0","tags":["Other"],"title":"Blogé…ç½®","uri":"/posts/other/blog/"},{"categories":["Other"],"content":"å®‰è£…ä¸»é¢˜ hugo ä¸»é¢˜ æ ¹æ®ä¸»é¢˜æ–‡æ¡£å®‰è£…ï¼Œç”¨çš„fixitä¸»é¢˜ cd blog git init git submodule add https://github.com/hugo-fixit/FixIt.git themes/FixIt git submodule update --remote --merge themes/FixIt æµ‹è¯•åªéœ€è¦æŠŠä¸»blog/themes/FixIt/demoæ”¾åœ¨blogä¸‹ç›¸å¯¹äºçš„æ–‡ä»¶å¤¹é‡Œå°±è¡Œï¼Œæ¯”å¦‚ cp themes/FixIt/demo/hugo.toml hugo.toml # blog/themes/FixIt/demo/content/posts æ›¿æ¢blog/content å…¶ä¸­ä¿®æ”¹hugo.tomlé‡Œçš„baseurlä¿®æ”¹æˆä½ çš„ç½‘ç«™.github.io ","date":"2024-11-24","objectID":"/posts/other/blog/:4:0","tags":["Other"],"title":"Blogé…ç½®","uri":"/posts/other/blog/"},{"categories":["Other"],"content":"æœ¬åœ°è°ƒè¯•å’Œé¢„è§ˆ åˆ›å»ºæ–‡ä»¶ hugo new posts/test/a.md ç«™ç‚¹è°ƒè¯• hugo server --buildDrafts hugo server -D hugo server -D --disableFastRender ","date":"2024-11-24","objectID":"/posts/other/blog/:5:0","tags":["Other"],"title":"Blogé…ç½®","uri":"/posts/other/blog/"},{"categories":["Other"],"content":"é…ç½®Action settings -\u003e Developer Settings -\u003e Personal access tokens(Token classic) -\u003e generate new tokené‡Œåˆ›å»ºä¸€ä¸ªtokensï¼Œæ³¨æ„å‹¾é€‰repoå’Œworkflowæƒé™ åœ¨åšå®¢æºä»“åº“çš„Settings -\u003e Secrets and variables -\u003e Actions -\u003e Repository secretsä¸­æ·»åŠ ä¸€ä¸ªNAMEä¸ºACTION_TOKENï¼ˆéšä¾¿ä»€ä¹ˆåå­—ï¼Œåé¢è¦ä½¿ç”¨ï¼‰å†…å®¹ä¸ºåˆšåˆšåˆ›å»ºçš„tokens åˆ›å»º blog/.github/workflows/gh-pages.yml name: GitHub Pages on: push: branches: - main pull_request: jobs: deploy: runs-on: ubuntu-22.04 concurrency: group: ${{ github.workflow }}-${{ github.ref }} steps: - uses: actions/checkout@v4 with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: Setup Hugo uses: peaceiris/actions-hugo@v3 with: hugo-version: '0.139.0' extended: true # æ˜¯å¦å¯ç”¨hugo extended - name: Build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 with: EXTERNAL_REPOSITORY: fengchen321/fengchen321.github.io # ä½ çš„Github Pagesè¿œç¨‹ä»“åº“å PERSONAL_TOKEN: ${{ secrets.ACTION_TOKEN }} # setting å­˜æ”¾çš„åå­—è€Œä¸æ˜¯åŸå§‹key PUBLISH_DIR: ./public PUBLISH_BRANCH: main pushè¯¥åšå®¢æºå³å¯ ","date":"2024-11-24","objectID":"/posts/other/blog/:6:0","tags":["Other"],"title":"Blogé…ç½®","uri":"/posts/other/blog/"},{"categories":["Other"],"content":"å‚è€ƒé˜…è¯» ä½¿ç”¨ Hugo + Github Pages éƒ¨ç½²ä¸ªäººåšå®¢ matrix-a ","date":"2024-11-24","objectID":"/posts/other/blog/:7:0","tags":["Other"],"title":"Blogé…ç½®","uri":"/posts/other/blog/"},{"categories":["C++"],"content":"C++å¹¶å‘","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"C++ Concurrency è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ« ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:1:0","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"çº¿ç¨‹åŸºç¡€ ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:2:0","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"åˆå§‹åŒ–çº¿ç¨‹å¯¹è±¡ å¯åŠ¨çº¿ç¨‹åè¦æ˜ç¡®æ˜¯ç­‰å¾…çº¿ç¨‹ç»“æŸjoin()ï¼Œè¿˜æ˜¯è®©å…¶è‡ªä¸»è¿è¡Œdetach()ã€‚å¦åˆ™ç¨‹åºä¼šç»ˆæ­¢ï¼ˆstd::threadçš„ææ„å‡½æ•°ä¼šè°ƒç”¨std::terminate()ï¼‰ã€‚ ç­‰å¾…çº¿ç¨‹ç»“æŸï¼Œæ¥ä¿è¯å¯è®¿é—®çš„æ•°æ®æ˜¯æœ‰æ•ˆçš„ã€‚ åªèƒ½å¯¹ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ä¸€æ¬¡join()ï¼Œå½“å¯¹å…¶ä½¿ç”¨joinable()æ—¶ï¼Œå°†è¿”å›falseã€‚ void hello() { std::cout \u003c\u003c \"Hello world !\" \u003c\u003c std::endl; } std::thread t1(hello); t1.join(); class background_task { public: void operator()() { // é‡è½½()è¿ç®—ç¬¦ hello(); } }; // my_threadè¢«å½“ä½œå‡½æ•°å¯¹è±¡çš„å®šä¹‰ï¼Œå…¶è¿”å›ç±»å‹ä¸ºstd::thread, å‚æ•°ä¸ºå‡½æ•°æŒ‡é’ˆbackground_task() // std::thread my_thread(background_task()); // ç›¸å½“ä¸å£°æ˜äº†ä¸€ä¸ªåä¸ºmy_threadçš„å‡½æ•° // ä½¿ç”¨ä¸€ç»„é¢å¤–çš„æ‹¬å·ï¼Œæˆ–ä½¿ç”¨æ–°ç»Ÿä¸€çš„åˆå§‹åŒ–è¯­æ³•ï¼Œå¯ä»¥é¿å…å…¶è§£é‡Šå‡½æ•°å£°æ˜ ï¼ˆå®šä¹‰ä¸€ä¸ªçº¿ç¨‹my_threadï¼‰ std::thread my_thread_1((background_task())); std::thread my_thread_2{background_task()}; // lambdaè¡¨è¾¾å¼ std::thread my_thread_3([](){ hello(); }); my_thread_3.join(); ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:2:1","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"detach çº¿ç¨‹å…è®¸é‡‡ç”¨åˆ†ç¦»çš„æ–¹å¼åœ¨åå°ç‹¬è‡ªè¿è¡Œã€‚ å½“oopsè°ƒç”¨åï¼Œå±€éƒ¨å˜é‡some_local_stateå¯èƒ½è¢«é‡Šæ”¾ã€‚ é€šè¿‡æ™ºèƒ½æŒ‡é’ˆä¼ é€’å‚æ•°ã€‚ (å¼•ç”¨è®¡æ•°ä¼šéšç€èµ‹å€¼å¢åŠ ï¼Œå¯ä¿è¯å±€éƒ¨å˜é‡åœ¨ä½¿ç”¨æœŸé—´ä¸è¢«é‡Šæ”¾) å°†å±€éƒ¨å˜é‡çš„å€¼ä½œä¸ºå‚æ•°ä¼ é€’ã€‚ï¼ˆéœ€è¦å±€éƒ¨å˜é‡æœ‰æ‹·è´å¤åˆ¶çš„åŠŸèƒ½ï¼Œè€Œä¸”æ‹·è´è€—è´¹ç©ºé—´å’Œæ•ˆç‡ï¼‰ å°†çº¿ç¨‹è¿è¡Œçš„æ–¹å¼ä¿®æ”¹ä¸ºjoinã€‚ï¼ˆå¯èƒ½ä¼šå½±å“è¿è¡Œé€»è¾‘ï¼‰ struct func{ int\u0026 _i; func(int \u0026 i): _i(i){} void operator()(){ for (int i = 0; i \u003c 3; i++){ _i = i; std::cout \u003c\u003c \"_i is \" \u003c\u003c _i \u003c\u003c std::endl; std::this_thread::sleep_for(std::chrono::seconds(1)); } } }; void oops() { int some_locate_state = 0; func myfunc(some_locate_state); std::thread functhread(myfunc); // è®¿é—®å±€éƒ¨å˜é‡ã€‚å±€éƒ¨å˜é‡å¯èƒ½ä¼šéšç€}ç»“æŸè€Œå›æ”¶æˆ–éšç€ä¸»çº¿ç¨‹é€€å‡ºè€Œå›æ”¶ functhread.detach(); } void use_join() { int some_locate_state = 0; func myfunc(some_locate_state); std::thread functhread(myfunc); functhread.join(); } oops(); // é˜²æ­¢ä¸»çº¿ç¨‹é€€å‡ºè¿‡å¿« std::this_thread::sleep_for(std::chrono::seconds(1)); // ä½¿ç”¨join use_join(); ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:2:2","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"æ•è·å¼‚å¸¸ æ•è·å¼‚å¸¸ï¼Œå¹¶ä¸”åœ¨å¼‚å¸¸æƒ…å†µä¸‹ä¿è¯å­çº¿ç¨‹ç¨³å®šè¿è¡Œç»“æŸåï¼Œä¸»çº¿ç¨‹æŠ›å‡ºå¼‚å¸¸ç»“æŸè¿è¡Œã€‚ void catch_exception() { int some_locate_state = 0; func myfunc(some_locate_state); std::thread functhread(myfunc); try { std::this_thread::sleep_for(std::chrono::seconds(1)); } catch (std::exception\u0026 e) { functhread.join(); throw; } functhread.join(); } çº¿ç¨‹å®ˆå«ï¼šé‡‡ç”¨RAIIæŠ€æœ¯ï¼Œä¿è¯çº¿ç¨‹å¯¹è±¡ææ„çš„æ—¶å€™ç­‰å¾…çº¿ç¨‹è¿è¡Œç»“æŸï¼Œå›æ”¶èµ„æº // RAII èµ„æºè·å–åˆå§‹åŒ– class thread_guard { private: std::thread\u0026 _t; public: explicit thread_guard(std::thread\u0026 t): _t(t){} ~thread_guard() { // joinåªèƒ½è°ƒç”¨ä¸€æ¬¡ if (_t.joinable()){ _t.join(); } } thread_guard(thread_guard const\u0026) = delete; thread_guard\u0026 operator=(thread_guard const\u0026) = delete; }; void auto_guard() { int some_locate_state = 0; func myfunc(some_locate_state); std::thread functhread(myfunc); thread_guard g(functhread); std::cout \u003c\u003c \"auto guard finished\" \u003c\u003c std::endl; } ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:2:3","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"å‚æ•°ä¼ é€’ void print_str(int i, std::string const\u0026 s) { std::cout \u003c\u003c \"i is \" \u003c\u003c i \u003c\u003c \", str is \" \u003c\u003c s \u003c\u003c std::endl; } void danger_oops(int som_param) { char buffer[1024]; sprintf(buffer, \"%i\", som_param); std::thread t(print_str, 3, buffer); // å±€éƒ¨å˜é‡bufferå¯èƒ½å›æ”¶ t.detach(); std::cout \u003c\u003c \"danger oops finished\" \u003c\u003c std::endl; } void safe_oops(int som_param) { char buffer[1024]; sprintf(buffer, \"%i\", som_param); std::thread t(print_str, 3, std::string(buffer)); // æ˜¾ç¤ºåˆ›å»ºä¸€ä¸ªstd::stringå¯¹è±¡ t.detach(); std::cout \u003c\u003c \"safe oops finished\" \u003c\u003c std::endl; } å½“çº¿ç¨‹è¦è°ƒç”¨çš„å›è°ƒå‡½æ•°å‚æ•°ä¸ºå¼•ç”¨ç±»å‹æ—¶ï¼Œéœ€è¦å°†å‚æ•°æ˜¾ç¤ºè½¬åŒ–ä¸ºå¼•ç”¨å¯¹è±¡ä¼ é€’ç»™çº¿ç¨‹çš„æ„é€ å‡½æ•°ã€‚ void chage_param(int\u0026 param){ param++; } void ref_oops(int som_param) { std::cout \u003c\u003c \"before change, param is \" \u003c\u003c som_param \u003c\u003c std::endl; std::thread t(chage_param,std::ref(som_param));// ä¸åŠ stds:refä¼šç›²ç›®å¤åˆ¶ï¼Œä¼ é€’çš„æ˜¯å‰¯æœ¬çš„å¼•ç”¨å³dataå‰¯æœ¬(copy)çš„å¼•ç”¨ t.join(); std::cout \u003c\u003c \"after change, param is \" \u003c\u003c som_param \u003c\u003c std::endl; } ç»‘å®šç±»çš„æˆå‘˜å‡½æ•°ï¼Œå¿…é¡»æ·»åŠ \u0026 class X { public: void do_lengthy_work(){ std::cout \u003c\u003c \"do_lengthy_work \" \u003c\u003c std::endl; } }; void bind_class_oops() { X my_x; std::thread t(\u0026X::do_lengthy_work, \u0026my_x); t.join(); } æœ‰æ—¶å€™ä¼ é€’ç»™çº¿ç¨‹çš„å‚æ•°æ˜¯ç‹¬å çš„(ä¸æ”¯æŒæ‹·è´èµ‹å€¼å’Œæ„é€ )ï¼Œå¯ä»¥é€šè¿‡std::moveçš„æ–¹å¼å°†å‚æ•°çš„æ‰€æœ‰æƒè½¬ç§»ç»™çº¿ç¨‹ void deal_unique(std::unique_ptr\u003cint\u003e p) { std::cout \u003c\u003c \"unique ptr data is \" \u003c\u003c *p \u003c\u003c std::endl; (*p)++; std::cout \u003c\u003c \"after unique ptr data is \" \u003c\u003c *p \u003c\u003c std::endl; } void move_oops() { auto p = std::make_unique\u003cint\u003e(100); std::thread t(deal_unique, std::move(p)); t.join(); } ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:2:4","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"çº¿ç¨‹å½’å± ä½¿ç”¨std::moveç§»åŠ¨å½’å±ï¼› ä¸èƒ½å°†ä¸€ä¸ªçº¿ç¨‹çš„ç®¡ç†æƒäº¤ç»™ä¸€ä¸ªå·²ç»ç»‘å®šçº¿ç¨‹çš„å˜é‡ï¼Œä¼šè§¦å‘çº¿ç¨‹çš„terminateå‡½æ•°å¼•å‘å´©æºƒ void some_function(){ while (true) { std::this_thread::sleep_for(std::chrono::seconds(1)); } } void some_other_function(){ while (true) { std::this_thread::sleep_for(std::chrono::seconds(1)); } } std::thread t1(some_function); std::thread t2 = std::move(t1); t1 = std::thread(some_other_function); std::thread t3; t3 = std::move(t2); // t1 = std::move(t3); // å°†ä¸€ä¸ªçº¿ç¨‹çš„ç®¡ç†æƒäº¤ç»™ä¸€ä¸ªå·²ç»ç»‘å®šçº¿ç¨‹çš„å˜é‡ï¼Œä¼šè§¦å‘çº¿ç¨‹çš„terminateå‡½æ•°å¼•å‘å´©æºƒ std::this_thread::sleep_for(std::chrono::seconds(10)); è‡ªåŠ¨joinçš„çº¿ç¨‹ç±» joining_thread class joining_thread { std::thread _t; public: joining_thread() noexcept = default; template\u003ctypename Callable, typename ... Args\u003e explicit joining_thread(Callable\u0026\u0026 func, Args\u0026\u0026 ...args): _t(std::forward\u003cCallable\u003e(func), std::forward\u003cArgs\u003e(args)...){} explicit joining_thread(std::thread t) noexcept: _t(std::move(t)){} joining_thread(joining_thread\u0026\u0026 other) noexcept: _t(std::move(other._t)){} joining_thread\u0026 operator=(joining_thread\u0026\u0026 other) noexcept { if (joinable()) { join(); } _t = std::move(other._t); return *this; } joining_thread\u0026 operator=(std::thread other) noexcept { if (joinable()) { join(); } _t = std::move(other); return *this; } ~joining_thread() noexcept { if (joinable()) { join(); } } void swap(joining_thread\u0026 other) noexcept { _t.swap(other._t); } std::thread::id get_id() const noexcept { return _t.get_id(); } bool joinable() const noexcept { return _t.joinable(); } void join() { _t.join(); } void detach() { _t.detach(); } std::thread\u0026 as_thread() noexcept { return _t; } const std::thread\u0026 as_thread() const noexcept { return _t; } }; ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:2:5","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"å®¹å™¨å­˜å‚¨ ç”Ÿæˆä¸€æ‰¹çº¿ç¨‹å¹¶ç­‰å¾…å®ƒä»¬å®Œæˆã€‚åˆå§‹åŒ–å¤šä¸ªçº¿ç¨‹å­˜å‚¨åœ¨vectorä¸­, é‡‡ç”¨çš„æ—¶emplaceæ–¹å¼ï¼Œå¯ä»¥ç›´æ¥æ ¹æ®çº¿ç¨‹æ„é€ å‡½æ•°éœ€è¦çš„å‚æ•°æ„é€ ï¼Œè¿™æ ·å°±é¿å…äº†è°ƒç”¨threadçš„æ‹·è´æ„é€ å‡½æ•°ã€‚ void param_function(int a) { std::cout \u003c\u003c \"param is \" \u003c\u003c a \u003c\u003c std::endl; std::this_thread::sleep_for(std::chrono::seconds(1)); } void use_vector() { unsigned int N = std::thread::hardware_concurrency(); std::vector\u003cstd::thread\u003e threads; for (unsigned int i = 0; i \u003c N; ++i) { threads.emplace_back(param_function, i); } for (auto\u0026 entry : threads) { if (entry.joinable()) { entry.join(); } } threads.clear(); } ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:2:6","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"é€‰æ‹©è¿è¡Œæ•°é‡ std::thread::hardware_concurrency()å‡½æ•°ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæŒ‡æ ‡ï¼Œè¡¨ç¤ºç¨‹åºåœ¨å„æ¬¡è¿è¡Œä¸­å¯çœŸæ­£å¹¶å‘çš„çº¿ç¨‹æ•°é‡ã€‚ template\u003ctypename Iterator, typename T\u003e struct accumulate_block{ void operator()(Iterator first, Iterator last, T\u0026 result){ result = std::accumulate(first, last, result); } }; template\u003ctypename Iterator, typename T\u003e T parallel_accumulate(Iterator first, Iterator last, T init){ unsigned long const length = std::distance(first, last); if (!length) { // 1.è¾“å…¥ä¸ºç©ºï¼Œè¿”å›åˆå§‹å€¼init return init; } unsigned long const min_per_thread = 25; unsigned long const max_threads = (length + min_per_thread - 1) / min_per_thread; // 2.éœ€è¦çš„çº¿ç¨‹æœ€å¤§æ•°ï¼ˆå‘ä¸Šå–æ•´ï¼‰ unsigned long const hardware_threads = std::thread::hardware_concurrency(); unsigned long const num_threads = std::min(hardware_threads!=0 ? hardware_threads : 2, max_threads); // 3.å®é™…çš„çº¿ç¨‹é€‰æ‹©æ•°é‡ unsigned long const block_size = length / num_threads; // 4.æ¯ä¸ªçº¿ç¨‹å¾…å¤„ç†çš„æ¡ç›®æ•°é‡ï¼Œæ­¥é•¿ std::vector\u003cT\u003e results(num_threads); std::vector\u003cstd::thread\u003e threads(num_threads - 1); // 5.åˆå§‹åŒ–äº†(num_threads - 1)ä¸ªå¤§å°çš„vectorï¼Œå› ä¸ºä¸»çº¿ç¨‹ä¹Ÿå‚ä¸è®¡ç®— Iterator block_start = first; for (unsigned long i = 0; i \u003c num_threads - 1; ++i){ Iterator block_end = block_start; std::advance(block_end, block_size); // 6. é€’è¿›block_sizeè¿­ä»£å™¨åˆ°å½“å‰å—çš„ç»“å°¾ threads[i] = std::thread(accumulate_block\u003cIterator, T\u003e(), block_start, block_end, std::ref(results[i])); // 7.å¯åŠ¨æ–°çš„çº¿ç¨‹è®¡ç®—ç»“æœ block_start = block_end; // 8.æ›´æ–°èµ·å§‹ä½ç½® } accumulate_block\u003cIterator, T\u003e()( block_start, last, results[num_threads - 1]); // 9. ä¸»çº¿ç¨‹è®¡ç®—ï¼Œå¤„ç†æœ€åçš„å— for (auto\u0026 entry : threads){ if (entry.joinable()){ entry.join(); } } return std::accumulate(results.begin(), results.end(), init); // 10. ç´¯åŠ  } void use_parallel_acc(int N) { auto start = std::chrono::high_resolution_clock::now(); std::vector \u003cint\u003e vec(N); for (int i = 0; i \u003c N; i++) { vec.push_back(i); } int sum = 0; sum = parallel_accumulate\u003cstd::vector\u003cint\u003e::iterator, int\u003e(vec.begin(), vec.end(), sum); auto end = std::chrono::high_resolution_clock::now(); std::chrono::duration\u003cdouble\u003e timeDuration = end - start; double duration = timeDuration.count(); std::cout \u003c\u003c \"use_parallel_acc sum is \" \u003c\u003c sum \u003c\u003c \" duration: \" \u003c\u003c duration \u003c\u003c std::endl; } ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:2:7","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"è¯†åˆ«çº¿ç¨‹ è·å–çº¿ç¨‹IDï¼Œæ ¹æ®çº¿ç¨‹idæ˜¯å¦ç›¸åŒåˆ¤æ–­æ˜¯å¦åŒä¸€ä¸ªçº¿ç¨‹ é€šè¿‡get_id()æˆå‘˜å‡½æ•°æ¥è·å– std::this_thread::get_id()è·å– void do_subthread(){ std::cout \u003c\u003c \"do sub thread work \" \u003c\u003c std::this_thread::get_id() \u003c\u003c std::endl; } void thread_id(){ std::thread::id master_thread = std::this_thread::get_id(); std::thread t(do_subthread); std::cout \u003c\u003c \"do_subthread id: \" \u003c\u003c t.get_id() \u003c\u003c std::endl; // çº¿ç¨‹å¯èƒ½æ²¡è¿è¡Œï¼Œå¯èƒ½ä¼šè¿”å›ä¸€ä¸ªç©ºçš„ std::thread::id t.join(); if (std::this_thread::get_id() == master_thread){ std::cout \u003c\u003c \"do master thread work: \"\u003c\u003c std::this_thread::get_id() \u003c\u003c std::endl; } std::cout \u003c\u003c \"do common thread work: \" \u003c\u003c std::this_thread::get_id() \u003c\u003c std::endl; } ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:2:8","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"é” ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:3:0","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"é¿å…ç«äº‰ lock_guard ä¿æŠ¤æœºåˆ¶å°è£…æ•°æ®ç»“æ„ äº’æ–¥é‡ï¼ˆmutex) â€”-lockåŠ é” å’Œunlockè§£é” std::lock_guard\u003cstd::mutex\u003e lock(mtx1)ï¼šäº’æ–¥é‡RAIIæƒ¯ç”¨æ³•ï¼Œè‡ªåŠ¨åŠ é”å’Œè§£é” ä¸è¦å°†å¯¹å—ä¿æŠ¤æ•°æ®çš„æŒ‡é’ˆå’Œå¼•ç”¨ä¼ é€’åˆ°é”çš„èŒƒå›´ä¹‹å¤– æ­»é” deadlockï¼šæ¯ä¸ªçº¿ç¨‹éƒ½åœ¨ç­‰å¾…å¦ä¸€ä¸ªé‡Šæ”¾å…¶mutex ä½¿ç”¨ç›¸åŒé¡ºåºé”å®šä¸¤ä¸ªmutex å°†åŠ é”å’Œè§£é”çš„åŠŸèƒ½å°è£…ä¸ºç‹¬ç«‹çš„å‡½æ•° ä½¿ç”¨ä¸¤ä¸ªäº’æ–¥é‡ï¼ŒåŒæ—¶åŠ é” å‡å°‘é”çš„ä½¿ç”¨èŒƒå›´ å±‚çº§é”ï¼šåŒä¸€ä¸ªå‡½æ•°å†…éƒ¨åŠ å¤šä¸ªé”çš„æƒ…å†µï¼Œè¦å°½å¯èƒ½é¿å…å¾ªç¯åŠ é”ï¼Œè‡ªå®šä¹‰ä¸€ä¸ªå±‚çº§é”æ¥ä¿è¯é¡¹ç›®ä¸­å¯¹å¤šä¸ªäº’æ–¥é‡åŠ é”æ—¶æ˜¯æœ‰åºçš„ã€‚ ä¿®æ”¹æ•°æ®ç»“æ„çš„è®¾è®¡åŠä¸å˜é‡ ï¼ˆæ— é”ç¼–ç¨‹ï¼‰ ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:3:1","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"åŒæ—¶åŠ é” æ–¹æ³•1ï¼š std::lock(objm1._mtx, objm2._mtx); std::lock_guard\u003cstd::mutex\u003e guard1(objm1._mtx, std::adopt_lock); //é¢†å…»é”ï¼Œåªè´Ÿè´£è§£é”ï¼Œä¸è´Ÿè´£åŠ é” std::lock_guard\u003cstd::mutex\u003e guard2(objm2._mtx, std::adopt_lock); æ–¹æ³•2ï¼š std::scoped_lock guard(objm1._mtx, objm2._mtx); // c++17 ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:3:2","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"å±‚çº§é” class hierarchical_mutex { public: explicit hierarchical_mutex(unsigned long value):_hierarchy_value(value), _previous_hierarchy_value(0){} hierarchical_mutex(const hierarchical_mutex\u0026) = delete; hierarchical_mutex\u0026 operator=(const hierarchical_mutex\u0026) = delete; void lock(){ check_for_hierarchy_violation(); _internal_mutex.lock(); // å®é™…é”å®š update_hierarchy_value(); //æ›´æ–°å±‚çº§å€¼ } void unlock(){ if (_this_thread_hierarchy_value != _hierarchy_value) { throw std::logic_error(\"mutex hierarchy violated\"); } _this_thread_hierarchy_value = _previous_hierarchy_value; // ä¿å­˜å½“å‰çº¿ç¨‹ä¹‹å‰çš„å±‚çº§å€¼ _internal_mutex.unlock(); } bool try_lock(){ check_for_hierarchy_violation(); if (!_internal_mutex.try_lock()){ return false; } update_hierarchy_value(); return true; } private: std::mutex _internal_mutex; unsigned long const _hierarchy_value; // å½“å‰å±‚çº§å€¼ unsigned long _previous_hierarchy_value; // ä¸Šä¸€æ¬¡å±‚çº§å€¼ static thread_local unsigned long _this_thread_hierarchy_value; // å½“å‰çº¿ç¨‹è®°å½•çš„å±‚çº§å€¼ void check_for_hierarchy_violation(){ if (_this_thread_hierarchy_value \u003c= _hierarchy_value){ throw std::logic_error(\"mutex hierarchy violated\"); } } void update_hierarchy_value(){ _previous_hierarchy_value = _this_thread_hierarchy_value; _this_thread_hierarchy_value = _hierarchy_value; } }; thread_local unsigned long hierarchical_mutex::_this_thread_hierarchy_value(ULONG_MAX); //åˆå§‹åŒ–ä¸ºæœ€å¤§å€¼ ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:3:3","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"unique_lock unique_lockï¼šå¯ä»¥æ‰‹åŠ¨è§£é”ã€‚ï¼Œé€šè¿‡unique_lockçš„owns_lockåˆ¤æ–­æ˜¯å¦æŒæœ‰é” std::mutex mtx; int shared_data = 0; void use_unique_owns() { std::unique_lock\u003cstd::mutex\u003e guard(mtx); if (guard.owns_lock()){ std::cout \u003c\u003c \"owns lock\" \u003c\u003c std::endl; } else { std::cout \u003c\u003c \"doesn't own lock\" \u003c\u003c std::endl; } shared_data++; guard.unlock(); if (guard.owns_lock()){ std::cout \u003c\u003c \"owns lock\" \u003c\u003c std::endl; } else { std::cout \u003c\u003c \"doesn't own lock\" \u003c\u003c std::endl; } } æ”¯æŒé¢†å…»å’Œå»¶è¿ŸåŠ é” å°†std::adopt_lockä½œä¸ºç¬¬äºŒå‚æ•°ä¼ å…¥æ„é€ å‡½æ•°ï¼Œå¯¹äº’æ–¥é‡è¿›è¡Œç®¡ç† å°†std::defer_lockä½œä¸ºç¬¬äºŒå‚æ•°ä¼ å…¥æ„é€ å‡½æ•°ï¼Œè¡¨æ˜äº’æ–¥é‡åº”ä¿æŒè§£é”çŠ¶æ€ã€‚ int a = 10, b = 100; std::mutex mtx1; std::mutex mtx2; void safe_swap_adopt(){ std::lock(mtx1, mtx2); std::unique_lock\u003cstd::mutex\u003e guard1(mtx1, std::adopt_lock); std::unique_lock\u003cstd::mutex\u003e guard2(mtx2, std::adopt_lock); std::swap(a,b); guard1.unlock(); // å¯è‡ªåŠ¨é‡Šæ”¾ï¼Œ å·²ç»é¢†å…»ä¸èƒ½mtx1.unlock() guard2.unlock(); std::cout \u003c\u003c \"a = \" \u003c\u003c a \u003c\u003c \", b = \" \u003c\u003c b \u003c\u003c std::endl; } void safe_swap_defer(){ std::unique_lock\u003cstd::mutex\u003e guard1(mtx1, std::defer_lock); std::unique_lock\u003cstd::mutex\u003e guard2(mtx2, std::defer_lock); std::lock(guard1, guard2); std::swap(a,b); std::cout \u003c\u003c \"a = \" \u003c\u003c a \u003c\u003c \", b = \" \u003c\u003c b \u003c\u003c std::endl; } mutexæ˜¯ä¸æ”¯æŒç§»åŠ¨å’Œæ‹·è´çš„ï¼Œunique_lockå¯ç§»åŠ¨ï¼Œä¸å¯èµ‹å€¼ std::unique_lock\u003cstd::mutex\u003e get_lock() { std::unique_lock\u003cstd::mutex\u003e lk(mtx); shared_data++; return lk; } void test_return() { std::unique_lock\u003cstd::mutex\u003e lk(get_lock()); shared_data++; } é”çš„ç²’åº¦ï¼šè¡¨ç¤ºåŠ é”çš„ç²¾ç»†ç¨‹åº¦ã€‚ ä¸€ä¸ªé”çš„ç²’åº¦è¦è¶³å¤Ÿå¤§ï¼Œä»¥ä¿è¯å¯ä»¥é”ä½è¦è®¿é—®çš„å…±äº«æ•°æ®ã€‚ ä¸€ä¸ªé”çš„ç²’åº¦è¦è¶³å¤Ÿå°ï¼Œä»¥ä¿è¯éå…±äº«çš„æ•°æ®ä¸è¢«é”ä½å½±å“æ€§èƒ½ã€‚ void precision_lock() { std::unique_lock\u003cstd::mutex\u003e lk(mtx); shared_data++; lk.unlock(); // ä¸æ¶‰åŠå…±äº«æ•°æ®çš„è€—æ—¶æ“ä½œä¸åœ¨é”å†…æ‰§è¡Œ; std::this_thread::sleep_for(std::chrono::seconds(1)); lk.lock(); shared_data++; lk.unlock(); } ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:3:4","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"shared_lock C++11æ ‡å‡†æ²¡æœ‰å…±äº«äº’æ–¥é‡ï¼Œå¯ä»¥ä½¿ç”¨boostæä¾›çš„boost::shared_mutex std::shared_mutexï¼ˆc++17ï¼‰ æä¾›lock()ã€try_lock_for()å’Œtry_lock_until()ç”¨äºè·å–äº’æ–¥é”çš„å‡½æ•° æä¾›try_lock_shared()å’Œlock_shared()ç”¨äºè·å–å…±äº«é”çš„å‡½æ•° å½“ std::shared_mutex è¢«é”å®šåï¼Œå…¶ä»–å°è¯•è·å–è¯¥é”çš„çº¿ç¨‹å°†ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°è¯¥é”è¢«è§£é” std::shared_timed_mutex (c++14ã€17) æä¾›lock()ã€try_lock_for()å’Œtry_lock_until()ç”¨äºè·å–äº’æ–¥é”çš„å‡½æ•° æä¾›try_lock_shared()å’Œlock_shared()ç”¨äºè·å–å…±äº«é”çš„å‡½æ•° (è¶…æ—¶æœºåˆ¶) å°è¯•è·å–å…±äº«é”æ—¶ï¼Œå¦‚æœä¸èƒ½ç«‹å³è·å¾—é”ï¼Œstd::shared_timed_mutex ä¼šè®¾ç½®ä¸€ä¸ªè¶…æ—¶ï¼Œè¶…æ—¶è¿‡åå¦‚æœä»ç„¶æ²¡æœ‰è·å–åˆ°é”ï¼Œåˆ™æ“ä½œå°†è¿”å›å¤±è´¥ã€‚ å†™æ“ä½œéœ€è¦ç‹¬å é”ã€‚è€Œè¯»æ“ä½œéœ€è¦å…±äº«é”ã€‚ class dns_cache { public: std::string find_entry(std::string const \u0026 domain) const { std::shared_lock\u003cstd::shared_mutex\u003e lk(entry_mutex); // ä¿æŠ¤å…±äº«å’Œåªè¯»æƒé™ std::map\u003cstd::string, std::string\u003e::const_iterator const it = entries.find(domain); return (it == entries.end()) ? \"\" : it-\u003esecond; } void update_or_add_entry(std::string const \u0026 domain, std::string const\u0026 dns_details) { std::lock_guard\u003cstd::shared_mutex\u003e lk(entry_mutex); entries[domain] = dns_details; } private: std::map\u003cstd::string, std::string\u003e entries; mutable std::shared_mutex entry_mutex; }; ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:3:5","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"recursive_lock å‡ºç°ä¸€ä¸ªæ¥å£è°ƒç”¨å¦ä¸€ä¸ªæ¥å£çš„æƒ…å†µï¼Œå¦‚æœç”¨æ™®é€šçš„std::mutexå°±ä¼šå‡ºç°å¡æ­» class RecursiveDemo { public: RecursiveDemo() {} bool QueryStudent(std::string name) { // std::lock_guard\u003cstd::mutex\u003e mutex_lock(_mtx); std::lock_guard\u003cstd::recursive_mutex\u003e recursive_lock(_recursive_mtx); auto iter_find = _students_info.find(name); if (iter_find == _students_info.end()) { return false; } return true; } void AddScore(std::string name, int score) { // std::lock_guard\u003cstd::mutex\u003e mutex_lock(_mtx); std::lock_guard\u003cstd::recursive_mutex\u003e recursive_lock(_recursive_mtx); if (!QueryStudent(name)) { _students_info.insert(std::make_pair(name, score)); return; } _students_info[name] = _students_info[name] + score; } void AddScoreAtomic(std::string name, int score) { std::lock_guard\u003cstd::mutex\u003e mutex_lock(_mtx); // std::lock_guard\u003cstd::recursive_mutex\u003e recursive_lock(_recursive_mtx); auto iter_find = _students_info.find(name); if (iter_find == _students_info.end()){ _students_info.insert(std::make_pair(name, score)); return; } _students_info[name] = _students_info[name] + score; return; } private: std::map\u003cstd::string, int\u003e _students_info; std::mutex _mtx; std::recursive_mutex _recursive_mtx; }; ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:3:6","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"åŒæ­¥å¹¶å‘æ“ä½œ ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:4:0","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"æ¡ä»¶å˜é‡ std::condition_variable , ä¸std::mutexä¸€èµ· std::condition_variable_anyï¼Œä¸æ»¡è¶³æœ€ä½æ ‡å‡†çš„äº’æ–¥é‡ä¸€èµ· æ¡ä»¶ä¸æ»¡è¶³æ—¶(num ä¸ç­‰äº1 æ—¶)cvA.waitå°±ä¼šæŒ‚èµ·ï¼Œç­‰å¾…çº¿ç¨‹Bé€šçŸ¥é€šçŸ¥çº¿ç¨‹Aå”¤é†’ï¼Œçº¿ç¨‹Bé‡‡ç”¨çš„æ˜¯cvA.notifyone void ResonableImplemention() { std::thread t1([](){ while(true){ std::unique_lock\u003cstd::mutex\u003e lk(mtx_num); // æ–¹æ³•ä¸€ // while (num != 1) { // cvA.wait(lk); // } // æ–¹æ³•äºŒ cvA.wait(lk, []() { return num == 1; }); std::cout \u003c\u003c \"thread A print 1.....\" \u003c\u003c std::endl; num++; cvB.notify_one(); } }); std::thread t2([](){ while(true){ std::unique_lock\u003cstd::mutex\u003e lk(mtx_num); cvB.wait(lk, []() { return num == 2; }); std::cout \u003c\u003c \"thread B print 2.....\" \u003c\u003c std::endl; num--; cvA.notify_one(); } }); t1.join(); t2.join(); } // é˜Ÿåˆ—å®ç°ï¼Œå’Œä¹‹å‰æ ˆå®ç°ç±»ä¼¼ template\u003ctypename T\u003e class threadsafe_queue { public: threadsafe_queue(){} threadsafe_queue(const threadsafe_queue\u0026 other) { std::lock_guard\u003cstd::mutex\u003e lk(other.mut); data_queue = other.data_queue; } threadsafe_queue\u0026 operator=(const threadsafe_queue\u0026) = delete; void push(T new_value) { std::lock_guard\u003cstd::mutex\u003e lk(mut); data_queue.push(new_value); data_cond.notify_one(); } void wait_and_pop(T\u0026 value) { std::unique_lock\u003cstd::mutex\u003e lk(mut); data_cond.wait(lk, [this]{return !data_queue.empty();}); value = data_queue.front(); data_queue.pop(); } std::shared_ptr\u003cT\u003e wait_and_pop() { std::unique_lock\u003cstd::mutex\u003e lk(mut); data_cond.wait(lk, [this]{return !data_queue.empty();}); std::shared_ptr\u003cT\u003e res(std::make_shared\u003cT\u003e(data_queue.front())); data_queue.pop(); return res; } bool try_pop(T\u0026 value) { std::lock_guard\u003cstd::mutex\u003e lk(mut); if (data_queue.empty()) { return false; } value = data_queue.front(); data_queue.pop(); return true; } std::shared_ptr\u003cT\u003e try_pop() { std::lock_guard\u003cstd::mutex\u003e lk(mut); if (data_queue.empty()) { return std::shared_ptr\u003cT\u003e(); } std::shared_ptr\u003cT\u003e res(std::make_shared\u003cT\u003e(data_queue.front())); data_queue.pop(); return res; } bool empty() const { std::lock_guard\u003cstd::mutex\u003e lk(mut); return data_queue.empty(); } private: mutable std::mutex mut; std::queue\u003cT\u003e data_queue; std::condition_variable data_cond; }; ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:4:1","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"async ç”¨äºå¼‚æ­¥æ‰§è¡Œå‡½æ•°çš„æ¨¡æ¿å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ª std::future å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ç”¨äºè·å–å‡½æ•°çš„è¿”å›å€¼ã€‚ ç±»ä¼¼std::thread,é€šè¿‡æ·»åŠ é¢å¤–çš„è°ƒç”¨å‚æ•°ï¼Œå‘å‡½æ•°ä¼ é€’é¢å¤–çš„å‚æ•°ã€‚ std::string fetchDataFromDB(std::string query) { std::this_thread::sleep_for(std::chrono::seconds(2)); return \"Data: \" + query; } void use_asyc() { // ä½¿ç”¨ std::async å¼‚æ­¥è°ƒç”¨ fetchDataFromDB std::future\u003cstd::string\u003e resultFromDB = std::async(std::launch::async, fetchDataFromDB, \"Data\"); // åœ¨ä¸»çº¿ç¨‹ä¸­åšå…¶ä»–äº‹æƒ… std::cout \u003c\u003c \"Doing something else...\" \u003c\u003c std::endl; std::this_thread::sleep_for(std::chrono::seconds(4)); std::cout \u003c\u003c \"past 4s\" \u003c\u003c std::endl; // ä» future å¯¹è±¡ä¸­è·å–æ•°æ® std::string dbData = resultFromDB.get(); std::cout \u003c\u003c dbData \u003c\u003c std::endl; } std::async åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼ˆæˆ–ä»å†…éƒ¨çº¿ç¨‹æ± ä¸­æŒ‘é€‰ä¸€ä¸ªçº¿ç¨‹ï¼‰å¹¶è‡ªåŠ¨ä¸ä¸€ä¸ª std::promise å¯¹è±¡ç›¸å…³è”ã€‚std::promise å¯¹è±¡è¢«ä¼ é€’ç»™ fetchDataFromDB å‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼è¢«å­˜å‚¨åœ¨ std::future å¯¹è±¡ä¸­ã€‚åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œä½¿ç”¨ std::future::get æ–¹æ³•ä» std::future å¯¹è±¡ä¸­è·å–æ•°æ®ã€‚æ³¨æ„ï¼Œåœ¨ä½¿ç”¨ std::async çš„æƒ…å†µä¸‹ï¼Œå¿…é¡»ä½¿ç”¨ std::launch::async æ ‡å¿—æ¥æ˜ç¡®è¡¨æ˜å¸Œæœ›å‡½æ•°å¼‚æ­¥æ‰§è¡Œã€‚ å¯åŠ¨ç­–ç•¥ï¼šåœ¨std::launchæšä¸¾ä¸­å®šä¹‰ã€‚ enum class launch { async = 1, deferred = 2 }; std::launch::asyncï¼šè¡¨æ˜å‡½æ•°å¿…é¡»åœ¨å…¶æ‰€åœ¨çš„ç‹¬ç«‹çº¿ç¨‹ä¸Šæ‰§è¡Œ std::launch::deferredï¼šè¡¨æ˜å‡½æ•°è°ƒç”¨è¢«å»¶è¿Ÿåˆ°std::future::get()æˆ–std::future::wait()æ—¶æ‰æ‰§è¡Œã€‚ï¼ˆè¦ç»“æœçš„æ—¶å€™æ‰æ‰§è¡Œï¼‰ std::launch::async | std::launch::deferredï¼šï¼ˆé»˜è®¤ä½¿ç”¨ï¼‰ä»»åŠ¡å¯ä»¥åœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸Šå¼‚æ­¥æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥å»¶è¿Ÿæ‰§è¡Œï¼Œå…·ä½“å–å†³äºå®ç°ã€‚ ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:4:2","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"future æœŸæœ›å€¼ å”¯ä¸€æœŸæœ›å€¼ï¼šstd::futurte\u003c\u003eï¼›åªèƒ½ä¸ä¸€ä¸ªæŒ‡å®šäº‹ä»¶ç›¸å…³è” å…±äº«æœŸæœ›å€¼ï¼šstd::shared_future\u003c\u003eï¼šå¯å…³è”å¤šä¸ªäº‹ä»¶ï¼Œæ‰€æœ‰å®ä¾‹åŒæ—¶å˜ä¸ºå°±ç»ªçŠ¶æ€ã€‚ std::future::get()ï¼šé˜»å¡è°ƒç”¨ï¼Œç”¨äºè·å–å¹¶è¿”å›ä»»åŠ¡çš„ç»“æœï¼›åªèƒ½è°ƒç”¨ä¸€æ¬¡ std::future::wait()ï¼š é˜»å¡è°ƒç”¨ï¼Œåªæ˜¯ç­‰å¾…ä»»åŠ¡å®Œæˆï¼›å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ std::future::wait_for()å’Œstd::future::wait_untilæ£€æŸ¥å¼‚æ­¥æ“ä½œæ˜¯å¦å·²å®Œæˆï¼Œè¿”å›ä¸€ä¸ªè¡¨ç¤ºæ“ä½œçŠ¶æ€çš„std::future_statuså€¼ ä»»åŠ¡ä¸futureå…³è” std::packaged_taskï¼šæ˜¯ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œå®ƒåŒ…è£…äº†ä¸€ä¸ªä»»åŠ¡ï¼Œè¯¥ä»»åŠ¡å¯ä»¥åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸Šè¿è¡Œã€‚å®ƒå¯ä»¥æ•è·ä»»åŠ¡çš„è¿”å›å€¼æˆ–å¼‚å¸¸ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨std::futureå¯¹è±¡ä¸­ï¼Œä»¥ä¾¿ä»¥åä½¿ç”¨ã€‚ åˆ›å»ºä¸€ä¸ªstd::packaged_taskå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…è£…äº†è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚ è°ƒç”¨std::packaged_taskå¯¹è±¡çš„get_future()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªä¸ä»»åŠ¡å…³è”çš„std::futureå¯¹è±¡ã€‚ åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸Šè°ƒç”¨std::packaged_taskå¯¹è±¡çš„operator()ï¼Œä»¥æ‰§è¡Œä»»åŠ¡ã€‚ åœ¨éœ€è¦ä»»åŠ¡ç»“æœçš„åœ°æ–¹ï¼Œè°ƒç”¨ä¸ä»»åŠ¡å…³è”çš„std::futureå¯¹è±¡çš„get()æ–¹æ³•ï¼Œä»¥è·å–ä»»åŠ¡çš„è¿”å›å€¼æˆ–å¼‚å¸¸ã€‚ int my_task() { std::this_thread::sleep_for(std::chrono::seconds(5)); std::cout \u003c\u003c \"my task run 5 s\" \u003c\u003c std::endl; return 0; } void use_package() { std::packaged_task\u003cint()\u003e task(my_task); //åˆ›å»ºä¸€ä¸ª`std::packaged_task`å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…è£…äº†è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚ std::future\u003cint\u003e result = task.get_future(); // // è·å–ä¸ä»»åŠ¡å…³è”çš„ std::future å¯¹è±¡ std::thread t(std::move(task)); // åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œä»»åŠ¡ t.detach(); int value = result.get(); // ç­‰å¾…ä»»åŠ¡å®Œæˆå¹¶è·å–ç»“æœ std::cout \u003c\u003c \"The result is: \" \u003c\u003c value \u003c\u003c std::endl; } å…±äº«ç±»å‹çš„future å¤šä¸ªçº¿ç¨‹ç­‰å¾…åŒä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœ void myFunction(std::promise\u003cint\u003e\u0026\u0026 promise) { std::this_thread::sleep_for(std::chrono::seconds(1)); promise.set_value(42); // è®¾ç½® promise çš„å€¼ } void threadFunction(std::shared_future\u003cint\u003e future) { try { int result = future.get(); std::cout \u003c\u003c \"Result: \" \u003c\u003c result \u003c\u003c std::endl; } catch (const std::future_error\u0026 e) { std::cout \u003c\u003c \"Future error: \" \u003c\u003c e.what() \u003c\u003c std::endl; } } void use_shared_future() { std::promise\u003cint\u003e promise; std::shared_future\u003cint\u003e future = promise.get_future(); std::thread myThread1(myFunction, std::move(promise)); // å°† promise ç§»åŠ¨åˆ°çº¿ç¨‹ä¸­ // ä½¿ç”¨ share() æ–¹æ³•è·å–æ–°çš„ shared_future å¯¹è±¡ std::thread myThread2(threadFunction, future); std::thread myThread3(threadFunction, future); myThread1.join(); myThread2.join(); myThread3.join(); } å¼‚å¸¸å¤„ç† void may_throw() { throw std::runtime_error(\"Oops, something went wrong!\"); // æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ } void use_future_exception() { std::future\u003cvoid\u003e result(std::async(std::launch::async, may_throw)); // åˆ›å»ºä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ try { result.get(); // è·å–ç»“æœï¼ˆå¦‚æœåœ¨è·å–ç»“æœæ—¶å‘ç”Ÿäº†å¼‚å¸¸ï¼Œé‚£ä¹ˆä¼šé‡æ–°æŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ï¼‰ } catch (const std::exception\u0026 e) { std::cerr \u003c\u003c \"Caught exception: \" \u003c\u003c e.what() \u003c\u003c std::endl; // æ•è·å¹¶æ‰“å°å¼‚å¸¸ } } ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:4:3","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"promise æ‰¿è¯ºå€¼ std::promiseç”¨äºåœ¨æŸä¸€çº¿ç¨‹ä¸­è®¾ç½®æŸä¸ªå€¼æˆ–å¼‚å¸¸ï¼Œ std::promise::set_value()ï¼šè®¾ç½®å¼‚æ­¥æ“ä½œçš„ç»“æœå€¼ std::promise::set_exceptionï¼šè®¾ç½®å¼‚å¸¸æƒ…å†µ æ¥å—ä¸€ä¸ªstd::exception_ptrå‚æ•°ï¼Œè¯¥å‚æ•°å¯ä»¥é€šè¿‡è°ƒç”¨std::current_exception()æ–¹æ³•è·å– std::futureåˆ™ç”¨äºåœ¨å¦ä¸€çº¿ç¨‹ä¸­è·å–è¿™ä¸ªå€¼æˆ–å¼‚å¸¸ã€‚ void set_value(std::promise\u003cint\u003e prom) { std::this_thread::sleep_for(std::chrono::seconds(5)); prom.set_value(10); std::cout \u003c\u003c \"promise set value success\" \u003c\u003c std::endl; } void use_promise_setvalue() { std::promise\u003cint\u003e prom; // åˆ›å»ºä¸€ä¸ª promise å¯¹è±¡ std::future\u003cint\u003e fut = prom.get_future(); // è·å–ä¸ promise ç›¸å…³è”çš„ future å¯¹è±¡ std::thread t(set_value, std::move(prom)); // åœ¨æ–°çº¿ç¨‹ä¸­è®¾ç½® promise çš„å€¼ std::cout \u003c\u003c \"Waiting for the thread to set the value...\\n\"; std::cout \u003c\u003c \"Value set by the thread: \" \u003c\u003c fut.get() \u003c\u003c '\\n'; // åœ¨ä¸»çº¿ç¨‹ä¸­è·å– future çš„å€¼ t.join(); } // éšç€å±€éƒ¨ä½œç”¨åŸŸ}çš„ç»“æŸï¼Œpromå¯èƒ½è¢«é‡Šæ”¾ä¹Ÿå¯èƒ½ä¼šè¢«å»¶è¿Ÿé‡Šæ”¾ï¼Œå¦‚æœç«‹å³é‡Šæ”¾åˆ™fut.get()è·å–çš„å€¼ä¼šæŠ¥error_valueçš„é”™è¯¯ void bad_promise_setvalue() { std::thread t; std::future\u003cint\u003e fut; { std::promise\u003cint\u003e prom; // åˆ›å»ºä¸€ä¸ª promise å¯¹è±¡ fut = prom.get_future(); // è·å–ä¸ promise ç›¸å…³è”çš„ future å¯¹è±¡ t = std::thread(set_value, std::move(prom)); // åœ¨æ–°çº¿ç¨‹ä¸­è®¾ç½® promise çš„å€¼ } std::cout \u003c\u003c \"Waiting for the thread to set the value...\\n\"; std::cout \u003c\u003c \"Value set by the thread: \" \u003c\u003c fut.get() \u003c\u003c '\\n'; // åœ¨ä¸»çº¿ç¨‹ä¸­è·å– future çš„å€¼ t.join(); } void set_exception(std::promise\u003cvoid\u003e prom) { try { throw std::runtime_error(\"An error occurred!\"); } catch (...) { prom.set_exception(std::current_exception()); } } // æ³¨ï¼šå­çº¿ç¨‹è°ƒç”¨äº†set_exceptionï¼Œä¸»çº¿ç¨‹ä¸€å®šè¦æ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œå¦åˆ™å´©æºƒ void use_promise_setexception() { std::promise\u003cvoid\u003e prom; // åˆ›å»ºä¸€ä¸ª promise å¯¹è±¡ std::future\u003cvoid\u003e fut = prom.get_future(); // è·å–ä¸ promise ç›¸å…³è”çš„ future å¯¹è±¡ std::thread t(set_exception, std::move(prom)); // åœ¨æ–°çº¿ç¨‹ä¸­è®¾ç½® promise çš„å¼‚å¸¸ try { std::cout \u003c\u003c \"Waiting for the thread to set the exception...\\n\"; fut.get(); } catch (const std::exception\u0026 e) { std::cout \u003c\u003c \"Exception set by the thread: \" \u003c\u003c e.what() \u003c\u003c '\\n'; } t.join(); } ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:4:4","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"å¿«é€Ÿæ’åºå®ä¾‹ å¼€è¾Ÿä¸€ä¸ªä¸€æ¬¡æ€§çš„çº¿ç¨‹æ‰§è¡Œå¹¶è¡Œä»»åŠ¡ï¼Œä¸»çº¿ç¨‹å¯ä»¥é€šè¿‡futureåœ¨åˆé€‚çš„æ—¶æœºæ‰§è¡Œç­‰å¾…æ±‡æ€»ç»“æœã€‚ template\u003ctypename T\u003e void quick_sort_recursive(T q[], int l, int r){ if (l \u003e= r) return; T x = q[(l + r + 1) \u003e\u003e 1]; int i = l - 1, j = r + 1; while(i \u003c j){ do i++; while(q[i] \u003c x); do j--; while(q[j] \u003e x); if (i \u003c j) std::swap (q[i], q[j]); } quick_sort_recursive(q, l, i - 1); quick_sort_recursive(q, i, r); } template\u003ctypename T\u003e void quick_sort(T q[], int len) { quick_sort_recursive(q, 0, len - 1); } ä¸²è¡Œç‰ˆæœ¬ template\u003ctypename T\u003e std::list\u003cT\u003e sequential_quick_sort(std::list\u003cT\u003e input) { if (input.empty()) { return input; } std::list\u003cT\u003e result; result.splice(result.begin(), input, input.begin()); // å°† input åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ç§»åŠ¨åˆ° result åˆ—è¡¨çš„èµ·å§‹ä½ç½®ï¼Œå¹¶ä¸”åœ¨ input åˆ—è¡¨ä¸­åˆ é™¤è¯¥å…ƒç´  T const\u0026 pivot = *result.begin(); // å–é¦–å…ƒç´ ä½œä¸º x // partition åˆ†åŒºå‡½æ•°ï¼Œä½¿å¾—æ»¡è¶³æ¡ä»¶çš„å…ƒç´ æ’åœ¨ä¸æ»¡è¶³æ¡ä»¶å…ƒç´ ä¹‹å‰ã€‚divide_pointæŒ‡å‘çš„æ˜¯inputä¸­ç¬¬ä¸€ä¸ªå¤§äºç­‰äºpivotçš„åœ°å€ auto divide_point = std::partition(input.begin(), input.end(), [\u0026](T const\u0026 t){return t \u003c pivot;}); std::list\u003cT\u003e lower_part; lower_part.splice(lower_part.end(), input, input.begin(), divide_point); // å°äºpivotçš„å…ƒç´ æ”¾åœ¨lower_parté‡Œ auto new_lower(sequential_quick_sort(std::move(lower_part))); auto new_higher(sequential_quick_sort(std::move(input))); result.splice(result.end(), new_higher); result.splice(result.begin(), new_lower); return result; } å¹¶è¡Œç‰ˆæœ¬ template\u003ctypename T\u003e std::list\u003cT\u003e parallel_quick_sort(std::list\u003cT\u003e input) { if (input.empty()) { return input; } std::list\u003cT\u003e result; result.splice(result.begin(), input, input.begin()); T const\u0026 pivot = *result.begin(); auto divide_point = std::partition(input.begin(), input.end(), [\u0026](T const\u0026 t){return t \u003c pivot;}); std::list\u003cT\u003e lower_part; lower_part.splice(lower_part.end(), input, input.begin(), divide_point); std::future\u003cstd::list\u003cT\u003e\u003e new_lower(std::async(parallel_quick_sort\u003cT\u003e, std::move(lower_part))); auto new_higher(parallel_quick_sort(std::move(input))); result.splice(result.end(), new_higher); result.splice(result.begin(), new_lower.get()); return result; } ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:4:5","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"å¹¶å‘è®¾è®¡æ¨¡å¼ Actor å‚ä¸è€…æ¨¡å¼ ç³»ç»Ÿç”±å¤šä¸ªç‹¬ç«‹çš„å¹¶å‘æ‰§è¡Œçš„actorç»„æˆã€‚æ¯ä¸ªactoréƒ½æœ‰è‡ªå·±çš„çŠ¶æ€ã€è¡Œä¸ºå’Œé‚®ç®±ï¼ˆç”¨äºæ¥æ”¶æ¶ˆæ¯ï¼‰ã€‚Actorä¹‹é—´é€šè¿‡æ¶ˆæ¯ä¼ é€’è¿›è¡Œé€šä¿¡ï¼Œè€Œä¸æ˜¯å…±äº«çŠ¶æ€ã€‚ CSPï¼ˆCommunicating Sequential Processesï¼‰é€šä¿¡é¡ºåºè¿›ç¨‹ å„ä¸ªè¿›ç¨‹ä¹‹é—´å½¼æ­¤ç‹¬ç«‹ï¼Œé€šè¿‡å‘é€å’Œæ¥æ”¶æ¶ˆæ¯è¿›è¡Œé€šä¿¡ï¼Œé€šé“ç”¨äºç¡®ä¿è¿›ç¨‹ä¹‹é—´çš„åŒæ­¥ã€‚ ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ template\u003ctypename T\u003e class Channel { public: Channel(size_t capacity = 0):capacity_(capacity){} bool send(T value) { std::unique_lock\u003cstd::mutex\u003e lock(mtx_); cv_producer_.wait(lock, [this]() {return (capacity_ == 0 \u0026\u0026 queue_.empty()) || queue_.size() \u003c capacity_ || closed_;}); if (closed_) { return false; } queue_.push(value); cv_consumer_.notify_one(); return true; } bool receive(T\u0026 value) { std::unique_lock\u003cstd::mutex\u003e lock(mtx_); cv_consumer_.wait(lock, [this]() {return !queue_.empty() || closed_;}); if (closed_ \u0026\u0026 queue_.empty()) { return false; } value = queue_.front(); queue_.pop(); cv_producer_.notify_one(); return true; } void close() { std::unique_lock\u003cstd::mutex\u003e lock(mtx_); closed_ = true; cv_producer_.notify_all(); cv_consumer_.notify_all(); } private: std::queue\u003cT\u003e queue_; std::mutex mtx_; std::condition_variable cv_producer_; std::condition_variable cv_consumer_; size_t capacity_; bool closed_ = false; }; ATMå®ä¾‹ handleæˆå‘˜å‡½æ•°ï¼šå½“å‡½æ•°è¿”å›ä¸€ä¸ªç±»ç±»å‹çš„å±€éƒ¨å˜é‡æ—¶ä¼šå…ˆè°ƒç”¨ç§»åŠ¨æ„é€ ï¼Œå¦‚æœæ²¡æœ‰ç§»åŠ¨æ„é€ å†è°ƒç”¨æ‹·è´æ„é€ ã€‚ ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:4:6","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"å†…å­˜æ¨¡å‹å’ŒåŸå­ç±»å‹ åŸå­æ“ä½œ æ— æ³•æ‹·è´æ„é€ ï¼Œæ‹·è´èµ‹å€¼ æ“ä½œæ–¹å¼ å¯é€‰é¡ºåº storeæ“ä½œ å­˜å‚¨æ“ä½œ memory_order_relaxed,memory_order_release,memory_order_seq_cst Loadæ“ä½œ è½½å…¥æ“ä½œ memory_order_relaxed,memory_order_consume,memory_order_acquire,memory_order_seq_cst read-modify-write(è¯»-æ”¹-å†™)æ“ä½œ memory_order_relaxed,memory_order_consume,memory_order_acquire, memory_order_release,memory_order_acq_rel, memory_order_seq_cst æˆå‘˜å‡½æ•° è¯´æ˜ void store(T desired, std::memory_order order = std::memory_order_seq_cst) å†™å…¥ï¼ˆé‡Šæ”¾æ“ä½œ) T load(std::memory_order order = std::memory_order_seq_cst) è¯»å–ï¼ˆè·å–æ“ä½œï¼‰ bool compare_exchange_weak(T\u0026 expected, T desired, std::memory_order order =std::memory_order_seq_cst) å½“å‰å€¼ä¸æœŸæœ›å€¼(expect)ç›¸ç­‰æ—¶ï¼Œä¿®æ”¹å½“å‰å€¼ä¸ºè®¾å®šå€¼(desired)ï¼Œè¿”å›trueï¼› å½“å‰å€¼ä¸æœŸæœ›å€¼(expect)ä¸ç­‰æ—¶ï¼Œå°†æœŸæœ›å€¼(expect)ä¿®æ”¹ä¸ºå½“å‰å€¼ï¼Œè¿”å›falseï¼› è¯»æ”¹å†™ï¼šæ¯”è¾ƒ-äº¤æ¢æ“ä½œï¼›å¯èƒ½ä¿å­˜å¤±è´¥ï¼Œå¾€å¾€é…åˆå¾ªç¯ä½¿ç”¨ bool compare_exchange_strong(T\u0026 expected, T desired, std::memory_order order =std::memory_order_seq_cst) è¯»æ”¹å†™ï¼šå†…éƒ¨å«å¾ªç¯ï¼Œä¿å­˜çš„å€¼éœ€è¦è€—æ—¶è®¡ç®—ï¼ˆæˆ–ä½“ç§¯è¾ƒå¤§çš„åŸå­ç±»å‹ï¼‰é€‰æ‹©å…¶æ›´åˆç† T exchange(T desired, std::memory_order order = std::memory_order_seq_cst) è¯»æ”¹å†™ å†…å­˜é¡ºåº è·å–-é‡Šæ”¾æ¬¡åºï¼šå­˜å‚¨æ“ä½œé‡‡ç”¨memory_order_releaseæ¬¡åºï¼Œè€Œè½½å…¥æ“ä½œé‡‡ç”¨memory_order_acquireæ¬¡åºï¼Œä¸¤è€…åŒæ­¥ å†…å­˜åº è¯´æ˜ memory_order_relaxed æ¾æ•£å†…å­˜åºï¼Œåªç”¨æ¥ä¿è¯å¯¹åŸå­å¯¹è±¡çš„æ“ä½œæ˜¯åŸå­çš„ï¼Œå¯¹é¡ºåºä¸åšä¿è¯ï¼ˆå…è®¸æŒ‡ä»¤é‡æ’ï¼‰ memory_order_consume é€‚ç”¨è¯»æ“ä½œï¼Œé˜»æ­¢å¯¹è¿™ä¸ªåŸå­é‡æœ‰ä¾èµ–çš„æ“ä½œé‡æ’åˆ°å‰é¢å»ï¼ˆé™åˆ¶è¯»æ“ä½œä¹‹åçš„éƒ¨åˆ†æ“ä½œï¼Œä¸å…è®¸æŒ‡ä»¤é‡æ’ï¼‰ memory_order_acquire é€‚ç”¨è¯»æ“ä½œï¼Œåœ¨è¯»å–æŸåŸå­å¯¹è±¡æ—¶ï¼Œå½“å‰çº¿ç¨‹çš„ä»»ä½•åé¢çš„è¯»å†™æ“ä½œéƒ½ä¸å…è®¸é‡æ’åˆ°è¿™ä¸ªæ“ä½œçš„å‰é¢å»ï¼ˆè¯»æ“ä½œä¹‹åçš„éƒ¨åˆ†ï¼Œä¸å…è®¸æŒ‡ä»¤é‡æ’ï¼‰ memory_order_release é€‚ç”¨å†™æ“ä½œï¼Œåœ¨å†™å…¥æŸåŸå­å¯¹è±¡æ—¶ï¼Œå½“å‰çº¿ç¨‹çš„ä»»ä½•å‰é¢çš„è¯»å†™æ“ä½œéƒ½ä¸å…è®¸é‡æ’åˆ°è¿™ä¸ªæ“ä½œçš„åé¢å»ï¼ˆå†™æ“ä½œä¹‹å‰çš„éƒ¨åˆ†ï¼Œä¸å…è®¸æŒ‡ä»¤é‡æ’ï¼‰ memory_order_acq_rel é€‚ç”¨è¯»å†™æ“ä½œ,ä¸€ä¸ªè¯»-ä¿®æ”¹-å†™æ“ä½œåŒæ—¶å…·æœ‰è·å¾—è¯­ä¹‰å’Œé‡Šæ”¾è¯­ä¹‰ï¼Œå³å®ƒå‰åçš„ä»»ä½•è¯»å†™æ“ä½œéƒ½ä¸å…è®¸é‡æ’ï¼ˆè¯»å†™æ“ä½œä¸å…è®¸æŒ‡ä»¤é‡æ’ï¼‰ memory_order_seq_cst é¡ºåºä¸€è‡´æ€§è¯­ä¹‰,å¯¹äºè¯»æ“ä½œç›¸å½“äºè·å–ï¼Œå¯¹äºå†™æ“ä½œç›¸å½“äºé‡Šæ”¾ï¼Œå¯¹äºè¯»-ä¿®æ”¹-å†™æ“ä½œç›¸å½“äºè·å¾—é‡Šæ”¾ï¼Œæ˜¯æ‰€æœ‰åŸå­æ“ä½œçš„é»˜è®¤å†…å­˜åºï¼ˆä¸å…è®¸æŒ‡ä»¤é‡æ’ï¼‰ è‡ªæ—‹é”ï¼šå½“ä¸€ä¸ªçº¿ç¨‹å°è¯•è·å–é”æ—¶ï¼Œå¦‚æœé”å·²ç»è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œé‚£ä¹ˆè¯¥çº¿ç¨‹å°±ä¼šä¸æ–­åœ°å¾ªç¯æ£€æŸ¥é”çš„çŠ¶æ€ï¼Œç›´åˆ°æˆåŠŸè·å–åˆ°é”ä¸ºæ­¢ã€‚ class Spinlock { public: Spinlock():flag(ATOMIC_FLAG_INIT){} void lock() { while (flag.test_and_set(std::memory_order_acquire));// è·å–æ—§å€¼å¹¶è®¾ç½®æ ‡å¿— } void unlock() { flag.clear(std::memory_order_release); // clearä¸ºå­˜å‚¨æ“ä½œï¼Œæ˜¾ç¤ºé‡‡ç”¨é‡Šæ”¾è¯­ä¹‰å°†æ ‡å¿—æ¸…é›¶ } private: std::atomic_flag flag; }; ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:5:0","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"ç¯å½¢é˜Ÿåˆ— template\u003ctypename T, size_t Cap\u003e class CircularQueLk:private std::allocator\u003cT\u003e { public: CircularQueLk() :_max_size(Cap + 1), _data(std::allocator\u003cT\u003e::allocate(_max_size)), _head(0), _tail(0) {} CircularQueLk(const CircularQueLk\u0026) = delete; CircularQueLk\u0026 operator=(const CircularQueLk\u0026) volatile = delete; // ä¸ºä»€ä¹ˆæ‹·è´å¤åˆ¶æœ‰ä¸¤ä¸ª CircularQueLk\u0026 operator=(const CircularQueLk\u0026) = delete; ~CircularQueLk() { std::lock_guard\u003cstd::mutex\u003e lock(_mtx); while(_head != _tail) { std::allocator\u003cT\u003e::destroy(_data + _head); _head = (_head + 1) % _max_size; } std::allocator\u003cT\u003e::deallocate(_data, _max_size); } template\u003ctypename ...Args\u003e bool emplace(Args\u0026\u0026 ...args) { std::lock_guard\u003cstd::mutex\u003e lock(_mtx); if ((_tail + 1) % _max_size == _head) { std::cout \u003c\u003c \"circular que full !\\n\"; return false; } // å°¾éƒ¨ä½ç½®æ„é€ ä¸€ä¸ªå¯¹è±¡ std::allocator\u003cT\u003e::construct(_data + _tail, std::forward\u003cArgs\u003e(args)...); _tail = (_tail + 1) % _max_size; return true; } // æ¥å—å·¦å€¼å¼•ç”¨ç‰ˆæœ¬ï¼ˆåŠ constï¼šè®©å…¶æ¥å—constç±»å‹ä¹Ÿå¯ä»¥æ¥å—éconstç±»å‹ï¼‰ bool push(const T\u0026 val) { std::cout \u003c\u003c \"called push const T\u0026 version\\n\"; return emplace(val); } bool push(T\u0026\u0026 val) { std::cout \u003c\u003c \"called push const T\u0026\u0026 version\\n\"; return emplace(std::move(val)); } bool pop(T\u0026 val) { std::lock_guard\u003cstd::mutex\u003e lock(_mtx); if (_head == _tail) { std::cout \u003c\u003c \"circular que empty !\\n\"; return false; } val = std::move(_data[_head]); _head = (_head + 1) % _max_size; return true; } private: size_t _max_size; T* _data; std::mutex _mtx; size_t _head = 0; size_t _tail = 0; }; ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:6:0","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"è¿›ç¨‹ forkå‰æ˜¯å¤šçº¿ç¨‹ï¼Œforkåæ˜¯ä¸ä¼šç»§ç»­è¿è¡Œå¤šçº¿ç¨‹ ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:7:0","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"å‚è€ƒé˜…è¯» C++å¹¶å‘ç¼–ç¨‹(ä¸­æ–‡ç‰ˆ)(C++ Concurrency In Action) æ‹æ‹é£è¾°å®˜æ–¹åšå®¢ -å¹¶å‘ç¼–ç¨‹ å¯¹åº”Bç«™è§†é¢‘ â€“ å¯¹åº”gitee ","date":"2023-10-15","objectID":"/posts/c++/c++%E5%B9%B6%E5%8F%91/:8:0","tags":["C++"],"title":"C++å¹¶å‘","uri":"/posts/c++/c++%E5%B9%B6%E5%8F%91/"},{"categories":["C++"],"content":"è®¾è®¡æ¨¡å¼","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"è®¾è®¡æ¨¡å¼ åˆ›å»ºå‹æ¨¡å¼ï¼šå•ä¾‹æ¨¡å¼ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œå»ºé€ è€…æ¨¡å¼ï¼ŒåŸå‹æ¨¡å¼ ç»“æ„å‹æ¨¡å¼ï¼šé€‚é…å™¨æ¨¡å¼ï¼Œä»£ç†æ¨¡å¼ï¼Œæ¡¥æ¥æ¨¡å¼ï¼Œè£…é¥°å™¨æ¨¡å¼ï¼Œå¤–è§‚æ¨¡å¼ï¼Œç»„åˆæ¨¡å¼ï¼Œäº«å…ƒæ¨¡å¼ è¡Œä¸ºå‹æ¨¡å¼ï¼šè§‚å¯Ÿè€…æ¨¡å¼ï¼Œç­–ç•¥æ¨¡å¼ï¼Œå‘½ä»¤æ¨¡å¼ï¼Œä¸­ä»‹è€…æ¨¡å¼ï¼Œå¤‡å¿˜å½•æ¨¡å¼ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œè¿­ä»£å™¨æ¨¡å¼ï¼ŒçŠ¶æ€æ¨¡å¼ï¼Œè´£ä»»é“¾æ¨¡å¼ï¼Œè§£é‡Šå™¨æ¨¡å¼ï¼Œè®¿é—®è€…æ¨¡å¼ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:1:0","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"UML ç±»å›¾åˆ†ä¸‰å±‚ ç¬¬ä¸€å±‚æ˜¾ç¤ºç±»çš„åç§°ï¼Œå¦‚æœæ˜¯æŠ½è±¡ç±»ï¼Œåˆ™å°±ç”¨æ–œä½“æ˜¾ç¤ºã€‚ ç¬¬äºŒå±‚æ˜¯ç±»çš„ç‰¹æ€§ï¼Œé€šå¸¸å°±æ˜¯å­—æ®µå’Œå±æ€§ã€‚ ç¬¬ä¸‰å±‚æ˜¯ç±»çš„æ“ä½œï¼Œé€šå¸¸æ˜¯æ–¹æ³•æˆ–è¡Œä¸ºã€‚ æ³¨æ„å‰é¢çš„ç¬¦å·ï¼Œâ€˜+â€™è¡¨ç¤ºpublicï¼Œâ€˜-â€™è¡¨ç¤ºprivateï¼Œâ€˜#â€™è¡¨ç¤ºprotected ç»§æ‰¿(Inheritance)å…³ç³»ç”¨ç©ºå¿ƒä¸‰è§’å½¢+å®çº¿æ¥è¡¨ç¤ºã€‚ å®ç°(Realization)æ¥å£ç”¨ç©ºå¿ƒä¸‰è§’å½¢+è™šçº¿æ¥è¡¨ç¤ºã€‚ å…³è”(Association)å…³ç³»ç”¨å®çº¿ç®­å¤´æ¥è¡¨ç¤ºã€‚ ä¾èµ–(Dependency)å…³ç³»ç”¨è™šçº¿ç®­å¤´æ¥è¡¨ç¤ºã€‚ èšåˆ(Aggregation)è¡¨ç¤ºä¸€ç§å¼±çš„â€˜æ‹¥æœ‰â€™å…³ç³»ï¼Œä½“ç°çš„æ˜¯Aå¯¹è±¡å¯ä»¥åŒ…å«Bå¯¹è±¡ï¼Œä½†Bå¯¹è±¡ä¸æ˜¯Aå¯¹è±¡çš„ä¸€éƒ¨åˆ†ã€‚èšåˆå…³ç³»ç”¨ç©ºå¿ƒçš„è±å½¢+å®çº¿ç®­å¤´æ¥è¡¨ç¤º ã€‚ï¼ˆæ±½è½¦å‘åŠ¨æœºæ˜¯æ±½è½¦çš„ç»„æˆéƒ¨åˆ†ï¼‰ classDiagram Car o--\u003e Engine : contains classDiagram Car o--\u003e Engine : containsç»„åˆ(Composition)æ˜¯ä¸€ç§å¼ºçš„â€˜æ‹¥æœ‰â€™å…³ç³»ï¼Œä½“ç°äº†ä¸¥æ ¼çš„éƒ¨åˆ†å’Œæ•´ä½“çš„å…³ç³»ï¼Œéƒ¨åˆ†å’Œæ•´ä½“çš„ç”Ÿå‘½å‘¨æœŸä¸€æ ·ã€‚åˆæˆå…³ç³»ç”¨å®å¿ƒçš„è±å½¢+å®çº¿ç®­å¤´æ¥è¡¨ç¤ºã€‚(å˜´å·´æ˜¯å¤´çš„ç»„æˆéƒ¨åˆ†) classDiagram Head *--\u003e Mouth : has classDiagram Head *--\u003e Mouth : has","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:2:0","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"è®¾è®¡åŸåˆ™ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:3:0","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"å•ä¸€èŒè´£åŸåˆ™ ä¸€ä¸ªç±»åªæ‰¿æ‹…ä¸€ä¸ªèŒè´£ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:3:1","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"å¼€æ”¾å°é—­åŸåˆ™ å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ã€‚ æŒ‡çš„æ˜¯è½¯ä»¶åœ¨é€‚åº”éœ€æ±‚å˜åŒ–æ—¶ï¼Œåº”å°½é‡é€šè¿‡æ‰©å±•ä»£ç æ¥å®ç°å˜åŒ–ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹å·²æœ‰ä»£ç æ¥å®ç°å˜åŒ–ã€‚ ä½¿ç”¨æšä¸¾å’Œ if-else å®ç°å¤šæ€ï¼Œéš¾ä»¥æ‰©å±•ï¼Œè¿˜è¦ä¸€ç›´å»ä¿®æ”¹åŸå‡½æ•°çš„åº•å±‚å®ç°ï¼Œå°±è¿èƒŒäº†å¼€é—­åŸåˆ™ã€‚ åº”å°½é‡é€šè¿‡æ‰©å±•ä»£ç æ¥å®ç°å˜åŒ–ï¼Œè€Œä¸æ˜¯é€šè¿‡*ä¿®æ”¹å·²æœ‰ä»£ç æ¥å®ç°å˜åŒ–ã€‚ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:3:2","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"ä¾èµ–å€’ç½®åŸåˆ™ ä¸€ä¸ªå°è£…å¥½çš„å‡½æ•°æˆ–ç±»ï¼Œåº”è¯¥å°½é‡ä¾èµ–äºæŠ½è±¡æ¥å£ï¼Œè€Œä¸æ˜¯ä¾èµ–äºå…·ä½“å®ç° é¢å‘è¿‡ç¨‹ç¼–ç¨‹èŒƒå¼ä¸­ï¼Œå‡½æ•°æŒ‡é’ˆå°±æ˜¯é‚£ä¸ªæŠ½è±¡æ¥å£ã€‚ é¢å‘å¯¹è±¡ç¼–ç¨‹èŒƒå¼ä¸­ï¼Œè™šå‡½æ•°å°±æ˜¯é‚£ä¸ªæŠ½è±¡æ¥å£ã€‚ å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼ä¸­ï¼Œå‡½æ•°å¯¹è±¡å°±æ˜¯é‚£ä¸ªæŠ½è±¡æ¥å£ã€‚ æ¨¡æ¿å…ƒç¼–ç¨‹èŒƒå¼ä¸­ï¼Œæ¨¡æ¿å‚æ•°å°±æ˜¯é‚£ä¸ªæŠ½è±¡æ¥å£ã€‚ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:3:3","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"æ¥å£éš”ç¦»åŸåˆ™ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:3:4","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"é‡Œæ°æ›¿æ¢åŸåˆ™ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:3:5","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"è¿ªç±³ç‰¹æ³•åˆ™(æœ€å°‘çŸ¥è¯†åŸåˆ™) ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:3:6","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"åˆ›å»ºå‹æ¨¡å¼ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:4:0","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"å•ä¾‹æ¨¡å¼ â¼€ä¸ªç±»åªæœ‰â¼€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›â¼€ä¸ªå…¨å±€è®¿é—®ç‚¹æ¥è®¿é—®è¿™ä¸ªå®ä¾‹ã€‚ï¼ˆå¯¹è±¡åˆ›å»ºå‹ï¼‰ å•ä¾‹è®¾è®¡æ¨¡å¼ä¼˜ç‚¹ å…¨å±€æ§åˆ¶ï¼šä¿è¯åªæœ‰â¼€ä¸ªå®ä¾‹ï¼Œè¿™æ ·å°±å¯ä»¥ä¸¥æ ¼çš„æ§åˆ¶å®¢æˆ·æ€æ ·è®¿é—®å®ƒä»¥åŠä½•æ—¶è®¿é—®å®ƒï¼Œç®€å•çš„è¯´å°±æ˜¯å¯¹å”¯â¼€å®ä¾‹çš„å—æ§è®¿é—® èŠ‚çœèµ„æºï¼šé¿å…å¤šæ¬¡åˆ›å»ºäº†ç›¸åŒçš„å¯¹è±¡ï¼ŒèŠ‚çœç³»ç»Ÿèµ„æºï¼Œå¤šä¸ªæ¨¡å—å¯ä»¥é€šè¿‡å•ä¾‹å®ä¾‹å…±äº«æ•°æ®ã€‚ æ‡’åŠ è½½ï¼šå•ä¾‹æ¨¡å¼å¯ä»¥å®ç°æ‡’åŠ è½½ï¼Œåªæœ‰åœ¨éœ€è¦æ—¶æ‰å®ä¾‹åŒ–ã€‚ åŸºæœ¬è¦æ±‚ classDiagram class Singleton{ -instance:Singleton -Singleton() +GetInstance() } classDiagram class Singleton{ -instance:Singleton -Singleton() +GetInstance() } ç§æœ‰çš„æ„é€ å‡½æ•°ï¼šé˜²æ­¢å¤–éƒ¨ä»£ç ç›´æ¥åˆ›å»ºç±»çš„å®ä¾‹ ç§æœ‰çš„é™æ€å®ä¾‹å˜é‡ï¼šä¿å­˜è¯¥ç±»çš„å”¯â¼€å®ä¾‹ å…¬æœ‰çš„é™æ€æ–¹æ³•ï¼šé€šè¿‡å…¬æœ‰çš„é™æ€æ–¹æ³•æ¥è·å–ç±»çš„å®ä¾‹ å•ä¾‹è®¾è®¡æ¨¡å¼å®ç° // c++11åæ˜¯çº¿ç¨‹å®‰å…¨çš„ ï¼ˆ class Singleton { private: Singleton(){} Singleton(const Singleton\u0026) = delete; Singleton\u0026 operator=(const Singleton\u0026) = delete; public: static Singleton\u0026 GetInstance() { static Singleton singleton; return singleton; } }; é¥¿æ±‰å¼ ç±»åŠ è½½æ—¶å®Œæˆå®ä¾‹åˆ›å»º // é¥¿æ±‰å¼ class Singlehungry { private: Singlehungry(){} Singlehungry(const Singlehungry\u0026) = delete; Singlehungry\u0026 operator=(const Singlehungry\u0026) = delete; public: static Singlehungry* GetInstance() { if (singleton == nullptr) { singleton = new Singlehungry(); } return singleton; } private: static Singlehungry* singleton; }; // é¥¿æ±‰å¼åˆå§‹åŒ– Singlehungry* Singlehungry::singleton = Singlehungry::GetInstance(); æ‡’æ±‰å¼ è¯·æ±‚å®ä¾‹æ—¶æ‰åˆ›å»ºï¼šçº¿ç¨‹ä¸å®‰å…¨ï¼Œéœ€è¦åŠ é”ï¼Œé˜²æ­¢èµ„æºè¢«é‡å¤åˆå§‹åŒ– // æ‡’æ±‰å¼ class SingleLazy { private: SingleLazy(){} SingleLazy(const SingleLazy\u0026) = delete; SingleLazy\u0026 operator=(const Singlehungry\u0026) = delete; public: static SingleLazy* GetInstance() { if(singleton != nullptr) { return singleton; } _mutex.lock(); if (singleton != nullptr) { _mutex.unlock(); return singleton; } singleton = new SingleLazy(); _mutex.unlock(); return singleton; } private: static SingleLazy* singleton; static std::mutex _mutex; }; SingleLazy* SingleLazy::singleton = nullptr; std::mutex SingleLazy::_mutex; // æ‡’æ±‰å¼ æ™ºèƒ½æŒ‡é’ˆ è‡ªåŠ¨å›æ”¶ class SingleAuto { private: SingleAuto(){} SingleAuto(const SingleAuto\u0026) = delete; SingleAuto\u0026 operator=(const SingleAuto\u0026) = delete; public: ~SingleAuto() {std::cout \u003c\u003c \"single auto delete success \" \u003c\u003c std::endl; } static std::shared_ptr\u003cSingleAuto\u003e GetInstance() { if(singleton != nullptr) { return singleton; } _mutex.lock(); if (singleton != nullptr) { _mutex.unlock(); return singleton; } singleton = std::shared_ptr\u003cSingleAuto\u003e(new SingleAuto); _mutex.unlock(); return singleton; } private: static std::shared_ptr\u003cSingleAuto\u003e singleton; static std::mutex _mutex; }; std::shared_ptr\u003cSingleAuto\u003e SingleAuto::singleton = nullptr; std::mutex SingleAuto::_mutex; // å®šä¹‰å‹å…ƒç±»å¸®å¿™å›æ”¶ class SingleAutoSafe; class SafeDeletor { public: void operator()(SingleAutoSafe* sf) { std::cout \u003c\u003c \"this is safe deleter operator()\" \u003c\u003c std::endl; delete sf; } }; class SingleAutoSafe { private: SingleAutoSafe(){} SingleAutoSafe(const SingleAutoSafe\u0026) = delete; SingleAutoSafe\u0026 operator=(const SingleAutoSafe\u0026) = delete; ~SingleAutoSafe() {std::cout \u003c\u003c \"single auto delete success \" \u003c\u003c std::endl; } friend class SafeDeletor; public: static std::shared_ptr\u003cSingleAutoSafe\u003e GetInstance() { if(singleton != nullptr) { return singleton; } _mutex.lock(); if (singleton != nullptr) { _mutex.unlock(); return singleton; } singleton = std::shared_ptr\u003cSingleAutoSafe\u003e(new SingleAutoSafe, SafeDeletor()); _mutex.unlock(); return singleton; } private: static std::shared_ptr\u003cSingleAutoSafe\u003e singleton; static std::mutex _mutex; }; std::shared_ptr\u003cSingleAutoSafe\u003e SingleAutoSafe::singleton = nullptr; std::mutex SingleAutoSafe::_mutex; call_once call_onceå‡½æ•°ï¼Œé…åˆä¸€ä¸ªå±€éƒ¨çš„é™æ€å˜é‡once_flagå®ç°çº¿ç¨‹å®‰å…¨çš„åˆå§‹åŒ– å¤šçº¿ç¨‹è°ƒç”¨call_onceå‡½æ•°æ—¶ï¼Œä¼šåˆ¤æ–­once_flagæ˜¯å¦è¢«åˆå§‹åŒ–ï¼Œå¦‚æ²¡è¢«åˆå§‹åŒ–åˆ™è¿›å…¥åˆå§‹åŒ–æµç¨‹ï¼Œä½†æ˜¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è¿›å…¥è¿™ä¸ªåˆå§‹åŒ–å‡½æ•° class SingleOnce { private: SingleOnce() = default; SingleOnce(const SingleOnce\u0026) = delete; SingleOnce\u0026 operator=(const SingleOnce\u0026) = delete; public: static std::shared_ptr\u003cSingleOnce\u003e GetInstance() { static std::once_flag _flag; std::call_once(_flag, [\u0026](){ singleton = std::shared_ptr\u003cSingleOnce\u003e(new SingleOnce); }); return singleton; } ~SingleOnce() {std::cout \u003c\u003c \"this is singleton destruct\" \u003c\u003c std::endl;} private: static std::shared_ptr\u003cSingleOnce\u003e singleton; }; std::shared_ptr\u003cSingleOnce\u003e SingleOnce::singleton = nullptr; // é€šç”¨æ¨¡æ¿ç±» template \u003ctypename T\u003e class Singleton { protected: Singleton() = default; Si","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:4:1","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"å·¥å‚æ–¹æ³•æ¨¡å¼ å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå°†å“ªä¸€ä¸ªç±»å®ä¾‹åŒ–ã€‚å·¥å‚æ–¹æ³•æ¨¡å¼è®©ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å­ç±»ã€‚ï¼ˆç±»åˆ›å»ºå‹ï¼‰ ç®€å•å·¥å‚æ¨¡å¼ å®šä¹‰ä¸€ä¸ªå·¥å‚ç±»ï¼Œå¯ä»¥æ ¹æ®å‚æ•°ä¸åŒè¿”å›ä¸åŒç±»çš„å®ä¾‹ï¼Œè¢«åˆ›å»ºçš„å®ä¾‹é€šå¸¸éƒ½å…·æœ‰å…±åŒçš„çˆ¶ç±»ã€‚ï¼ˆé™æ€å·¥å‚æ–¹æ³•ï¼Œç±»åˆ›å»ºå‹ï¼‰ï¼‰ ä¼˜ç‚¹ï¼šå®ç°äº†å¯¹è±¡åˆ›å»ºå’Œä½¿ç”¨çš„åˆ†ç¦»ï¼› ç¼ºç‚¹ï¼šå·¥å‚ç±»é›†ä¸­æ‰€æœ‰äº§å“åˆ›å»ºé€»è¾‘ï¼ŒèŒè´£è¿‡é‡ï¼›å¢åŠ ç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°ï¼›æ‹“å±•å›°éš¾ï¼›é™æ€å·¥å‚æ–¹æ³•æ— æ³•å½¢æˆåŸºäºç»§æ‰¿çš„ç­‰çº§ç»“æ„ã€‚ classDiagram class Product class ConcreteProductA class ConcreteProductB class Factory{ +factoryMethod(String arg) Product } Product\u003c|--ConcreteProductA: Inheritance Product\u003c|--ConcreteProductB: Inheritance ConcreteProductA\u003c..Factory : Dependency ConcreteProductB\u003c..Factory : Dependency classDiagram class Product class ConcreteProductA class ConcreteProductB class Factory{ +factoryMethod(String arg) Product } Product\u003c|--ConcreteProductA: Inheritance Product\u003c|--ConcreteProductB: Inheritance ConcreteProductA\u003c..Factory : Dependency ConcreteProductB\u003c..Factory : Dependency å·¥å‚ï¼šè´Ÿè´£å®ç°åˆ›å»ºæ‰€æœ‰äº§å“å®ä¾‹çœ‹içš„å†…éƒ¨é€»è¾‘ï¼Œæä¾›é™æ€å·¥å‚æ–¹æ³•ï¼Œè¿”å›æŠ½è±¡äº§å“ç±»å‹ æŠ½è±¡äº§å“ï¼šå·¥å‚ç±»åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡çš„çˆ¶ç±»ï¼Œå°è£…å„ç§äº§å“å¯¹è±¡çš„å…¬æœ‰æ–¹æ³•ã€‚ å…·ä½“äº§å“ï¼šå…·ä½“äº§å“ç±»ï¼Œç»§æ‰¿æŠ½è±¡äº§å“ã€‚ å·¥å‚æ–¹æ³•æ¨¡å¼ä¼˜ç‚¹ ä¼˜ç‚¹ï¼šå·¥å‚æ–¹æ³•ç”¨æ¥åˆ›å»ºå®¢æˆ·æ‰€éœ€è¦çš„äº§å“ï¼ŒåŒæ—¶è¿˜å‘å®¢æˆ·éšè—äº†å“ªç§å…·ä½“äº§å“ç±»å°†è¢«å®ä¾‹åŒ–è¿™ä¸€ç»†èŠ‚ï¼›åŸºäºå·¥å‚è§’è‰²å’Œäº§å“è§’è‰²çš„å¤šæ€æ€§è®¾è®¡ï¼›åœ¨ç³»ç»Ÿä¸­åŠ å…¥æ–°äº§å“ï¼Œåªè¦æ·»åŠ ä¸€ä¸ªå…·ä½“å·¥å‚å’Œå…·ä½“äº§å“ï¼ˆå¼€é—­åŸåˆ™ï¼‰ã€‚ ç¼ºç‚¹ï¼šæ·»åŠ æ–°äº§å“æ—¶éœ€è¦ç¼–å†™æ–°çš„å…·ä½“äº§å“ç±»å’Œå¯¹åº”çš„å…·ä½“å·¥å‚ç±»ï¼Œç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°å°†æˆå¯¹å¢åŠ ã€‚ ä¼˜åŒ–ï¼šä½¿ç”¨åå°„æœºåˆ¶ï¼šæ ¹æ®ç±»åå­—ç¬¦ä¸²ç”Ÿæˆå¯¹è±¡ï¼›å¼•å…¥é…ç½®æ–‡ä»¶ åŸºæœ¬è¦æ±‚ classDiagram class Factory{ +factoryMethod() Product } class ConcreteFactory{ +factoryMethod() Product } class ConcreteProduct class Product Factory \u003c|..ConcreteFactory : Realization ConcreteFactory..\u003eConcreteProduct : Dependency Product\u003c|..ConcreteProduct : Realization classDiagram class Factory{ +factoryMethod() Product } class ConcreteFactory{ +factoryMethod() Product } class ConcreteProduct class Product Factory \u003c|..ConcreteFactory : Realization ConcreteFactory..\u003eConcreteProduct : Dependency Product\u003c|..ConcreteProduct : Realization æŠ½è±¡å·¥å‚ï¼šå£°æ˜å·¥å‚æ–¹æ³•ï¼Œç”¨äºè¿”å›ä¸€ä¸ªäº§å“ å…·ä½“å·¥å‚ï¼šæŠ½è±¡å·¥å‚å­ç±»ï¼Œå®ç°æŠ½è±¡å·¥å‚å®šä¹‰çš„å·¥å‚æ–¹æ³•ï¼Œåˆ›å»ºå…·ä½“äº§å“å®ä¾‹ã€‚ æŠ½è±¡äº§å“ï¼šå®šä¹‰äº§å“çš„æ¥å£ã€‚ å…·ä½“äº§å“ï¼šå®ç°æŠ½è±¡äº§å“æ¥å£ï¼Œæ˜¯å…·ä½“å·¥å‚åˆ›å»ºçš„å¯¹è±¡ã€‚ å·¥å‚æ–¹æ³•æ¨¡å¼å®ç° class ImageReader { public: virtual void readImage(const std::string\u0026 filepath) = 0; virtual ~ImageReader(){} }; class GIFReader: public ImageReader { public: void readImage(const std::string\u0026 filepath) override { std::cout \u003c\u003c \"Reading GIF image from file: \" \u003c\u003c filepath \u003c\u003c std::endl; } }; class JPGReader: public ImageReader { public: void readImage(const std::string\u0026 filepath) override { std::cout \u003c\u003c \"Reading JPG image from file: \" \u003c\u003c filepath \u003c\u003c std::endl; } }; class ImageReaderFactory { public: virtual ImageReader* createReader() = 0; virtual ~ImageReaderFactory(){} }; class GIFReaderFactory: public ImageReaderFactory { public: ImageReader* createReader() override { return new GIFReader(); } }; class JPGReaderFactory: public ImageReaderFactory { public: ImageReader* createReader() override { return new JPGReader(); } }; å·¥å‚æ–¹æ³•æ¨¡å¼ä½¿ç”¨åœºæ™¯ å®¢æˆ·ç«¯ä¸çŸ¥é“å…¶æ‰€éœ€è¦çš„å¯¹è±¡çš„ç±»ï¼Œåªéœ€è¦çŸ¥é“æ‰€å¯¹åº”çš„å·¥å‚å³å¯ï¼Œå…·ä½“çš„äº§å“å¯¹è±¡ç”±å…·ä½“å·¥å‚ç±»åˆ›å»ºï¼Œå¯å°†å…·ä½“å·¥å‚ç±»çš„ç±»åå­˜å‚¨åœ¨é…ç½®æ–‡ä»¶æˆ–æ•°æ®åº“ä¸­ã€‚ æŠ½è±¡å·¥å‚ç±»é€šè¿‡å…¶å­ç±»æ¥æŒ‡å®šåˆ›å»ºå“ªä¸ªå¯¹è±¡ã€‚ å…·ä½“å·¥å‚ç±»åœ¨å®ç°å·¥å‚æ–¹æ³•æ—¶é™¤äº†åˆ›å»ºå…·ä½“äº§å“å¯¹è±¡ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è´Ÿè´£äº§å“å¯¹è±¡çš„åˆå§‹åŒ–å·¥ä½œä»¥åŠä¸€äº›èµ„æºå’Œç¯å¢ƒé…ç½®å·¥ä½œï¼Œä¾‹å¦‚è¿æ¥æ•°æ®åº“ã€åˆ›å»ºæ–‡ä»¶ç­‰ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:4:2","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"æŠ½è±¡å·¥å‚æ¨¡å¼ æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— é¡»æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚ï¼ˆå¯¹è±¡åˆ›å»ºå‹ï¼‰ å·¥å‚æ–¹æ³•æ¨¡å¼é€šè¿‡å¼•å…¥å·¥å‚ç­‰çº§ç»“æ„ï¼Œè§£å†³äº†ç®€å•å·¥å‚æ¨¡å¼ä¸­å·¥å‚ç±»èŒè´£å¤ªé‡çš„é—®é¢˜ã€‚ æŠ½è±¡å·¥å‚æ¨¡å¼é€šè¿‡å°†ä¸€äº›ç›¸å…³çš„äº§å“ç»„æˆä¸€ä¸ªâ€œäº§å“æ—â€ï¼Œç”±åŒä¸€ä¸ªå·¥å‚æ¥ç»Ÿä¸€ç”Ÿäº§ï¼Œè§£å†³å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­æ¯ä¸ªå…·ä½“å·¥å‚åªè´Ÿè´£åˆ›å»ºå•ä¸€äº§å“ï¼Œå­˜åœ¨å¤§é‡å·¥å‚ç±»çš„é—®é¢˜ã€‚ æŠ½è±¡å·¥å‚æ¨¡å¼ä¼˜ç‚¹ ä¼˜ç‚¹ï¼šæ–¹ä¾¿å¢åŠ äº§å“æ—ï¼›éš”ç¦»äº†å…·ä½“ç±»çš„ç”Ÿæˆ ç¼ºç‚¹ï¼šå¢åŠ æ–°çš„äº§å“ç­‰çº§ç»“æ„éº»çƒ¦ åŸºæœ¬è¦æ±‚ classDiagram class Client class AbstractFactory { +createPeoductA() AbstractProductA +createPeoductB() AbstractProductB } class AbstractProductA class ConcreteProductA1 class ConcreteProductA2 class AbstractProductB class ConcreteProductB1 class ConcreteProductB2 class ConcreateFactory1 { +createPeoductA() AbstractProductA +createPeoductB() AbstractProductB } class ConcreateFactory2 { +createPeoductA() AbstractProductA +createPeoductB() AbstractProductB } Client..\u003eAbstractFactory : Dependency Client..\u003eAbstractProductA : Dependency Client..\u003eAbstractProductB : Dependency AbstractFactory\u003c|..ConcreateFactory1 : Realization AbstractFactory\u003c|..ConcreateFactory2 : Realization AbstractProductA\u003c|..ConcreteProductA1 : Realization AbstractProductA\u003c|..ConcreteProductA2 : Realization ConcreteProductA1\u003c..ConcreateFactory1 : Dependency ConcreateFactory1..\u003eConcreteProductB1: Dependency ConcreteProductA2\u003c..ConcreateFactory2 : Dependency ConcreateFactory2..\u003eConcreteProductB2 : Dependency AbstractProductB\u003c|..ConcreteProductB1 : Realization AbstractProductB\u003c|..ConcreteProductB2 : Realization classDiagram class Client class AbstractFactory { +createPeoductA() AbstractProductA +createPeoductB() AbstractProductB } class AbstractProductA class ConcreteProductA1 class ConcreteProductA2 class AbstractProductB class ConcreteProductB1 class ConcreteProductB2 class ConcreateFactory1 { +createPeoductA() AbstractProductA +createPeoductB() AbstractProductB } class ConcreateFactory2 { +createPeoductA() AbstractProductA +createPeoductB() AbstractProductB } Client..\u003eAbstractFactory : Dependency Client..\u003eAbstractProductA : Dependency Client..\u003eAbstractProductB : Dependency AbstractFactory\u003c|..ConcreateFactory1 : Realization AbstractFactory\u003c|..ConcreateFactory2 : Realization AbstractProductA\u003c|..ConcreteProductA1 : Realization AbstractProductA\u003c|..ConcreteProductA2 : Realization ConcreteProductA1\u003c..ConcreateFactory1 : Dependency ConcreateFactory1..\u003eConcreteProductB1: Dependency ConcreteProductA2\u003c..ConcreateFactory2 : Dependency ConcreateFactory2..\u003eConcreteProductB2 : Dependency AbstractProductB\u003c|..ConcreteProductB1 : Realization AbstractProductB\u003c|..ConcreteProductB2 : Realization æŠ½è±¡å·¥å‚ï¼šå£°æ˜ä¸€ç»„ç”¨äºåˆ›å»ºä¸€æ—äº§å“çš„æ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•å¯¹åº”ä¸€ç§äº§å“ã€‚ å…·ä½“å·¥å‚ï¼šå®ç°æŠ½è±¡å·¥å‚å£°æ˜çš„æ–¹æ³•ã€‚ æŠ½è±¡äº§å“ï¼šå®šä¹‰äº§å“çš„æ¥å£ã€‚ å…·ä½“äº§å“ï¼šå®ç°æŠ½è±¡äº§å“æ¥å£ï¼Œæ˜¯å…·ä½“å·¥å‚åˆ›å»ºçš„å¯¹è±¡ã€‚ æŠ½è±¡å·¥å‚æ¨¡å¼å®ç° // æ“ä½œæ§åˆ¶ç±»ï¼šæŠ½è±¡äº§å“ç±»A class OperationController { public: virtual void controlGame() = 0; virtual ~OperationController(){} }; // ç•Œé¢æ§åˆ¶ç±»ï¼šæŠ½è±¡äº§å“ç±»B class InterfaceController { public: virtual void displayInterface() = 0; }; // å…·ä½“äº§å“ç±»A1 class iOSOperationController : public OperationController { public: void controlGame() override { std::cout \u003c\u003c \"ios control game\" \u003c\u003c std::endl; } }; // å…·ä½“äº§å“ç±»A2 class AndroidOperationController : public OperationController { public: void controlGame() override { std::cout \u003c\u003c \"android control game\" \u003c\u003c std::endl; } }; // å…·ä½“äº§å“ç±»B1 class iOSInterfaceController : public InterfaceController { public: void displayInterface() override { std::cout \u003c\u003c \"ios display\" \u003c\u003c std::endl; } }; // å…·ä½“äº§å“ç±»B2 class AndroidInterfaceController : public InterfaceController { public: void displayInterface() override { std::cout \u003c\u003c \"android display\" \u003c\u003c std::endl; } }; // æŠ½è±¡å·¥å‚ç±» class AbstractFactory { public: virtual OperationController* createOperationController() = 0; virtual InterfaceController* createInterfaceController() = 0; virtual ~AbstractFactory() {} }; // iOSå·¥å‚ ï¼šå…·ä½“å·¥å‚1 class iOSFactory : public AbstractFactory { public: OperationController* createOperationController() override { return new iOSOperationController(); } InterfaceController* createInterfaceController() override { return new iOSInterfaceController(); } }; // Androidå·¥å‚ ï¼šå…·ä½“å·¥å‚2 class AndroidFactory : public AbstractFactory { public: OperationController* createOperationController() override { return new AndroidOperationController","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:4:3","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"å»ºé€ è€…æ¨¡å¼ å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚ï¼ˆå¯¹è±¡åˆ›å»ºå‹ï¼‰ å»ºé€ è€…æ¨¡å¼ä¼˜ç‚¹ ä¼˜ç‚¹ï¼šå®¢æˆ·ç«¯ä¸åŒ…å«å¤šä¸ªéƒ¨ä»¶çš„å¤æ‚å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹åˆ†ç¦» ç¼ºç‚¹ï¼šå»ºé€ è€…æ¨¡å¼æ‰€åˆ›å»ºçš„äº§å“ä¸€èˆ¬å…·æœ‰è¾ƒå¤šçš„å…±åŒç‚¹ï¼Œå…¶ç»„æˆéƒ¨åˆ†ç›¸ä¼¼ åŸºæœ¬è¦æ±‚ classDiagram class Director { -builder: Builder +construct() } class Builder { +buildPartA() +buildPartB() +buildPartC() +getResult() } class ConcreteBuilder { +buildPartA() +buildPartB() +buildPartC() +getResult() } class Product Director o--\u003e Builder : Aggregation Builder \u003c|-- ConcreteBuilder : Inheritance ConcreteBuilder..\u003eProduct : Dependency classDiagram class Director { -builder: Builder +construct() } class Builder { +buildPartA() +buildPartB() +buildPartC() +getResult() } class ConcreteBuilder { +buildPartA() +buildPartB() +buildPartC() +getResult() } class Product Director o--\u003e Builder : Aggregation Builder \u003c|-- ConcreteBuilder : Inheritance ConcreteBuilder..\u003eProduct : Dependency æŠ½è±¡å»ºé€ è€…ï¼šåˆ›å»ºä¸€ä¸ªäº§å“Productå¯¹è±¡çš„å„ä¸ªéƒ¨ä»¶æŒ‡å®šæŠ½è±¡æ¥å£ã€‚ä¸€èˆ¬å£°æ˜ä¸¤ç±»æ–¹æ³•ï¼šä¸€ç±»æ–¹æ³•æ˜¯buildPartX()ï¼Œç”¨äºåˆ›å»ºå¤æ‚å¯¹è±¡çš„å„ä¸ªéƒ¨ä»¶ï¼›å¦ä¸€ç±»æ–¹æ³•æ˜¯getResult()ï¼Œç”¨äºè¿”å›å¤æ‚å¯¹è±¡ å…·ä½“å»ºé€ è€…ï¼šå®ç°äº†Builderæ¥å£ï¼Œå®ç°å„ä¸ªéƒ¨ä»¶çš„å…·ä½“æ„é€ å’Œè£…é…æ–¹æ³•ï¼Œå®šä¹‰å¹¶æ˜ç¡®å…¶æ‰€åˆ›å»ºçš„å¤æ‚å¯¹è±¡ äº§å“è§’è‰²ï¼šè¢«æ„å»ºçš„å¤æ‚å¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªç»„æˆéƒ¨ä»¶ æŒ‡æŒ¥è€…ï¼šè´Ÿè´£å®‰æ’å¤æ‚å¯¹è±¡çš„å»ºé€ æ¬¡åº å»ºé€ è€…æ¨¡å¼å®ç° class ComputerComponent { public: virtual ~ComputerComponent() {} virtual void display() = 0; }; class CPU : public ComputerComponent { public: void display() override { std::cout \u003c\u003c \"\\tCPU \\n\"; } }; class GPU : public ComputerComponent { public: void display() override { std::cout \u003c\u003c \"\\tGPU \\n\"; } }; class ARM : public ComputerComponent { public: void display() override { std::cout \u003c\u003c \"\\tARM \\n\"; } }; // æŠ½è±¡å»ºé€ è€…ç±» class Builder { public: virtual void buildCPU() = 0; virtual void buildGPU() = 0; virtual void buildRAM() = 0; virtual std::vector\u003cComputerComponent*\u003e getResult() = 0; virtual ~Builder() {} }; // å…·ä½“å»ºé€ è€…ç±» class ComputerBuilder : public Builder { public: void buildCPU() override { components.push_back(new CPU()); } void buildGPU() override { components.push_back(new GPU()); } void buildRAM() override { components.push_back(new ARM()); } std::vector\u003cComputerComponent*\u003e getResult() override { return components; } private: std::vector\u003cComputerComponent*\u003e components; }; // æŒ‡æŒ¥è€…ç±» class Director { public: void construct(Builder* builder) { builder-\u003ebuildCPU(); builder-\u003ebuildGPU(); builder-\u003ebuildRAM(); } }; å»ºé€ è€…æ¨¡å¼åœºæ™¯ éœ€è¦ç”Ÿæˆçš„äº§å“å¯¹è±¡çš„å±æ€§ç›¸äº’ä¾èµ–ï¼Œéœ€è¦æŒ‡å®šå…¶ç”Ÿæˆé¡ºåº ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:4:4","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"åŸå‹æ¨¡å¼ ä½¿ç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡å…‹éš†è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚ï¼ˆå¯¹è±¡åˆ›å»ºå‹ï¼‰ åŸå‹æ¨¡å¼ä¼˜ç‚¹ ä¼˜ç‚¹ï¼šæé«˜åˆ›å»ºæ•ˆç‡ï¼Œç®€åŒ–åˆ›å»ºç»“æ„ï¼Œå¯ä»¥ä½¿ç”¨æ·±å…‹éš†æ–¹å¼ä¿å­˜å¯¹è±¡çŠ¶æ€ï¼ˆè¾…åŠ©å®ç°æ’¤é”€æ“ä½œï¼‰ ç¼ºç‚¹ï¼šæ¯ä¸ªç±»é…å¤‡ä¸€ä¸ªå…‹éš†æ–¹æ³•ï¼Œä¸”è¯¥æ–¹æ³•ä½äºç±»å†…ã€‚ åŸºæœ¬è¦æ±‚ classDiagram class Client { +operation() } class Prototype { +clone() Prototype } class ConcreatPrototypeA { +clone() Prototype } class ConcreatPrototypeB { +clone() Prototype } Client--\u003ePrototype : Association Prototype\u003c|--ConcreatPrototypeA : Inheritance Prototype\u003c|--ConcreatPrototypeB : Inheritance classDiagram class Client { +operation() } class Prototype { +clone() Prototype } class ConcreatPrototypeA { +clone() Prototype } class ConcreatPrototypeB { +clone() Prototype } Client--\u003ePrototype : Association Prototype\u003c|--ConcreatPrototypeA : Inheritance Prototype\u003c|--ConcreatPrototypeB : Inheritance æŠ½è±¡åŸå‹ç±»ï¼šå£°æ˜å…‹éš†æ–¹æ³•çš„æ¥å£ï¼Œæ˜¯æ‰€æœ‰å…·ä½“åŸå‹ç±»çš„å…¬å…±çˆ¶ç±» å…·ä½“åŸå‹ç±»ï¼šå®ç°åœ¨æŠ½è±¡åŸå‹ç±»ä¸­å£°æ˜çš„å…‹éš†æ–¹æ³•ï¼Œåœ¨å…‹éš†æ–¹æ³•ä¸­è¿”å›è‡ªå·±çš„ä¸€ä¸ªå…‹éš†å¯¹è±¡ã€‚ å®¢æˆ·ç±»ï¼šè®©ä¸€ä¸ªåŸå‹å¯¹è±¡å…‹éš†è‡ªèº«ä»è€Œåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ åŸå‹æ¨¡å¼å®ç° class Address { public: Address(const std::string\u0026 s, const std::string\u0026 c, const std::string\u0026 co) : street(s), city(c), country(co) {} Address(const Address\u0026 other) : street(other.street), city(other.city), country(other.country) {}\\ ~Address() {} public: std::string street; std::string city; std::string country; }; // æŠ½è±¡åŸå‹ç±» class Customer { public: Customer(const std::string\u0026 n, Address* addr) : name(n), address(addr) {} // åŸå‹æ¨¡å¼ä¸­çš„å…‹éš†æ¥å£ virtual Customer* clone() const = 0; virtual ~Customer(){} public: std::string name; Address* address; }; // æµ…å…‹éš† class ShallowCopyCustomer : public Customer { public: ShallowCopyCustomer(const std::string\u0026 n, Address* addr) : Customer(n, addr) {} ShallowCopyCustomer(const ShallowCopyCustomer\u0026 other) : Customer(other.name, other.address) {} Customer* clone() const override { return new ShallowCopyCustomer(*this); } }; // æ·±å…‹éš† class DeepCopyCustomer : public Customer { public: DeepCopyCustomer(const std::string\u0026 n, Address* addr) : Customer(n, addr) {} DeepCopyCustomer(const DeepCopyCustomer\u0026 other) : Customer(other.name, new Address(*other.address)) {} Customer* clone() const override { return new DeepCopyCustomer(*this); } }; åŸå‹æ¨¡å¼åœºæ™¯ å¤åˆ¶ç²˜è´´æ“ä½œ é…åˆå¤‡å¿˜å½•æ¨¡å¼ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:4:5","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"ç»“æ„å‹æ¨¡å¼ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:5:0","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"é€‚é…å™¨æ¨¡å¼ å°†ä¸€ä¸ªæ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œä½¿æ¥å£ä¸å…¼å®¹çš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚ï¼ˆå¯¹è±¡ç»“æ„å‹ï¼Œç±»ç»“æ„å‹ï¼‰ å¯¹è±¡é€‚é…å™¨æ¨¡å¼ä¸­ï¼Œé€‚é…å™¨ä¸é€‚é…è€…ä¹‹é—´æ˜¯å…³è”å…³ç³»ï¼› åœ¨ç±»é€‚é…å™¨æ¨¡å¼ä¸­ï¼Œé€‚é…å™¨ä¸é€‚é…è€…ä¹‹é—´æ˜¯ç»§æ‰¿ï¼ˆæˆ–å®ç°ï¼‰å…³ç³»ã€‚ é€‚é…å™¨æ¨¡å¼ä¼˜ç‚¹ ä¼˜ç‚¹ï¼šå°†ç›®æ ‡ç±»å’Œé€‚é…è€…ç±»è§£è€¦ï¼ˆæ— éœ€ä¿®æ”¹åŸæœ‰ç»“æ„ï¼‰ï¼Œå¢åŠ äº†ç±»çš„é€æ˜æ€§å’Œå¤ç”¨æ€§ åŸºæœ¬è¦æ±‚ å¯¹è±¡é€‚é…å™¨ classDiagram class Client class Target { +request() } class Adaptee { +specificRequest() } class Adapter { +request() } Client ..\u003e Target : Dependency Target \u003c|-- Adapter : Inheritance Adaptee\u003c--Adapter : Association classDiagram class Client class Target { +request() } class Adaptee { +specificRequest() } class Adapter { +request() } Client ..\u003e Target : Dependency Target \u003c|-- Adapter : Inheritance Adaptee\u003c--Adapter : Association Targetç›®æ ‡æŠ½è±¡ç±»ï¼šå®šä¹‰å®¢æˆ·æ‰€éœ€æ¥å£ Adapteré€‚é…å™¨ç±»ï¼šè°ƒç”¨å¦ä¸€ä¸ªæ¥å£ï¼Œä½œä¸ºè½¬æ¢å™¨ï¼Œå¯¹Adapteeå’ŒTargetè¿›è¡Œé€‚é… Adapteeé€‚é…è€…ç±»ï¼šè¢«é€‚é…çš„è§’è‰² ç±»é€‚é…å™¨ï¼šç±»é€‚é…å™¨æ¨¡å¼ä¸å¯¹è±¡é€‚é…å™¨æ¨¡å¼æœ€å¤§çš„åŒºåˆ«åœ¨äºå…¶é€‚é…å™¨å’Œé€‚é…è€…ä¹‹é—´çš„å…³ç³»æ˜¯ç»§æ‰¿å…³ç³»ï¼ˆå¤šé‡ç»§æ‰¿ï¼‰ classDiagram class Client class Target { +request() } class Adaptee { +specificRequest() } class Adapter { +request() } Client ..\u003e Target : Dependency Target \u003c|.. Adapter : Realization Adaptee\u003c|--Adapter : Inheritance classDiagram class Client class Target { +request() } class Adaptee { +specificRequest() } class Adapter { +request() } Client ..\u003e Target : Dependency Target \u003c|.. Adapter : Realization Adaptee\u003c|--Adapter : Inheritanceé€‚é…å™¨æ¨¡å¼å®ç° // Target:request ç›®æ ‡æ¥å£ï¼šåŠ å¯†è§£å¯†æ¥å£ class EncryptorInterface { public: virtual ~EncryptorInterface() {} virtual void encrypt() = 0; virtual void decrypt() = 0; }; // Adaptee:specificRequest ç¬¬ä¸‰æ–¹åŠ å¯†ç±» class ThirdPartyEncryptor { public: void encrypt() { std::cout \u003c\u003c \"ThirdParty Encrypted !\\n\"; } void decrypt() { std::cout \u003c\u003c \"ThirdParty Decrypted !\\n\"; } }; // Adapter:request class EncryptorAdapter : public EncryptorInterface { public: EncryptorAdapter() {} void encrypt() override { _thirdPartyEncryptor.encrypt(); } void decrypt() override { _thirdPartyEncryptor.decrypt(); } private: ThirdPartyEncryptor _thirdPartyEncryptor; }; é€‚é…å™¨æ¨¡å¼åœºæ™¯ ç³»ç»Ÿéœ€è¦ä½¿ç”¨ä¸€äº›ç°æœ‰çš„ç±»ï¼Œè€Œè¿™äº›ç±»çš„æ¥å£ï¼ˆä¾‹å¦‚æ–¹æ³•åï¼‰ä¸ç¬¦åˆç³»ç»Ÿçš„éœ€è¦ï¼Œç”šè‡³æ²¡æœ‰è¿™äº›ç±»çš„æºä»£ç  æƒ³åˆ›å»ºä¸€ä¸ªå¯ä»¥é‡å¤ä½¿ç”¨çš„ç±»ï¼Œç”¨äºä¸ä¸€äº›å½¼æ­¤ä¹‹é—´æ²¡æœ‰å¤ªå¤§å…³è”çš„ç±»ï¼ŒåŒ…æ‹¬ä¸€äº›å¯èƒ½åœ¨å°†æ¥å¼•è¿›çš„ç±»ä¸€èµ·å·¥ä½œ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:5:1","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"æ¡¥æ¥æ¨¡å¼ å°†æŠ½è±¡éƒ¨åˆ†ä¸å…¶å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚ï¼ˆå¯¹è±¡ç»“æ„æ€§ï¼‰ æ¡¥æ¥æ¨¡å¼ä¼˜ç‚¹ ä¼˜ç‚¹ï¼š ç¼ºç‚¹ï¼š åŸºæœ¬è¦æ±‚ classDiagram class Client class Abstraction { +operation() } class Implementor { +operationImpl() } class RefinedAbstraction { +operation() } class ConcreteImplementorA { +operationImpl() } class ConcreteImplementorB { +operationImpl() } Client ..\u003e Abstraction : Dependency Client ..\u003e Implementor : Dependency Abstraction o--\u003e Implementor : Aggregation Abstraction \u003c|-- RefinedAbstraction : Inheritance Implementor \u003c|.. ConcreteImplementorA : Realization Implementor \u003c|.. ConcreteImplementorB : Realization classDiagram class Client class Abstraction { +operation() } class Implementor { +operationImpl() } class RefinedAbstraction { +operation() } class ConcreteImplementorA { +operationImpl() } class ConcreteImplementorB { +operationImpl() } Client ..\u003e Abstraction : Dependency Client ..\u003e Implementor : Dependency Abstraction o--\u003e Implementor : Aggregation Abstraction \u003c|-- RefinedAbstraction : Inheritance Implementor \u003c|.. ConcreteImplementorA : Realization Implementor \u003c|.. ConcreteImplementorB : Realization RefinedAbstraction(æ‰©å……æŠ½è±¡ç±»)ï¼šè°ƒç”¨Implementorå®šä¹‰çš„ä¸šåŠ¡æ–¹æ³• æ¡¥æ¥æ¨¡å¼å®ç° å°†å…·æœ‰ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–ç»´åº¦çš„ç±»çš„ä¸€äº›æ™®é€šä¸šåŠ¡æ–¹æ³•å’Œä¸ä¹‹å…³ç³»æœ€å¯†åˆ‡çš„ç»´åº¦è®¾è®¡ä¸ºæŠ½è±¡ç±»å±‚æ¬¡ç»“æ„ï¼ˆæŠ½è±¡éƒ¨åˆ†ï¼‰ï¼Œè€Œå°†å¦ä¸€ä¸ªç»´åº¦è®¾è®¡ä¸ºå®ç°ç±»å±‚æ¬¡ç»“æ„ï¼ˆå®ç°éƒ¨åˆ†ï¼‰ class DatabaseAccess; class DataConverter { public: DataConverter(DatabaseAccess* db) : database(db) {} virtual ~DataConverter() {} virtual void convertToFile(const std::string\u0026 filePath) = 0; protected: DatabaseAccess* database; // å¼•ç”¨æ•°æ®åº“è®¿é—®å±‚ï¼Œå®ç°æ¡¥æ¥ }; // æ•°æ®åº“è®¿é—®æŠ½è±¡æ¥å£ class DatabaseAccess { public: virtual ~DatabaseAccess() {} virtual void fetchRecords() = 0; }; class MySQLDatabase : public DatabaseAccess { public: void fetchRecords() override { std::cout \u003c\u003c \"MySQLDatabase data records \"; } }; class PostgreSQLDatabase : public DatabaseAccess { public: void fetchRecords() override { std::cout \u003c\u003c \"PostgreSQLDatabase data records \"; } }; class TXTConverter : public DataConverter { public: TXTConverter(DatabaseAccess* db) : DataConverter(db) {} void convertToFile(const std::string\u0026 filePath) override { database-\u003efetchRecords(); std::cout \u003c\u003c \"convert to txt\\n\"; } }; class XMLConverter : public DataConverter { public: XMLConverter(DatabaseAccess* db) : DataConverter(db) {} void convertToFile(const std::string\u0026 filePath) override { database-\u003efetchRecords(); std::cout \u003c\u003c \"convert to xml\\n\"; } }; æ¡¥æ¥æ¨¡å¼åœºæ™¯ ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰ç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œä¸”è¿™ä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰ç»´åº¦éƒ½éœ€è¦ç‹¬ç«‹è¿›è¡Œæ‰©å±• ç³»ç»Ÿç±»çš„ä¸ªæ•°æ€¥å‰§å¢åŠ çš„ç³»ç»Ÿ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:5:2","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"ç»„åˆæ¨¡å¼ ç»„åˆå¤šä¸ªå¯¹è±¡å½¢æˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºå…·æœ‰â€œéƒ¨åˆ†â€”æ•´ä½“â€å…³ç³»çš„å±‚æ¬¡ç»“æ„ã€‚ï¼ˆå¯¹è±¡ç»“æ„å‹ï¼‰ ç»„åˆæ¨¡å¼ä¼˜ç‚¹ ä¼˜ç‚¹ï¼š ç¼ºç‚¹ï¼šåœ¨å¢åŠ æ–°æ„ä»¶æ—¶å¾ˆéš¾å¯¹å®¹å™¨ä¸­çš„æ„ä»¶ç±»å‹è¿›è¡Œé™åˆ¶ã€‚ åŸºæœ¬è¦æ±‚ classDiagram class Client class Component { +operation() +add(Component c) +remove(Component c) +getChild(int i) } class Leaf { +operation() } class Composite { +operation() +add(Component c) +remove(Component c) +getChild(int i) } Client ..\u003e Component : Dependency Component \u003c|-- Leaf : Inheritance Component \u003c|-- Composite : Inheritance Component \u003c--o Composite : Aggregation classDiagram class Client class Component { +operation() +add(Component c) +remove(Component c) +getChild(int i) } class Leaf { +operation() } class Composite { +operation() +add(Component c) +remove(Component c) +getChild(int i) } Client ..\u003e Component : Dependency Component \u003c|-- Leaf : Inheritance Component \u003c|-- Composite : Inheritance Component \u003c--o Composite : Aggregation Compoent(æŠ½è±¡æ„ä»¶):ä¸ºå¶å­æ„ä»¶å’Œå®¹å™¨æ„ä»¶å¯¹è±¡å£°æ˜æ¥å£ï¼Œåœ¨è¯¥è§’è‰²ä¸­å¯ä»¥åŒ…å«æ‰€æœ‰å­ç±»å…±æœ‰è¡Œä¸ºçš„å£°æ˜å’Œå®ç° Leaf(å¶å­æ„ä»¶):å¶å­èŠ‚ç‚¹å¯¹è±¡,å®ç°äº†åœ¨æŠ½è±¡æ„ä»¶ä¸­å®šä¹‰çš„è¡Œä¸º Composite(å®¹å™¨æ„ä»¶):æä¾›ä¸€ä¸ªé›†åˆç”¨äºå­˜å‚¨å­èŠ‚ç‚¹ï¼Œå®ç°äº†åœ¨æŠ½è±¡æ„ä»¶ä¸­å®šä¹‰çš„è¡Œä¸º ç»„åˆæ¨¡å¼å®ç° class Component { public: virtual ~Component() {} virtual void add(std::shared_ptr\u003cComponent\u003e) = 0; virtual void remove(std::shared_ptr\u003cComponent\u003e) = 0; virtual void display(int depth = 0) const = 0; }; class Button : public Component { public: void add(std::shared_ptr\u003cComponent\u003e) override { /* ä¸å…è®¸æ·»åŠ å­æ§ä»¶ */ } void remove(std::shared_ptr\u003cComponent\u003e) override { /* ä¸å…è®¸åˆ é™¤å­æ§ä»¶ */ } void display(int depth) const override { std::cout \u003c\u003c std::string(depth * 2, '-') \u003c\u003c \"Button\\n\"; } }; class TextBox : public Component { public: void add(std::shared_ptr\u003cComponent\u003e) override { /* ä¸å…è®¸æ·»åŠ å­æ§ä»¶ */ } void remove(std::shared_ptr\u003cComponent\u003e) override { /* ä¸å…è®¸åˆ é™¤å­æ§ä»¶ */ } void display(int depth) const override { std::cout \u003c\u003c std::string(depth * 2, '-') \u003c\u003c \"TextBox\\n\"; } }; class Panel : public Component { public: void add(std::shared_ptr\u003cComponent\u003e child) override { children.push_back(child); } void remove(std::shared_ptr\u003cComponent\u003e child) override { children.erase( std::remove_if(children.begin(), children.end(), [\u0026](const std::shared_ptr\u003cComponent\u003e\u0026 c) { return c == child; }), children.end()); } void display(int depth) const override { std::cout \u003c\u003c std::string(depth * 2, '-') \u003c\u003c \"Panel\\n\"; for (const auto\u0026 child : children) { child-\u003edisplay(depth + 1); } } private: std::vector\u003cstd::shared_ptr\u003cComponent\u003e\u003e children; }; ç»„åˆæ¨¡å¼åœºæ™¯ éœ€è¦æ„å»ºå…·æœ‰éƒ¨åˆ†-æ•´ä½“å±‚æ¬¡ç»“æ„çš„åœºæ™¯ï¼Œæ¯”å¦‚ç»„ç»‡æ¶æ„ç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿçš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ç»„ç»‡ç­‰ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:5:3","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"è£…é¥°æ¨¡å¼ åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚ï¼ˆå¯¹è±¡ç»“æ„å‹ï¼‰ è£…é¥°æ¨¡å¼ä¼˜ç‚¹ åŸºæœ¬è¦æ±‚ classDiagram class Component { +operation() } class ConcreteComponent { +operation() } class Decorator { +operation() } class ConcreteDecoratorA { -addedState: +operation() } class ConcreteDecoratorB { +operation() +addedBehavior() } Component \u003c|-- ConcreteComponent : Inheritance Component \u003c|-- Decorator : Inheritance Component \u003c--o Decorator : Aggregation Decorator \u003c|-- ConcreteDecoratorA : Inheritance Decorator \u003c|-- ConcreteDecoratorB : Inheritance classDiagram class Component { +operation() } class ConcreteComponent { +operation() } class Decorator { +operation() } class ConcreteDecoratorA { -addedState: +operation() } class ConcreteDecoratorB { +operation() +addedBehavior() } Component \u003c|-- ConcreteComponent : Inheritance Component \u003c|-- Decorator : Inheritance Component \u003c--o Decorator : Aggregation Decorator \u003c|-- ConcreteDecoratorA : Inheritance Decorator \u003c|-- ConcreteDecoratorB : Inheritance Component(æŠ½è±¡æ„ä»¶): å£°æ˜äº†åœ¨å…·ä½“æ„ä»¶ä¸­å®ç°çš„ä¸šåŠ¡æ–¹æ³• ConcreteComponent(å…·ä½“æ„ä»¶):å®ç°äº†åœ¨æŠ½è±¡æ„ä»¶ä¸­å£°æ˜çš„æ–¹æ³•ï¼Œè£…é¥°å™¨å¯ä»¥ç»™å®ƒå¢åŠ é¢å¤–çš„èŒè´£ Decorator(æŠ½è±¡è£…é¥°ç±»):ç»´æŠ¤ä¸€ä¸ªæŒ‡å‘æŠ½è±¡æ„ä»¶å¯¹è±¡çš„å¼•ç”¨ï¼Œé€šè¿‡è¯¥å¼•ç”¨å¯ä»¥è°ƒç”¨è£…é¥°ä¹‹å‰æ„ä»¶å¯¹è±¡çš„æ–¹æ³•ï¼Œå¹¶é€šè¿‡å…¶å­ç±»æ‰©å±•è¯¥æ–¹æ³•ï¼Œä»¥è¾¾åˆ°è£…é¥°çš„ç›®çš„ ConcreteDecoratorA(å…·ä½“è£…é¥°ç±»):ç”¨åœ¨æŠ½è±¡è£…é¥°ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œå¹¶å¯ä»¥å¢åŠ æ–°çš„æ–¹æ³•ç”¨ä»¥æ‰©å……å¯¹è±¡çš„è¡Œä¸º è£…é¥°æ¨¡å¼å®ç° // Component æŠ½è±¡ç»„ä»¶ï¼šå®šä¹‰äº†åŠ å¯†æ¥å£ class Encryptor { public: virtual ~Encryptor() {} virtual std::string encrypt(const std::string \u0026input) const = 0; }; // ConcreteComponent å…·ä½“ç»„ä»¶ï¼šåŸå§‹å­—ç¬¦ä¸²ï¼Œæ²¡æœ‰åŠ å¯† class PlainText : public Encryptor { public: std::string encrypt(const std::string \u0026input) const override { return input; } }; // Decorator æŠ½è±¡è£…é¥°å™¨ï¼šç»§æ‰¿è‡ª Encryptorï¼Œä¸ºè£…é¥°å™¨å®šä¹‰æ¥å£ class EncryptDecorator : public Encryptor { public: explicit EncryptDecorator(std::unique_ptr\u003cEncryptor\u003e encryptor) : m_encryptor(std::move(encryptor)) {} std::string encrypt(const std::string \u0026input) const override { return m_encryptor-\u003eencrypt(input); } private: std::unique_ptr\u003cEncryptor\u003e m_encryptor; }; // ConcreteDecoratorA å…·ä½“è£…é¥°å™¨ï¼šç§»ä½åŠ å¯† class ShiftEncryptor : public EncryptDecorator { public: explicit ShiftEncryptor(std::unique_ptr\u003cEncryptor\u003e encryptor) : EncryptDecorator(std::move(encryptor)) {} std::string encrypt(const std::string \u0026input) const override { std::string encrypted = EncryptDecorator::encrypt(input); for (char \u0026c : encrypted) { if (isalpha(c)) { c = (c \u003e= 'a' \u0026\u0026 c \u003c= 'z') ? ((c - 'a' + 3) % 26 + 'a') : ((c - 'A' + 3) % 26 + 'A'); } } return encrypted; } }; è£…é¥°æ¨¡å¼åœºæ™¯ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:5:4","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"å¤–è§‚æ¨¡å¼ å¤–éƒ¨ä¸ä¸€ä¸ªå­ç³»ç»Ÿçš„é€šä¿¡é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„å¤–è§‚è§’è‰²è¿›è¡Œï¼Œä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„å…¥å£ã€‚ï¼ˆå¯¹è±¡ç»“æ„å‹ï¼‰ åŸºæœ¬è¦æ±‚ classDiagram Client ..\u003e Facde : Dependency Facde --\u003e SubSystemA : Association Facde --\u003e SubSystemB : Association Facde --\u003e SubSystemC : Association classDiagram Client ..\u003e Facde : Dependency Facde --\u003e SubSystemA : Association Facde --\u003e SubSystemB : Association Facde --\u003e SubSystemC : Associationå¤–è§‚æ¨¡å¼å®ç° // é€šè®¯å½•å¤‡ä»½å®ç° class ContactsBackup { public: bool backup() { std::cout \u003c\u003c \"Backing up contacts...\\n\"; return true; } }; // çŸ­ä¿¡å¤‡ä»½å®ç° class SMSBackup { public: bool backup() { std::cout \u003c\u003c \"Backing up SMS...\\n\"; return true; } }; class BackupFacade { public: BackupFacade(ContactsBackup *contacts_backup = nullptr, SMSBackup *sms_backup = nullptr) { this-\u003econtacts_backup_ = contacts_backup ? : new ContactsBackup; this-\u003esms_backup_ = sms_backup ? : new SMSBackup; } ~BackupFacade() { delete contacts_backup_; delete sms_backup_; } bool oneClickBackup() { std::cout \u003c\u003c \"Starting one-click backup...\\n\"; bool backupSuccess = this-\u003econtacts_backup_-\u003ebackup() \u0026\u0026 this-\u003esms_backup_-\u003ebackup(); if (backupSuccess) { std::cout \u003c\u003c \"One-click backup completed successfully.\\n\"; } else { std::cout \u003c\u003c \"One-click backup failed.\\n\"; } return backupSuccess; } private: ContactsBackup *contacts_backup_; SMSBackup *sms_backup_; }; å¤–è§‚æ¨¡å¼åœºæ™¯ ä¸ä¿®æ”¹å®¢æˆ·ç«¯ä»£ç ï¼šå¼•å…¥ä¸€ä¸ªæŠ½è±¡å¤–è§‚ç±»ï¼Œå®¢æˆ·ç«¯é’ˆå¯¹æŠ½è±¡å¤–è§‚ç±»ç¼–ç¨‹ï¼Œè€Œåœ¨è¿è¡Œæ—¶å†ç¡®å®šå…·ä½“å¤–è§‚ç±» ç»“åˆå•ä¾‹ç±»ï¼Œé™ä½ç³»ç»Ÿèµ„æºæ¶ˆè€— å¤šä¸šåŠ¡å¯¹è±¡äº¤äº’åœºæ™¯ï¼›ç³»ç»Ÿé¦–é¡µå¯¼èˆªé¡µé¢ï¼Œèœå•å’Œå·¥å…·æ  ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:5:5","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"äº«å…ƒæ¨¡å¼ è¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡çš„å¤ç”¨ã€‚ï¼ˆå¯¹è±¡ç»“æ„å‹ï¼‰ åŸºæœ¬è¦æ±‚ classDiagram class Flyweight { +operation(extrinsicState) } class FlyweightFactory{ - flyweights:HashMap +getFlyweight(String key) Flyweight } class ConcreteFlyweight { -intrinsicState: +operation(extrinsicState) } class UnsharedConcreteFlyweight { -allState: +operation(extrinsicState) } FlyweightFactory o--\u003e Flyweight: Aggregation Flyweight \u003c|.. ConcreteFlyweight: Realization Flyweight \u003c|.. UnsharedConcreteFlyweight: Realization classDiagram class Flyweight { +operation(extrinsicState) } class FlyweightFactory{ - flyweights:HashMap +getFlyweight(String key) Flyweight } class ConcreteFlyweight { -intrinsicState: +operation(extrinsicState) } class UnsharedConcreteFlyweight { -allState: +operation(extrinsicState) } FlyweightFactory o--\u003e Flyweight: Aggregation Flyweight \u003c|.. ConcreteFlyweight: Realization Flyweight \u003c|.. UnsharedConcreteFlyweight: Realization FlyWeightï¼ˆæŠ½è±¡äº«å…ƒç±»ï¼‰ FlyweightFactoryï¼ˆäº«å…ƒå·¥å‚ç±»ï¼‰ï¼šæä¾›ä¸€ä¸ªç”¨äºå­˜å‚¨äº«å…ƒå¯¹è±¡çš„äº«å…ƒæ±  ConcreteFlyweightï¼ˆå…·ä½“äº«å…ƒç±»ï¼‰ UnsharedConcreteFlyweightï¼ˆéå…±äº«å…·ä½“äº«å…ƒç±»ï¼‰ äº«å…ƒæ¨¡å¼å®ç° // FlyWeight æŠ½è±¡äº«å…ƒç±» class Media { public: virtual void display(int x, int y, int width, int height) const = 0; virtual ~Media() = default; }; // å…·ä½“äº«å…ƒç±» - å›¾ç‰‡ class Image : public Media { private: std::string filename; public: Image(const std::string\u0026 filename) : filename(filename) {} void display(int x, int y, int width, int height) const override { std::cout \u003c\u003c \"Displaying image \" \u003c\u003c filename \u003c\u003c \" at (\" \u003c\u003c x \u003c\u003c \", \" \u003c\u003c y \u003c\u003c \"), size: (\" \u003c\u003c width \u003c\u003c \"x\" \u003c\u003c height \u003c\u003c \").\\n\"; } }; // å…·ä½“äº«å…ƒç±» - è§†é¢‘ class Video : public Media { private: std::string filename; public: Video(const std::string\u0026 filename) : filename(filename) {} void display(int x, int y, int width, int height) const override { std::cout \u003c\u003c \"Playing video \" \u003c\u003c filename \u003c\u003c \" at (\" \u003c\u003c x \u003c\u003c \", \" \u003c\u003c y \u003c\u003c \"), size: (\" \u003c\u003c width \u003c\u003c \"x\" \u003c\u003c height \u003c\u003c \").\\n\"; } }; // FlyweightFactory class MediaFactory { public: std::shared_ptr\u003cMedia\u003e getMedia(const std::string\u0026 type, const std::string\u0026 filename) { std::string key = type + \":\" + filename; if (mediaPool.find(key) == mediaPool.end()) { if (type == \"image\") { mediaPool[key] = std::make_shared\u003cImage\u003e(filename); } else if (type == \"video\") { mediaPool[key] = std::make_shared\u003cVideo\u003e(filename); } } return mediaPool[key]; } private: std::unordered_map\u003cstd::string, std::shared_ptr\u003cMedia\u003e\u003e mediaPool; }; ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:5:6","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"ä»£ç†æ¨¡å¼ ç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹åŸå¯¹è±¡çš„å¼•ç”¨ã€‚ï¼ˆå¯¹è±¡ç»“æ„å‹ï¼‰ åŸºæœ¬è¦æ±‚ classDiagram class Client class Subject { + request() } class RealSubject { + request() } class Proxy { - realSubject : RealSubject + preRequest() + request(); + postRequest() } Client ..\u003e Subject : Dependency Subject \u003c|-- Proxy : Inheritance Subject \u003c|-- RealSubject : Inheritance Proxy --\u003e RealSubject : Association classDiagram class Client class Subject { + request() } class RealSubject { + request() } class Proxy { - realSubject : RealSubject + preRequest() + request(); + postRequest() } Client ..\u003e Subject : Dependency Subject \u003c|-- Proxy : Inheritance Subject \u003c|-- RealSubject : Inheritance Proxy --\u003e RealSubject : Associationä»£ç†æ¨¡å¼å®ç° // Subject æŠ½è±¡ä¸»é¢˜ class Image { public: virtual void display() = 0; virtual ~Image() = default; }; // RealSubject çœŸå®ä¸»é¢˜ ç½‘ç»œå›¾ç‰‡ class RealImage : public Image { public: RealImage(const std::string\u0026 filename) : file_name{filename} {} void display() override { std::cout \u003c\u003c \"display image: \" \u003c\u003c file_name \u003c\u003c \".\\n\"; } private: std::string file_name; }; // Proxy å›¾æ ‡ä»£ç† class IconProxy : public Image { public: IconProxy(const std::string\u0026 filename) : file_name(filename) {} void display() override { if (real_subject_ == nullptr) { real_subject_ = std::make_unique\u003cRealImage\u003e(file_name); } std::cout \u003c\u003c \"Displaying icon for image: \" \u003c\u003c file_name \u003c\u003c std::endl; real_subject_-\u003edisplay(); } private: std::string file_name; std::unique_ptr\u003cRealImage\u003e real_subject_; }; // ImageManager ç®¡ç†æ‰€æœ‰URLåŠå…¶å›¾ç‰‡é›†åˆ class ImageManager { public: void addImage(const std::string\u0026 url, const std::string\u0026 filename) { view_url[url].emplace(std::make_unique\u003cIconProxy\u003e(filename)); } const std::set\u003cstd::unique_ptr\u003cImage\u003e\u003e\u0026 getImagesForUrl(const std::string\u0026 url) const { return view_url.at(url); } private: std::unordered_map\u003cstd::string, std::set\u003cstd::unique_ptr\u003cImage\u003e\u003e\u003e view_url; }; // ImageViewer æ˜¾ç¤ºç‰¹å®šURLçš„å›¾ç‰‡ class ImageViewer { public: ImageViewer(const std::string\u0026 url, const ImageManager\u0026 manager) : url{url}, manager{manager} {} void displayImages() { const auto\u0026 images = manager.getImagesForUrl(url); for (const auto\u0026 image : images) { image-\u003edisplay(); std::cout \u003c\u003c \"\\n\"; } } private: std::string url; const ImageManager\u0026 manager; }; ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:5:7","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"è¡Œä¸ºå‹æ¨¡å¼ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:6:0","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"è´£ä»»é“¾æ¨¡å¼ é¿å…å°†è¯·æ±‚å‘é€è€…ä¸æ¥æ”¶è€…è€¦åˆåœ¨ä¸€èµ·ï¼Œè®©å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šæ¥æ”¶è¯·æ±‚ï¼Œå°†è¿™äº›å¯¹è±¡è¿æ¥æˆä¸€æ¡é“¾ï¼Œå¹¶ä¸”æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯·æ±‚ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚ï¼ˆå¯¹è±¡è¡Œä¸ºå‹ï¼‰ åŸºæœ¬è¦æ±‚ classDiagram class Client class Handler { # successor:Handler + handleRequest() } class ConcreteHanderA { + handleRequest() } class ConcreteHanderB { + handleRequest() } Client ..\u003e Handler : Dependency Handler o--\u003e Handler : Aggregation Handler \u003c|-- ConcreteHanderA : Inheritance Handler \u003c|-- ConcreteHanderB : Inheritance classDiagram class Client class Handler { # successor:Handler + handleRequest() } class ConcreteHanderA { + handleRequest() } class ConcreteHanderB { + handleRequest() } Client ..\u003e Handler : Dependency Handler o--\u003e Handler : Aggregation Handler \u003c|-- ConcreteHanderA : Inheritance Handler \u003c|-- ConcreteHanderB : Inheritance Handler(æŠ½è±¡å¤„ç†è€…)ï¼šå®šä¹‰äº†å¯¹ä¸‹å®¶çš„å¼•ç”¨å¯¹è±¡ï¼Œä»¥ä¾¿å°†è¯·æ±‚è½¬å‘ç»™ä¸‹å®¶ ConcreteHander(å…·ä½“å¤„ç†è€…)ï¼šå¤„ç†è¯·æ±‚ï¼Œè½¬å‘è¯·æ±‚ è´£ä»»é“¾æ¨¡å¼å®ç° // æŠ½è±¡å¤„ç†è€… class Approver { public: virtual void processLeaveApplication(int days) = 0; virtual ~Approver() = default; }; // å…·ä½“å¤„ç†è€…ï¼šä¸»ä»» class Director : public Approver { public: void processLeaveApplication(int days) override { if (days \u003c 3) { std::cout \u003c\u003c \"Director approved the leave application.\" \u003c\u003c std::endl; } else { std::cout \u003c\u003c \"Director cannot approve, passing to next approver.\" \u003c\u003c std::endl; if (nextApprover) { nextApprover-\u003eprocessLeaveApplication(days); } } } void setNextApprover(Approver* next) { nextApprover = next; } private: Approver* nextApprover = nullptr; }; // å…·ä½“å¤„ç†è€…ï¼šç»ç† class Manager : public Approver { public: void processLeaveApplication(int days) override { if (days \u003e= 3 \u0026\u0026 days \u003c 10) { std::cout \u003c\u003c \"Manager approved the leave application.\" \u003c\u003c std::endl; } else { std::cout \u003c\u003c \"Manager cannot approve, passing to next approver.\" \u003c\u003c std::endl; if (nextApprover) { nextApprover-\u003eprocessLeaveApplication(days); } } } void setNextApprover(Approver* next) { nextApprover = next; } private: Approver* nextApprover = nullptr; }; // å…·ä½“å¤„ç†è€…ï¼šæ€»ç»ç† class GeneralManager : public Approver { public: void processLeaveApplication(int days) override { if (days \u003e= 10 \u0026\u0026 days \u003c 30) { std::cout \u003c\u003c \"General Manager approved the leave application.\" \u003c\u003c std::endl; } else if (days \u003e= 30) { std::cout \u003c\u003c \"Leave application rejected: too many days requested.\" \u003c\u003c std::endl; } else { std::cout \u003c\u003c \"General Manager cannot approve, passing to next approver.\" \u003c\u003c std::endl; if (nextApprover) { nextApprover-\u003eprocessLeaveApplication(days); } } } void setNextApprover(Approver* next) { nextApprover = next; } private: Approver* nextApprover = nullptr; }; è´£ä»»é“¾æ¨¡å¼åœºæ™¯ åˆ†çº§å®¡æ‰¹ï¼Œå¤šå¯¹è±¡å¯ä»¥å¤„ç†åŒä¸€è¯·æ±‚ï¼Œå…·ä½“å“ªä¸ªå¯¹è±¡å¤„ç†è¯¥è¯·æ±‚å¾…è¿è¡Œæ—¶åˆ»å†ç¡®å®šã€‚ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:6:1","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"å‘½ä»¤æ¨¡å¼ å°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œå¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ï¼›å¯¹è¯·æ±‚æ’é˜Ÿæˆ–è€…è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œä»¥åŠæ”¯æŒå¯æ’¤é”€çš„æ“ä½œã€‚ï¼ˆå¯¹è±¡è¡Œä¸ºå‹ï¼‰ å‘½ä»¤é˜Ÿåˆ—ã€‚æ”¯æŒæ’¤é”€å’Œæ¢å¤æ“ä½œã€‚å®å‘½ä»¤ã€‚ åŸºæœ¬è¦æ±‚ classDiagram class Client class Invoker class Command { + execute() } class ConcreteCommand { - state: + execute() } class Receiver { + action() } Client ..\u003e Invoker : Dependenvy Client ..\u003e Command : Dependenvy Invoker o--\u003e Command : Aggregation Command \u003c|-- ConcreteCommand : Inheritance ConcreteCommand --\u003e Receiver : Association classDiagram class Client class Invoker class Command { + execute() } class ConcreteCommand { - state: + execute() } class Receiver { + action() } Client ..\u003e Invoker : Dependenvy Client ..\u003e Command : Dependenvy Invoker o--\u003e Command : Aggregation Command \u003c|-- ConcreteCommand : Inheritance ConcreteCommand --\u003e Receiver : Association Command(æŠ½è±¡å‘½ä»¤ç±») ConcreteCommand(å…·ä½“å‘½ä»¤ç±») Invoker(è°ƒç”¨è€…)ï¼šé€šè¿‡å‘½ä»¤å¯¹è±¡æ¥æ‰§è¡Œè¯·æ±‚ Receiver(æ¥æ”¶è€…) å‘½ä»¤æ¨¡å¼å®ç° class Command { public: virtual ~Command() {} virtual void execute() = 0; }; // Receiver æ¥æ”¶è€… class BoardScreen { public: void open() { std::cout \u003c\u003c \"Opening board screen\" \u003c\u003c std::endl; } void create() { std::cout \u003c\u003c \"Creating board content\" \u003c\u003c std::endl; } void edit() { std::cout \u003c\u003c \"Editing board content\" \u003c\u003c std::endl; } }; // ConcreteCommand å…·ä½“å‘½ä»¤ç±» class OpenCommand : public Command { public: OpenCommand(BoardScreen* screen) : boardScreen(screen) {} void execute() override { boardScreen-\u003eopen(); } private: BoardScreen* boardScreen; }; class CreateCommand : public Command { public: CreateCommand(BoardScreen* screen) : boardScreen(screen) {} void execute() override { boardScreen-\u003ecreate(); } private: BoardScreen* boardScreen; }; class EditCommand : public Command { public: EditCommand(BoardScreen* screen) : boardScreen(screen) {} void execute() override { boardScreen-\u003eedit(); } private: BoardScreen* boardScreen; }; // Invoker è°ƒç”¨è€… class MenuItem { public: void setCommand(Command* command) { this-\u003ecommand = command; } void click() { if (command) { command-\u003eexecute(); } } private: Command* command = nullptr; }; ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:6:2","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"è§£é‡Šå™¨æ¨¡å¼ å®šä¹‰ä¸€ä¸ªè¯­è¨€çš„æ–‡æ³•ï¼Œå¹¶ä¸”å»ºç«‹ä¸€ä¸ªè§£é‡Šå™¨æ¥è§£é‡Šè¯¥è¯­è¨€ä¸­çš„å¥å­ã€‚ï¼ˆç±»è¡Œä¸ºå‹ï¼‰ åŸºæœ¬è¦æ±‚ classDiagram class Client class Context class AbstractExpression { + interpret (Contest ctx) } class TerminalExpression { + interpret (Contest ctx) } class NonterminaltExpression { + interpret (Contest ctx) } Client ..\u003e Context : Dependency Client ..\u003e AbstractExpression : Dependency Context \u003c.. AbstractExpression : Dependency AbstractExpression \u003c|-- TerminalExpression :Inheritance AbstractExpression \u003c|-- NonterminaltExpression :Inheritance AbstractExpression \u003c--o NonterminaltExpression :Aggregation classDiagram class Client class Context class AbstractExpression { + interpret (Contest ctx) } class TerminalExpression { + interpret (Contest ctx) } class NonterminaltExpression { + interpret (Contest ctx) } Client ..\u003e Context : Dependency Client ..\u003e AbstractExpression : Dependency Context \u003c.. AbstractExpression : Dependency AbstractExpression \u003c|-- TerminalExpression :Inheritance AbstractExpression \u003c|-- NonterminaltExpression :Inheritance AbstractExpression \u003c--o NonterminaltExpression :Aggregation Context(ç¯å¢ƒç±»)ï¼šç”¨äºå­˜å‚¨è§£é‡Šå™¨ä¹‹å¤–çš„ä¸€äº›å…¨å±€ä¿¡æ¯ï¼Œé€šå¸¸ç”¨æ¥ä¸´æ—¶å­˜å‚¨éœ€è¦è§£é‡Šçš„è¯­å¥ AbstractExpression(æŠ½è±¡è¡¨è¾¾å¼) TerminalExpression(ç»ˆç»“ç¬¦è¡¨è¾¾å¼)ï¼šå®ç°äº†ä¸æ–‡æ³•ä¸­çš„ç»ˆç»“ç¬¦ç›¸å…³è”çš„è§£é‡Šæ“ä½œï¼Œåœ¨å¥å­ä¸­çš„æ¯ä¸€ä¸ªç»ˆç»“ç¬¦éƒ½æ˜¯è¯¥ç±»çš„ä¸€ä¸ªå®ä¾‹ NonterminaltExpression(éç»ˆç»“ç¬¦è¡¨è¾¾å¼)ï¼šå…¶è§£é‡Šæ“ä½œä¸€èˆ¬é€šè¿‡é€’å½’çš„æ–¹å¼æ¥å®Œæˆ è§£é‡Šå™¨æ¨¡å¼å®ç° è§£é‡Šå™¨æ¨¡å¼åœºæ™¯ æ­£åˆ™è¡¨è¾¾å¼ã€XMLæ–‡æ¡£è§£é‡Šç­‰é¢†åŸŸ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:6:3","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"è¿­ä»£å™¨æ¨¡å¼ æä¾›ä¸€ç§æ–¹æ³•æ¥è®¿é—®èšåˆå¯¹è±¡ï¼Œè€Œä¸ç”¨æš´éœ²è¿™ä¸ªå¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚ï¼ˆå¯¹è±¡è¡Œä¸ºå‹ï¼‰ åŸºæœ¬è¦æ±‚ classDiagram class Aggergate { +createIterator() } class ConcreteAggerate { +createIterator() } class Iterator { +first() +next() +hasNext() +currentItem() } class ConcreteIterator { +first() +next() +hasNext() +currentItem() } Aggergate \u003c|.. ConcreteAggerate : Realization Iterator \u003c|.. ConcreteIterator : Realization ConcreteAggerate ..\u003e ConcreteIterator : Dependency ConcreteAggerate \u003c-- ConcreteIterator : Association classDiagram class Aggergate { +createIterator() } class ConcreteAggerate { +createIterator() } class Iterator { +first() +next() +hasNext() +currentItem() } class ConcreteIterator { +first() +next() +hasNext() +currentItem() } Aggergate \u003c|.. ConcreteAggerate : Realization Iterator \u003c|.. ConcreteIterator : Realization ConcreteAggerate ..\u003e ConcreteIterator : Dependency ConcreteAggerate \u003c-- ConcreteIterator : Association Iterator(æŠ½è±¡è¿­ä»£å™¨)ï¼šå£°æ˜äº†ç”¨äºéå†æ•°æ®å…ƒç´ çš„æ–¹æ³• ConcreteIterator(å…·ä½“è¿­ä»£å™¨)ï¼šå®Œæˆå¯¹èšåˆå¯¹è±¡çš„éå†ï¼ŒåŒæ—¶åœ¨å…·ä½“è¿­ä»£å™¨ä¸­é€šè¿‡æ¸¸æ ‡æ¥è®°å½•åœ¨èšåˆå¯¹è±¡ä¸­æ‰€å¤„çš„å½“å‰ä½ç½® Aggergate(æŠ½è±¡èšåˆç±»)ï¼šç”¨äºå­˜å‚¨å’Œç®¡ç†å…ƒç´ å¯¹è±¡ï¼›å°†è¿­ä»£å™¨ç±»è®¾è®¡ä¸ºèšåˆç±»çš„å†…éƒ¨ç±»ï¼ˆè¿­ä»£å™¨è®¿é—®èšåˆå¯¹è±¡æ•°æ®ï¼‰ ConcreteAggerate(å…·ä½“èšåˆç±»)ï¼šè¿”å›ä¸€ä¸ªä¸è¯¥å…·ä½“èšåˆç±»å¯¹åº”çš„å…·ä½“è¿­ä»£å™¨ è¿­ä»£å™¨æ¨¡å¼å®ç° template \u003ctypename T, typename U\u003e class PageIterator { public: typedef typename std::vector\u003cT\u003e::iterator iter_type; PageIterator(U *p_data, size_t page_size, size_t page_index) : m_p_data_(p_data), page_size_(page_size), current_index_(page_index * page_size) { m_it_ = m_p_data_-\u003em_data_.begin() + current_index_; } void NextPage() { current_index_ += page_size_; m_it_ = m_p_data_-\u003em_data_.begin() + current_index_; } bool IsDone() { return current_index_ \u003e= m_p_data_-\u003em_data_.size(); } std::vector\u003cT\u003e CurrentPage() { std::vector\u003cT\u003e page_elements; size_t remaining = std::min(page_size_, m_p_data_-\u003em_data_.size() - current_index_); for (size_t i = 0; i \u003c remaining; ++i) { page_elements.push_back(*m_it_); ++m_it_; } return page_elements; } private: U *m_p_data_; // æŒ‡å‘åˆ†é¡µå®¹å™¨çš„æŒ‡é’ˆ iter_type m_it_; // å½“å‰è¿­ä»£å™¨ä½ç½® size_t page_size_; size_t current_index_; }; template \u003cclass T\u003e class PaginatedContainer { friend class PageIterator\u003cT, PaginatedContainer\u003cT\u003e\u003e; public: void Add(T a) { m_data_.push_back(a); } size_t Size() const { return m_data_.size(); } PageIterator\u003cT, PaginatedContainer\u003cT\u003e\u003e CreatePageIterator(size_t page_size, size_t page_index = 0) { return PageIterator\u003cT, PaginatedContainer\u003cT\u003e\u003e(this, page_size, page_index); } private: std::vector\u003cT\u003e m_data_; }; è¿­ä»£å™¨æ¨¡å¼åœºæ™¯ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:6:4","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"ä¸­ä»‹è€…æ¨¡å¼ ç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚ï¼ˆå¯¹è±¡è¡Œä¸ºå‹ï¼‰ ä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾å¼åœ°ç›¸äº’å¼•ç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚ åŸºæœ¬è¦æ±‚ classDiagram class Mediator class ConcreteMediator class Colleague class ConcreteColleageA class ConcreteColleageB Mediator \u003c|-- ConcreteMediator : Inheritance Mediator \u003c-- Colleague : Association Colleague \u003c|-- ConcreteColleageA : Inheritance Colleague \u003c|-- ConcreteColleageB : Inheritance ConcreteMediator --\u003e ConcreteColleageA : Association ConcreteMediator --\u003e ConcreteColleageB : Association classDiagram class Mediator class ConcreteMediator class Colleague class ConcreteColleageA class ConcreteColleageB Mediator \u003c|-- ConcreteMediator : Inheritance Mediator \u003c-- Colleague : Association Colleague \u003c|-- ConcreteColleageA : Inheritance Colleague \u003c|-- ConcreteColleageB : Inheritance ConcreteMediator --\u003e ConcreteColleageA : Association ConcreteMediator --\u003e ConcreteColleageB : Association Mediator(æŠ½è±¡ä¸­ä»‹è€…)ï¼šç”¨äºä¸å„åŒäº‹å¯¹è±¡ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚ä½œç”¨ï¼šä¸­è½¬ï¼ˆç»“æ„æ€§ï¼‰ï¼Œåè°ƒï¼ˆè¡Œä¸ºæ€§ï¼‰ ConcreteMediator(å…·ä½“ä¸­ä»‹è€…)ï¼šé€šè¿‡åè°ƒå„ä¸ªåŒäº‹å¯¹è±¡æ¥å®ç°åä½œè¡Œä¸ºï¼Œç»´æŒäº†å¯¹å„ä¸ªåŒäº‹å¯¹è±¡çš„å¼•ç”¨ Colleague(æŠ½è±¡åŒäº‹ç±»)ï¼šå®šä¹‰å„ä¸ªåŒäº‹ç±»å…¬æœ‰çš„æ–¹æ³•ï¼ŒåŒäº‹ç»´æŒäº†ä¸€ä¸ªå¯¹æŠ½è±¡ä¸­ä»‹è€…ç±»çš„å¼•ç”¨ ConcreteColleageA(å…·ä½“åŒäº‹ç±»)ï¼šé€šè¿‡ä¸­ä»‹è€…æ¥é—´æ¥å®Œæˆä¸å…¶ä»–åŒäº‹ç±»çš„é€šä¿¡ ä¸­ä»‹è€…æ¨¡å¼å®ç° class Pane; // ä¸­ä»‹è€…æ¥å£ class Mediator { public: virtual ~Mediator() {} virtual void PaneChanged(Pane* pane) = 0; }; // çª—æ ¼åŸºç±»æˆ–æ¥å£ class Pane { public: virtual ~Pane() {} virtual void SetMediator(Mediator* mediator) = 0; virtual void Update() = 0; protected: bool updating = false; }; // å…·ä½“çª—æ ¼ç±» TextPane class TextPane : public Pane { public: void SetMediator(Mediator* mediator) override { this-\u003emediator = mediator; } void Update() override { if (!updating) { updating = true; mediator-\u003ePaneChanged(this); updating = false; } } private: Mediator* mediator; }; // å…·ä½“çª—æ ¼ç±» ListPane class ListPane : public Pane { public: void SetMediator(Mediator* mediator) override { this-\u003emediator = mediator; } void Update() override { if (!updating) { updating = true; mediator-\u003ePaneChanged(this); updating = false; } } private: Mediator* mediator; }; // å…·ä½“ä¸­ä»‹è€…ç±» WindowMediator class WindowMediator : public Mediator { public: void AddPane(Pane* pane) { panes.push_back(pane); pane-\u003eSetMediator(this); } void PaneChanged(Pane* pane) override { if (dynamic_cast\u003cTextPane*\u003e(pane)) { std::cout \u003c\u003c \"Text Pane updated. Updating other panes as needed.\" \u003c\u003c std::endl; } else if (dynamic_cast\u003cListPane*\u003e(pane)) { std::cout \u003c\u003c \"List Pane updated. Updating other panes as needed.\" \u003c\u003c std::endl; } NotifyOtherPanes(); } private: void NotifyOtherPanes() { for (Pane* p : panes) { if (p != currentPane) { p-\u003eUpdate(); } } } std::vector\u003cPane*\u003e panes; Pane* currentPane = nullptr; }; ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:6:5","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"å¤‡å¿˜å½•æ¨¡å¼ åœ¨ä¸ç ´åå°è£…çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ï¼Œç”¨æ¥å°†å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚ï¼ˆå¯¹è±¡è¡Œä¸ºå‹ï¼‰ åŸºæœ¬è¦æ±‚ classDiagram class Originator { -state: +restoreMemento(Memento m) +createMemento() } class Memento { -state: +getState() +setState() } class Caretaker Originator ..\u003e Memento : Dependency Memento \u003c--* Caretaker : Composition classDiagram class Originator { -state: +restoreMemento(Memento m) +createMemento() } class Memento { -state: +getState() +setState() } class Caretaker Originator ..\u003e Memento : Dependency Memento \u003c--* Caretaker : Composition Originator(åŸå‘å™¨)ï¼šåˆ›å»ºä¸€ä¸ªå¤‡å¿˜å½•ï¼Œå¹¶å­˜å‚¨å…¶å½“å‰å†…éƒ¨çŠ¶æ€ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¤‡å¿˜å½•æ¥æ¢å¤å…¶å†…éƒ¨çŠ¶æ€ Memento(å¤‡å¿˜å½•)ï¼šå­˜å‚¨åŸå‘å™¨çš„å†…éƒ¨çŠ¶æ€ Caretaker(è´Ÿè´£äºº)ï¼šåªè´Ÿè´£å­˜å‚¨å¯¹è±¡ï¼Œè€Œä¸èƒ½ä¿®æ”¹å¯¹è±¡ï¼Œä¹Ÿæ— é¡»çŸ¥é“å¯¹è±¡çš„å®ç°ç»†èŠ‚ã€‚ å¤‡å¿˜å½•æ¨¡å¼å®ç° // Memento class class Memento { public: Memento(const std::string\u0026 state) : state_(state) {} std::string getState() const { return state_; } void setState(const std::string\u0026 state) { state_ = state; } private: std::string state_; }; // Originator class class Originator { public: Originator() : state_(\"\") {} void setState(const std::string\u0026 state) { std::cout \u003c\u003c \"Originator: Setting state to '\" \u003c\u003c state \u003c\u003c \"'.\\n\"; state_ = state; } std::string getState() const { return state_; } Memento createMemento() { std::cout \u003c\u003c \"Originator: Creating memento.\\n\"; return Memento(state_); } void restoreMemento(const Memento\u0026 memento) { state_ = memento.getState(); std::cout \u003c\u003c \"Originator: State restored to '\" \u003c\u003c state_ \u003c\u003c \"'.\\n\"; } private: std::string state_; }; // Caretaker class class Caretaker { public: Caretaker(Originator* originator) : originator_(originator), current_(-1) {} void createMemento() { Memento memento = originator_-\u003ecreateMemento(); mementos_.push_back(memento); current_ = mementos_.size() - 1; std::cout \u003c\u003c \"Caretaker: Memento created.\\n\"; } void restore() { if (current_ \u003e= 0 \u0026\u0026 current_ \u003c mementos_.size()) { originator_-\u003erestoreMemento(mementos_[current_]); std::cout \u003c\u003c \"Caretaker: State restored.\\n\"; current_--; } else { std::cout \u003c\u003c \"Caretaker: No memento available to restore.\\n\"; } } void redo() { if (current_ + 1 \u003c mementos_.size()) { current_++; originator_-\u003erestoreMemento(mementos_[current_]); std::cout \u003c\u003c \"Caretaker: Redo to next state.\\n\"; } else { std::cout \u003c\u003c \"Caretaker: No redo available.\\n\"; } } private: Originator* originator_; std::vector\u003cMemento\u003e mementos_; size_t current_; }; ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:6:6","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"è§‚å¯Ÿè€…æ¨¡å¼ å®šä¹‰å¯¹è±¡ä¹‹é—´çš„ä¸€ç§ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œä½¿å¾—æ¯å½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå…¶ç›¸å…³ä¾èµ–å¯¹è±¡çš†å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚ï¼ˆå¯¹è±¡è¡Œä¸ºå‹ï¼‰ åŸºæœ¬è¦æ±‚ classDiagram class Subject { +attach(Observer obs) +detach(Observer obs) +notify() } class Observer { + update() } class ConcreteSubject { -subjectState: +getState() +setState() } class ConcreteObserver { -observerState: +upodate() } Subject --\u003e Observer : Association Subject \u003c|-- ConcreteSubject : Inheritance ConcreteSubject \u003c-- ConcreteObserver : Association Observer \u003c|.. ConcreteObserver : Realization classDiagram class Subject { +attach(Observer obs) +detach(Observer obs) +notify() } class Observer { + update() } class ConcreteSubject { -subjectState: +getState() +setState() } class ConcreteObserver { -observerState: +upodate() } Subject --\u003e Observer : Association Subject \u003c|-- ConcreteSubject : Inheritance ConcreteSubject \u003c-- ConcreteObserver : Association Observer \u003c|.. ConcreteObserver : Realization è§‚å¯Ÿè€…æ¨¡å¼å®ç° // æŠ½è±¡è§‚å¯Ÿè€…ç±» class Investor { public: virtual void update(double price) = 0; }; // å…·ä½“è§‚å¯Ÿè€…ç±»ï¼Œè‚¡æ°‘ class StockInvestor : public Investor { public: StockInvestor(std::string name) : name(name) {} void update(double price) override { std::cout \u003c\u003c name \u003c\u003c \" received price update: \" \u003c\u003c price \u003c\u003c std::endl; } private: std::string name; }; // æŠ½è±¡ä¸»é¢˜ç±»ï¼Œè‚¡ç¥¨ class Stock { public: virtual void attach(Investor* investor) = 0; virtual void detach(Investor* investor) = 0; virtual void notify(double price) = 0; virtual void setPrice(double price) = 0; }; // å…·ä½“ä¸»é¢˜ç±»ï¼Œå…·ä½“è‚¡ç¥¨ class ConcreteStock : public Stock { public: void attach(Investor* investor) override { investors.push_back(investor); } void detach(Investor* investor) override { investors.erase(std::remove(investors.begin(), investors.end(), investor), investors.end()); } void notify(double price) override { for (auto investor : investors) { investor-\u003eupdate(price); } } void setPrice(double price) override { if (priceChanged(price)) { notify(price); } } private: bool priceChanged(double price) { if (lastPrice == 0) { lastPrice = price; return false; } double change = (price - lastPrice) / lastPrice; if (std::abs(change) \u003e= 0.05) { lastPrice = price; return true; } return false; } double lastPrice = 0; std::vector\u003cInvestor*\u003e investors; }; ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:6:7","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"çŠ¶æ€æ¨¡å¼ å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å®ƒçš„ç±»ã€‚ï¼ˆå¯¹è±¡è¡Œä¸ºå‹ï¼‰ åŸºæœ¬è¦æ±‚ classDiagram class Context { -state: State +request() +setState(State state) } class State { + handle() } class ConcreteStateA { +handle } class ConcreteStateB { +handle } Context o--\u003e State : Aggregation State \u003c|-- ConcreteStateA : Inheritance State \u003c|-- ConcreteStateB : Inheritance classDiagram class Context { -state: State +request() +setState(State state) } class State { + handle() } class ConcreteStateA { +handle } class ConcreteStateB { +handle } Context o--\u003e State : Aggregation State \u003c|-- ConcreteStateA : Inheritance State \u003c|-- ConcreteStateB : Inheritance Context(ç¯å¢ƒç±»)ï¼šæ‹¥æœ‰å¤šç§çŠ¶æ€çš„å¯¹è±¡ State(æŠ½è±¡çŠ¶æ€ç±»)ï¼šå®šä¹‰ä¸€ä¸ªæ¥å£ä»¥å°è£…ä¸ç¯å¢ƒç±»çš„ä¸€ä¸ªç‰¹å®šçŠ¶æ€ç›¸å…³çš„è¡Œä¸º ä½¿ç”¨ç¯å¢ƒç±»å®ç°çŠ¶æ€è½¬æ¢ ç”±å…·ä½“çŠ¶æ€ç±»æ¥è´Ÿè´£çŠ¶æ€ä¹‹é—´çš„è½¬æ¢ çŠ¶æ€æ¨¡å¼å®ç° çŠ¶æ€æ¨¡å¼åœºæ™¯ å…¬æ–‡çŠ¶æ€çš„è½¬æ¢ã€æ¸¸æˆä¸­è§’è‰²çš„å‡çº§ ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:6:8","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"ç­–ç•¥æ¨¡å¼ å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ç±»ï¼Œå°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œå¹¶è®©å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ï¼ˆå˜åŒ–ï¼‰ã€‚è¯¥æ¨¡å¼ä½¿å¾—ç®—æ³•å¯ç‹¬ç«‹äºä½¿ç”¨ä»–çš„å®¢æˆ·ç¨‹åºï¼ˆç¨³å®šï¼‰è€Œå˜åŒ–ï¼ˆæ‹“å±•ï¼Œå­ç±»åŒ–ï¼‰ã€‚ï¼ˆå¯¹è±¡è¡Œä¸ºå‹ï¼‰ åŸºæœ¬è¦æ±‚ classDiagram class Context { -strategy:Strategy +algorithm() } class Strategy { +algorithm() } class ConcreteStartegyA { +algorithm() } class ConcreteStartegyB { +algorithm() } Context o--\u003e Strategy : Aggregation Strategy \u003c|-- ConcreteStartegyA : Inheritance Strategy \u003c|-- ConcreteStartegyB : Inheritance classDiagram class Context { -strategy:Strategy +algorithm() } class Strategy { +algorithm() } class ConcreteStartegyA { +algorithm() } class ConcreteStartegyB { +algorithm() } Context o--\u003e Strategy : Aggregation Strategy \u003c|-- ConcreteStartegyA : Inheritance Strategy \u003c|-- ConcreteStartegyB : Inheritance Context(ç¯å¢ƒç±») ï¼šç»´æŒä¸€ä¸ªå¯¹æŠ½è±¡ç­–ç•¥ç±»çš„å¼•ç”¨å®ä¾‹ï¼Œç”¨äºå®šä¹‰æ‰€é‡‡ç”¨çš„ç­–ç•¥ã€‚ ç­–ç•¥æ¨¡å¼å®ç° // ç­–ç•¥æ¥å£ï¼šé£æœºè¡Œä¸º class AircraftBehavior { public: virtual ~AircraftBehavior() = default; virtual std::string flightCharacteristics() const = 0; virtual std::string takeoffCharacteristics() const = 0; }; // ç›´å‡æœºçš„å…·ä½“ç­–ç•¥ç±» class HelicopterBehavior : public AircraftBehavior { public: std::string flightCharacteristics() const override { return \"äºšéŸ³é€Ÿé£è¡Œ\"; } std::string takeoffCharacteristics() const override { return \"å‚ç›´èµ·é£\"; } }; // æ­¼å‡»æœºçš„å…·ä½“ç­–ç•¥ç±» class FighterJetBehavior : public AircraftBehavior { public: std::string flightCharacteristics() const override { return \"è¶…éŸ³é€Ÿé£è¡Œ\"; } std::string takeoffCharacteristics() const override { return \"é•¿è·ç¦»èµ·é£\"; } }; // ä¸Šä¸‹æ–‡ç±»ï¼Œç”¨äºæ“ä½œé£æœºæ¨¡æ‹Ÿç³»ç»Ÿ class AircraftSimulator { public: explicit AircraftSimulator(std::unique_ptr\u003cAircraftBehavior\u003e\u0026\u0026 behavior = nullptr) : behavior_(std::move(behavior)) { } void setBehavior(std::unique_ptr\u003cAircraftBehavior\u003e\u0026\u0026 behavior) { behavior_ = std::move(behavior); } void simulateFlight() const { if (behavior_) { std::cout \u003c\u003c \"Flight Characteristics: \" \u003c\u003c behavior_-\u003eflightCharacteristics() \u003c\u003c \"\\n\"; std::cout \u003c\u003c \"Takeoff Characteristics: \" \u003c\u003c behavior_-\u003etakeoffCharacteristics() \u003c\u003c \"\\n\"; } else { std::cout \u003c\u003c \"No aircraft behavior set.\\n\"; } } private: std::unique_ptr\u003cAircraftBehavior\u003e behavior_; }; ç­–ç•¥æ¨¡å¼åœºæ™¯ JAVA SE; PetShop ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:6:9","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"æ¨¡æ¿æ–¹æ³•æ¨¡å¼ å®šä¹‰ä¸€ä¸ªæ“ä½œä¸­ç®—æ³•çš„æ¡†æ¶ï¼ˆç¨³å®šï¼‰ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿï¼ˆå˜åŒ–ï¼‰åˆ°å­ç±»ä¸­ã€‚ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ï¼ˆå¤ç”¨ï¼‰ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰ï¼ˆé‡å†™ï¼‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚ï¼ˆç±»è¡Œä¸ºå‹ï¼‰ åŸºæœ¬è¦æ±‚ classDiagram class AbstractClass { + templateMethod() + primitiveOperation1() + primitiveOperation2() + primitiveOperation3() } class ConcreteClass { + primitiveOperation1() + primitiveOperation2() } AbstractClass \u003c|-- ConcreteClass : Inheritance classDiagram class AbstractClass { + templateMethod() + primitiveOperation1() + primitiveOperation2() + primitiveOperation3() } class ConcreteClass { + primitiveOperation1() + primitiveOperation2() } AbstractClass \u003c|-- ConcreteClass : InheritanceåŸºæœ¬æ–¹æ³•æ˜¯å®ç°ç®—æ³•å„ä¸ªæ­¥éª¤çš„æ–¹æ³•ï¼Œæ˜¯æ¨¡æ¿æ–¹æ³•çš„ç»„æˆéƒ¨åˆ†ã€‚ åŸºæœ¬æ–¹æ³•å¯ä»¥åˆ†ä¸º3ç§ï¼šæŠ½è±¡æ–¹æ³•ï¼ˆAbstract Methodï¼‰ã€å…·ä½“æ–¹æ³•ï¼ˆConcrete Methodï¼‰å’Œé’©å­æ–¹æ³•ï¼ˆHook Methodï¼‰ æ¨¡æ¿æ–¹æ³•æ¨¡å¼å®ç° class DatabaseOperation { public: void runSQL(const std::string \u0026connectionString, const std::string\u0026 sql, bool isQuery) { connectDatabase(connectionString); openDatabase(); if (isQuery) { queryDatabase(sql); } else { updateDatabase(sql); } closeDatabase(); } protected: virtual void connectDatabase(const std::string\u0026 connectionString) = 0; virtual void openDatabase() = 0; virtual void queryDatabase(const std::string\u0026 sql) = 0; virtual void updateDatabase(const std::string\u0026 sql) = 0; virtual void closeDatabase() = 0; }; class JDBCDatabaseOperation : public DatabaseOperation { public: void connectDatabase(const std::string\u0026 connectionString) override { connectionStr = connectionString; std::cout \u003c\u003c \"Connecting to database: \" \u003c\u003c connectionStr \u003c\u003c std::endl; } void openDatabase() override { std::cout \u003c\u003c \"Opening database\" \u003c\u003c std::endl; } void queryDatabase(const std::string\u0026 sql) override { std::cout \u003c\u003c \"Executing query: \" \u003c\u003c sql \u003c\u003c std::endl; } void updateDatabase(const std::string\u0026 sql) override { std::cout \u003c\u003c \"Executing update: \" \u003c\u003c sql \u003c\u003c std::endl; } void closeDatabase() override { std::cout \u003c\u003c \"Closing database\" \u003c\u003c std::endl; } protected: std::string connectionStr; }; ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:6:10","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"è®¿é—®è€…æ¨¡å¼ æä¾›ä¸€ä¸ªä½œç”¨äºæŸå¯¹è±¡ç»“æ„ä¸­çš„å„å…ƒç´ çš„æ“ä½œè¡¨ç¤ºï¼Œå®ƒä½¿å¾—å¯ä»¥åœ¨ä¸æ”¹å˜å„å…ƒç´ çš„ç±»çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°æ“ä½œã€‚ï¼ˆå¯¹è±¡è¡Œä¸ºå‹ï¼‰ åŸºæœ¬è¦æ±‚ classDiagram class Client class Visitor { +visitConcreteElementA(ConcreteElementA elementA) +visitConcreteElementB(ConcreteElementB elementB) } class ConcreteVisitorA { +visitConcreteElementA(ConcreteElementA elementA) +visitConcreteElementB(ConcreteElementB elementB) } class ConcreteVisitorB { +visitConcreteElementA(ConcreteElementA elementA) +visitConcreteElementB(ConcreteElementB elementB) } class ObjectStrucure class Element { + accept(Visitor visitor) } class ConcreteElementA { + accept(Visitor visitor) + +operationA() } class ConcreteElementB { + accept(Visitor visitor) + +operationB() } Client --\u003e Visitor : Association Visitor \u003c|.. ConcreteVisitorA : Realization Visitor \u003c|.. ConcreteVisitorB : Realization Client --\u003e ObjectStrucure : Association ObjectStrucure --\u003e Element : Association Element \u003c|.. ConcreteElementA : Realization Element \u003c|.. ConcreteElementB : Realization classDiagram class Client class Visitor { +visitConcreteElementA(ConcreteElementA elementA) +visitConcreteElementB(ConcreteElementB elementB) } class ConcreteVisitorA { +visitConcreteElementA(ConcreteElementA elementA) +visitConcreteElementB(ConcreteElementB elementB) } class ConcreteVisitorB { +visitConcreteElementA(ConcreteElementA elementA) +visitConcreteElementB(ConcreteElementB elementB) } class ObjectStrucure class Element { + accept(Visitor visitor) } class ConcreteElementA { + accept(Visitor visitor) + +operationA() } class ConcreteElementB { + accept(Visitor visitor) + +operationB() } Client --\u003e Visitor : Association Visitor \u003c|.. ConcreteVisitorA : Realization Visitor \u003c|.. ConcreteVisitorB : Realization Client --\u003e ObjectStrucure : Association ObjectStrucure --\u003e Element : Association Element \u003c|.. ConcreteElementA : Realization Element \u003c|.. ConcreteElementB : Realization Visitor(æŠ½è±¡è®¿é—®è€…)ï¼šä¸ºå¯¹è±¡ç»“æ„ä¸­æ¯ä¸ªå…·ä½“å…ƒç´ ç±»å£°æ˜ä¸€ä¸ªè®¿é—®æ“ä½œ ConcreteVisitor(å…·ä½“è®¿é—®è€…) Element(æŠ½è±¡å…ƒç´ )ï¼šaccept()é€šå¸¸ä»¥ä¸€ä¸ªæŠ½è±¡è®¿é—®è€…ä½œä¸ºå‚æ•° ConcreteElement(å…·ä½“å…ƒç´ )ï¼šè°ƒç”¨è®¿é—®è€…çš„è®¿é—®æ–¹æ³•ä»¥ä¾¿å®Œæˆå¯¹ä¸€ä¸ªå…ƒç´ çš„æ“ä½œ ObjectStructure(å¯¹è±¡ç»“æ„)ï¼šå…ƒç´ çš„é›†åˆï¼Œå®ƒç”¨äºå­˜æ”¾å…ƒç´ å¯¹è±¡ï¼Œå¹¶ä¸”æä¾›äº†éå†å…¶å†…éƒ¨å…ƒç´ çš„æ–¹æ³• è®¿é—®è€…æ¨¡å¼å®ç° class Teacher; class Student; // è®¿é—®è€…æŠ½è±¡ç±» class Visitor { public: virtual ~Visitor() {} virtual void visit(Teacher \u0026t) = 0; virtual void visit(Student \u0026s) = 0; }; // å€™é€‰äººæŠ½è±¡ç±» class Candidate { public: virtual ~Candidate() {} virtual void accept(class Visitor \u0026v) = 0; }; // æ•™å¸ˆç±» class Teacher : public Candidate { public: Teacher(int papers, int feedback) : paperCount(papers), feedbackScore(feedback) {} int getPapers() const { return paperCount; } int getFeedbackScore() const { return feedbackScore; } void accept(Visitor \u0026v) override { v.visit(*this); } private: int paperCount; int feedbackScore; }; // å­¦ç”Ÿç±» class Student : public Candidate { public: Student(int papers, double score) : paperCount(papers), averageScore(score) {} int getPapers() const { return paperCount; } double getAverageScore() const { return averageScore; } void accept(Visitor \u0026v) override { v.visit(*this); } private: int paperCount; double averageScore; }; // å¥–åŠ±å®¡æ‰¹ç³»ç»Ÿå®ç°ä¸ºå…·ä½“è®¿é—®è€… class AwardChecker : public Visitor { public: void visit(Teacher \u0026t) override { if (t.getPapers() \u003e 10 || t.getFeedbackScore() \u003e= 90) { std::cout \u003c\u003c \"Teacher is eligible for Research Award.\" \u003c\u003c std::endl; } if (t.getFeedbackScore() \u003e= 90) { std::cout \u003c\u003c \"Teacher is eligible for Excellent Teaching Award.\" \u003c\u003c std::endl; } } void visit(Student \u0026s) override { if (s.getPapers() \u003e 2 || s.getAverageScore() \u003e= 90) { std::cout \u003c\u003c \"Student is eligible for Research Award.\" \u003c\u003c std::endl; } if (s.getAverageScore() \u003e= 90) { std::cout \u003c\u003c \"Student is eligible for Excellent Performance Award.\" \u003c\u003c std::endl; } } }; ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:6:11","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["C++"],"content":"æ‹“å±•é˜…è¯» è®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ ç§’æ‡‚è®¾è®¡æ¨¡å¼-bilibili æ·±å…¥è®¾è®¡æ¨¡å¼ (refactoringguru.cn) è®¾è®¡æ¨¡å¼çš„è‰ºæœ¯ å¡ç ç½‘è®¾è®¡æ¨¡å¼ä¸“é¢˜ å¡ç ç½‘-23ç§è®¾è®¡æ¨¡å¼ç²¾è®² å•ä¾‹æ¨¡å¼æ¼”å˜ ç±»å›¾ | Mermaid ä¸­æ–‡ç½‘ (nodejs.cn) ","date":"2023-09-15","objectID":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/:7:0","tags":["C++"],"title":"è®¾è®¡æ¨¡å¼","uri":"/posts/c++/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"categories":["Computer"],"content":"Linxç³»ç»Ÿç¼–ç¨‹","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"Linxç³»ç»Ÿç¼–ç¨‹ åœ¨ Linux ä¸­ï¼Œæ‰‹å†ŒèŠ‚å·é€šå¸¸è¢«åˆ†ä¸ºä»¥ä¸‹ 8 ä¸ªéƒ¨åˆ†ï¼š 1ï¼šç”¨æˆ·å‘½ä»¤å’Œå¯æ‰§è¡Œæ–‡ä»¶çš„æ‰‹å†Œé¡µã€‚ 2ï¼šç³»ç»Ÿè°ƒç”¨å’Œå†…æ ¸å‡½æ•°çš„æ‰‹å†Œé¡µã€‚ 3ï¼šC åº“å‡½æ•°çš„æ‰‹å†Œé¡µã€‚ 4ï¼šç‰¹æ®Šæ–‡ä»¶çš„æ‰‹å†Œé¡µï¼Œä¾‹å¦‚è®¾å¤‡æ–‡ä»¶å’Œé©±åŠ¨ç¨‹åºã€‚ 5ï¼šæ–‡ä»¶æ ¼å¼å’Œçº¦å®šçš„æ‰‹å†Œé¡µã€‚ 6ï¼šæ¸¸æˆçš„æ‰‹å†Œé¡µã€‚ 7ï¼šæ‚é¡¹æ‰‹å†Œé¡µï¼Œä¾‹å¦‚æƒ¯ä¾‹ã€å®åŒ…å’Œåè®®ç­‰ã€‚ï¼ˆsignalï¼‰ 8ï¼šç³»ç»Ÿç®¡ç†å‘½ä»¤å’Œå®ˆæŠ¤è¿›ç¨‹çš„æ‰‹å†Œé¡µã€‚ ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:1:0","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"æ–‡ä»¶ä¸IO #include \u003cunistd.h\u003e #include \u003cstring.h\u003e #include \u003cstdio.h\u003e #include \u003cerrno.h\u003e int main(){ int ret; ret = close(10); if(ret == -1){ perror(\"close error\"); } if(ret == -1){ fprintf(stderr, \"close error: %s\\n\", strerror(errno)); } printf(\"EINTR desc = %s\\n\", strerror(EINTR)); // ç³»ç»Ÿè°ƒç”¨è¢«ä¸­æ–­ // man 2 close // E2BIG å‚æ•°åˆ—è¡¨å¤ªé•¿ EACCESS æƒé™ä¸è¶³ EAGAIN é‡è¯• EBADF é”™è¯¯çš„æ–‡ä»¶æè¿°ç¬¦ EBUSY è®¾å¤‡æˆ–èµ„æºå¿™ ECHILD æ— å­è¿›ç¨‹ // EDOM æ•°å­¦å‚æ•°ä¸åœ¨å‡½æ•°åŸŸå†… EEXIST æ–‡ä»¶å·²å­˜åœ¨ EFAULT åœ°å€é”™è¯¯ EFBIG æ–‡ä»¶å¤ªå¤§ EINTR ç³»ç»Ÿè°ƒç”¨è¢«ä¸­æ–­ return 0; } # è¾“å‡º close error: Bad file descriptor close error: Bad file descriptor EINTR desc = Interrupted system call ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:2:0","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"æ–‡ä»¶æè¿°ç¬¦ Linux (int)éè´Ÿæ•´æ•° ï¼ˆæ–‡ä»¶æè¿°ç¬¦ï¼‰ C (FILE* fp)ï¼ˆæ–‡ä»¶æŒ‡é’ˆï¼‰ 0 (STDIN_FILENO) æ ‡å‡†è¾“å…¥ stdin 1 (STDOUT_FILENO) æ ‡å‡†è¾“å‡º stdout 2 (STDERR_FILENO) æ ‡å‡†é”™è¯¯ stderr ç›¸äº’è½¬æ¢å‡½æ•°ï¼š fileno: å°†æ–‡ä»¶æŒ‡é’ˆè½¬æ¢ä¸ºæ–‡ä»¶æè¿°ç¬¦ fdopen: å°†æ–‡ä»¶æè¿°ç¬¦è½¬æ¢ä¸ºæ–‡ä»¶æŒ‡é’ˆ #include \u003cstdlib.h\u003e #include \u003cstdio.h\u003e int main(){ printf(\"fileno(stdin) = %d\\n\", fileno(stdin)); return 0; } # è¾“å‡º fileno(stdin) = 0 ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:2:1","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"æ–‡ä»¶ç³»ç»Ÿè°ƒç”¨ open man 2 open æ‰“å¼€æ–‡æ¡£ ulimit -n ä¸€ä¸ªè¿›ç¨‹èƒ½å¤Ÿæ‰“å¼€çš„æ–‡ä»¶ä¸ªæ•° cat /proc/sys/fs/file-max æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­æ–‡ä»¶æè¿°ç¬¦çš„æœ€å¤§æ•°é‡é™åˆ¶ åŠŸèƒ½ï¼šæ‰“å¼€å¯èƒ½åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¾—åˆ°äº†ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ å‡½æ•°åŸå‹ï¼š int open(const char *path, int flags); int open(const char *path, int flags, mode_t mode); å‡½æ•°å‚æ•° pathï¼šæ–‡ä»¶çš„åç§°ï¼Œå¯ä»¥åŒ…å«ï¼ˆç»å¯¹å’Œç›¸å¯¹ï¼‰è·¯å¾„ flagsï¼šæ–‡ä»¶æ‰“å¼€æ¨¡å¼ å¿…é€‰é¡¹ï¼šä»¥ä¸‹ä¸‰ä¸ªå¸¸æ•°ä¸­å¿…é¡»æŒ‡å®šä¸€ä¸ªï¼Œä¸”ä»…å…è®¸æŒ‡å®šä¸€ä¸ªã€‚é€šè¿‡#include \u003cfcntl.h\u003eè®¿é—® O_RDONLY åªè¯»æ‰“å¼€ O_WRONLY åªå†™æ‰“å¼€ O_RDWR å¯è¯»å¯å†™æ‰“å¼€ ä»¥ä¸‹å¯é€‰é¡¹å¯åŒæ—¶æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªï¼Œå’Œå¿…é€‰é¡¹æŒ‰ä½æˆ–èµ·æ¥ä½œä¸ºflagå‚æ•°ï¼Œä»¥ä¸‹æ˜¯å‡ ä¸ªå¸¸ç”¨é€‰é¡¹ï¼š O_APPEND è¡¨ç¤ºè¿½åŠ ï¼Œæ‰€å†™æ•°æ®é™„åŠ åˆ°æ–‡ä»¶æœ«å°¾ã€‚ O_CREAT è‹¥æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºå®ƒï¼Œä½¿ç”¨æ­¤é€‰é¡¹éœ€è¦æä¾›ç¬¬ä¸‰ä¸ªå‚æ•°modeï¼Œè¡¨ç¤ºè¯¥æ–‡ä»¶çš„è®¿é—®æƒé™ã€‚ æ³¨ï¼šæ–‡ä»¶æœ€ç»ˆæƒé™ï¼šnewmode = mode\u0026~umask O_EXCL å¦‚æœåŒæ—¶æŒ‡å®šäº†O_CREATï¼Œå¹¶ä¸”æ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™å‡ºé”™è¿”å›ã€‚ O_TRUNC å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œæ¸…ç©ºæ–‡ä»¶å†…å®¹ï¼Œé•¿åº¦ç½®ä¸º0ã€‚ O_NONBLOCK å¯¹äºè®¾å¤‡æ–‡ä»¶ï¼Œä»¥O_NONBLOCKæ–¹å¼æ‰“å¼€å¯ä»¥åšéé˜»å¡I/O(NonblockI/O)ã€‚ modeï¼šç”¨æ¥è§„å®šå¯¹è¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼Œæ–‡ä»¶çš„ç”¨æˆ·ç»„åŠå…¶ä»–ç”¨æˆ·çš„è®¿é—®æƒé™ï¼ˆé™¤äº†ä½¿ç”¨æ•°å­—ï¼Œä¹Ÿå¯ä»¥ç”¨ç›¸å…³å®ï¼‰ æ¯”å¦‚ 0600 å’Œ S_IRUSR | S_IWUSR æ­¤æ—¶çš„0600éœ€è¦ä½¿ç”¨ newmode = mode\u0026~umask` â€“\u003e0600 \u0026~0022=0600 è¿”å›å€¼ï¼š0ï¼šæˆåŠŸï¼›-1ï¼šå¤±è´¥ï¼Œå¹¶è®¾ç½®errnoå€¼ #include \u003cstdio.h\u003e #include \u003cstdlib.h\u003e #include \u003cunistd.h\u003e #include \u003csys/types.h\u003e #include \u003csys/stat.h\u003e #include \u003cstring.h\u003e #include \u003cerrno.h\u003e #include \u003cfcntl.h\u003e // #define ERR_EXIT(m) (perror(m), exit(EXIT_FAILURE)) #define ERR_EXIT(m) \\ do \\ { \\ perror(m); \\ exit(EXIT_FAILURE); \\ } while(0) int main(){ int fd; fd = open(\"test.txt\", O_RDONLY); /* if(fd == -1){ fprintf(stderr, \"open error with errno=%d %s\\n\", errno, strerror(errno)); exit(EXIT_FAILURE); } */ /* if(fd == -1){ perror(\"open error\"); exit(EXIT_FAILURE); } */ if(fd == -1){ ERR_EXIT(\"open error\"); } close(fd); return 0; } # è¾“å‡º open error: No such file or directory CXX = gcc CXXFLAGS = -c -Wall -g TARGETS = open SRCS = $(wildcard *.c) OBJS = $(patsubst %.c, %.o, $(SRCS)) all: $(TARGETS) $(TARGETS): %: %.o $(CXX) -o $@ $^ %.o: %.c $(CXX) $(CXXFLAGS) $\u003c -o $@ .PHONY: clean clean: rm -f *.o $(TARGETS) read åŠŸèƒ½ï¼šä»è¯¥æ–‡ä»¶ä¸­è¯»å–æ–‡ä»¶ å‡½æ•°åŸå‹ï¼š ssize_t read(int fd, void *buffer, size_t count)ï¼› å‡½æ•°å‚æ•°ï¼šfdï¼šæƒ³è¦è¯»çš„æ–‡ä»¶çš„æ–‡ä»¶æè¿°ç¬¦ï¼›bufï¼šæŒ‡å‘å†…å­˜å—çš„æŒ‡é’ˆï¼Œä»æ–‡ä»¶ä¸­è¯»å–æ¥çš„å­—èŠ‚æ”¾åˆ°è¿™ä¸ªå†…å­˜å—ä¸­ï¼›countï¼šä»è¯¥æ–‡ä»¶å¤åˆ¶åˆ°bufä¸­çš„å­—èŠ‚æ•° æ³¨ï¼šè¯»å–çš„æ–‡ä»¶æŒ‡é’ˆåç§»ï¼Œå†…æ ¸æ•°æ®ç»“æ„ä¼šç»´æŠ¤ è¿”å›å€¼ï¼š0ï¼šæ–‡ä»¶ç»“æŸï¼›-1ï¼šå‡ºç°é”™è¯¯ï¼›å¤åˆ¶åˆ°ç¼“å­˜åŒºçš„å­—èŠ‚æ•° write åŠŸèƒ½ï¼šå°†æ•°æ®å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ å‡½æ•°åŸå‹ï¼š ssize_t write(int fd, void *buffer, size_t count)ï¼› å‡½æ•°å‚æ•°ï¼šfdï¼šæƒ³è¦å†™å…¥çš„æ–‡ä»¶çš„æ–‡ä»¶æè¿°ç¬¦ï¼›bufï¼šæŒ‡å‘å†…å­˜å—çš„æŒ‡é’ˆï¼Œä»è¿™ä¸ªå†…å­˜å—ä¸­è¯»å–æ•°æ®å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼›countï¼šè¦å†™å…¥æ–‡ä»¶çš„å­—èŠ‚æ•° è¿”å›å€¼ï¼šå†™å…¥çš„å­—èŠ‚æ•°ï¼šå†™å…¥æˆåŠŸï¼›-1ï¼šå‡ºç°é”™è¯¯ close åŠŸèƒ½ï¼šå…³é—­æ–‡ä»¶ å‡½æ•°åŸå‹ï¼š int close(int fd)ï¼› å‡½æ•°å‚æ•°ï¼šfdï¼šæ–‡ä»¶æè¿°ç¬¦ è¿”å›å€¼ï¼š0ï¼šæˆåŠŸï¼›-1ï¼Œå¤±è´¥ï¼Œå¹¶è®¾ç½®errnoå€¼ ç®€å•ç‰ˆcpå‘½ä»¤ #define BUFF_SIZE 1024 #define ERR_EXIT(m) \\ do { \\ perror(m); \\ exit(EXIT_FAILURE); \\ } while(0) int main(int argc, char *argv[]){ int infd, outfd; if (argc != 3){ fprintf(stderr, \"Usage %s src dest\\n\", argv[0]); exit(EXIT_FAILURE); } infd = open(argv[1], O_RDONLY); if ((infd = open(argv[1], O_RDONLY)) == -1){ ERR_EXIT(\"open src file error\"); } if ((outfd = open(argv[2], O_WRONLY | O_CREAT | O_TRUNC, 0644)) == -1){ // ç­‰ä»·creat()ï¼Œcreatä¸å¤šè§äº† ERR_EXIT(\"open std file error\"); } char buff[BUFF_SIZE]; int numRead; while ((numRead = read(infd, buff, BUFF_SIZE)) \u003e 0) { write(outfd, buff, numRead); } if (close(infd) == -1){ ERR_EXIT(\"close src file error\"); } if (close(outfd) == -1){ ERR_EXIT(\"close dst file error\"); } exit(EXIT_SUCCESS); return 0; } lseek åŠŸèƒ½ï¼šé€šè¿‡æŒ‡å®šç›¸å¯¹äºå¼€å§‹ä½ç½®ã€å½“å‰ä½ç½®æˆ–æœ«å°¾ä½ç½®çš„å­—èŠ‚æ•°æ¥é‡å®šä½curp,è¿™å–å†³äºIseek()å‡½æ•°ä¸­æŒ‡å®šçš„ä½ç½® å‡½æ•°åŸå‹ï¼š off_t lseek(int fd, off_t offset, int whence)ï¼› å‡½æ•°å‚æ•°ï¼šfdï¼šè®¾ç½®çš„æ–‡ä»¶æè¿°ç¬¦ï¼› offsetï¼šåç§»é‡ï¼› whenceï¼šæœç´¢çš„èµ·å§‹ä½ç½® SEEK_SETï¼šä»æ–‡ä»¶å¼€å§‹å¤„è®¡ç®—åç§»ï¼Œoffsetå¿…é¡»ä¸ºè´Ÿæ•° SEEK_CURï¼šä»å½“å‰æ–‡ä»¶çš„åç§»å€¼è®¡ç®—åç§» SEEK_ENDï¼šä»æ–‡ä»¶çš„ç»“æŸå¤„è®¡ç®—åç§» è¿”å›å€¼ï¼šæ–°çš„æ–‡ä»¶åç§»å€¼ï¼šæˆåŠŸï¼›-1ï¼šé”™è¯¯ int main(){ int fd; fd = open(\"test.txt\", O_RDONLY); if (fd == -1){ ERR_EXIT(\"open error\"); } char buf[1024] = {0}; int ret = read(fd, buf, 5); if (ret == -1){ ERR_EXIT(\"read error\"); } printf(\"buf = %s \\n\", buf); ret = lseek(fd, 0, SEEK_CUR); if(ret == -1){ ERR_EXIT(\"lseek\"); } printf(\"current offset = %d \\n\", ret); close(fd); return 0; } int main(){ int fd; fd = open(\"test.txt\", O_WRONLY | O_CREAT | O_TRUNC, 0644); if (fd == -1){ ERR_EXIT(\"open error\"); } write(fd, \"hello\", 5); int ret = lseek(fd, 1024*1024*1024, SEEK_CUR); if(ret == -1){ ERR_EXIT(\"lseek\"); } write(fd, \"world\", 5); close(fd); return 0; } // od -c file æŸ¥çœ‹æ–‡ä»¶ç©ºæ ¼ readdir åŠŸèƒ½ï¼šè®¿é—®æŒ‡å®šç›®å½•ä¸‹ä¸€ä¸ªè¿æ¥çš„ç»†èŠ‚ å‡½æ•°åŸå‹ï¼š struct dirent* readdir(DIR *dirptr)ï¼› å‡½æ•°å‚æ•°ï¼šdirptrï¼šç›®å½•æŒ‡é’ˆ è¿”å›å€¼ï¼šä¸€ä¸ªæŒ‡å‘direntç»“æ„å¾—æŒ‡é’ˆï¼ŒåŒ…å«æŒ‡å®šç›®å½•ä¸­ä¸‹ä¸€ä¸ªè¿æ¥å¾—ç»†èŠ‚ï¼šæ²¡æœ‰æ›´å¤šè¿æ¥æ—¶è¿”å›0 ç®€å•ç‰ˆlsæŒ‡ä»¤ int main(){ DIR *dir = opendir(\".\"); struct dirent *de; while((de = readdir(dir)) != NULL){ if(st","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:2:2","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"æ–‡ä»¶å…±äº« æ–‡ä»¶æè¿°è¡¨ï¼ˆ1024ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼‰ æ–‡ä»¶çŠ¶æ€è½¬ç§» è¯»ã€å†™ã€è¿½åŠ ã€åŒæ­¥ã€éé˜»å¡ç­‰ å½“å‰æ–‡ä»¶åç§»é‡ refcnt = 1ï¼ˆå¼•ç”¨è®¡æ•°ï¼‰ vèŠ‚ç‚¹æŒ‡é’ˆ vèŠ‚ç‚¹è¡¨ int main(int argc, char *argv[]){ int fd1, fd2; char buf1[BUFF_SIZE] = {0}; char buf2[BUFF_SIZE] = {0}; fd1 = open(\"test.txt\", O_RDONLY); if (fd1 == -1){ ERR_EXIT(\"open error\"); } read(fd1, buf1, 5); printf(\"buf1 = %s\\n\", buf1); fd2 = open(\"test.txt\", O_RDWR); if (fd2 == -1){ ERR_EXIT(\"open error\"); } read(fd2, buf2, 5); printf(\"buf2 = %s\\n\", buf2); write(fd2, \"world\", 5); memset(buf1, 0, sizeof(buf1)); read(fd1, buf1, 5); printf(\"buf1 = %s\\n\", buf1); close(fd1); close(fd2); return 0; } é‡å®šå‘ dup 2\u003e\u00261:æŠŠæ ‡å‡†é”™è¯¯ï¼ˆ2ï¼‰é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡º(1) dupï¼šint dup(int oldfd); dup2ï¼šint dup2(int oldfd, int newfd); fcntl: int fcntl(int fd, int cmd, ...); int main(int argc, char *argv[]){ int fd; fd = open(\"test.txt\", O_WRONLY); if (fd == -1){ ERR_EXIT(\"open error\"); } /* close(1); dup(fd); // 0,1,2(è¾“å…¥ï¼Œè¾“å‡º,é”™è¯¯)å ç”¨ï¼Œé»˜è®¤è¿”å›3 */ /* dup2(fd, 1); // å¦‚æœç”± newfd å‚æ•°æ‰€æŒ‡å®šç¼–å·çš„æ–‡ä»¶æè¿°ç¬¦ä¹‹å‰å·²ç»æ‰“å¼€ï¼Œé‚£ä¹ˆ dup2()ä¼šé¦–å…ˆå°†å…¶å…³é—­ */ close(1); if (fcntl(fd, F_DUPFD, 0) \u003c 0){ ERR_EXIT(\"dup fd error\"); } printf(\"hello\\n\"); return 0; } fcntl åŠŸèƒ½ï¼šæ“çºµæ–‡ä»¶æè¿°ç¬¦ï¼Œæ”¹å˜å·²æ‰“å¼€çš„æ–‡ä»¶çš„å±æ€§ å‡½æ•°åŸå‹ï¼š int fcntl(int fd, int cmd, ...); å‡½æ•°å‚æ•°ï¼š fdï¼šæ–‡ä»¶æè¿°ç¬¦ cmdæ“ä½œ å¤åˆ¶æ–‡ä»¶æè¿°ç¬¦ F_DUPFD(Iong) æ–‡ä»¶æè¿°ç¬¦æ ‡å¿— F_GETFD(void) F_SETFD(long) æ–‡ä»¶çŠ¶æ€æ ‡å¿— F_GETFL(void) F_SETFL(Iong) æ–‡ä»¶é” F GETLK F_SETLK, F_SETLKW è¿”å›å€¼ï¼š0ï¼šæˆåŠŸï¼›-1ï¼šå¤±è´¥ void set_flag(int fd, int flags); void clr_flag(int fd, int flags); int main(int argc, char *argv[]){ char buf[BUFF_SIZE] = {0}; int ret; /* set_flag function int flags; flags = fcntl(0, F_GETFL, 0); if (flags == -1) { ERR_EXIT(\"fcntl get flag error\"); } ret = fcntl(0, F_SETFL, flags | O_NONBLOCK); if (ret == -1) { ERR_EXIT(\"fcntl set flag error\"); } */ set_flag(0, O_NONBLOCK); clr_flag(0, O_NONBLOCK); ret = read(0, buf, BUFF_SIZE); if (ret == -1) { ERR_EXIT(\"read error\"); } printf(\"buf = %s \\n\", buf); return 0; } void set_flag(int fd, int flags){ int val; val = fcntl(fd, F_GETFL, 0); if(val == -1){ ERR_EXIT(\"fcntl get flag error\"); } val |= flags; if(fcntl(fd, F_SETFL, val) \u003c 0){ ERR_EXIT(\"fcntl set flag error\"); } } void clr_flag(int fd, int flags){ int val; val = fcntl(fd, F_GETFL, 0); if(val == -1){ ERR_EXIT(\"fcntl get flag error\"); } val \u0026= ~flags; if(fcntl(fd, F_SETFL, val) \u003c 0){ ERR_EXIT(\"fcntl set flag error\"); } } æ–‡ä»¶é”ç»“æ„ä½“æŸ¥çœ‹ man 2 fcntl int main(int argc, char *argv[]){ int fd; fd = open(\"test.txt\", O_CREAT | O_RDWR | O_TRUNC, 0644); if (fd == -1){ ERR_EXIT(\"open error\"); } struct flock lock; memset(\u0026lock, 0, sizeof(lock)); lock.l_type = F_WRLCK; lock.l_whence = SEEK_SET; lock.l_start = 0; lock.l_len = 0; if(fcntl(fd, F_SETLK, \u0026lock) == 0){ printf(\"lock success\\n\"); printf(\"press any key to unlock\\n\"); lock.l_type = F_UNLCK; if (fcntl(fd, F_SETLK, \u0026lock) == 0){ printf(\"unlock success\\n\"); } else { ERR_EXIT(\"unlock fail\"); } } else { ERR_EXIT(\"lock fail\"); } return 0; } ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:2:3","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"è¿›ç¨‹ ä»£ç æ®µ + æ•°æ®æ®µ + å †æ ˆæ®µ + PCBï¼ˆè¿›ç¨‹æ§åˆ¶å—process control blockï¼‰ ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:3:0","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"è¿›ç¨‹çŠ¶æ€å˜è¿ è¿›ç¨‹çŠ¶æ€å˜è¿ è¿›ç¨‹åˆ›å»º ç»™æ–°åˆ›å»ºçš„è¿›ç¨‹åˆ†é…ä¸€ä¸ªå†…éƒ¨æ ‡è¯†ï¼Œåœ¨å†…æ ¸ä¸­å»ºç«‹è¿›ç¨‹ç»“æ„ å¤åˆ¶çˆ¶è¿›ç¨‹çš„ç¯å¢ƒ ä¸ºè¿›ç¨‹åˆ†é…èµ„æºï¼ŒåŒ…æ‹¬è¿›ç¨‹æ˜ åƒæ‰€éœ€è¦çš„æ‰€æœ‰å…ƒç´ ï¼ˆç¨‹åºã€æ•°æ®ã€ç”¨æˆ·æ ˆç­‰)ï¼Œ å¤åˆ¶çˆ¶è¿›ç¨‹åœ°å€ç©ºé—´çš„å†…å®¹åˆ°è¯¥è¿›ç¨‹åœ°å€ç©ºé—´ä¸­ã€‚ ç½®è¯¥è¿›ç¨‹çš„çŠ¶æ€ä¸ºå°±ç»ªï¼Œæ’å…¥å°±ç»ªé˜Ÿåˆ—ã€‚ è¿›ç¨‹æ’¤é”€ å…³é—­è½¯ä¸­æ–­ï¼šå› ä¸ºè¿›ç¨‹å³å°†ç»ˆæ­¢è€Œä¸å†å¤„ç†ä»»ä½•è½¯ä¸­æ–­ä¿¡å· å›æ”¶èµ„æºï¼šé‡Šæ”¾è¿›ç¨‹åˆ†é…çš„æ‰€æœ‰èµ„æºï¼Œå¦‚å…³é—­æ‰€æœ‰å·²æ‰“å¼€æ–‡ä»¶ï¼Œé‡Šæ”¾è¿›ç¨‹ç›¸åº”çš„æ•°æ®ç»“æ„ç­‰ å†™è®°å¸ä¿¡æ¯ï¼šå°†è¿›ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æ‰€äº§ç”Ÿçš„è®°å¸æ•°æ®ï¼ˆå…¶ä¸­åŒ…æ‹¬è¿›ç¨‹è¿è¡Œæ—¶çš„å„ç§ç»Ÿè®¡ä¿¡æ¯)è®°å½•åˆ°ä¸€ä¸ªå…¨å±€è®°å¸æ–‡ä»¶ä¸­ ç½®è¯¥è¿›ç¨‹ä¸ºåƒµæ­»çŠ¶æ€ï¼šå‘çˆ¶è¿›ç¨‹å‘é€å­è¿›ç¨‹æ­»çš„è½¯ä¸­æ–­ä¿¡å·,å°†ç»ˆæ­¢ä¿¡æ¯statusé€åˆ°æŒ‡å®šçš„å­˜å‚¨å•å…ƒä¸­ï¼š è½¬è¿›ç¨‹è°ƒåº¦ï¼šå› ä¸ºæ­¤æ—¶CPUå·²ç»è¢«é‡Šæ”¾ï¼Œéœ€è¦ç”±è¿›ç¨‹è°ƒåº¦è¿›è¡ŒCPUå†åˆ†é…ã€‚ ç»ˆæ­¢è¿›ç¨‹ ä»mainå‡½æ•°è¿”å› è°ƒç”¨exit è°ƒç”¨exit è°ƒç”¨abort ç”±ä¿¡å·ç»ˆæ­¢ ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:3:1","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"forkç³»ç»Ÿè°ƒç”¨ï¼ˆå†™æ—¶å¤åˆ¶ï¼‰ åŠŸèƒ½ï¼šåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ã€‚ä¸€æ¬¡è°ƒç”¨ä¸¤æ¬¡è¿”å›ï¼Œåˆ›å»ºä¸€ä¸ªè¿›ç¨‹å‰¯æœ¬ï¼Œåœ¨å„è‡ªçš„è¿›ç¨‹åœ°å€ç©ºé—´è¿”å› å‡½æ•°åŸå‹ï¼š pid_t fork(void); å‡½æ•°å‚æ•°ï¼šæ— å‚æ•° è¿”å›å€¼ï¼š å¦‚æœæˆåŠŸåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œå¯¹äºçˆ¶è¿›ç¨‹æ¥è¯´è¿”å›å­è¿›ç¨‹ID å¦‚æœæˆåŠŸåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œå¯¹äºå­è¿›ç¨‹æ¥è¯´è¿”å›å€¼ä¸º0 å¦‚æœä¸º-1è¡¨ç¤ºåˆ›å»ºå¤±è´¥ å­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹çš„åŒºåˆ« çˆ¶è¿›ç¨‹è®¾ç½®çš„é”ï¼Œå­è¿›ç¨‹ä¸ç»§æ‰¿ å„è‡ªçš„è¿›ç¨‹IDå’Œçˆ¶è¿›ç¨‹IDä¸åŒ å­è¿›ç¨‹çš„æœªå†³å‘Šè­¦è¢«æ¸…é™¤ï¼š å­è¿›ç¨‹çš„æœªå†³ä¿¡å·é›†è®¾ç½®ä¸ºç©ºé›†ã€‚ æ³¨æ„ forkç³»ç»Ÿè°ƒç”¨ä¹‹åï¼Œçˆ¶å­è¿›ç¨‹å°†äº¤æ›¿æ‰§è¡Œ ï¼ˆå­¤å„¿è¿›ç¨‹ï¼Œæ‰˜å­¤ç»™ä¸€å·è¿›ç¨‹ï¼‰å¦‚æœçˆ¶è¿›ç¨‹å…ˆé€€å‡ºï¼Œå­è¿›ç¨‹è¿˜æ²¡é€€å‡ºï¼Œé‚£ä¹ˆå­è¿›ç¨‹çš„çˆ¶è¿›ç¨‹å°†å˜ä¸ºinitè¿›ç¨‹ã€‚ï¼ˆæ³¨ï¼šä»»ä½•ä¸€ä¸ªè¿›ç¨‹éƒ½å¿…é¡»æœ‰çˆ¶è¿›ç¨‹) ï¼ˆåƒµæ­»è¿›ç¨‹ï¼Œå­è¿›ç¨‹å…ˆé€€å‡ºï¼Œçˆ¶è¿›ç¨‹å°šæœªæŸ¥è¯¢å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ï¼‰å¦‚æœå­è¿›ç¨‹å…ˆé€€å‡ºï¼Œçˆ¶è¿›ç¨‹è¿˜æ²¡é€€å‡ºï¼Œé‚£ä¹ˆå­è¿›ç¨‹è¦ç­‰åˆ°çˆ¶è¿›ç¨‹æ•è·åˆ°å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€æ‰çœŸæ­£ç»“æŸï¼Œå¦åˆ™è¿™ä¸ªæ—¶å€™å­è¿›ç¨‹å°±æˆä¸ºåƒµè¿›ç¨‹ã€‚ ä½¿ç”¨ä¿¡å· signal(SIGCHLD, SIG_IGN)ï¼Œé¿å…åƒµæ­»è¿›ç¨‹ è°ƒç”¨è¿›ç¨‹çš„è¿›ç¨‹å·ï¼špid_t getpid(void); æ£€ç´¢çˆ¶è¿›ç¨‹çš„è¿›ç¨‹å·ï¼špid_t getppid(void); int main(int argc, char *argv[]){ signal(SIGCHLD, SIG_IGN); printf(\"before fork pid = %d\\n\", getpid()); pid_t pid; pid = fork(); if (oid == -1){ ERR_EXIT(\"fork fail\"); } if (pid \u003e 0){ printf(\"this is parent pid = %d, child pid = %d\\n\", getpid(), pid); sleep(1); } else if (pid == 0){ printf(\"this is child pid = %d, parent pid = %d\\n\", getpid(), getppid()); } return 0; } æŸ¥çœ‹è¿›ç¨‹çš„æ ‘çŠ¶å…³ç³»ï¼špstree /proc/PID/statusæä¾›çš„PPidå­—æ®µï¼ŒæŸ¥çœ‹æ¯ä¸ªè¿›ç¨‹çš„çˆ¶è¿›ç¨‹ã€‚ ç³»ç»Ÿæ”¯æŒçš„æœ€å¤§çº¿ç¨‹æ•°ï¼šcat /proc/sys/kernel/threads-max ç³»ç»Ÿå…¨å±€çš„ PID å·æ•°å€¼çš„é™åˆ¶ï¼šcat /proc/sys/kernel/pid_max vfork fork + exec(æ›¿æ¢å‡½æ•°) â€“\u003eåˆ›å»ºä¸€ä¸ªè¿›ç¨‹ + æ›¿æ¢ï¼ˆæ–°çš„ç¨‹åºï¼‰ ä½¿ç”¨vfork,å­è¿›ç¨‹å¿…é¡»æ‰§è¡Œ_exitæˆ–è€…execå‡½æ•°ã€‚_ int gval = 100; int main(int argc, char *argv[]){ signal(SIGCHLD, SIG_IGN); printf(\"before fork pid = %d\\n\", getpid()); pid_t pid; pid = vfork(); if (pid == -1){ ERR_EXIT(\"fork fail\"); } if (pid \u003e 0){ printf(\"this is parent pid = %d, child pid = %d, gval = %d\\n\", getpid(), pid, gval); sleep(1); } else if (pid == 0){ gval++; // copy on write printf(\"this is child pid = %d, parent pid = %d, gval = %d\\n\", getpid(), getppid(), gval); _exit(0); } return 0; } exitå’Œ_exit _exitï¼šç³»ç»Ÿè°ƒç”¨ exitï¼šCåº“å‡½æ•° ä¼šåšç¼“å­˜åŒºæ¸…é™¤æ“ä½œï¼šfflush(stdout); exit(); è°ƒç”¨ç»ˆæ­¢å¤„ç†ç¨‹åºï¼ˆæœ€å¤šæ³¨å†Œ32ä¸ªï¼‰ ç»ˆæ­¢å¤„ç†ç¨‹åºéœ€æ³¨å†Œï¼šint atexit(void (*function)(void));è°ƒç”¨å’Œæ³¨å†Œæ¬¡åºç›¸åï¼›å³è°ƒç”¨é¡ºåºå’Œè¾“å‡ºé¡ºåºç›¸åã€‚ int execve(const char *filename, char *const argv[], char *const rnvp[]); execæ›¿æ¢è¿›ç¨‹æ˜ åƒ æ›¿æ¢åï¼Œä¸ä¼šè¿è¡Œä¹‹åçš„ä»£ç  man execlp int execl(const char *path, const char *arg, ...); int execlp(const char *file, const char *arg, ...); int execle(const char *path, const char *arg, ..., char * const envp[]); int execv(const char *path, char *const argv[]); int execvp(const char *file, char *const argv[]); int execvpe(const char *file, char *const argv[], char *const envp[]); printf(\"pid = %d \\n\", getpid()); int ret = execlp(\"./fork_pid\", \"fork_pid\", NULL); int ret = execl(\"/bin/ls\", \"ls\", \"-l\", NULL); // æŒ‡å®šå…¨è·¯å¾„ ç­‰ä»·äº int ret = execlp(\"ls\", \"ls\", \"-l\", NULL); ç­‰ä»·äº char *const args[] = {\"ls\", \"-l\", NULL}; int ret = execvp(\"ls\", args); char *const envp[] = {\"AA=11\", \"BB=22\", NULL}; // é…ç½®ç¯å¢ƒå˜é‡ï¼Œ ä½†æ˜¯æ²¡è¾“å‡ºAAå’ŒBBå¾ˆå¥‡æ€ª int ret = execle(\"/bin/ls\", \"ls\", NULL, envp); if (ret == -1){ perror(\"ececlp error\"); } fcntlå’Œexec int main(int argc, char *argv[]){ printf(\"Entering main ... \\n\"); int fret = fcntl(1, F_SETFD, FD_CLOEXEC); if (fret == -1){ perror(\"fcntl error\"); } int ret = execlp(\"./fork_pid\", \"fork_pid\", NULL); if (ret == -1){ perror(\"ececlp error\"); } printf(\"Entering main ... \\n\"); return 0; } # è¾“å‡º Entering main ... waitå’Œwaitpid ä¿¡å·ï¼šå¼‚æ­¥é€šçŸ¥äº‹ä»¶ å½“å­è¿›ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œå†…æ ¸ä¼šå‘çˆ¶è¿›ç¨‹å‘é€SIGCHLDä¿¡å·ï¼Œå­è¿›ç¨‹çš„é€€å‡ºæ˜¯å¼‚æ­¥äº‹ä»¶ï¼ˆå­è¿›ç¨‹å¯ä»¥åœ¨çˆ¶è¿›ç¨‹è¿è¡Œçš„ä»»ä½•æ—¶åˆ»ç»ˆæ­¢) å­è¿›ç¨‹é€€å‡ºæ—¶ï¼Œå†…æ ¸å°†å­è¿›ç¨‹ç½®ä¸ºåƒµå°¸çŠ¶æ€ï¼Œè¿™ä¸ªè¿›ç¨‹ç§°ä¸ºåƒµå°¸è¿›ç¨‹ï¼Œå®ƒåªä¿ç•™æœ€å°çš„ä¸€äº›å†…æ ¸æ•°æ®ç»“æ„ï¼Œä»¥ä¾¿çˆ¶è¿›ç¨‹æŸ¥è¯¢å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ã€‚ wait åŠŸèƒ½ï¼šçˆ¶è¿›ç¨‹æŸ¥è¯¢å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ å‡½æ•°åŸå‹ï¼š pid_t wait(int *status); å‡½æ•°å‚æ•°ï¼šstatusï¼šè¯¥å‚æ•°å¯ä»¥è·å¾—ç­‰å¾…å­è¿›ç¨‹çš„ä¿¡æ¯ è¿”å›å€¼ï¼šå¦‚æœæˆåŠŸï¼Œè¿”å›ç­‰å¾…å­è¿›ç¨‹çš„ID int main(int argc, char *argv[]){ pid_t pid; printf(\"before fork pid = %d\\n\", getpid()); pid = fork(); if (pid == -1){ ERR_EXIT(\"fork fail\"); } if (pid \u003e 0){ printf(\"this is parent pid = %d, child pid = %d\\n\", getpid(), pid); } if (pid == 0){ sleep(3); printf(\"this is child pid = %d, parent pid = %d\\n\", getpid(), getppid()); // exit(1); abort(); // å¼‚å¸¸ç»ˆæ­¢ } printf(\"this is parent\\n\"); int ret, status; ret = wait(\u0026status); // ç­‰å¾…å­è¿›ç¨‹é€€å‡º printf(\"ret = %d, pid = %d\\n\", ret, pid); // waitè¿”å›å€¼å­è¿›ç¨‹PIDS return 0; } // çŠ¶æ€ä¿¡æ¯ if (WIFEXITED(status)){ printf(\"child exited normal, exit status = %d\\n\", WEXITSTATUS(status)); } else if (WIFSIGNALED(status)){ printf(\"child exited abnormal, signal number = %d\\n\", WTERMSIG(status));// é€šè¿‡kill -læŸ¥çœ‹ä¿¡å· man 7 signal } else if (WIFSTOPPED(status)){ printf(\"child stoped , signal number = %d\\n\", WTERMSIG(status));","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:3:2","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"ä¿¡å· man 7 signal ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:4:0","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"ä¿¡å·å’Œä¸­æ–­ ä¸­æ–­è¿‡ç¨‹ ä¸­æ–­ä¿¡å· ä¸­æ–­æº ä¿æŠ¤ç°åœº ä¸­æ–­å¤„ç†ç¨‹åº æ¢å¤ç°åœº ä¸­æ–­æºâ€“\u003eä¸­æ–­å±è”½â€“\u003e ä¿æŠ¤ç°åœºâ€“\u003eä¸­æ–­å¤„ç†ç¨‹åºâ€“\u003eæ¢å¤ç°åœº ä¸­æ–­å‘é‡è¡¨ï¼šä¿å­˜å›ºå®šä¸ªæ•°çš„ä¸­æ–­å¤„ç†ç¨‹åºå…¥å£åœ°å€ ä¸­æ–­åˆ†ç±» ç¡¬ä»¶ä¸­æ–­ï¼ˆå¤–éƒ¨ä¸­æ–­ï¼‰ å¤–éƒ¨ä¸­æ–­æ˜¯æŒ‡ç”±å¤–éƒ¨è®¾å„é€šè¿‡ç¡¬ä»¶è¯·æ±‚çš„æ–¹å¼äº§ç”Ÿçš„ä¸­æ–­ï¼Œä¹Ÿç§°ä¸ºç¡¬ä»¶ä¸­æ–­ è½¯ä»¶ä¸­æ–­ï¼ˆå†…éƒ¨ä¸­æ–­ï¼‰ å†…éƒ¨ä¸­æ–­æ˜¯ç”±CPUè¿è¡Œç¨‹åºé”™è¯¯æˆ–æ‰§è¡Œå†…éƒ¨ç¨‹åºè°ƒç”¨å¼•èµ·çš„ä¸€ç§ä¸­æ–­ï¼Œä¹Ÿç§°ä¸ºè½¯ä»¶ä¸­æ–­ã€‚ ä¿¡å·æ˜¯ç³»ç»Ÿå“åº”æŸäº›çŠ¶å†µè€Œäº§ç”Ÿçš„äº‹ä»¶ï¼Œè¿›ç¨‹åœ¨æ¥æ”¶åˆ°ä¿¡å·æ—¶ä¼šé‡‡å–ç›¸åº”çš„è¡ŒåŠ¨ã€‚ ä¿¡å·æ˜¯åœ¨è½¯ä»¶å±‚æ¬¡ä¸Šå¯¹ä¸­æ–­çš„ä¸€ç§æ¨¡æ‹Ÿï¼Œæ‰€ä»¥é€šå¸¸æŠŠå®ƒç§°ä¸ºæ˜¯è½¯ä¸­æ–­ kill -læŸ¥çœ‹ä¿¡å· ä¿¡å·åˆ†ç±» å¯é ä¿¡å·ï¼ˆå®æ—¶ä¿¡å·ï¼Œæ”¯æŒæ’é˜Ÿï¼ŒSIGRTå¼€å¤´ï¼‰ï¼› éå¯é ä¿¡å·ï¼ˆéå®æ—¶ä¿¡å·ï¼Œä¸æ”¯æŒæ’é˜Ÿï¼‰ ä¿¡å·ä¸ä¸­æ–­çš„ç›¸ä¼¼ç‚¹ é‡‡ç”¨äº†ç›¸åŒçš„å¼‚æ­¥é€šä¿¡æ–¹å¼ å½“æ£€æµ‹å‡ºæœ‰ä¿¡å·æˆ–ä¸­æ–­è¯·æ±‚æ—¶ï¼Œéƒ½æš‚åœæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºè€Œè½¬å»æ‰§è¡Œç›¸åº”çš„å¤„ç†ç¨‹åº éƒ½åœ¨å¤„ç†å®Œæ¯•åè¿”å›åˆ°åŸæ¥çš„æ–­ç‚¹ å¯¹ä¿¡å·æˆ–ä¸­æ–­éƒ½å¯è¿›è¡Œå±è”½ã€‚ ä¿¡å·ä¸ä¸­æ–­çš„åŒºåˆ« ä¸­æ–­æœ‰ä¼˜å…ˆçº§ï¼Œè€Œä¿¡å·æ²¡æœ‰ä¼˜å…ˆçº§ï¼Œæ‰€æœ‰çš„ä¿¡å·éƒ½æ˜¯å¹³ç­‰çš„ ä¿¡å·å¤„ç†ç¨‹åºæ˜¯åœ¨ç”¨æˆ·æ€ä¸‹è¿è¡Œçš„ï¼Œè€Œä¸­æ–­å¤„ç†ç¨‹åºæ˜¯åœ¨æ ¸å¿ƒæ€ä¸‹è¿è¡Œ ä¸­æ–­å“åº”æ˜¯åŠæ—¶çš„ï¼Œè€Œä¿¡å·å“åº”é€šå¸¸éƒ½æœ‰è¾ƒå¤§çš„æ—¶é—´å»¶è¿Ÿ è¿›ç¨‹å¯¹ä¿¡å·çš„ä¸‰ç§å“åº” å¿½ç•¥ä¿¡å·ï¼šä¸é‡‡å–ä»»ä½•æ“ä½œï¼Œæœ‰ä¸¤ä¸ªä¿¡å·ä¸èƒ½å¿½ç•¥ï¼Œä¹Ÿä¸èƒ½æ•è·ï¼šSIGKILLå’ŒSIGSTOPå³-9å’Œ19 æ•è·å¹¶å¤„ç†ä¿¡å·ï¼šå†…æ ¸ä¸­æ–­æ­£åœ¨æ‰§è¡Œçš„ä»£ç ï¼Œè½¬å»æ‰§è¡Œå…ˆå‰æ³¨å†Œè¿‡çš„å¤„ç†ç¨‹åºã€‚ æ‰§è¡Œé»˜è®¤æ“ä½œï¼šé»˜è®¤æ“ä½œé€šå¸¸æ˜¯ç»ˆæ­¢è¿›ç¨‹ï¼Œè¿™å–å†³äºè¢«å‘é€çš„ä¿¡å· ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:4:1","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"signal SIGINT (crtl + c); SIGQUIT (crtl + \\) åŠŸèƒ½ï¼šå®‰è£…ä¿¡å· å‡½æ•°åŸå‹ï¼š __sighandler_t signal(int signum, __sighandler_t handler); å‡½æ•°å‚æ•°ï¼šsignumï¼šä¸­æ–­å·ï¼Œhandlerï¼šä¸­æ–­å¤„ç†ç¨‹åº å‡†å¤‡æ•æ‰æˆ–å±è”½çš„ä¿¡å·ç”±å‚æ•°signumç»™å‡ºï¼Œæ¥æ”¶åˆ°æŒ‡å®šä¿¡å·æ—¶å°†è¦è°ƒç”¨çš„å‡½æ•°ç”±handlerç»™å‡º handlerï¼šè¿™ä¸ªå‡½æ•°å¿…é¡»æœ‰ä¸€ä¸ªintç±»å‹çš„å‚æ•°ï¼ˆå³æ¥æ”¶åˆ°çš„ä¿¡å·ä»£ç ),å®ƒæœ¬èº«çš„ç±»å‹æ˜¯void handlerä¹Ÿå¯ä»¥æ˜¯ä¸¤ä¸ªç‰¹æ®Šå€¼ï¼šSIG_IGNï¼šå±è”½è¯¥ä¿¡å·ï¼›SIG_DFLï¼šæ¢å¤é»˜è®¤è¡Œä¸º è¿”å›å€¼ï¼šä¸Šä¸€æ¬¡æ‰€å¤„ç†çš„ç¨‹åº void handler(int sig); void func(int numLoops, char ch, char *pass); int main(int argc, char *argv[]){ if (signal(SIGINT, handler) == SIG_ERR){ ERR_EXIT(\"signal error\"); } int numLoops = 0; char ch = '\\0'; func(numLoops, ch, \"pass\"); return 0; } void handler(int sig){ printf(\"\\nrecieve a signal = %d\\n\", sig); } void func(int numLoops, char ch, char *pass){ while (1) { printf(\"Press ENTER to test (loop %d )...\", numLoops); numLoops++; ch = getchar(); if (ch == '\\n'){ printf(\"%s\\n\", pass); } else { break; } } } ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:4:2","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"ä¿¡å·å‘é€ kill åŠŸèƒ½ï¼šå‘é€ä¿¡å· å‡½æ•°åŸå‹ï¼š int kill(pid_t pid, int sig); å‡½æ•°å‚æ•°ï¼špidï¼šè¿›ç¨‹å·ï¼Œsigï¼šä¿¡å· pid \u003e 0: ä¿¡å·sigå‘é€ç»™è¿›ç¨‹å·ç­‰äºpidçš„è¿›ç¨‹ pid = 0: ä¿¡å·sigè¢«å‘é€ç»™è°ƒç”¨è€…æ‰€åœ¨ç»„çš„æ¯ä¸€ä¸ªè¿›ç¨‹ pid = -1: ä¿¡å·sigè¢«å‘é€ç»™è°ƒç”¨è€…è¿›ç¨‹æœ‰æƒé™å‘é€çš„æ¯ä¸€ä¸ªè¿›ç¨‹ï¼Œé™¤äº†1å·è¿›ç¨‹å’Œè‡ªå·±ä¹‹å¤– pid \u003c -1: ä¿¡å·sigè¢«å‘é€ç»™è¿›ç¨‹ç»„ç­‰äº-pidçš„æ¯ä¸€ä¸ªè¿›ç¨‹ è¿”å›å€¼ï¼š0: æˆåŠŸã€‚ -1 ï¼šè®¾ç½® errno è¡¨ç¤ºé”™è¯¯ void handler(int sig); int main(int argc, char *argv[]){ if (signal(SIGUSR1, handler) == SIG_ERR){ ERR_EXIT(\"signal error\"); } pid_t pid = fork(); if (pid == -1){ ERR_EXIT(\"fork error\"); } if (pid == 0){ // kill(getppid(), SIGUSR1); // exit(EXIT_SUCCESS); pid = getpgrp(); kill(-pid, SIGUSR1); exit(EXIT_SUCCESS); } int n = 5; do { n = sleep(n); } while (n \u003e 0); return 0; } void handler(int sig){ printf(\"recv a sig = %d\\n\", sig); } pause åŠŸèƒ½ï¼šä½¿è°ƒç”¨è€…è¿›ç¨‹æŒ‚èµ·ï¼Œç›´åˆ°ä¸€ä¸ªä¿¡å·è¢«æ•è· å‡½æ•°åŸå‹ï¼š int pause(void); è¿”å›å€¼ï¼š0: æˆåŠŸã€‚ -1 ï¼šè®¾ç½® errno è¡¨ç¤ºé”™è¯¯ void handler(int sig); int main(int argc, char *argv[]){ if (signal(SIGINT, handler) == SIG_ERR){ ERR_EXIT(\"signal error\"); } alarm(1); for (;;){ pause(); printf(\"pause return\\n\"); } return 0; } void handler(int sig){ printf(\"recv a sig = %d\\n\", sig); alarm(1); } kill -ALRM `ps aux | grep demo | grep -v vi | grep -v grep | awk '{print $2}'` raise åŠŸèƒ½ï¼šç»™è‡ªå·±å‘ä¿¡å·ã€‚raise(sig)ç­‰ä»·äºkill(getpid(), sig) killpg åŠŸèƒ½ï¼šç»™è¿›ç¨‹ç»„å‘ä¿¡å·ã€‚killpg(pgrp, sig)ç­‰ä»·äºkill(-pgrp, sig) sigqueue åŠŸèƒ½ï¼šç»™è¿›ç¨‹å‘é€ä¿¡å·ï¼Œæ”¯æŒæ’é˜Ÿï¼Œå¯ä»¥é™„å¸¦ä¿¡å· å‡½æ•°åŸå‹ï¼š int sigqueue(pid_t pid, int sig, const union sigval value); å‚æ•°ï¼špid:è¿›ç¨‹å·ï¼Œ sig:ä¿¡å·ï¼›value:ä¿¡å·ä¼ é€’çš„å‚æ•° è¿”å›å€¼ï¼š-1ï¼šå¤±è´¥ï¼›0ï¼šæˆåŠŸ // æ¥æ”¶ void handler(int sig, siginfo_t *info, void *ctx); int main(int argc, char *argv[]){ struct sigaction act; act.sa_sigaction = handler; sigemptyset(\u0026act.sa_mask); act.sa_flags = SA_SIGINFO; if (sigaction(SIGINT, \u0026act, NULL) \u003c 0){ ERR_EXIT(\"sigaction error\"); } for (;;){ pause(); } return 0; } void handler(int sig, siginfo_t *info, void *ctx){ printf(\"recv a sig = %d data = %d\\n\", sig, info-\u003esi_value.sival_int); } // å‘é€ int main(int argc, char *argv[]){ if (argc != 2){ fprintf(stderr, \"Usage %s pid\\n\", argv[0]); exit(EXIT_FAILURE); } pid_t pid = atoi(argv[1]); union sigval v; v.sival_int = 100; sigqueue(pid, SIGINT, v); return 0; } // è¿è¡Œ ./sigqueue_send `ps aux | grep sigqueue_recv | grep -v vi | grep -v grep | awk '{print $2}'` ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:4:3","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"å¯é‡å…¥å‡½æ•° ä½¿ç”¨ä¸å¯é‡å…¥å‡½æ•°ï¼Œè¿›ç¨‹å¯èƒ½ä¼šä¿®æ”¹åŸæ¥è¿›ç¨‹ä¸­ä¸åº”è¯¥è¢«ä¿®æ”¹çš„æ•°æ®ï¼Œæ˜¯ä¸å®‰å…¨çš„ å¤šæ•°æ˜¯ä¸å¯é‡å…¥å‡½æ•°çš„ï¼Œä¸€èˆ¬æ¡ä»¶å¦‚ä¸‹ï¼š ä½¿ç”¨é™æ€æ•°æ®ç»“æ„ å‡½æ•°å®ç°æ—¶è°ƒç”¨äº†mallocæˆ–freeå‡½æ•° å®ç°äº†ä½¿ç”¨æ ‡å‡†IOå‡½æ•° typedef struct { int a; int b; } TEST; TEST g_data; int main(int argc, char *argv[]){ TEST zeros ={0, 0}; TEST ones = {1, 1}; if (signal(SIGALRM, handler) == SIG_ERR){ ERR_EXIT(\"signal error\"); } g_data = zeros; alarm(1); for (;;){ g_data = zeros; g_data = ones; } return 0; } void unsafe_fun(){ printf(\"%d %d\\n\", g_data.a, g_data.b); } void handler(int sig){ unsafe_fun(); alarm(1); } ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:4:4","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"ä¿¡å·æœªå†³ï¼ˆpendingï¼‰ æ‰§è¡Œä¿¡å·çš„å¤„ç†åŠ¨ä½œç§°ä¸ºä¿¡å·é€’è¾¾ï¼Œä¿¡å·ä»äº§ç”Ÿåˆ°é€’è¾¾ä¹‹é—´çš„çŠ¶æ€ï¼Œç§°ä¸ºä¿¡å·æœªå†³ã€‚ ä¿¡å·é›†æ“ä½œå‡½æ•° int sigemptyset(sigset_t *set); int sigfillset(sigset_t *set); int sigaddset(sigset_t *set, int signum); int sigdelset(sigset_t *set, int signum); int sigismember(const sigset_t *set, int signum); sigprocmask åŠŸèƒ½ï¼šè¯»å–æˆ–æ›´æ”¹è¿›ç¨‹çš„ä¿¡å·å±è”½å­— å‡½æ•°åŸå‹ï¼š int sigprocmask(int how, const sigset_t *set, sigset_t *oldset); å‡½æ•°å‚æ•°ï¼šä»¥å±è”½å­maskä¸ºä¾‹ SIG_BLOCK è¢«é˜»å¡çš„ä¿¡å·é›†æ˜¯å½“å‰ä¿¡å·é›†å’Œä¿¡å·é›†å‚æ•°çš„é›†åˆã€‚mask = mask | set SIG_UNBLOCK ä»å½“å‰é˜»å¡ä¿¡å·é›†ä¸­åˆ é™¤ set ä¸­çš„ä¿¡å·ã€‚ å…è®¸å°è¯•è§£é”æœªè¢«å±è”½çš„ä¿¡å·ã€‚ mask = mask \u0026 ~set SIG_SETMASK é˜»å¡ä¿¡å·é›†è¢«è®¾ç½®ä¸ºå‚æ•° setã€‚mask = set å¦‚æœ oldset æ˜¯éç©ºæŒ‡é’ˆï¼Œåˆ™è¯»å–è¿›ç¨‹çš„å½“å‰ä¿¡å·å±è”½å­—é€šè¿‡oldsetå‚æ•°ä¼ å‡ºã€‚ è¿”å›å€¼ï¼š0: æˆåŠŸã€‚ -1: å‡ºé”™ void handler(int sig); void printsigset(sigset_t *set); int main(int argc, char *argv[]){ sigset_t pset, bset; sigemptyset(\u0026bset); sigaddset(\u0026bset, SIGINT); if (signal(SIGINT, handler) == SIG_ERR){ ERR_EXIT(\"signal error\"); } if (signal(SIGQUIT, handler) == SIG_ERR){ ERR_EXIT(\"signal error\"); } sigprocmask(SIG_BLOCK, \u0026bset, NULL); for(;;){ sigpending(\u0026pset); printsigset(\u0026pset); sleep(1); } return 0; } void handler(int sig){ if (sig == SIGINT){ printf(\"recv a sig = %d\\n\", sig); } else { sigset_t uset; sigemptyset(\u0026uset); sigaddset(\u0026uset, SIGINT); sigprocmask(SIG_UNBLOCK, \u0026uset, NULL); } } void printsigset(sigset_t *set){ int i; for (i = 1; i \u003c NSIG; ++i){ if (sigismember(set, i)){ putchar('1'); } else { putchar('0'); } } } sigaction åŠŸèƒ½ï¼šæ”¹å˜è¿›ç¨‹æ¥æ”¶åˆ°ç‰¹å®šä¿¡å·åçš„è¡Œä¸º åŸå‹ï¼š int sigaction(int signum, const struct sigaction *act, struct sigaction *oldact); å‚æ•°ï¼šsignumï¼šä¿¡å·å€¼ï¼›act:æŒ‡å‘ç»“æ„sigactionçš„å®ä¾‹æŒ‡é’ˆloldactï¼šoldactæŒ‡å‘çš„å¯¹è±¡ç”¨æ¥ä¿å­˜åŸæ¥ç›¸å¯¹åº”ä¿¡å·çš„å¤„ç†ã€‚ struct sigaction { void (*sa_handler)(int); void (*sa_sigaction)(int, siginfo_t *, void *); sigset_t sa_mask; int sa_flags; void (*sa_restorer)(void); }; è¿”å›å€¼ï¼š-1ï¼šå¤±è´¥ï¼›0ï¼šæˆåŠŸ oid handler(int sig); __sighandler_t my_signal(int sig, __sighandler_t handler); int main(int argc, char *argv[]){ // struct sigaction act; // act.sa_handler = handler; // sigemptyset(\u0026act.sa_mask); // act.sa_flags = 0; // if (sigaction(SIGINT, \u0026act, NULL) \u003c 0){ // ERR_EXIT(\"sigaction error\"); // } my_signal(SIGINT, handler); for (;;){ pause(); } return 0; } __sighandler_t my_signal(int sig, __sighandler_t handler){ struct sigaction act; struct sigaction oldact; act.sa_handler = handler; sigemptyset(\u0026act.sa_mask); act.sa_flags = 0; if (sigaction(SIGINT, \u0026act, \u0026oldact) \u003c 0){ return SIG_ERR; } return oldact.sa_handler; } void handler(int sig){ printf(\"recv a sig = %d\\n\", sig); } ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:4:5","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"æ—¶é—´ ä¸åŒç²¾åº¦ä¸‹çš„ä¼‘çœ  ç§’ï¼šunsigned int sleep(unsigned int seconds); time_t å¾®ç§’ï¼šint usleep(useconds_t usec); struct timeval{ long tv_sec; long tv_usec; } çº³ç§’ï¼šint nanosleep(const struct timespec *req, struct timespec *rem); struct timespec { time_t tv_sec; /* seconds */ long tv_nsec; /* nanoseconds */ }; setitimer åŠŸèƒ½ï¼šå°† which æŒ‡å®šçš„å®šæ—¶å™¨å½“å‰å€¼å­˜å‚¨åˆ° value æŒ‡å‘çš„ç»“æ„ä½“ä¸­ å‡½æ•°åŸå‹ï¼š int setitimer(int which, const struct itimerval *restrict value, struct itimerval *restrict ovalue); å‚æ•°ï¼šwhich:æŒ‡å®šå®šæ—¶å™¨ç±»å‹ IYIMER_REAL: ç»è¿‡æŒ‡å®šæ—¶é—´åï¼Œå†…æ ¸å‘é€SIGALARMä¿¡å·ç»™æœ¬è¿›ç¨‹ ITIMER_VIRTUAL: åœ¨ç”¨æˆ·ç©ºé—´æ‰§è¡ŒæŒ‡å®šçš„æ—¶é—´åï¼Œå†…æ ¸å‘é€ SIGVTALRM ä¿¡å·ç»™æœ¬è¿›ç¨‹ã€‚ ITIMER_PROF: åœ¨ç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´æ‰§è¡ŒæŒ‡å®šçš„æ—¶é—´åï¼Œå†…æ ¸å‘é€ SIGPROF ä¿¡å·ç»™æœ¬è¿›ç¨‹ã€‚ è¿”å›å€¼ï¼š-1å¤±è´¥ï¼Œ0æˆåŠŸ void handler(int sig); int main(int argc, char *argv[]){ if (signal(SIGINT, handler) == SIG_ERR){ ERR_EXIT(\"signal error\"); } struct timeval tv_interval = {1, 0}; struct timeval tv_value = {1, 0}; struct itimerval it; it.it_interval = tv_interval; it.it_value = tv_value; setitimer(ITIMER_REAL, \u0026it, NULL); // for(;;); for (int i = 0; i \u003c 10000; i++); struct itimerval oit; setitimer(ITIMER_REAL, \u0026it, \u0026oit); printf(\"%d %d %d %d\\n\", (int)oit.it_interval.tv_sec, (int)oit.it_interval.tv_usec, (int)oit.it_value.tv_sec, (int)oit.it_value.tv_usec); return 0; } void handler(int sig){ printf(\"recv a sig = %d\\n\", sig); } ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:4:6","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"ç®¡é“ ç®¡é“ ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:5:0","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"åŒ¿åç®¡é“ pipe åŠŸèƒ½ï¼šåˆ›å»ºä¸€æ— åç®¡é“ (åœ¨å…·æœ‰å…±åŒç¥–å…ˆçš„è¿›ç¨‹é—´é€šä¿¡) åŸå‹ï¼šint pipe(int fd[2]); å‚æ•°ï¼šfdï¼šæ–‡ä»¶æè¿°ç¬¦æ•°ç»„ï¼Œ0ï¼šè¯»ç«¯ï¼Œ1å†™ç«¯ è¿”å›ï¼š0ï¼šæˆåŠŸï¼Œé”™è¯¯ä»£ç ï¼šå¤±è´¥ int main(int argc, char *argv[]){ int pipefd[2]; if (pipe(pipefd) == -1){ ERR_EXIT(\"pipe error\"); } pid_t pid; pid = fork(); if (pid == -1){ ERR_EXIT(\"fork error\"); } if (pid == 0){ close(pipefd[0]); write(pipefd[1], \"hello\", 5); close(pipefd[1]); exit(EXIT_SUCCESS); } close(pipefd[1]); char buf[10] = {0}; read(pipefd[0], buf, 10); printf(\"buf = %s\\n\", buf); return 0; } ls | wc -w int main(int argc, char *argv[]){ int pipefd[2]; if (pipe(pipefd) == -1){ ERR_EXIT(\"pipe error\"); } pid_t pid; pid = fork(); if (pid == -1){ ERR_EXIT(\"fork error\"); } if (pid == 0){ dup2(pipefd[1], STDOUT_FILENO); close(pipefd[1]); close(pipefd[0]); execlp(\"ls\", \"ls\", NULL); fprintf(stderr, \"error execute ls\\n\"); exit(EXIT_FAILURE); } dup2(pipefd[0], STDIN_FILENO); close(pipefd[0]); close(pipefd[1]); execlp(\"wc\", \"wc\", \"-w\", NULL); fprintf(stderr, \"error execute ls\\n\"); exit(EXIT_FAILURE); return 0; } cp int main(int argc, char *argv[]){ close(0); open(\"makefile\", O_RDONLY); close(1); open(\"test\", O_WRONLY | O_CREAT | O_TRUNC, 0644); execlp(\"cat\", \"cat\", NULL); return 0; } ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:5:1","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"ç®¡é“è¯»å†™è§„åˆ™ å½“æ²¡æœ‰æ•°æ®å¯è¯»æ—¶ O_NONBLOCK disable:readè°ƒç”¨é˜»å¡ï¼Œå³è¿›ç¨‹æš‚åœæ‰§è¡Œï¼Œä¸€ç›´ç­‰åˆ°æœ‰æ•°æ®æ¥åˆ°ä¸ºæ­¢ã€‚ O_NONBLOCK enable:readè°ƒç”¨è¿”å›-1,errnoå€¼ä¸ºEAGAINã€‚ å¦‚æœæ‰€æœ‰ç®¡é“å†™ç«¯å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦è¢«å…³é—­ï¼Œåˆ™readè¿”å›0 å¦‚æœæ‰€æœ‰ç®¡é“è¯»ç«¯å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦è¢«å…³é—­ï¼Œåˆ™writeæ“ä½œä¼šäº§ç”Ÿä¿¡å·SIGPIPE å½“è¦å†™å…¥çš„æ•°æ®é‡ä¸å¤§äºPIPE_BUFæ—¶ï¼Œlinuxå°†ä¿è¯å†™å…¥çš„åŸå­æ€§ã€‚ å½“è¦å†™å…¥çš„æ•°æ®é‡å¤§äºPIPE_BUFæ—¶ï¼Œlinuxå°†ä¸å†ä¿è¯å†™å…¥çš„åŸå­æ€§ã€‚ int main(int argc, char *argv[]){ int pipefd[2]; if (pipe(pipefd) == -1){ ERR_EXIT(\"pipe error\"); } pid_t pid; pid = fork(); if (pid == -1){ ERR_EXIT(\"fork error\"); } if (pid == 0){ sleep(3); close(pipefd[0]); write(pipefd[1], \"hello\", 5); close(pipefd[1]); exit(EXIT_SUCCESS); } close(pipefd[1]); char buf[10] = {0}; int flags = fcntl(pipefd[0], F_GETFL); fcntl(pipefd[0], F_SETFL, flags | O_NONBLOCK); int ret = read(pipefd[0], buf, 10); if (ret == -1){ ERR_EXIT(\"read error\"); } printf(\"buf = %s\\n\", buf); return 0; } // è¾“å‡ºï¼šread error: Resource temporarily unavailable int main(int argc, char *argv[]){ int pipefd[2]; if (pipe(pipefd) == -1){ ERR_EXIT(\"pipe error\"); } pid_t pid; pid = fork(); if (pid == -1){ ERR_EXIT(\"fork error\"); } if (pid == 0){ close(pipefd[1]); exit(EXIT_SUCCESS); } close(pipefd[1]); char buf[10] = {0}; int ret = read(pipefd[0], buf, 10); if (ret == -1){ ERR_EXIT(\"read error\"); } printf(\"ret = %d\\n\", ret); return 0; } // è¾“å‡ºï¼š ret = 0 void handler(int sig){ printf(\"recv a sig = %d\\n\", sig); } int main(int argc, char *argv[]){ signal(SIGPIPE, handler); int pipefd[2]; if (pipe(pipefd) == -1){ ERR_EXIT(\"pipe error\"); } pid_t pid; pid = fork(); if (pid == -1){ ERR_EXIT(\"fork error\"); } if (pid == 0){ close(pipefd[0]); exit(EXIT_SUCCESS); } close(pipefd[0]); sleep(1); int ret = write(pipefd[1], \"hello\", 5); if (ret == -1){ ERR_EXIT(\"write error\"); } return 0; } // è¾“å‡ºï¼š recv a sig = 13 write error: Broken pipe // ç®¡é“å¤§å° 65536 int main(int argc, char *argv[]){ int pipefd[2]; if (pipe(pipefd) == -1){ ERR_EXIT(\"pipe error\"); } int ret; int count = 0; int flags = fcntl(pipefd[1], F_GETFL); fcntl(pipefd[1], F_SETFL, flags | O_NONBLOCK); while(1){ ret = write(pipefd[1], \"A\", 1); if (ret == -1){ printf(\"err = %s\\n\", strerror(errno)); break; } count++; } printf(\"pipe size = %d\\n\", count); return 0; } int main(int argc, char *argv[]){ char a[TEST_SIZE]; char b[TEST_SIZE]; memset(a, 'A', sizeof(a)); memset(b, 'B', sizeof(b)); int pipefd[2]; int ret = pipe(pipefd); if(ret == -1){ ERR_EXIT(\"pipe error\"); } pid_t pid = fork(); if (pid == 0){ close(pipefd[0]); ret = write(pipefd[1], a, sizeof(a)); printf(\"apid = %d write %d bytes to pipe\\n\", getpid(), ret); exit(0); } pid = fork(); if (pid == 0){ close(pipefd[0]); ret = write(pipefd[1], b, sizeof(b)); printf(\"bpid = %d write %d bytes to pipe\\n\", getpid(), ret); exit(0); } close(pipefd[1]); sleep(1); int fd = open(\"test.txt\", O_WRONLY | O_CREAT | O_TRUNC, 0644); char buf[1024*4] = {0}; int n = 1; while(1){ ret = read(pipefd[0], buf, sizeof(buf)); if (ret == 0) break; printf(\"n = %02d pid = %d read %d bytes from pipe buf[4095] = %c\\n\", n++, getpid(), ret, buf[4095]); write(fd, buf, ret); } return 0; } ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:5:2","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"å‘½åç®¡é“FIFO mkfifo åŠŸèƒ½ï¼šåˆ›å»ºä¸€å‘½åç®¡é“ ï¼Œå¯åœ¨ä¸ç›¸å…³çš„è¿›ç¨‹é—´è¿›è¡Œé€šä¿¡ï¼Œå‘½ä»¤è¡Œåˆ›å»ºmkfifo filename åŸå‹ï¼šint mkfifo(const char *pathname, mode_t mode); å‚æ•°ï¼špathname:æ–‡ä»¶åï¼›mode:æ–‡ä»¶çŠ¶æ€æ¨¡å¼ è¿”å›ï¼š0ï¼šæˆåŠŸï¼Œ-1ï¼šå¤±è´¥ å‘½åç®¡é“æ‰“å¼€è§„åˆ™ å¦‚æœå½“å‰æ‰“å¼€æ“ä½œæ˜¯ä¸ºè¯»è€Œæ‰“å¼€FIFOæ—¶ O_NONBLOCK disableï¼šé˜»å¡ç›´åˆ°æœ‰ç›¸åº”è¿›ç¨‹ä¸ºå†™è€Œæ‰“å¼€FIFO O_NONBLOCK enableï¼šç«‹åˆ»è¿”å›æˆåŠŸ å¦‚æœå½“å‰æ‰“å¼€æ“ä½œæ˜¯ä¸ºå†™è€Œæ‰“å¼€FIFOæ—¶ O_NONBLOCK disableï¼šé˜»å¡ç›´åˆ°æœ‰ç›¸åº”è¿›ç¨‹ä¸ºè¯»è€Œæ‰“å¼€FIFO O_NONBLOCK enableï¼šç«‹åˆ»è¿”å›å¤±è´¥ï¼Œé”™è¯¯ç ä¸ºENXIO int main(int argc, char *argv[]){ int fifo; fifo = mkfifo(\"p1\", 0644); if (fifo == -1){ ERR_EXIT(\"FIFO create fail\"); } int fd; fd = open(\"p1\", O_RDONLY | O_NONBLOCK); if (fd == -1){ ERR_EXIT(\"open error\"); } printf(\"open success\\n\"); return 0; } // è¾“å‡ºï¼šopen success int main(int argc, char *argv[]){ int fd; fd = open(\"p1\", O_WRONLY | O_NONBLOCK); if (fd == -1){ ERR_EXIT(\"open error\"); } printf(\"open success\\n\"); return 0; } // è¾“å‡ºopen error: No such device or address cp int main(int argc, char *argv[]){ mkfifo(\"tp\", 0644); int infd; infd = open(\"makefile\", O_RDONLY); if (infd == -1){ ERR_EXIT(\"open error\"); } int outfd; outfd = open(\"tp\", O_WRONLY); if (outfd == -1){ ERR_EXIT(\"open error\"); } char buf[1024]; int n; while ((n = read(infd, buf, 1024)) \u003e 0){ write(outfd, buf, n); } close(infd); close(outfd); return 0; } int main(int argc, char *argv[]){ int infd; infd = open(\"tp\", O_RDONLY); if (infd == -1){ ERR_EXIT(\"open error\"); } int outfd; outfd = open(\"test\", O_WRONLY | O_CREAT | O_TRUNC, 0644); if (outfd == -1){ ERR_EXIT(\"open error\"); } char buf[1024]; int n; while ((n = read(infd, buf, 1024)) \u003e 0){ write(outfd, buf, n); } close(infd); close(outfd); unlink(\"tp\"); return 0; } ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:5:3","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"minishellå®è·µ ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:6:0","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"parse_command // å•æ¡å‘½ä»¤è§£æ ls -l -a char *cp = cmdline; char *avp = avline; int i = 0; while(*cp != '\\0'){ while (*cp == ' ' || *cp == '\\t'){ cp++; // è¿‡æ»¤ç©ºæ ¼ } if (*cp == '\\0' || *cp == '\\n'){ break; // è¡Œå°¾è·³å‡º } cmd.args[i] = avp; while (*cp != '\\0' \u0026\u0026 *cp !=' ' \u0026\u0026 *cp != '\\t' \u0026\u0026 *cp !='\\n'){ *avp++ = *cp++; } *avp++ = '\\0'; // printf(\"[%s]\\n\", cmd.args[i]); i++; } // å•æ¡å‘½ä»¤æ‰§è¡Œ pid_t pid = fork(); // è®©å­è¿›ç¨‹æ‰§è¡Œå‘½ä»¤execvp(execvpæ˜¯æ›¿æ¢ç¨‹åº) if (pid == -1){ ERR_EXIT(\"fork\"); } int ret; if (pid == 0){ ret = execvp(cmd.args[0], cmd.args); if (ret == -1){ ERR_EXIT(\"execvp\"); } } wait(NULL); cmd [\u003c filename][| cmd] ... [or filename][\u0026] æ–¹æ‹¬å·å¯é€‰ çœç•¥å·(â€¦)è¡¨ç¤ºå‰é¢å¯é‡å¤0æ¬¡æˆ–è€…å¤šæ¬¡ å…¶ä¸­orå¯ä»¥æ˜¯\u003e æˆ–è€…\u003e\u003e /* cat \u003c test.txt | grep -n public \u003e test2.txt \u0026 */ /* 1. è§£æç¬¬ä¸€æ¡ç®€å•å‘½ä»¤ 2. åˆ¤å®šæ˜¯å¦æœ‰è¾“å…¥é‡å®šå‘ç¬¦ 3. åˆ¤å®šæ˜¯å¦æœ‰ç®¡é“ 4. åˆ¤å®šæ˜¯å¦æœ‰è¾“å‡ºé‡å®šå‘ç¬¦ 5. åˆ¤å®šæ˜¯å¦åå°ä½œä¸š 6. åˆ¤æ–­å‘½ä»¤ç»“æŸ '\\n' */ ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:6:1","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"Linuxç½‘ç»œç¼–ç¨‹ ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:7:0","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"TCP/IP ç›´æ¥çœ‹ å›¾è§£ç½‘ç»œä»‹ç» | å°æ—coding (xiaolincoding.com) TCP_IP TCP/IPå››å±‚æ¨¡å‹ TCP/IPå››å±‚æ¨¡å‹ å°è£…è¿‡ç¨‹ å°è£… ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:8:0","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"é“¾è·¯å±‚ æœ€å¤§ä¼ è¾“å•å…ƒ(MTU)ï¼šé“¾è·¯å±‚æ•°æ®å¸§çš„æœ€å¤§é•¿åº¦, ä¸¤å°é€šä¿¡ä¸»æœºè·¯å¾„ä¸­çš„æœ€å°MTUå«è·¯å¾„MTUã€‚ ICMPåè®®ï¼šç”¨äºä¼ é€’å·®é”™ä¿¡æ¯ã€æ—¶é—´ã€å›æ˜¾ã€ç½‘ç»œä¿¡æ¯ç­‰æ§åˆ¶æ•°æ®ï¼Œåœ¨IPæŠ¥æ–‡ä¸­ ARPåœ°å€è§£æåè®®ï¼šå¹¿æ’­æœºåˆ¶ä¼ æ’­ï¼Œå›å¤ARPè¯·æ±‚ï¼ŒARPç¼“å­˜åŒºæ˜ å°„ RARPåå‘åœ°å€è§£æåè®® ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:8:1","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"ä¼ è¾“æ§åˆ¶å±‚ TCP åŸºäºå­—èŠ‚æµï¼Œé¢å‘è¿æ¥ï¼Œå¯é ä¼ è¾“ï¼Œç¼“å†²ä¼ è¾“ï¼Œå…¨åŒå·¥ï¼Œæµé‡æ§åˆ¶ æœ€é•¿æŠ¥æ–‡å¤§å°MSS ä¿è¯å¯é æ€§ å·®é”™ï¼šæ ¡éªŒå’Œ ä¸¢åŒ…ï¼šè¶…æ—¶é‡ä¼ +ç¡®è®¤ å¤±åºï¼šseq é‡å¤ï¼šseq TCP å¤´æ ¼å¼ ä¸‰æ¬¡æ¡æ‰‹ TCP ä¸‰æ¬¡æ¡æ‰‹ å››æ¬¡æŒ¥æ‰‹ å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­è¿æ¥ â€”â€” TCP å››æ¬¡æŒ¥æ‰‹ ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:8:2","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"æ»‘åŠ¨çª—å£åè®® æµé‡æ§åˆ¶ï¼šçª—å£ç»´æŠ¤ ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:8:3","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"Socket çœ‹æˆæ˜¯ç”¨æˆ·è¿›ç¨‹ä¸å†…æ ¸ç½‘ç»œåè®®æ ˆçš„ç¼–ç¨‹æ¥å£ã€‚ ä¸ä»…å¯ä»¥ç”¨äºæœ¬æœºçš„è¿›ç¨‹é—´é€šä¿¡ï¼Œè¿˜å¯ä»¥ç”¨äºç½‘ç»œä¸Šä¸åŒä¸»æœºçš„è¿›ç¨‹é—´é€šä¿¡ã€‚ å¥—æ¥å£çš„åœ°å€ç»“æ„ï¼ŒåŒ…æ‹¬PV4å’Œé€šç”¨åœ°å€ç»“æ„ï¼Œä»¥åŠå¦‚ä½•åœ¨ä¸åŒä¸»æœºå’Œåè®®ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚ man 7 ipæŸ¥çœ‹ å¥—æ¥å£å¿…é¡»æœ‰åœ°å€å±æ€§æ¥æ ‡è¯†ä¸€ä¸ªç«¯ç‚¹ï¼ŒTCP/IPåè®®ç”¨IPåœ°å€ã€ç«¯å£å·å’Œåœ°å€å®¶æ—æ¥è¡¨è¾¾ã€‚ struct sockaddr_in { sa_family_t sin_family; /* address family: AF_INET */ in_port_t sin_port; /* port in network byte order */ struct in_addr sin_addr; /* internet address */ }; ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:9:0","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"åŸºç¡€æ¦‚å¿µ ç½‘ç»œå­—èŠ‚åº å­—èŠ‚åº å¤§ç«¯å­—èŠ‚åº (Big Endian) æœ€é«˜æœ‰æ•ˆä½(MSB:Most Significant Bit)å­˜å‚¨äºæœ€ä½å†…å­˜åœ°å€å¤„ï¼Œæœ€ä½æœ‰æ•ˆä½(LSB:Lowest Significant Bit)å­˜å‚¨äºæœ€é«˜å†…å­˜åœ°å€å¤„ã€‚ å°ç«¯å­—èŠ‚åº(Little Endian) æœ€é«˜æœ‰æ•ˆä½å­˜å‚¨äºæœ€é«˜å†…å­˜åœ°å€å¤„ï¼Œæœ€ä½æœ‰æ•ˆä½å­˜å‚¨äºæœ€ä½å†…å­˜åœ°å€å¤„ã€‚ ä¸»æœºå­—èŠ‚åº ä¸åŒçš„ä¸»æœºæœ‰ä¸åŒçš„å­—èŠ‚åºï¼Œå¦‚x86ä¸ºå°ç«¯å­—èŠ‚åºï¼ŒMotorola6800ä¸ºå¤§ç«¯å­—èŠ‚åºï¼ŒARMå­—èŠ‚åºæ˜¯å¯é…ç½®çš„ã€‚ ç½‘ç»œå­—èŠ‚åº ç½‘ç»œå­—èŠ‚åºè§„å®šä¸ºå¤§ç«¯å­—èŠ‚åº å­—èŠ‚åºè½¬æ¢å‡½æ•° hï¼šhostï¼›nï¼šnetworkï¼›sï¼šshortï¼› lï¼šlongï¼› #include \u003carpa/inet.h\u003e uint32_t htonl(uint32_t hostlong);// 4å­—èŠ‚çš„ä¸»æœºå­—èŠ‚åºè½¬ä¸ºç½‘ç»œå­—èŠ‚åº uint16_t htons(uint16_t hostshort); uint32_t ntohl(uint32_t netlong); uint16_t ntohs(uint16_t netshort); #include \u003cstdio.h\u003e #include \u003cstdlib.h\u003e #include \u003carpa/inet.h\u003e int main() { unsigned int x = 0x12345678; unsigned char *p = (unsigned char *)(\u0026x); printf(\"%0x %0x %0x %0x\\n\", p[0], p[1], p[2], p[3]); unsigned int y = htonl(x); p = (unsigned char *)(\u0026y); printf(\"%0x %0x %0x %0x\\n\", p[0], p[1], p[2], p[3]); return 0; } // è¾“å‡º // 78 56 34 12 // 12 34 56 78 åœ°å€è½¬æ¢å‡½æ•° int inet_aton(const char *cp, struct in_addr *inp);// ç‚¹åˆ†åè¿›åˆ¶çš„IPv4åœ°å€å­—ç¬¦ä¸²è½¬struct in_addrç»“æ„ä½“ç±»å‹çš„äºŒè¿›åˆ¶è¡¨ç¤º in_addr_t inet_addr(const char *cp); in_addr_t inet_network(const char *cp); // ç‚¹åˆ†åè¿›åˆ¶çš„IPv4åœ°å€å­—ç¬¦ä¸²è½¬å¯¹åº”çš„ç½‘ç»œåœ°å€çš„äºŒè¿›åˆ¶è¡¨ç¤º char *inet_ntoa(struct in_addr in); // ç½‘ç»œå­—èŠ‚åºè¡¨ç¤ºçš„struct in_addrç±»å‹çš„IPv4åœ°å€è½¬æ¢ä¸ºç‚¹åˆ†åè¿›åˆ¶çš„å­—ç¬¦ä¸²è¡¨ç¤º int main() { struct in_addr ipaddr; inet_aton(\"192.168.0.123\", \u0026ipaddr); printf(\"%u\\n\", ntohl(ipaddr.s_addr)); printf(\"IPv4åœ°å€: %s\\n\", inet_ntoa(ipaddr)); unsigned long addr2 = inet_addr(\"192.168.0.123\"); printf(\"%u\\n\", ntohl(addr2)); struct in_addr ipaddr_1; ipaddr_1.s_addr = addr2; printf(\"IPv4åœ°å€: %s\\n\", inet_ntoa(ipaddr_1)); in_addr_t ip; ip = inet_network(\"192.168.0.123\"); printf(\"%u\\n\", ip); ip = ntohl(ip); struct in_addr ipaddr_2; ipaddr_2.s_addr = ip; printf(\"IPv4åœ°å€: %s\\n\", inet_ntoa(ipaddr_2)); return 0; } å¥—æ¥å­—ç±»å‹ æµå¼å¥—æ¥å­—(SOCK_STREAM) æä¾›é¢å‘è¿æ¥çš„ã€å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡ï¼Œæ•°æ®æ— å·®é”™ï¼Œæ— é‡å¤çš„å‘é€ï¼Œä¸”æŒ‰å‘é€é¡ºåºæ¥æ”¶ã€‚ æ•°æ®æŠ¥å¼å¥—æ¥å­—(SOCK_DGRAM) æä¾›æ— è¿æ¥æœåŠ¡ã€‚ä¸æä¾›æ— é”™ä¿è¯ï¼Œæ•°æ®å¯èƒ½ä¸¢å¤±æˆ–é‡å¤ï¼Œå¹¶ä¸”æ¥æ”¶é¡ºåºæ··ä¹± åŸå§‹å¥—æ¥å­—(SOCK RAW) ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:9:1","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"socketå‡½æ•° socket åŠŸèƒ½ï¼šåˆ›å»ºä¸€ä¸ªå¥—æ¥å­—ç”¨äºé€šä¿¡ å‡½æ•°åŸå‹ï¼šint socket(int domain, int type, int protocol); å‚æ•°ï¼šdomain:é€šä¿¡åè®®æ—ï¼ˆprotocol familyï¼‰ï¼›type:socketç±»å‹ï¼›protocolï¼šåè®®ç±»å‹ è¿”å›å€¼ï¼šæˆåŠŸï¼šéè´Ÿæ•´æ•°ï¼›å¤±è´¥ï¼š-1. bind åŠŸèƒ½ï¼šç»‘å®šä¸€ä¸ªæœ¬åœ°åœ°å€åˆ°å¥—æ¥å­— å‡½æ•°åŸå‹ï¼šint bind(int socket, const struct sockaddr *address, socklen_t address_len); å‚æ•°ï¼šsocketï¼šå‡½æ•°è¿”å›çš„å¥—æ¥å­—ï¼›addressï¼šè¦ç»‘å®šçš„åœ°å€ï¼›address_lenï¼šåœ°å€é•¿åº¦ è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1. listen åŠŸèƒ½ï¼šå°†å¥—æ¥å­—ç”¨äºç›‘å¬è¿›å…¥çš„è¿æ¥;å°†socketä»ä¸»åŠ¨å¥—æ¥å­—å˜ä¸ºè¢«åŠ¨å¥—æ¥å­— å‡½æ•°åŸå‹ï¼šint listen(int socket, int backlog); å‚æ•°ï¼šsocketï¼šå‡½æ•°è¿”å›çš„å¥—æ¥å­—ï¼›backlogï¼šè§„å®šå†…æ ¸ä¸ºæ­¤å¥—æ¥å­—æ’é˜Ÿçš„æœ€å¤§è¿æ¥ä¸ªæ•° è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1. accept åŠŸèƒ½ï¼šä»å·²å®Œæˆè¿æ¥é˜Ÿåˆ—è¿”å›ç¬¬ä¸€ä¸ªè¿æ¥ï¼Œå¦‚æœå·²å®Œæˆè¿æ¥é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™é˜»å¡ å‡½æ•°åŸå‹ï¼šint accept(int socket, struct sockaddr *restrict address, socklen_t *restrict address_len); å‚æ•°ï¼šsocketï¼šå‡½æ•°è¿”å›çš„å¥—æ¥å­—ï¼›addressï¼šå°†è¿”å›å¯¹ç­‰æ–¹çš„å¥—æ¥å­—åœ°å€ï¼›address_lenï¼šåœ°å€é•¿åº¦ è¿”å›å€¼ï¼šæˆåŠŸï¼šéè´Ÿæ•´æ•°ï¼›å¤±è´¥ï¼š-1. connect åŠŸèƒ½ï¼šå»ºç«‹ä¸€ä¸ªè¿æ¥è‡³addræ‰€æŒ‡å®šçš„å¥—æ¥å­— å‡½æ•°åŸå‹ï¼šint connect(int socket, const struct sockaddr *address, socklen_t address_len); å‚æ•°ï¼šsocketï¼šæœªè¿æ¥çš„å¥—æ¥å­—ï¼›addressï¼šè¦è¿æ¥çš„å¥—æ¥å­—åœ°å€ï¼›address_lenï¼šåœ°å€é•¿åº¦ è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1. å±æ€§ getsockname åŠŸèƒ½ï¼šè·å–æœ¬åœ°åœ°å€ å‡½æ•°åŸå‹ï¼šint getsockname(int sockfd, struct sockaddr *addr, socklen_t *addrlen); å‚æ•°ï¼šsocketï¼šå¥—æ¥å­—ï¼›addrï¼šæœ¬åœ°åœ°å€ï¼›addrlenï¼šåœ°å€é•¿åº¦ è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1. struct sockaddr_in localaddr; socklen_t addrlen = sizeof(localaddr); if ((getsockname(sock, (struct sockaddr*)\u0026localaddr, \u0026addrlen) \u003c 0)){ ERR_EXIT(\"getsockname fail\"); } printf(\"ip = %s port = %d\\n\", inet_ntoa(localaddr.sin_addr), ntohs(localaddr.sin_port)); getpeername ï¼šè·å–å¯¹ç­‰æ–¹åœ°å€ int getpeername(int sockfd, struct sockaddr *addr, socklen_t *addrlen); gethostnameï¼šè·å–ä¸»æœºå int gethostname(char *name, size_t len); gethostbynameï¼šé€šè¿‡ä¸»æœºåè·å–IPåœ°å€ struct hostent *gethostbyname(const char *name); gethostbyaddrï¼šé€šè¿‡IPåœ°å€è·å–ä¸»æœºçš„å®Œæ•´ä¿¡æ¯ struct hostent *gethostbyaddr(const void *addr, socklen_t len, int type); ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:9:2","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"TCPå®¢æˆ·/æœåŠ¡å™¨æ¨¡å‹ netstat -an | grep TIME_WAITæŸ¥çœ‹ç­‰å¾…çŠ¶æ€çš„ç½‘ç»œ TCPå®¢æˆ·/æœåŠ¡å™¨æ¨¡å‹ å›å°„å®¢æˆ·/æœåŠ¡å™¨ å›å°„å®¢æˆ·/æœåŠ¡å™¨ int main() { int listenfd; // listenfd = socket(PF_INET, SOCK_STREAM, 0); listenfd = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP); // æŒ‡å®šTCP if (listenfd \u003c 0){ ERR_EXIT(\"socket fail\"); } // init struct sockaddr_in servaddr; memset(\u0026servaddr, 0, sizeof(servaddr)); servaddr.sin_family = AF_INET; servaddr.sin_port = htons(5188); servaddr.sin_addr.s_addr = htonl(INADDR_ANY); // servaddr.sin_addr.s_addr = inet_addr(\"127.0.0.1\"); // æŒ‡å®šåœ°å€ // inet_aton(\"127.0.0.1\", \u0026servaddr.sin_addr); if (bind(listenfd, (struct sockaddr*)\u0026servaddr, sizeof(servaddr)) \u003c 0){ ERR_EXIT(\"bind fail\"); } if (listen(listenfd, SOMAXCONN) \u003c 0){ ERR_EXIT(\"listen fail\"); } struct sockaddr_in peeraddr; socklen_t peerlen = sizeof(peeraddr); int conn; conn = accept(listenfd, (struct sockaddr*)\u0026peeraddr, \u0026peerlen); if (conn \u003c 0){ ERR_EXIT(\"accept fail\"); } char recvbuf[1024]; while(1){ memset(recvbuf, 0, sizeof(recvbuf)); int ret = read(conn, recvbuf, sizeof(recvbuf)); fputs(recvbuf, stdout); write(conn, recvbuf, ret); memset(recvbuf, 0, sizeof(recvbuf)); } close(conn); close(listenfd); return 0; } int main() { int sock; // listenfd = socket(PF_INET, SOCK_STREAM, 0); sock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP); // æŒ‡å®šTCP if (sock \u003c 0){ ERR_EXIT(\"socket fail\"); } // init struct sockaddr_in servaddr; memset(\u0026servaddr, 0, sizeof(servaddr)); servaddr.sin_family = AF_INET; servaddr.sin_port = htons(5188); servaddr.sin_addr.s_addr = inet_addr(\"127.0.0.1\"); // æŒ‡å®šåœ°å€ // inet_aton(\"127.0.0.1\", \u0026servaddr.sin_addr); int ret; ret = connect(sock, (struct sockaddr*)\u0026servaddr, sizeof(servaddr)); if (ret \u003c 0){ ERR_EXIT(\"connect fail\"); } char sendbuf[1024] = {0}; char recvbuf[1024] = {0}; while (fgets(sendbuf, sizeof(sendbuf), stdin) != NULL) { write(sock, sendbuf, strlen(sendbuf)); read(sock, recvbuf, sizeof(recvbuf)); fputs(recvbuf, stdout); memset(sendbuf, 0, sizeof(sendbuf)); memset(recvbuf, 0, sizeof(recvbuf)); } close(sock); return 0; } å¤„ç†å¤šå®¢æˆ·è¿æ¥ ï¼ˆprocess-per-connectionï¼‰ ä¸€ä¸ªè¿æ¥ä¸€ä¸ªè¿›ç¨‹æ¥å¤„ç†å¹¶å‘ã€‚ çˆ¶è¿›ç¨‹æ¥å—å®¢æˆ·ç«¯è¿æ¥ï¼Œå­è¿›ç¨‹ç”¨æ¥å¤„ç†å’Œå®¢æˆ·ç«¯çš„é€šä¿¡ç»†èŠ‚ã€‚ void do_service(int conn, struct sockaddr_in peeraddr){ char recvbuf[1024]; while(1){ memset(recvbuf, 0, sizeof(recvbuf)); int ret = read(conn, recvbuf, sizeof(recvbuf)); if (ret == 0){ printf(\"client ip = %s port = %d close\\n\", inet_ntoa(peeraddr.sin_addr), ntohs(peeraddr.sin_port)); break; } else if (ret == -1){ ERR_EXIT(\"read fail\"); } fputs(recvbuf, stdout); write(conn, recvbuf, ret); memset(recvbuf, 0, sizeof(recvbuf)); } } int main() { int listenfd; // listenfd = socket(PF_INET, SOCK_STREAM, 0); listenfd = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP); // æŒ‡å®šTCP if (listenfd \u003c 0){ ERR_EXIT(\"socket fail\"); } // init struct sockaddr_in servaddr; memset(\u0026servaddr, 0, sizeof(servaddr)); servaddr.sin_family = AF_INET; servaddr.sin_port = htons(5188); servaddr.sin_addr.s_addr = htonl(INADDR_ANY); int on = 1; // åœ¨TIME_WAITè¿˜æ²¡æ¶ˆå¤±çš„æƒ…å†µï¼Œå…è®¸æœåŠ¡å™¨é‡å¯ if (setsockopt(listenfd, SOL_SOCKET, SO_REUSEADDR, \u0026on, sizeof(on)) \u003c 0){ ERR_EXIT(\"setsocketopt\"); } if (bind(listenfd, (struct sockaddr*)\u0026servaddr, sizeof(servaddr)) \u003c 0){ ERR_EXIT(\"bind fail\"); } if (listen(listenfd, SOMAXCONN) \u003c 0){ ERR_EXIT(\"listen fail\"); } struct sockaddr_in peeraddr; socklen_t peerlen = sizeof(peeraddr); int conn; pid_t pid; while(1){ conn = accept(listenfd, (struct sockaddr*)\u0026peeraddr, \u0026peerlen); if (conn \u003c 0){ ERR_EXIT(\"accept fail\"); } printf(\"ip = %s port = %d\\n\", inet_ntoa(peeraddr.sin_addr), ntohs(peeraddr.sin_port)); pid = fork(); if (pid == -1){ ERR_EXIT(\"fork fail\"); } if (pid == 0){ close(listenfd); do_service(conn, peeraddr); exit(EXIT_SUCCESS); } else{ close(conn); } } return 0; } ç‚¹å¯¹ç‚¹èŠå¤© åŒæ–¹ç»´æŠ¤ä¸€ä¸ªå¥—æ¥å­— void handler(int sig) { printf(\"recv a sig = %d\\n\", sig); exit(EXIT_SUCCESS); } int main() { int listenfd; // listenfd = socket(PF_INET, SOCK_STREAM, 0); listenfd = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP); // æŒ‡å®šTCP if (listenfd \u003c 0){ ERR_EXIT(\"socket fail\"); } // init struct sockaddr_in servaddr; memset(\u0026servaddr, 0, sizeof(servaddr)","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:9:3","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"Select äº”ç§I/Oæ¨¡å‹ é˜»å¡I/O éé˜»å¡I/O I/Oå¤ç”¨ï¼ˆselect å’Œ pollï¼‰ selectç®¡ç†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ ä¿¡å·é©±åŠ¨I/O å¼‚æ­¥I/O selectå‡½æ•° åŠŸèƒ½ï¼šæ£€æµ‹å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸­æ˜¯å¦æœ‰å¯è¯»ã€å¯å†™æˆ–å¼‚å¸¸äº‹ä»¶ å‡½æ•°åŸå‹ï¼šint select(int nfds, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, struct timeval *timeout); å‚æ•° nfdsï¼šè¡¨ç¤ºæ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦çš„èŒƒå›´ï¼Œå³æœ€å¤§çš„æ–‡ä»¶æè¿°ç¬¦åŠ 1ã€‚ï¼ˆåé¢é›†åˆæœ€å¤§å€¼åŠ 1ï¼‰ readfdsã€writefdsã€exceptfdsï¼šåˆ†åˆ«æ˜¯æŒ‡å‘å¯è¯»ã€å¯å†™å’Œå¼‚å¸¸ç­‰äº‹ä»¶çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆçš„æŒ‡é’ˆã€‚ timeoutï¼šè¡¨ç¤ºè¶…æ—¶æ—¶é—´ã€‚ è¿”å›å€¼ï¼šå¤±è´¥ï¼š1ï¼›æˆåŠŸï¼šè¶…æ—¶æ²¡æ£€æµ‹åˆ°ä¸º0ï¼Œæ£€æµ‹åˆ°çš„äº‹ä»¶ä¸ªæ•° void FD_CLR(int fd, fd_set *set); // ç§»é™¤ int FD_ISSET(int fd, fd_set *set); // fdæ˜¯å¦åœ¨é›†åˆä¸­ void FD_SET(int fd, fd_set *set); // æ·»åŠ é›†åˆ void FD_ZERO(fd_set *set); // æ¸…ç©ºé›†åˆ å¯è¯»äº‹ä»¶å‘ç”Ÿæ¡ä»¶ å¥—æ¥å£ç¼“å†²åŒºæœ‰æ•°æ®å¯è¯» è¿æ¥çš„è¯»ä¸€åŠå…³é—­ï¼Œå³æ¥æ”¶åˆ°FINæ®µï¼Œè¯»æ“ä½œå°†è¿”å›O å¦‚æœæ˜¯ç›‘å¬å¥—æ¥å£ï¼Œå·²å®Œæˆè¿æ¥é˜Ÿåˆ—ä¸ä¸ºç©ºæ—¶ å¥—æ¥å£ä¸Šå‘ç”Ÿäº†ä¸€ä¸ªé”™è¯¯å¾…å¤„ç†ï¼Œé”™è¯¯å¯ä»¥é€šè¿‡getsockoptæŒ‡å®šSO_ERRORé€‰é¡¹æ¥è·å–ã€‚ å¯å†™äº‹ä»¶å‘ç”Ÿæ¡ä»¶ å¥—æ¥å£å‘é€ç¼“å†²åŒºæœ‰ç©ºé—´å®¹çº³æ•°æ®ã€‚ è¿æ¥çš„å†™ä¸€åŠå…³é—­ã€‚å³æ”¶åˆ°RSTæ®µä¹‹åï¼Œå†æ¬¡è°ƒç”¨writeæ“ä½œã€‚ å¥—æ¥å£ä¸Šå‘ç”Ÿäº†ä¸€ä¸ªé”™è¯¯å¾…å¤„ç†ï¼Œé”™è¯¯å¯ä»¥é€šè¿‡getsockoptæŒ‡å®šSO_ERRORé€‰é¡¹æ¥è·å–ã€‚ å¼‚å¸¸äº‹ä»¶å‘ç”Ÿæ¡ä»¶ å¥—æ¥å£å­˜åœ¨å¸¦å¤–æ•°æ® selectæ”¹è¿›å›å°„å®¢æˆ·/æœåŠ¡å™¨ void echo_client(int sock){ fd_set rset; FD_ZERO(\u0026rset); int nready; int maxfd; int fd_stdin = fileno(stdin); maxfd = (fd_stdin \u003e sock) ? fd_stdin: sock; char sendbuf[1024] = {0}; char recvbuf[1024] = {0}; while(1){ FD_SET(fd_stdin, \u0026rset); FD_SET(sock, \u0026rset); nready = select(maxfd + 1, \u0026rset, NULL, NULL, NULL); if (nready == -1){ ERR_EXIT(\"select fail\"); } if (nready == 0){ continue; } if (FD_ISSET(sock, \u0026rset)){ int ret = readline(sock, recvbuf, sizeof(recvbuf)); if (ret == -1){ ERR_EXIT(\"readline fail\"); } else if (ret == 0){ printf(\"server close\\n\"); break; } fputs(recvbuf, stdout); memset(recvbuf, 0, sizeof(recvbuf)); } if (FD_ISSET(fd_stdin, \u0026rset)){ if (fgets(sendbuf, sizeof(sendbuf), stdin) == NULL){ break; } writen(sock, sendbuf, strlen(sendbuf)); memset(sendbuf, 0, sizeof(sendbuf)); } } close(sock); } // æœåŠ¡å™¨ç«¯ int client[FD_SETSIZE]; int maxi = -1; // éå†æ•´ä¸ªFD_SETSIZEå¤ªè´¹æ—¶é—´ï¼Œè®°å½•æœ€å¤§å¾—fdä½ç½®ï¼Œéå†åˆ°é‚£ä¸ªä½ç½®å³å¯ int i; for (i = 0; i \u003c FD_SETSIZE; i++){ client[i] = -1; } int nready; int maxfd = listenfd; fd_set rset; fd_set allset; FD_ZERO(\u0026rset); FD_ZERO(\u0026allset); FD_SET(listenfd, \u0026allset); while(1){ rset = allset; // selectä¼šä¿®æ”¹fd_setï¼Œæ‰€ä»¥æ¯æ¬¡éœ€è¦é‡æ–°èµ‹å€¼ä¸€ä»½ nready = select(maxfd + 1, \u0026rset, NULL, NULL, NULL); if (nready == -1){ if (errno == EINTR){ // selectè¢«ä¿¡å·ä¸­æ–­éœ€è¦é‡æ–°æ‰§è¡Œ continue; } ERR_EXIT(\"select fail\"); } if (nready == 0){ continue; } if (FD_ISSET(listenfd, \u0026rset)){ peerlen = sizeof(peeraddr); conn = accept(listenfd, (struct sockaddr*)\u0026peeraddr, \u0026peerlen); if (conn \u003c 0){ ERR_EXIT(\"accept fail\"); } for (i = 0; i \u003c FD_SETSIZE; i++){ if (client[i] \u003c 0){ client[i] = conn; if (i \u003e maxi){ maxi = i; } break; } } if (i == FD_SETSIZE){ fprintf(stderr, \"too many clients\\n\"); exit(EXIT_FAILURE); } printf(\"ip = %s port = %d\\n\", inet_ntoa(peeraddr.sin_addr), ntohs(peeraddr.sin_port)); FD_SET(conn, \u0026allset); if (conn \u003e maxfd){ maxfd = conn; } if (--nready \u003c= 0){ continue; } } for (i = 0; i \u003c= maxi; i++){ conn = client[i]; if (conn == -1){ continue; } if (FD_ISSET(conn, \u0026rset)){ char recvbuf[1024]; int ret = readline(conn, recvbuf, sizeof(recvbuf)); if (ret == -1){ ERR_EXIT(\"readline fail\"); } if (ret == 0){ struct sockaddr_in peer_addr; socklen_t peer_len = sizeof(peer_addr); getpeername(conn, (struct sockaddr*)\u0026peer_addr, \u0026peer_len); printf(\"client ip = %s port = %d close\\n\", inet_ntoa(peer_addr.sin_addr), ntohs(peer_addr.sin_port)); FD_CLR(conn, \u0026allset); client[i] = -1; if (i == maxi){// å¯èƒ½åˆ é™¤å¾—iæ˜¯å½“å‰å¾—maxi,è¦ä¼˜åŒ–åˆ°ç¬¬äºŒå¤§çš„ä½ç½® for(int j = maxi - 1; i \u003e= 0; j--){ if (client[j] != -1){ maxi = j; break; } } } } fputs(recvbuf, stdout); writen(conn, recvbuf, strlen(recvbuf)); memset(\u0026recvbuf, 0, sizeof(recvbuf)); if (--nready \u003c= 0){ break; } } } } closeå’Œshutdown closeç»ˆæ­¢äº†æ•°æ®ä¼ é€çš„ä¸¤ä¸ªæ–¹å‘ shutdownå¯ä»¥æœ‰é€‰æ‹©çš„ç»ˆæ­¢æŸä¸ªæ–¹å‘çš„æ•°æ®ä¼ é€æˆ–è€…ç»ˆæ­¢æ•°æ®ä¼ é€çš„ä¸¤ä¸ªæ–¹å‘ int shutdown(int sockfd, int how); shutdown how=1å¯ä»¥ä¿è¯å¯¹ç­‰æ–¹æ¥æ”¶åˆ°ä¸€ä¸ªE0Få­—ç¬¦ï¼Œè€Œä¸ç®¡å…¶ä»–è¿›ç¨‹æ˜¯å¦å·²ç»æ‰“å¼€äº†å¥—æ¥å­—ã€‚è€Œcloseä¸èƒ½ä¿è¯ï¼Œç›´åˆ°å¥—æ¥å­—å¼•ç”¨è®¡æ•°å‡ä¸º0æ—¶æ‰å‘é€ã€‚å³ç›´åˆ°æ‰€æœ‰çš„è¿›ç¨‹éƒ½å…³é—­äº†å¥—æ¥å­—ã€‚ I/Oè¶…æ—¶ alarm å¥—æ¥å­—é€‰é¡¹ SO_SNDTIMEO SO_RCVTIMEO select // é—¹é’Ÿå†²çªï¼Œä¸€èˆ¬ä¸ç”¨ void handler(int sig){ return; } signal(SIGALARM, handler); alarm(5); int ret = read(fd, buf, sizeof(buf)); if (ret == -1 \u0026\u0026 errno == EINTR){ errno = ETIMEDOUT; } else if (ret \u003e= 0){ aralm(0); } setsockopt(sock, SOL_SOCKET, SO_RCVTIMEO,5); int ret = read(sock, buf, sizeof(buf)); if (ret == -1 \u0026\u0026 errno","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:9:4","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"poll selectçš„é™åˆ¶ ç”¨selectå®ç°çš„å¹¶å‘æœåŠ¡å™¨ï¼Œèƒ½è¾¾åˆ°çš„å¹¶å‘æ•°ï¼Œå—ä¸¤æ–¹é¢é™åˆ¶ ä¸€ä¸ªè¿›ç¨‹èƒ½æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ã€‚è¿™å¯ä»¥é€šè¿‡è°ƒæ•´å†…æ ¸å‚æ•°ã€‚ ulimit -n 1024è°ƒæ•´ åªèƒ½ä¿®æ”¹å½“å‰è¿›ç¨‹ä»¥åŠå­è¿›ç¨‹ selectä¸­çš„fd_seté›†åˆå®¹é‡çš„é™åˆ¶(FD SETSIZE),è¿™éœ€è¦é‡æ–°ç¼–è¯‘å†…æ ¸ã€‚ int getrlimit(int resource, struct rlimit *rlim); int setrlimit(int resource, const struct rlimit *rlim); resource è®¾ç½® RLIMIT_NOFILE selectå’Œpollå…±åŒç‚¹ï¼šå†…æ ¸è¦éå†æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ï¼Œç›´åˆ°æ‰¾åˆ°å‘ç”Ÿäº‹ä»¶çš„æ–‡ä»¶æè¿°ç¬¦ poll ä¸€ä¸ªè¿›ç¨‹èƒ½æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ã€‚ç³»ç»Ÿæ‰€æœ‰æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æè¿°ä¸ªæ•°ä¹Ÿæ˜¯æœ‰é™çš„ï¼Œè·Ÿå†…å­˜å¤§å°æœ‰å…³ pollå‡½æ•° åŠŸèƒ½ï¼šæ£€æµ‹å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸­æ˜¯å¦æœ‰å¯è¯»ã€å¯å†™æˆ–å¼‚å¸¸äº‹ä»¶ å‡½æ•°åŸå‹ï¼šint poll(struct pollfd *fds, nfds_t nfds, int timeout); å‚æ•° fdsï¼šæŒ‡å‘ä¸€ä¸ªstruct pollfdç»“æ„ä½“æ•°ç»„çš„æŒ‡é’ˆï¼Œæ¯ä¸ªç»“æ„ä½“æè¿°ä¸€ä¸ªå¾…æ£€æµ‹çš„æ–‡ä»¶æè¿°ç¬¦åŠå…¶å…³æ³¨çš„äº‹ä»¶ã€‚ nfdsï¼šè¡¨ç¤ºfdsæ•°ç»„ä¸­ç»“æ„ä½“çš„æ•°é‡ã€‚ timeoutï¼šè¡¨ç¤ºè¶…æ—¶æ—¶é—´ã€‚ è¿”å›å€¼ï¼šæˆåŠŸï¼šå‘ç”Ÿäº‹ä»¶çš„æ–‡ä»¶æè¿°ç¬¦æ•°ï¼Œå¦‚æœè¶…æ—¶è¿”å›0ï¼Œå¦‚æœå‡ºé”™è¿”å›-1ï¼Œå¹¶å°†errnoè®¾ç½®ä¸ºç›¸åº”çš„é”™è¯¯ç  pollå‡½æ•°æ”¯æŒçš„æ–‡ä»¶æè¿°ç¬¦æ•°ç›®æ›´å¤§ï¼ˆnfdså‚æ•°æ²¡æœ‰ä¸Šé™ï¼‰ï¼Œå¹¶ä¸”ä¸éœ€è¦åƒselecté‚£æ ·ä½¿ç”¨ä½å›¾å¤„ç†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„çŠ¶æ€ã€‚ ä¸ç”¨ç»´æŠ¤maxfd ä¸ç”¨ä½¿ç”¨FDã€ZEROã€FD_SETã€FD_CLRã€FD_ISSETå‡½æ•° // serve struct pollfd client[CLIENT_SIZE]; int maxi = 0; // éå†æ•´ä¸ªFD_SETSIZEå¤ªè´¹æ—¶é—´ï¼Œè®°å½•æœ€å¤§å¾—fdä½ç½®ï¼Œéå†åˆ°é‚£ä¸ªä½ç½®å³å¯ int i; for (i = 0; i \u003c CLIENT_SIZE; i++){ client[i].fd = -1; } int nready; client[0].fd = listenfd; client[0].events = POLLIN;// å¯¹ç›‘å¬å¥—æ¥å£çš„å¯è¯»äº‹ä»¶æ„Ÿå…´è¶£ while(1){ nready = poll(client, maxi + 1, -1); if (nready == -1){ if (errno == EINTR){ continue; } ERR_EXIT(\"poll fail\"); } if (nready == 0){ continue; } if (client[0].revents \u0026 POLLIN){ // å¦‚æœäº§ç”Ÿäº†å¯è¯»äº‹ä»¶ peerlen = sizeof(peeraddr); conn = accept(listenfd, (struct sockaddr*)\u0026peeraddr, \u0026peerlen); if (conn \u003c 0){ ERR_EXIT(\"accept fail\"); } for (i = 0; i \u003c CLIENT_SIZE; i++){ if (client[i].fd \u003c 0){ client[i].fd = conn; if (i \u003e maxi){ maxi = i; } break; } } if (i == CLIENT_SIZE){ fprintf(stderr, \"too many clients\\n\"); exit(EXIT_FAILURE); } printf(\"ip = %s port = %d\\n\", inet_ntoa(peeraddr.sin_addr), ntohs(peeraddr.sin_port)); client[i].events = POLLIN; if (--nready \u003c= 0){ continue; } } for (i = 1; i \u003c= maxi; i++){ conn = client[i].fd; if (conn == -1){ continue; } if(client[i].events \u0026 POLLIN){ char recvbuf[1024]; int ret = readline(conn, recvbuf, sizeof(recvbuf)); if (ret == -1){ ERR_EXIT(\"readline fail\"); } if (ret == 0){ struct sockaddr_in peer_addr; socklen_t peer_len = sizeof(peer_addr); getpeername(conn, (struct sockaddr*)\u0026peer_addr, \u0026peer_len); printf(\"client ip = %s port = %d close\\n\", inet_ntoa(peer_addr.sin_addr), ntohs(peer_addr.sin_port)); client[i].fd = -1; if (i == maxi){// å¯èƒ½åˆ é™¤å¾—iæ˜¯å½“å‰å¾—maxi,è¦ä¼˜åŒ–åˆ°ç¬¬äºŒå¤§çš„ä½ç½® for(int j = maxi - 1; i \u003e= 0; j--){ if (client[j].fd != -1){ maxi = j; break; } } } } fputs(recvbuf, stdout); writen(conn, recvbuf, strlen(recvbuf)); memset(\u0026recvbuf, 0, sizeof(recvbuf)); if (--nready \u003c= 0){ break; } } } } // client void echo_client(int sock){ struct pollfd client_fd[2]; int nready; int fd_stdin = fileno(stdin); char sendbuf[1024] = {0}; char recvbuf[1024] = {0}; while(1){ client_fd[0].fd = fd_stdin; client_fd[0].events = POLLIN; client_fd[1].fd = sock; client_fd[1].events = POLLIN; nready = poll(client_fd, 2, -1); if (nready == -1){ ERR_EXIT(\"poll fail\"); } if (nready == 0){ continue; } if (client_fd[1].revents \u0026 POLLIN){ int ret = readline(sock, recvbuf, sizeof(recvbuf)); if (ret == -1){ ERR_EXIT(\"readline fail\"); } else if (ret == 0){ printf(\"server close\\n\"); break; } fputs(recvbuf, stdout); memset(recvbuf, 0, sizeof(recvbuf)); } if (client_fd[0].revents \u0026 POLLIN){ if (fgets(sendbuf, sizeof(sendbuf), stdin) == NULL){ break; } writen(sock, sendbuf, strlen(sendbuf)); memset(sendbuf, 0, sizeof(sendbuf)); } } close(sock); } epollå‡½æ•° epollçš„ä¼˜ç‚¹ ç›¸æ¯”äºselectä¸poll,epollæœ€å¤§çš„å¥½å¤„åœ¨äºå®ƒä¸ä¼šéšç€ç›‘å¬fdæ•°ç›®çš„å¢é•¿è€Œé™ä½æ•ˆç‡ã€‚ å†…æ ¸ä¸­çš„selectä¸pollçš„å®ç°æ˜¯é‡‡ç”¨è½®è¯¢æ¥å¤„ç†çš„ï¼Œè½®è¯¢çš„fdæ•°ç›®è¶Šå¤šï¼Œè€—æ—¶è¶Šå¤šã€‚ epollçš„å®ç°æ˜¯åŸºäºå›è°ƒçš„ï¼Œå¦‚æœfdæœ‰æœŸæœ›çš„äº‹ä»¶å‘ç”Ÿå°±é€šè¿‡å›è°ƒå‡½æ•°å°†å…¶åŠ å…¥epollå°±ç»ªé˜Ÿåˆ—ä¸­ã€‚ï¼ˆåªå…³å¿ƒâ€œæ´»è·ƒâ€çš„fd,ä¸fdæ•°ç›®æ— å…³ï¼‰ å†…æ ¸æŠŠfdæ¶ˆæ¯é€šçŸ¥ç»™ç”¨æˆ·ç©ºé—´å‘¢ï¼Ÿ``select/pollé‡‡å–å†…å­˜æ‹·è´æ–¹æ³•ã€‚è€Œepollé‡‡ç”¨å…±äº«å†…å­˜`çš„æ–¹å¼ã€‚ epollèƒ½ç›´æ¥å®šä½äº‹ä»¶ï¼Œè€Œä¸å¿…éå†æ•´ä¸ªfdé›†åˆã€‚å› ä¸ºepollä¸ä»…ä¼šå‘Šè¯‰åº”ç”¨ç¨‹åºæœ‰I/Oäº‹ä»¶åˆ°æ¥ï¼Œè¿˜ä¼šå‘Šè¯‰åº”ç”¨ç¨‹åºç›¸å…³çš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯æ˜¯åº”ç”¨ç¨‹åºå¡«å……çš„ã€‚ int epoll_create(int size); // åˆ›å»ºepollå®ä¾‹ å“ˆå¸Œè¡¨ int epoll_create1(int flags); // çº¢é»‘æ ‘ int epoll_ctl(int epfd, int op, int fd, struct epoll_event *event); // å°†I/O æ·»åŠ åˆ°epollç®¡ç† int epoll_wait(int epfd, struct epoll_event *events, int maxevents, int timeout); // ç­‰å¾…äº‹ä»¶ epollæ¨¡å¼ EPOLLLTï¼šç”µå¹³ å®Œå…¨é kernel epollé©±åŠ¨ï¼Œåº”ç”¨ç¨‹åºåªéœ€è¦å¤„ç†ä»epoll_waitè¿”å›çš„fdsã€‚ï¼ˆè¿™äº›fdsè®¤ä¸ºå¤„äºå°±ç»ªçŠ¶æ€ï¼‰ EPOLLETï¼šè¾¹æ²¿ ä»…ä»…é€šçŸ¥åº”ç”¨ç¨‹åºå“ªäº›fdså˜æˆäº†å°±ç»ªçŠ¶æ€ï¼Œä¸€æ—¦fdå˜æˆå°±ç»ªçŠ¶æ€ï¼Œepollå°†ä¸å†å…³æ³¨è¿™ä¸ªfdçš„åœ¨ä½•çŠ¶æ€ä¿¡æ¯ï¼Œï¼ˆä»epoé˜Ÿåˆ—ç§»é™¤ï¼‰ç›´åˆ°åº”ç”¨ç¨‹åºé€šè¿‡è¯»å†™æ“ä½œè§¦å‘EAG","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:9:5","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"UDP UDPç‰¹ç‚¹ æ— è¿æ¥ åŸºäºæ¶ˆæ¯çš„æ•°æ®ä¼ è¾“æœåŠ¡ ä¸å¯é  ä¸€èˆ¬æƒ…å†µä¸‹UDPæ›´åŠ é«˜æ•ˆ UDPå®¢æˆ·/æœåŠ¡å™¨æ¨¡å‹ UDPå®¢æˆ·/æœåŠ¡å™¨æ¨¡å‹ å›å°„å®¢æˆ·/æœåŠ¡å™¨æ¨¡å‹ å›å°„å®¢æˆ·/æœåŠ¡å™¨æ¨¡å‹ void echo_service(int sock){ char recvbuf[1024] = {0}; struct sockaddr_in peeraddr; socklen_t peerlen; while(1){ peerlen = sizeof(peeraddr); memset(recvbuf, 0, sizeof(recvbuf)); int ret = recvfrom(sock, recvbuf, sizeof(recvbuf), 0, (struct sockaddr *)\u0026peeraddr, \u0026peerlen); if (ret == -1){ if (errno == EINTR){ continue; } ERR_EXIT(\"recvfrom fail\"); } else if (ret \u003e 0){ fputs(recvbuf, stdout); sendto(sock, recvbuf, ret, 0, (struct sockaddr *)\u0026peeraddr, peerlen); memset(recvbuf, 0, sizeof(recvbuf)); } } close(sock); } int main() { int sock; sock = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP); // æŒ‡å®šUDP if (sock \u003c 0){ ERR_EXIT(\"socket fail\"); } // init struct sockaddr_in servaddr; memset(\u0026servaddr, 0, sizeof(servaddr)); servaddr.sin_family = AF_INET; servaddr.sin_port = htons(5188); servaddr.sin_addr.s_addr = htonl(INADDR_ANY); if (bind(sock, (struct sockaddr*)\u0026servaddr, sizeof(servaddr)) \u003c 0){ ERR_EXIT(\"bind fail\"); } echo_service(sock); return 0; } void echo_client(int sock, struct sockaddr_in servaddr){ char sendbuf[1024] = {0}; char recvbuf[1024] = {0}; while (fgets(sendbuf, sizeof(sendbuf), stdin) != NULL) { sendto(sock, sendbuf, strlen(sendbuf), 0, (struct sockaddr*)\u0026servaddr, sizeof(servaddr)); recvfrom(sock, recvbuf, sizeof(recvbuf), 0, NULL, NULL); fputs(recvbuf, stdout); memset(sendbuf, 0, sizeof(sendbuf)); memset(recvbuf, 0, sizeof(recvbuf)); } close(sock); } int main() { int sock; sock = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP); // UDP if (sock \u003c 0){ ERR_EXIT(\"socket fail\"); } // init struct sockaddr_in servaddr; memset(\u0026servaddr, 0, sizeof(servaddr)); servaddr.sin_family = AF_INET; servaddr.sin_port = htons(5188); servaddr.sin_addr.s_addr = inet_addr(\"127.0.0.1\"); // æŒ‡å®šåœ°å€ echo_client(sock, servaddr); return 0; } UDPæ³¨æ„ç‚¹ UDPæŠ¥æ–‡å¯èƒ½ä¼šä¸¢å¤±ã€é‡å¤ UDPæŠ¥æ–‡å¯èƒ½ä¼šä¹±åº UDPç¼ºä¹æµé‡æ§åˆ¶ UDPåè®®æ•°æ®æŠ¥æ–‡æˆªæ–­ recvfromè¿”å›0ï¼Œä¸ä»£è¡¨è¿æ¥å…³é—­ï¼Œå› ä¸ºudpæ˜¯æ— è¿æ¥çš„ã€‚ ICMPå¼‚æ­¥é”™è¯¯ UDP connect UDPå¤–å‡ºæ¥å£çš„ç¡®å®š UDPèŠå¤©å®¤ UDPèŠå¤©å®¤ ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:9:6","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"UNIXåŸŸ UNIXåŸŸç‰¹ç‚¹ åœ¨åŒä¸€å°ä¸»æœºçš„ä¼ è¾“é€Ÿåº¦æ˜¯TCPçš„ä¸¤å€ å¯ä»¥åœ¨åŒä¸€å°ä¸»æœºä¸Šå„è¿›ç¨‹ä¹‹é—´ä¼ é€’æè¿°ç¬¦ã€‚ UNXåŸŸå¥—æ¥å­—ä¸ä¼ ç»Ÿå¥—æ¥å­—çš„åŒºåˆ«æ˜¯ç”¨è·¯å¾„åæ¥è¡¨ç¤ºåè®®æ—çš„æè¿°ã€‚ UNIXåŸŸåœ°å€ç»“æ„ man 7 UNIX #define UNIX_PATH_MAX 108 struct sockaddr_un { sa_family_t sun_family; /* AF_UNIX */ char sun_path[UNIX_PATH_MAX]; /* pathname */ }; å›å°„å®¢æˆ·/æœåŠ¡å™¨æ¨¡å‹ void echo_srver(int conn){ char recvbuf[1024]; while(1){ memset(recvbuf, 0, sizeof(recvbuf)); int ret = read(conn, recvbuf, sizeof(recvbuf)); if (ret == 0){ printf(\"client close\\n\"); break; } else if (ret == -1){ ERR_EXIT(\"read fail\"); } fputs(recvbuf, stdout); write(conn, recvbuf, ret); memset(recvbuf, 0, sizeof(recvbuf)); } } int main() { int listenfd; listenfd = socket(PF_UNIX, SOCK_STREAM, 0); // UNIUX if (listenfd \u003c 0){ ERR_EXIT(\"socket fail\"); } // init unlink(\"/tmp/test_socket\"); struct sockaddr_un servaddr; memset(\u0026servaddr, 0, sizeof(servaddr)); servaddr.sun_family = AF_UNIX; strcpy(servaddr.sun_path, \"/tmp/test_socket\"); if (bind(listenfd, (struct sockaddr*)\u0026servaddr, sizeof(servaddr)) \u003c 0){ ERR_EXIT(\"bind fail\"); } if (listen(listenfd, SOMAXCONN) \u003c 0){ ERR_EXIT(\"listen fail\"); } int conn; pid_t pid; while(1){ conn = accept(listenfd, NULL, NULL); if (conn == -1){ ERR_EXIT(\"accept fail\"); } pid = fork(); if (pid == -1){ ERR_EXIT(\"fork fail\"); } if (pid == 0){ close(listenfd); echo_srver(conn); exit(EXIT_SUCCESS); } else { close(conn); } } return 0; } void echo_client(int sock){ char sendbuf[1024] = {0}; char recvbuf[1024] = {0}; while (fgets(sendbuf, sizeof(sendbuf), stdin) != NULL) { write(sock, sendbuf, strlen(sendbuf)); read(sock, recvbuf, sizeof(recvbuf)); fputs(recvbuf, stdout); memset(sendbuf, 0, sizeof(sendbuf)); memset(recvbuf, 0, sizeof(recvbuf)); } close(sock); } int main() { int sock; sock = socket(PF_UNIX, SOCK_STREAM, 0); if (sock \u003c 0){ ERR_EXIT(\"socket fail\"); } // init struct sockaddr_un servaddr; memset(\u0026servaddr, 0, sizeof(servaddr)); servaddr.sun_family = AF_UNIX; strcpy(servaddr.sun_path, \"/tmp/test_socket\"); int ret; ret = connect(sock, (struct sockaddr*)\u0026servaddr, sizeof(servaddr)); if (ret \u003c 0){ ERR_EXIT(\"connect fail\"); } echo_client(sock); return 0; } UNIXæ³¨æ„ç‚¹ bindæˆåŠŸå°†ä¼šåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œæƒé™ä¸º0777\u0026~umask sun pathæœ€å¥½ç”¨ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼šä¸€èˆ¬æ”¾åœ¨/tmp/è·¯å¾„ä¸‹ UNIXåŸŸåè®®æ”¯æŒæµå¼å¥—æ¥å£ï¼ˆç²˜åŒ…é—®é¢˜ï¼‰ä¸æŠ¥å¼å¥—æ¥å£ UNIXåŸŸæµå¼å¥—æ¥å­—connectå‘ç°ç›‘å¬é˜Ÿåˆ—æ»¡æ—¶ï¼Œä¼šç«‹åˆ»è¿”å›ä¸€ä¸ªECONNREFUSEDã€‚ socketpair åŠŸèƒ½ï¼šåˆ›å»ºä¸€ä¸ªå…¨åŒå·¥çš„æµç®¡é“ åŸå‹ï¼šint socketpair(int domain, int type, int protocol, int sv[2]); å‚æ•°ï¼šdomainï¼šåè®®å®¶æ—ï¼›typeï¼šå¥—æ¥å­—ç±»å‹ï¼›protocolï¼šåè®®ç±»å‹ï¼›svï¼šè¿”å›å¥—æ¥å­—å¯¹ è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1 int main(){ int sockfds[2]; if (socketpair(PF_UNIX, SOCK_STREAM, 0, sockfds) \u003c 0){ ERR_EXIT(\"socketpair\"); } pid_t pid; pid = fork(); if (pid == -1){ ERR_EXIT(\"fork fail\"); } if (pid \u003e 0){ // çˆ¶è¿›ç¨‹ int val = 0; close(sockfds[1]); while(1){ ++val; printf(\"parent process sending data : %d\\n\", val); write(sockfds[0], \u0026val, sizeof(val)); // æœ¬æœºé€šä¿¡ï¼Œä¸è½¬ç½‘ç»œå­—èŠ‚åº read(sockfds[0], \u0026val, sizeof(val)); printf(\"parent process received data : %d\\n\", val); sleep(1); } } else if (pid == 0){ int val = 0; close(sockfds[0]); while(1){ read(sockfds[1], \u0026val, sizeof(val)); //printf(\"subprocess received data : %d\\n\", val); ++val; write(sockfds[1], \u0026val, sizeof(val)); //printf(\"subprocess sending data : %d\\n\", val); } } return 0; } sendmsgå’Œrecvmsg struct iovec { /* Scatter/gather array items */ void *iov_base; /* Starting address */ size_t iov_len; /* Number of bytes to transfer */ }; struct msghdr { void *msg_name; /* optional address */ socklen_t msg_namelen; /* size of address */ struct iovec *msg_iov; /* scatter/gather array */ size_t msg_iovlen; /* # elements in msg_iov */ void *msg_control; /* ancillary data, see below */ size_t msg_controllen; /* ancillary data buffer len */ int msg_flags; /* flags on received message */ }; // msg_control struct cmsghdr { size_t cmsg_len; /* Data byte count, including header (type is socklen_t in POSIX) */ int cmsg_level; /* Originating protocol */ int cmsg_type; /* Protocol-specific type */ /* followed by unsigned char cmsg_data[]; */ }; sendmsg åŠŸèƒ½ï¼šé€šè¿‡socketå‘é€æ¶ˆæ¯çš„ç³»ç»Ÿè°ƒç”¨ åŸå‹ï¼šssize_t sendmsg(int sockfd, const struct msghdr *msg, int flags); å‚æ•°ï¼šsockfdï¼šsocketæ–‡ä»¶æè¿°ç¬¦ï¼›magï¼šéœ€è¦å‘é€çš„æ¶ˆæ¯å†…å®¹å’Œç›¸å…³å…ƒæ•°æ®ä¿¡æ¯ï¼›flagsï¼šæ ‡å¿—ä½å‚æ•°ï¼Œç”¨äºæ§åˆ¶æ¶ˆæ¯","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:9:7","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"è¿›ç¨‹é—´é€šä¿¡ é¡ºåºå’Œå¹¶å‘ é¡ºåºç¨‹åºï¼šé¡ºåºæ€§ã€å°é—­æ€§(è¿è¡Œç¯å¢ƒ)ã€ç¡®å®šæ€§ã€å¯å†ç°æ€§ å¹¶å‘ç¨‹åºï¼šå…±äº«æ€§ã€å¹¶å‘æ€§ã€éšæœºæ€§ äº’æ–¥å’ŒåŒæ­¥ï¼šä¿¡å·é‡å®ç° è¿›ç¨‹äº’æ–¥ï¼šçŸ›ç›¾ è¿›ç¨‹åŒæ­¥ï¼šåä½œ è¿›ç¨‹é—´é€šä¿¡ç›®çš„ æ•°æ®ä¼ è¾“ èµ„æºå…±äº« é€šçŸ¥äº‹ä»¶ è¿›ç¨‹æ§åˆ¶ è¿›ç¨‹é—´é€šä¿¡åˆ†ç±» æ–‡ä»¶ã€æ–‡ä»¶é”ã€ç®¡é“pipeå’Œå‘½åç®¡é“FIFOã€ä¿¡å· signalã€æ¶ˆæ¯é˜Ÿåˆ—ã€å…±äº«å†…å­˜ã€ä¿¡å·é‡ã€äº’æ–¥é‡ã€æ¡ä»¶å˜é‡ã€è¯»å†™é”ã€å¥—æ¥å­—socket ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:10:0","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"æ­»é” æ­»é”äº§ç”Ÿçš„å¿…è¦æ¡ä»¶ äº’æ–¥æ¡ä»¶ï¼šè¿›ç¨‹å¯¹èµ„æºè¿›è¡Œæ’ä»–æ€§ä½¿ç”¨ï¼Œå³åœ¨ä¸€æ®µæ—¶é—´å†…æŸèµ„æºä»…ä¸ºä¸€ä¸ªè¿›ç¨‹æ‰€å ç”¨ã€‚ è¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼šå½“è¿›ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚ ä¸å¯å‰¥å¤ºæ¡ä»¶ï¼šè¿›ç¨‹å·²è·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨ä¹‹å‰ä¸èƒ½è¢«å‰¥å¤ºï¼Œåªèƒ½åœ¨ä½¿ç”¨å®Œæ—¶ç”±è‡ªå·±é‡Šæ”¾ã€‚ ç¯è·¯ç­‰å¾…æ¡ä»¶ï¼šå„ä¸ªè¿›ç¨‹ç»„æˆå°é—­çš„ç¯å½¢é“¾ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½ç­‰å¾…ä¸‹ä¸€ä¸ªè¿›ç¨‹æ‰€å ç”¨çš„èµ„æº é˜²æ­¢æ­»é”åŠæ³• èµ„æºä¸€æ¬¡æ€§åˆ†é…ï¼šç ´åè¯·æ±‚å’Œä¿æŒæ¡ä»¶ å¯å‰¥å¤ºèµ„æºï¼šç ´åä¸å¯å‰¥å¤ºæ¡ä»¶ èµ„æºæœ‰åºåˆ†é…ï¼šç ´åç¯è·¯ç­‰å¾…æ¡ä»¶ æ­»é”é¿å… é“¶è¡Œå®¶ç®—æ³• ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:10:1","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"ä¿¡å·é‡ äº’æ–¥ï¼šPã€Våœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ åŒæ­¥ï¼šPã€Våœ¨ä¸åŒè¿›ç¨‹ä¸­ ä¿¡å·é‡å€¼S S \u003e 0ï¼šSè¡¨ç¤ºå¯ç”¨èµ„æºä¸ªæ•° S = 0ï¼šè¡¨ç¤ºæ— å¯ç”¨èµ„æºï¼Œæ— ç­‰å¾…è¿›ç¨‹ S \u003c 0ï¼š|S|è¡¨ç¤ºç­‰å¾…é˜Ÿåˆ—ä¸­è¿›ç¨‹ä¸ªæ•° less /usr/include/sys/sem.hæŸ¥çœ‹semaphore struct semaphore{ int value; pointer_PCB queue; } PVåŸè¯­ P(s){ s.value = s.value--; if (s.value \u003c 0){ è¯¥è¿›ç¨‹çŠ¶æ€ç½®ä¸ºç­‰å¾…çŠ¶æ€ï¼Œ è¯¥è¿›ç¨‹çš„PCBæ’å…¥ç›¸åº”çš„ç­‰å¾…é˜Ÿåˆ—s.queueæœ«å°¾ } } V(s){ s.value = s.value++; if (s.value \u003c= 0){ å”¤é†’ç›¸åº”ç­‰å¾…é˜Ÿåˆ—s.queueä¸­ç­‰å¾…çš„ä¸€ä¸ªè¿›ç¨‹ï¼Œ æ”¹å˜å…¶çŠ¶æ€ä¸ºå°±ç»ªæ€ï¼Œ å¹¶å°†å…¶æ’å…¥å°±ç»ªé˜Ÿåˆ— } } ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:10:2","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"System V System V æ¶ˆæ¯é˜Ÿåˆ— æ¶ˆæ¯é˜Ÿåˆ— æ¯ä¸ªæ¶ˆæ¯çš„æœ€å¤§é•¿åº¦æœ‰ä¸Šé™(MSGMAX),æ¯ä¸ªæ¶ˆæ¯é˜Ÿåˆ—çš„æ€»å­—èŠ‚æ•°æ˜¯æœ‰ä¸Šé™çš„(MSGMNB)ï¼Œç³»ç»Ÿä¸Šæ¶ˆæ¯é˜Ÿåˆ—çš„æ€»æ•°ä¹Ÿæœ‰ä¸Šé™(MSGMNI)ã€‚ cat /proc/sys/kernel/msgmax æ¶ˆæ¯é˜Ÿåˆ—æ•°æ®ç»“æ„ ipc_perm : IPCå¯¹è±¡æ•°æ®ç»“æ„ man 2 msgctlæŸ¥çœ‹ struct ipc_perm { key_t __key; /* Key supplied to msgget(2) */ uid_t uid; /* Effective UID of owner */ gid_t gid; /* Effective GID of owner */ uid_t cuid; /* Effective UID of creator */ gid_t cgid; /* Effective GID of creator */ unsigned short mode; /* Permissions */ unsigned short __seq; /* Sequence number */ }; struct msqid_ds { struct ipc_perm msg_perm; /* Ownership and permissions */ time_t msg_stime; /* Time of last msgsnd(2) */ time_t msg_rtime; /* Time of last msgrcv(2) */ time_t msg_ctime; /* Time of last change */ unsigned long __msg_cbytes; /* Current number of bytes in queue (nonstandard) */ msgqnum_t msg_qnum; /* Current number of messages in queue */ msglen_t msg_qbytes; /* Maximum number of bytes allowed in queue */ pid_t msg_lspid; /* PID of last msgsnd(2) */ pid_t msg_lrpid; /* PID of last msgrcv(2) */ }; æ¶ˆæ¯é˜Ÿåˆ—å‡½æ•° ipcrm -q msqid:åˆ é™¤æ¶ˆæ¯é˜Ÿåˆ— ipcsæŸ¥çœ‹ msgget åŠŸèƒ½ï¼šç”¨æ¥åˆ›å»ºå’Œè®¿é—®ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ— å‡½æ•°åŸå‹ï¼šint msgget(key_t key, int msgflg); å‚æ•°ï¼škey:æŸä¸ªæ¶ˆæ¯é˜Ÿåˆ—çš„åå­—ï¼›msgflg:ç”±9ä¸ªæƒé™æ ‡å¿—æ„æˆï¼Œå’Œmodeä¸€æ · è¿”å›å€¼ï¼šæˆåŠŸï¼šæ¶ˆæ¯é˜Ÿåˆ—çš„æ ‡è¯†ç ï¼›å¤±è´¥ï¼š-1. int main(int argc, char *args[]){ int msgid; msgid = msgget(1234, 0666 | IPC_CREAT); // msgid = msgget(1234, 0666 | IPC_CREAT | IPC_EXCL); // msgid = msgget(IPC_PRIVATE, 0666 | IPC_CREAT | IPC_EXCL); // msgid = msgget(IPC_PRIVATE, 0666); // msgid = msgget(IPC_PRIVATE, 0); if (msgid == -1){ ERR_EXIT(\"msg_get error\"); } printf(\"msgget success\\n\"); } msgctl åŠŸèƒ½ï¼šæ¶ˆæ¯é˜Ÿåˆ—çš„æ§åˆ¶å‡½æ•° å‡½æ•°åŸå‹ï¼šint msgctl(int msqid, int cmd, struct msqid_ds *buf); å‚æ•°ï¼šmsqid:ç”±msggetå‡½æ•°è¿”å›çš„æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç ï¼›cmd:é‡‡å–çš„åŠ¨ä½œï¼ˆIPC_STATã€IPC_SETã€IPC_RMIDï¼‰ï¼›bufï¼šåŠ¨ä½œæ‰€éœ€è¦ä¼ é€’çš„å‚æ•° è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1 int main(int argc, char *args[]){ int msgid; msgid = msgget(1234, 0666 | IPC_CREAT); if (msgid == -1){ ERR_EXIT(\"msg_get error\"); } printf(\"msgget success\\n\"); printf(\"msgid = %d\\n\", msgid); // msgctl(msgid, IPC_RMID, NULL); // åˆ é™¤æ¶ˆæ¯é˜Ÿåˆ— /* struct msqid_ds buf; msgctl(msgid, IPC_STAT, \u0026buf); // è·å–æ¶ˆæ¯é˜Ÿåˆ—çŠ¶æ€ printf(\"mode = %o, bytes = %ld, number = %d, msgmnb = %d\\n\", buf.msg_perm.mode, buf.__msg_cbytes, (int)buf.msg_qnum, (int)buf.msg_qbytes); */ struct msqid_ds buf; msgctl(msgid, IPC_STAT, \u0026buf); printf(\"original msg_perm.mode: %o\\n\", buf.msg_perm.mode); sscanf(\"600\", \"%ho\", \u0026buf.msg_perm.mode); msgctl(msgid, IPC_SET, \u0026buf);// ä¿®æ”¹æ¶ˆæ¯é˜Ÿåˆ—çŠ¶æ€ printf(\"new msg_perm.mode: %o\\n\", buf.msg_perm.mode); return 0; } msgsnd åŠŸèƒ½ï¼šæŠŠä¸€æ¡æ¶ˆæ¯æ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ å‡½æ•°åŸå‹ï¼šint msgsnd(int msqid, const void *msgp, size_t msgsz, int msgflg); å‚æ•°ï¼š msqid:ç”±msggetå‡½æ•°è¿”å›çš„æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç ï¼› msgp:æŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡å‘å‡†å¤‡å‘é€çš„ä¿¡æ¯ï¼› msgszï¼šæ˜¯msgpæŒ‡å‘çš„æ¶ˆæ¯é•¿åº¦ï¼Œè¿™ä¸ªé•¿åº¦ä¸å«ä¿å­˜æ¶ˆæ¯ç±»å‹çš„long inté•¿æ•´å‹ï¼› msgflgï¼šæ§åˆ¶å½“å‰æ¶ˆæ¯é˜Ÿåˆ—æ»¡æˆ–ç³»ç»Ÿä¸Šé™æ—¶å°†è¦å‘ç”Ÿçš„äº‹ IPC_NOWAITè¡¨ç¤ºé˜Ÿåˆ—æ»¡ä¸ç­‰å¾…ï¼Œè¿”å›EAGAINé”™è¯¯ã€‚ è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1. int main(int argc, char *argv[]){ if (argc != 3){ fprintf(stderr,\"Usage: %s \u003cbytes\u003e \u003ctype\u003e\\n\", argv[0]); } int len = atoi(argv[1]); int type = atoi(argv[2]); int msgid = msgget(1234, 0); if (msgid == -1){ ERR_EXIT(\"msgget error\"); } struct msgbuf *ptr; ptr = (struct msgbuf*)malloc(sizeof(long) + len); ptr-\u003emtype = type; if (msgsnd(msgid, ptr, len, 0) \u003c 0){ ERR_EXIT(\"msgsnd error\"); } return 0; } msgrcv åŠŸèƒ½ï¼šä»ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—æ¥æ”¶æ¶ˆæ¯ å‡½æ•°åŸå‹ï¼šssize_t msgrcv(int msqid, void *msgp, size_t msgsz, long msgtyp, int msgflg); å‚æ•°ï¼š msqid:ç”±msggetå‡½æ•°è¿”å›çš„æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç ï¼› msgp:æŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡å‘å‡†å¤‡æ¥æ”¶çš„ä¿¡æ¯ï¼› msgszï¼šæ˜¯msgpæŒ‡å‘çš„æ¶ˆæ¯é•¿åº¦ï¼Œè¿™ä¸ªé•¿åº¦ä¸å«ä¿å­˜æ¶ˆæ¯ç±»å‹çš„long inté•¿æ•´å‹ï¼› msgtype:å®ç°æ¥æ”¶ä¼˜å…ˆçº§çš„ç®€å•å½¢å¼ msgtype=0ï¼šè¿”å›é˜Ÿåˆ—ç¬¬ä¸€æ¡ä¿¡æ¯ msgtype\u003e0ï¼šè¿”å›é˜Ÿåˆ—ç¬¬ä¸€æ¡ç±»å‹ç­‰äºmsgtypeçš„æ¶ˆæ¯ msgtype\u003c 0 ï¼šè¿”å›é˜Ÿåˆ—ç¬¬ä¸€æ¡ç±»å‹å°äºç­‰äºmsgtypeç»å¯¹å€¼çš„æ¶ˆæ¯ msgtype\u003e0ä¸”msgflg=MSC_EXCEPT,æ¥æ”¶ç±»å‹ä¸ç­‰äºmsgtypeçš„ç¬¬ä¸€æ¡æ¶ˆæ¯ã€‚ msgflgï¼šæ§åˆ¶å½“é˜Ÿåˆ—ä¸­æ²¡æœ‰ç›¸åº”ç±»å‹çš„æ¶ˆæ¯å¯ä¾›æ¥æ”¶æ—¶è¦å‘ç”Ÿçš„äº‹ msgflg=IPC_NOWAIT,é˜Ÿåˆ—æ²¡æœ‰å¯è¯»æ¶ˆæ¯ä¸ç­‰å¾…ï¼Œè¿”å›ENOMSGé”™è¯¯ msgflg=MSG_NOERROR,æ¶ˆæ¯å¤§å°è¶…è¿‡msgszlæ—¶è¢«æˆªæ–­ è¿”å›å€¼ï¼šæˆåŠŸï¼šæ¥æ”¶ç¼“å†²åŒºçš„å­—ç¬¦ä¸ªæ•°ï¼›å¤±è´¥ï¼š-1ã€‚ struct msgbuf { long mtype; /* message type, must be \u003e 0 */ char mtext[1]; /* message data */ }; #define MSGMAX 8192 int main(int argc, char *argv[]){ int flag = 0; int type = 0; int opt; while(1){ opt = getopt(argc, argv, \"nt:\"); if (opt == '?'){ exit(EXIT_FAILURE); } if (opt == -1){ break; } switch(opt){ case 'n': flag |= IPC_NOWAIT; break; case 't': type = atoi(optarg); } } int msgid = msgget(1234, 0); if (msgid == -1){ ERR_EXIT","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:10:3","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"POSIX æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå…±äº«å†…å­˜ï¼Œä¿¡å·é‡ï¼Œäº’æ–¥é”ï¼Œæ¡ä»¶å˜é‡ï¼Œè¯»å†™é”ï¼Œè‡ªæ—‹é”ï¼Œæ–‡ä»¶é” æ¶ˆæ¯é˜Ÿåˆ— éœ€è¦é“¾æ¥-lrt ä½¿ç”¨æŸ¥çœ‹ man 7 mq_overview,æŸ¥çœ‹æ¶ˆæ¯é˜Ÿåˆ— mkdir /dev/mqueue mount -t mqueue none /dev/mqueue mq_open åŠŸèƒ½ï¼šç”¨æ¥åˆ›å»ºå’Œè®¿é—®ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ— åŸå‹ï¼š mqd_t mq_open(const char *name, int oflag); mqd_t mq_open(const char *name, int oflag, mode_t mode, struct mq_attr *attr); å‚æ•°ï¼š nameï¼šæŸä¸ªæ¶ˆæ¯é˜Ÿåˆ—çš„åå­— oflagï¼šå’Œopenå‡½æ•°ç±»ä¼¼O_RDONLYã€O_WRONLYã€O_RDWRã€O_CREATã€O_EXCLã€O_NONBLOCK mode:å¦‚æœæŒ‡å®šäº†O_CREATï¼Œéœ€è¦è®¾ç½®modeã€‚ attrï¼šæŒ‡å®šæ¶ˆæ¯é˜Ÿåˆ—å±æ€§ è¿”å›å€¼ï¼šæˆåŠŸï¼šæ¶ˆæ¯é˜Ÿåˆ—æ–‡ä»¶æè¿°ç¬¦ï¼›å¤±è´¥ï¼š-1 mq_close åŠŸèƒ½ï¼šå…³é—­æ¶ˆæ¯é˜Ÿåˆ— åŸå‹ï¼šint mq_close(mqd_t mqdes); å‚æ•°ï¼šmqdesï¼šæ¶ˆæ¯é˜Ÿåˆ—æè¿°ç¬¦ è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1 int main(int argc, char *argv[]) { mqd_t mqid; mqid = mq_open(\"/abc\", O_CREAT | O_RDWR, 0666, NULL); if (mqid == (mqd_t)-1){ ERR_EXIT(\"mq_open\"); } printf(\"mq_open success\\n\"); mq_close(mqid); return 0; } mq_unlink åŠŸèƒ½ï¼šåˆ é™¤æ¶ˆæ¯é˜Ÿåˆ— åŸå‹ï¼šint mq_unlink(const char *name); å‚æ•°ï¼šnameï¼šæ¶ˆæ¯é˜Ÿåˆ—çš„åå­— è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1 mq_getattr/mq_setattr åŠŸèƒ½ï¼šè·å–/è®¾ç½®æ¶ˆæ¯é˜Ÿåˆ—å±æ€§ åŸå‹ï¼š int mq_getattr(mqd_t mqdes, struct mq_attr *attr); int mq_setattr(mqd_t mqdes, struct mq_attr *newattr, struct mq_attr *oldattr); struct mq_attr { long mq_flags; /* Flags: 0 or O_NONBLOCK */ long mq_maxmsg; /* Max. # of messages on queue */ long mq_msgsize; /* Max. message size (bytes) */ long mq_curmsgs; /* # of messages currently in queue */ }; è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1 mq_send åŠŸèƒ½ï¼šå‘é€æ¶ˆæ¯ åŸå‹ï¼šint mq_send(mqd_t mqdes, const char *msg_ptr, size_t msg_len, unsigned msg_prio); å‚æ•°ï¼šmqdesï¼šæ¶ˆæ¯é˜Ÿåˆ—æè¿°ç¬¦ï¼›msg_ptrï¼šæŒ‡å‘æ¶ˆæ¯çš„æŒ‡é’ˆï¼›msg_lenï¼šæ¶ˆæ¯é•¿åº¦ï¼›msg_prioï¼šæ¶ˆæ¯ä¼˜å…ˆçº§ è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1 mq_receive åŠŸèƒ½ï¼šæ¥æ”¶æ¶ˆæ¯ åŸå‹ï¼šssize_t mq_receive(mqd_t mqdes, char *msg_ptr, size_t msg_len, unsigned *msg_prio); å‚æ•°ï¼šmqdesï¼šæ¶ˆæ¯é˜Ÿåˆ—æè¿°ç¬¦ï¼›msg_ptrï¼šè¿”å›æ¥æ”¶åˆ°çš„æ¶ˆæ¯ï¼›msg_lenï¼šæ¶ˆæ¯é•¿åº¦ï¼›msg_prioï¼šæ¶ˆæ¯ä¼˜å…ˆçº§ è¿”å›å€¼ï¼šæˆåŠŸï¼šæ¥æ”¶çš„æ¶ˆæ¯å­—èŠ‚æ•°ï¼›å¤±è´¥ï¼š-1 int main(int argc, char *argv[]) { mqd_t mqid; mqid = mq_open(\"/abc\", O_RDONLY); if (mqid == (mqd_t)-1){ ERR_EXIT(\"mq_open\"); } STU stu; unsigned prio; ssize_t result; struct mq_attr attr; mq_getattr(mqid, \u0026attr); size_t size = attr.mq_msgsize; // æ¯æ¡æ¶ˆæ¯çš„æœ€å¤§é•¿åº¦å€¼ result = mq_receive(mqid, (char*)\u0026stu, size, \u0026prio); if (result == -1){ ERR_EXIT(\"mq_receive\"); } printf(\"receive bytes %ld\\n\", result); printf(\"name = %s age = %d prio = %u\\n\", stu.name, stu.age, prio); mq_close(mqid); return 0; } mq_notify åŠŸèƒ½ï¼šå»ºç«‹æˆ–è€…åˆ é™¤æ¶ˆæ¯è¾¾åˆ°é€šçŸ¥äº‹ä»¶ åŸå‹ï¼šint mq_notify(mqd_t mqdes, const struct sigevent *sevp); å‚æ•°ï¼šmqdesï¼šæ¶ˆæ¯é˜Ÿåˆ—æè¿°ç¬¦ï¼›sevpï¼šéç©ºè¡¨ç¤ºå½“æ¶ˆæ¯åˆ°è¾¾ä¸”æ¶ˆæ¯é˜Ÿåˆ—å…ˆå‰ä¸ºç©ºï¼Œå°†å¾—åˆ°é€šçŸ¥ï¼›NULLè¡¨ç¤ºæ’¤é”€å·²æ³¨å†Œçš„é€šçŸ¥ è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1 é€šçŸ¥æ–¹å¼ äº§ç”Ÿä¸€ä¸ªä¿¡å· åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä¸€ä¸ªæŒ‡å®šçš„å‡½æ•° mqd_t mqid; size_t size; struct sigevent sigev; void handle_signusr1(int sig){ mq_notify(mqid, \u0026sigev); STU stu; unsigned prio; ssize_t result; result = mq_receive(mqid, (char*)\u0026stu, size, \u0026prio); if (result == -1){ ERR_EXIT(\"mq_receive\"); } printf(\"name = %s age = %d prio = %u\\n\", stu.name, stu.age, prio); } int main(int argc, char *argv[]) { mqid = mq_open(\"/abc\", O_RDONLY); if (mqid == (mqd_t)-1){ ERR_EXIT(\"mq_open\"); } struct mq_attr attr; if (mq_getattr(mqid, \u0026attr) == -1) { ERR_EXIT(\"mq_getattr\"); } size = attr.mq_msgsize; // æ¯æ¡æ¶ˆæ¯çš„æœ€å¤§é•¿åº¦å€¼ signal(SIGUSR1, handle_signusr1); sigev.sigev_notify = SIGEV_SIGNAL; sigev.sigev_signo = SIGUSR1; mq_notify(mqid, \u0026sigev); for(;;){ pause(); } mq_close(mqid); return 0; } å…±äº«å†…å­˜ æŸ¥çœ‹ /dev/shm shm_open åŠŸèƒ½ï¼šç”¨æ¥åˆ›å»ºå’Œæ‰“å¼€ä¸€ä¸ªå…±äº«å†…å­˜å¯¹è±¡ åŸå‹ï¼šint shm_open(const char *name, int oflag, mode_t mode); å‚æ•°ï¼š nameï¼šå…±äº«å†…å­˜å¯¹è±¡çš„åå­— oflagï¼šå’Œopenå‡½æ•°ç±»ä¼¼O_RDONLYã€O_WRONLYã€O_RDWRã€O_CREATã€O_EXCLã€O_NONBLOCK mode:å¦‚æœæ²¡æœ‰æŒ‡å®šäº†O_CREATï¼Œå¯ä»¥æŒ‡å®šä¸º0 è¿”å›å€¼ï¼šæˆåŠŸï¼šæ¶ˆæ¯é˜Ÿåˆ—æ–‡ä»¶æè¿°ç¬¦ï¼›å¤±è´¥ï¼š-1 ftruncate åŠŸèƒ½ï¼šä¿®æ”¹å…±äº«å†…å­˜å¯¹è±¡å¤§å° åŸå‹ï¼šint ftruncate(int fd, off_t length); å‚æ•°ï¼šfdï¼šæ–‡ä»¶æè¿°ç¬¦ï¼›lengthï¼šé•¿åº¦ è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1 fstat åŠŸèƒ½ï¼šè·å–å…±äº«å†…å­˜å¯¹è±¡ä¿¡æ¯ åŸå‹ï¼šint fstat(int fd, struct stat *buf); å‚æ•°ï¼šfdï¼šæ–‡ä»¶æè¿°ç¬¦ï¼›bufï¼šè¿”å›å…±äº«å†…å­˜çŠ¶æ€ è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1 int main(int argc, char *argv[]) { int shmid; shmid = shm_open(\"/xyz\", O_CREAT | O_RDWR, 0666); if (shmid == -1){ ERR_EXIT(\"shm_open\"); } printf(\"shm_open success\\n\"); if (ftruncate(shmid, sizeof(STU)) == -1){ ERR_EXIT(\"ftruncate\"); } struct stat buf; if (fstat(shmid,\u0026buf) == -1){ ERR_EXIT(\"fstat\"); } printf(\"size = %ld, mode = %o\\n\", buf.st_size, buf.st_mode \u0026 0777); // umask close(shmid); return 0; } shm_unlink åŠŸèƒ½ï¼šåˆ é™¤å…±äº«å†…å­˜å¯¹è±¡ åŸå‹ï¼šint shm_unlink(const char *name); å‚æ•°ï¼šnameï¼šå…±äº«å†…å­˜å¯¹è±¡çš„åå­— è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼š-1 mmap // write int main(int argc, char *argv[]) { int shmid; shmid = shm_op","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:10:4","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"çº¿ç¨‹ è¿›ç¨‹æ˜¯èµ„æºç«äº‰çš„åŸºæœ¬å•ä½ï¼›çº¿ç¨‹æ˜¯ç¨‹åºè¿è¡Œçš„æœ€å°å•ä½ çº¿ç¨‹å…±äº«è¿›ç¨‹æ•°æ®ï¼Œä½†ä¹Ÿæ‹¥æœ‰è‡ªå·±çš„ä¸€éƒ¨åˆ†æ•°æ® çº¿ç¨‹IDï¼›ä¸€ç»„å¯„å­˜å™¨ï¼›æ ˆï¼›errnoï¼›ä¿¡å·çŠ¶æ€ï¼›ä¼˜å…ˆçº§ çº¿ç¨‹ä¼˜ç‚¹ï¼šä»£ä»·å°ï¼›å ç”¨èµ„æºå°‘ï¼›å¯å……åˆ†åˆ©ç”¨å¤šå¤„ç†å™¨å¹¶è¡Œæ•°é‡ï¼›å¯åŒæ—¶ç­‰å¾…ä¸åŒçš„I/Oæ“ä½œã€‚ çº¿ç¨‹ä¼˜ç‚¹ï¼šæ€§èƒ½æŸå¤±ï¼ˆå¢åŠ é¢å¤–çš„åŒæ­¥å’Œè°ƒåº¦å¼€é”€è€Œå¯ç”¨èµ„æºä¸å˜ï¼‰ï¼›å¥å£®æ€§é™ä½ï¼ˆçº¿ç¨‹ä¹‹é—´ç¼ºä¹ä¿æŠ¤ï¼‰ï¼›ç¼ºä¹è®¿é—®æ§åˆ¶ï¼› çº¿ç¨‹æ¨¡å‹ N:1ç”¨æˆ·çº¿ç¨‹æ¨¡å‹ 1:1æ ¸å¿ƒçº¿ç¨‹æ¨¡å‹ N:Mhæ··åˆçº¿ç¨‹æ¨¡å‹ ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:11:0","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"POSIXçº¿ç¨‹ é“¾æ¥ -lpthread pthread_create åŠŸèƒ½ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ åŸå‹ï¼š int pthread_create(pthread_t *thread, const pthread_attr_t *attr, void *(*start_routine) (void *), void *arg); å‚æ•°ï¼š thread:è¿”å›çº¿ç¨‹IDï¼› attr:è®¾ç½®çº¿ç¨‹çš„å±æ€§ï¼Œatträ¸ºNULLè¡¨ç¤ºä½¿ç”¨é»˜è®¤å±æ€§ï¼› start_routine:æ˜¯ä¸ªå‡½æ•°åœ°å€ï¼Œçº¿ç¨‹å¯åŠ¨åè¦æ‰§è¡Œçš„å‡½æ•°ï¼› arg:ä¼ ç»™çº¿ç¨‹å¯åŠ¨å‡½æ•°çš„å‚æ•° è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼šé”™è¯¯ç  pthread_exit åŠŸèƒ½ï¼šçº¿ç¨‹ç»ˆæ­¢ åŸå‹ï¼švoid pthread_exit(void *retval) å‚æ•°ï¼šretvalï¼šä¸è¦æŒ‡å‘ä¸€ä¸ªå±€éƒ¨å˜é‡ pthread_join åŠŸèƒ½ï¼šç­‰å¾…çº¿ç¨‹ç»“æŸ åŸå‹ï¼šint pthread_join(pthread_t thread, void **retval); å‚æ•°ï¼šthreadï¼šçº¿ç¨‹IDï¼›retvalï¼šæŒ‡å‘ä¸€ä¸ªæŒ‡é’ˆ è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼šé”™è¯¯ç  void* thread_routine(void *arg){ for (int i = 0; i \u003c 20; i++){ printf(\"B\"); fflush(stdout); usleep(20); if(i == 3){ pthread_exit(\"ABC\"); } } return 0; } int main(){ pthread_t tid; int ret; ret = pthread_create(\u0026tid, NULL, thread_routine, NULL); if (ret != 0){ fprintf(stderr, \"pthread_create: %s\\n\", strerror(ret)); exit(EXIT_FAILURE); } for (int i = 0; i \u003c 20; i++){ printf(\"A\"); fflush(stdout); usleep(20); } void *value; if (pthread_join(tid, \u0026value) != 0){ fprintf(stderr, \"pthread_join: %s\\n\", strerror(ret)); exit(EXIT_FAILURE); } printf(\"\\n\"); printf(\"return msg = %s\\n\", (char*)value); return 0; } pthread_self åŠŸèƒ½ï¼šè¿”å›çº¿ç¨‹id åŸå‹ï¼špthread_t pthread_self(void); è¿”å›å€¼ï¼šæˆåŠŸï¼š0 pthread_cancel åŠŸèƒ½ï¼šå–æ¶ˆä¸€ä¸ªæ‰§è¡Œä¸­çš„çº¿ç¨‹ åŸå‹ï¼šint pthread_cancel(pthread_t thread); è¿”å›å€¼ï¼šæˆåŠŸï¼š0ï¼›å¤±è´¥ï¼šé”™è¯¯ç  å›å°„å®¢æˆ·/æœåŠ¡å™¨ è¿›ç¨‹æ”¹çº¿ç¨‹ // server void* thread_routine(void *arg){ pthread_detach(pthread_self()); int conn = *((int*)arg); free(arg); echo_service(conn); printf(\"exiting thread ... \\n\"); return NULL; } int main() { int listenfd; // listenfd = socket(PF_INET, SOCK_STREAM, 0); listenfd = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP); // æŒ‡å®šTCP if (listenfd \u003c 0){ ERR_EXIT(\"socket fail\"); } // init struct sockaddr_in servaddr; memset(\u0026servaddr, 0, sizeof(servaddr)); servaddr.sin_family = AF_INET; servaddr.sin_port = htons(5188); servaddr.sin_addr.s_addr = htonl(INADDR_ANY); int on = 1; // åœ¨TIME_WAITè¿˜æ²¡æ¶ˆå¤±çš„æƒ…å†µï¼Œå…è®¸æœåŠ¡å™¨é‡å¯ if (setsockopt(listenfd, SOL_SOCKET, SO_REUSEADDR, \u0026on, sizeof(on)) \u003c 0){ ERR_EXIT(\"setsocketopt\"); } if (bind(listenfd, (struct sockaddr*)\u0026servaddr, sizeof(servaddr)) \u003c 0){ ERR_EXIT(\"bind fail\"); } if (listen(listenfd, SOMAXCONN) \u003c 0){ ERR_EXIT(\"listen fail\"); } struct sockaddr_in peeraddr; socklen_t peerlen = sizeof(peeraddr); int conn; // pid_t pid; while(1){ conn = accept(listenfd, (struct sockaddr*)\u0026peeraddr, \u0026peerlen); if (conn \u003c 0){ ERR_EXIT(\"accept fail\"); } printf(\"ip = %s port = %d\\n\", inet_ntoa(peeraddr.sin_addr), ntohs(peeraddr.sin_port)); int ret; pthread_t tid; int *p = malloc(sizeof(int)); *p = conn; // ret = pthread_create(\u0026tid, NULL, thread_routine, (void*)conn); ret = pthread_create(\u0026tid, NULL, thread_routine, p); // å¯ç§»æ¤ if (ret != 0){ fprintf(stderr, \"pthread_create:%s\\n\", strerror(ret)); exit(EXIT_FAILURE); } } return 0; } çº¿ç¨‹å±æ€§ åˆå§‹åŒ–ä¸é”€æ¯ int pthread_attr_init(pthread_attr_t *attr); int pthread_attr_destroy(pthread_attr_t *attr); è·å–ä¸è®¾ç½®åˆ†ç¦» int pthread_attr_setdetachstate(pthread_attr_t *attr, int detachstate); int pthread_attr_getdetachstate(pthread_attr_t *attr, int *detachstate); è·å–ä¸è®¾ç½®æ ˆå¤§å° int pthread_attr_setstacksize(pthread_attr_t *attr, size_t stacksize); int pthread_attr_getstacksize(pthread_attr_t *attr, size_t *stacksize); è·å–ä¸è®¾ç½®æ ˆæº¢å‡ºä¿æŠ¤åŒºå¤§å° int pthread_attr_setguardsize(pthread_attr_t *attr, size_t guardsize); int pthread_attr_getguardsize(pthread_attr_t *attr, size_t *guardsize); è·å–ä¸è®¾ç½®çº¿ç¨‹ç«äº‰èŒƒå›´ int pthread_attr_setscope(pthread_attr_t *attr, int scope); int pthread_attr_getscope(pthread_attr_t *attr, int *scope); è·å–ä¸è®¾ç½®è°ƒåº¦ç­–ç•¥ int pthread_attr_setschedpolicy(pthread_attr_t *attr, int policy); int pthread_attr_getschedpolicy(pthread_attr_t *attr, int *policy); è·å–ä¸è®¾ç½®ç»§æ‰¿çš„è°ƒåº¦ç­–ç•¥ int pthread_attr_setinheritsched(pthread_attr_t *attr, int inheritsched); int pthread_attr_getinheritsched(pthread_attr_t *attr, int *inheritsched); è·å–ä¸è®¾ç½®è°ƒåº¦å‚æ•° int pthread_attr_setschedparam(pthread_attr_t *attr, const struct sched_param *param); int pthread_attr_getschedparam(pthread_attr_t *attr, struct sched_param *param);å¹¶å‘çº§åˆ« å¹¶å‘çº§åˆ«ï¼šè·å–ä¸è®¾ç½®å¹¶å‘çº§åˆ« int pthread_setconcurrency(int new_level); int pthread_getconcurrency(void); çº¿ç¨‹ç‰¹å®šæ•°æ®(TSD) int pthread","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:11:1","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"POSIXä¿¡å·é‡ sem_open sem_close sem_unlink sem_init sem_destroy sem_wait sem_post ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:11:2","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"POSIXé” äº’æ–¥é” pthread_mutex_init pthread_mutex_lock pthread_mutex_unlock pthread_mutex_destroy è‡ªæ—‹é” è‡ªæ—‹é”ä¸äº’æ–¥é”å¾ˆé‡è¦çš„ä¸€ä¸ªåŒºåˆ«åœ¨äºï¼Œçº¿ç¨‹åœ¨ç”³è¯·è‡ªæ—‹é”çš„æ—¶å€™ï¼Œçº¿ç¨‹ä¸ä¼šè¢«æŒ‚èµ·ï¼Œå®ƒå¤„äºå¿™ç­‰å¾…çš„çŠ¶æ€ã€‚ pthread_spin_init pthread_spin_lock pthread_spin_unlock pthread_spin_destroy è¯»å†™é” åªè¦æ²¡æœ‰çº¿ç¨‹æŒæœ‰ç»™å®šçš„è¯»å†™é”ç”¨äºå†™ï¼Œé‚£ä¹ˆä»»æ„æ•°ç›®çš„çº¿ç¨‹å¯ä»¥æŒæœ‰è¯»å†™é”ç”¨äºè¯» ä»…å½“æ²¡æœ‰çº¿ç¨‹æŒæœ‰æŸä¸ªç»™å®šçš„è¯»å†™é”ç”¨äºè¯»æˆ–ç”¨äºå†™æ—¶ï¼Œæ‰èƒ½åˆ†é…è¯»å†™é”ç”¨äºå†™ è¯»å†™é”ç”¨äºè¯»ç§°ä¸ºå…±äº«é”ï¼Œè¯»å†™é”ç”¨äºå†™ç§°ä¸ºæ’å®ƒé” pthread_rwlock_init pthread_rwlock_destroy int pthread_rwlock_rdlock int pthread_rwlock_wrlock int pthread_rwlock_unlock ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:11:3","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹å®è·µ #define CONSUMERS_COUNT 1 // æ¶ˆè´¹è€… #define PRODUCERS_COUNT 5 // ç”Ÿäº§è€… #define BUFFSIZE 10 int g_buffer[BUFFSIZE]; // ç¼“å†²åŒº unsigned short in = 0; // ç”Ÿäº§ä½ç½® unsigned short out = 0; // æ¶ˆè´¹ä½ç½® unsigned short produce_id = 0; // å½“å‰ç”Ÿäº§çš„äº§å“ä½ç½® unsigned short consume_id = 0; // å½“å‰æ¶ˆè´¹çš„äº§å“ä½ç½® sem_t g_sem_full; sem_t g_sem_empty; pthread_mutex_t g_mutex; pthread_t g_thread[CONSUMERS_COUNT + PRODUCERS_COUNT]; void* consume(void *arg){ int num = (int)arg; while(1){ printf(\"%d wait buffer not empty\\n\", num); sem_wait(\u0026g_sem_empty); pthread_mutex_lock(\u0026g_mutex); // æ‰“å°ä¿¡æ¯ for (int i = 0; i \u003c BUFFSIZE; i++){ printf(\"%02d \", i); if (g_buffer[i] == -1){ printf(\"%s\", \"null\"); } else { printf(\"%d\", g_buffer[i]); } if (i == out){ printf(\"\\t\u003c--consume\"); } printf(\"\\n\"); } consume_id = g_buffer[out]; printf(\"%d begin consume product %d\\n\", num, consume_id); g_buffer[out] = -1; out = ( out + 1) % BUFFSIZE; printf(\"%d end consume product %d\\n\", num, consume_id); pthread_mutex_unlock(\u0026g_mutex); sem_post(\u0026g_sem_full); sleep(5); } return NULL; } void* produce(void *arg){ int num = (int)arg; while(1){ printf(\"%d wait buffer not full\\n\", num); sem_wait(\u0026g_sem_full); pthread_mutex_lock(\u0026g_mutex); for (int i = 0; i \u003c BUFFSIZE; i++){ printf(\"%02d \", i); if (g_buffer[i] == -1){ printf(\"%s\", \"null\"); } else { printf(\"%d\", g_buffer[i]); } if (i == in){ printf(\"\\t\u003c--produce\"); } printf(\"\\n\"); } printf(\"%d begin produce product %d\\n\", num, produce_id); g_buffer[in] = produce_id; in = ( in + 1) % BUFFSIZE; printf(\"%d end produce product %d\\n\", num, produce_id++); pthread_mutex_unlock(\u0026g_mutex); sem_post(\u0026g_sem_empty); sleep(1); } return NULL; } int main(){ sem_init(\u0026g_sem_full, 0, BUFFSIZE); sem_init(\u0026g_sem_empty, 0, 0); pthread_mutex_init(\u0026g_mutex, NULL); int i; for (i = 0; i \u003c BUFFSIZE; i++){ g_buffer[i] = -1; } for (i = 0; i \u003c CONSUMERS_COUNT; i++){ pthread_create(\u0026g_thread[i], NULL, consume, (void*)i); } for (i = 0; i \u003c PRODUCERS_COUNT; i++){ pthread_create(\u0026g_thread[CONSUMERS_COUNT + i], NULL, produce, (void*)i); } for (i = 0; i \u003c CONSUMERS_COUNT + PRODUCERS_COUNT; i++){ pthread_join(g_thread[i], NULL); } sem_destroy(\u0026g_sem_full); sem_destroy(\u0026g_sem_empty); pthread_mutex_destroy(\u0026g_mutex); return 0; } ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:11:4","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"POSIXæ¡ä»¶å˜é‡ int pthread_cond_init(pthread_cond_t *cond,pthread_condattr_t *cond_attr); int pthread_cond_wait(pthread_cond_t *cond,pthread_mutex_t *mutex); int pthread_cond_timewait(pthread_cond_t *cond,pthread_mutex *mutex,const timespec *abstime); int pthread_cond_destroy(pthread_cond_t *cond); int pthread_cond_signal(pthread_cond_t *cond); int pthread_cond_broadcast(pthread_cond_t *cond); //å‘æ‰€æœ‰ç­‰å¾…çº¿ç¨‹å‘èµ·é€šçŸ¥ ä½¿ç”¨è§„èŒƒ ç­‰å¾…æ¡ä»¶å˜é‡ä»£ç  pthread_mutex_lock(\u0026mutex); while (æ¡ä»¶ä¸ºå‡) pthread_cond_wait(\u0026cond, \u0026mutex); ä¿®æ”¹æ¡ä»¶ pthread_mutex_unlock(\u0026mutex); pthread_cond_wait(cond, mutex) å¯¹mutexè¿›è¡Œè§£é”ï¼› ç­‰å¾…æ¡ä»¶ï¼Œç›´åˆ°æœ‰çº¿ç¨‹å‘ä»–å‘èµ·é€šçŸ¥ é‡æ–°å¯¹mutexè¿›è¡ŒåŠ é”æ“ä½œ ä¸ºä»€ä¹ˆç”¨while? pthread_cond_waitä¼šäº§ç”Ÿä¿¡å·ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼Œ ä¸€ç§æ˜¯pthread_cond_waitä¼šè‡ªåŠ¨é‡å¯ï¼Œå¥½åƒè¿™ä¸ªä¿¡å·æ²¡æœ‰å‘ç”Ÿä¸€æ ·ï¼› ç¬¬äºŒç§pthread_cond_waitå¯èƒ½ä¼šè¢«è™šå‡å”¤é†’ï¼Œå› æ­¤è¿˜éœ€è¦é‡æ–°åˆ¤æ–­ã€‚ ç»™æ¡ä»¶ä¿¡å·å‘é€ä¿¡å·ä»£ç  pthread_mutex_lock(\u0026mutex); while (æ¡ä»¶ä¸ºçœŸ); pthread_cond_signal(\u0026cond); ä¿®æ”¹æ¡ä»¶ pthread_mutex_unlock(\u0026mutex); pthread_cond_signal(\u0026cond) å‘ç¬¬ä¸€ä¸ªç­‰å¾…æ¡ä»¶çš„çº¿ç¨‹å‘èµ·é€šçŸ¥ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ä¸ªçº¿ç¨‹å¤„äºç­‰å¾…æ¡ä»¶çš„çŠ¶æ€ï¼Œè¿™ä¸ªé€šçŸ¥å°†è¢«å¿½ç•¥ã€‚ #define CONSUMERS_COUNT 1 // æ¶ˆè´¹è€… #define PRODUCERS_COUNT 4 // ç”Ÿäº§è€… pthread_cond_t g_cond; pthread_mutex_t g_mutex; pthread_t g_thread[CONSUMERS_COUNT + PRODUCERS_COUNT]; int nready = 0; // å½“å‰ç¼“å†²åŒºäº§å“ä¸ªæ•° void* consume(void *arg) { int num = (int)arg; while(1) { pthread_mutex_lock(\u0026g_mutex); while(nready == 0) { printf(\"%d begin wait a contition ...\\n\", num); pthread_cond_wait(\u0026g_cond, \u0026g_mutex); } printf(\"%d end wait a condtion...\\n\", num); printf(\"%d begin consume product\\n\", num); --nready; printf(\"%d end consume product\\n\", num); pthread_mutex_unlock(\u0026g_mutex); sleep(1); } return NULL; } void* produce(void *arg) { int num = (int)arg; while(1) { pthread_mutex_lock(\u0026g_mutex); printf(\"%d begin produce product\\n\", num); ++nready; printf(\"%d end produce product\\n\", num); printf(\"%d signal ....\\n\", num); pthread_cond_signal(\u0026g_cond); pthread_mutex_unlock(\u0026g_mutex); sleep(1); } return NULL; } int main(){ pthread_cond_init(\u0026g_cond,NULL); pthread_mutex_init(\u0026g_mutex, NULL); int i; for (i = 0; i \u003c CONSUMERS_COUNT; i++){ pthread_create(\u0026g_thread[i], NULL, consume, (void*)i); } sleep(1); for (i = 0; i \u003c PRODUCERS_COUNT; i++){ pthread_create(\u0026g_thread[CONSUMERS_COUNT + i], NULL, produce, (void*)i); } for (i = 0; i \u003c CONSUMERS_COUNT + PRODUCERS_COUNT; i++){ pthread_join(g_thread[i], NULL); } pthread_mutex_destroy(\u0026g_mutex); pthread_cond_destroy(\u0026g_cond); return 0; } ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:11:5","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"ç®€å•çº¿ç¨‹æ±  ç”¨äºæ‰§è¡Œå¤§é‡ç›¸å¯¹çŸ­æš‚çš„ä»»åŠ¡ å½“ä»»åŠ¡å¢åŠ çš„æ—¶å€™èƒ½å¤ŸåŠ¨æ€çš„å¢åŠ çº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„æ•°é‡ç›´åˆ°è¾¾åˆ°ä¸€ä¸ªé˜ˆå€¼ã€‚ å½“ä»»åŠ¡æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™ï¼Œèƒ½å¤ŸåŠ¨æ€çš„é”€æ¯çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ è¯¥çº¿ç¨‹æ± çš„å®ç°æœ¬è´¨ä¸Šä¹Ÿæ˜¯ç”Ÿäº§è€…ä¸æ¶ˆè´¹æ¨¡å‹çš„åº”ç”¨ã€‚ç”Ÿäº§è€…çº¿ç¨‹å‘ä»»åŠ¡é˜Ÿåˆ—ä¸­æ·»åŠ ä»»åŠ¡ï¼Œä¸€æ—¦é˜Ÿåˆ—æœ‰ä»»åŠ¡åˆ°æ¥ï¼Œå¦‚æœæœ‰ç­‰å¾…çº¿ç¨‹å°±å”¤é†’æ¥æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æœæ²¡æœ‰ç­‰å¾…çº¿ç¨‹å¹¶ä¸”çº¿ç¨‹æ•°æ²¡æœ‰è¾¾åˆ°é˜ˆå€¼ï¼Œå°±åˆ›å»ºæ–°çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ã€‚ è®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼šçº¿ç¨‹ä¸ªæ•° = CPUä¸ªæ•° I/Oå¯†é›†å‹ä»»åŠ¡ï¼š çº¿ç¨‹ä¸ªæ•° \u003e CPUä¸ªæ•° //ä»»åŠ¡ç»“æ„ä½“ï¼Œå°†ä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ï¼Œç”±çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ¥æ‰§è¡Œ typedef struct task { void *(*run)(void *arg); // ä»»åŠ¡å›è°ƒå‡½æ•° void *arg; // å›è°ƒå‡½æ•°å‚æ•° struct task *next; } task_t; // çº¿ç¨‹æ± ç»“æ„ä½“ typedef struct threadpool { condition_t ready; // ä»»åŠ¡å‡†å¤‡å°±ç»ªæˆ–è€…çº¿ç¨‹æ± é”€æ¯é€šçŸ¥ task_t *first; // ä»»åŠ¡é˜Ÿåˆ—å¤´æŒ‡é’ˆ task_t *last; // ä»»åŠ¡é˜Ÿåˆ—å°¾æŒ‡é’ˆ int counter; // çº¿ç¨‹æ± ä¸­å½“å‰çº¿ç¨‹æ•° int idle; // çº¿ç¨‹æ± ä¸­å½“å‰æ­£åœ¨ç­‰å¾…ä»»åŠ¡çš„çº¿ç¨‹æ•° int max_threads; // çº¿ç¨‹æ± ä¸­æœ€å¤§å…è®¸çš„çº¿ç¨‹æ•° int quit; // é”€æ¯çº¿ç¨‹æ± çš„æ—¶å€™ç½®1 } threadpool_t; // åˆå§‹åŒ–çº¿ç¨‹æ±  void threadpool_init(threadpool_t *pool, int threads); // å¾€çº¿ç¨‹æ± ä¸­æ·»åŠ ä»»åŠ¡ void threadpool_add_task(threadpool_t *pool, void *(*run)(void *arg), void *arg); // é”€æ¯çº¿ç¨‹æ±  void threadpool_destroy(threadpool_t *pool); ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:11:6","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"miniftpdå®è·µ ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:12:0","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"å‚è€ƒé˜…è¯» Linux-UNIXç³»ç»Ÿç¼–ç¨‹æ‰‹å†Œï¼ˆä¸Šã€ä¸‹å†Œï¼‰ (Michael Kerrisk) Linuxç³»ç»Ÿç¼–ç¨‹-bilibili upå¯¹åº”è¯¾ä»¶ [Linuxç³»ç»Ÿç¼–ç¨‹/ç½‘ç»œç¼–ç¨‹] ç¬”è®°ç›®å½• å…³äºLinuxçš„ç³»ç»Ÿç¼–ç¨‹æ€»ç»“ linuxç³»ç»Ÿç¼–ç¨‹ CSDN linuxç½‘ç»œç¼–ç¨‹_chmy1992çš„åšå®¢-CSDNåšå®¢ ","date":"2023-08-20","objectID":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/:13:0","tags":["Computer","Linux"],"title":"Linxç³»ç»Ÿç¼–ç¨‹","uri":"/posts/computer/linx%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"SQLite","date":"2023-07-20","objectID":"/posts/computer/sqlite/","tags":["Computer","C++","Linux"],"title":"SQLite","uri":"/posts/computer/sqlite/"},{"categories":["Computer"],"content":"SQLite ","date":"2023-07-20","objectID":"/posts/computer/sqlite/:1:0","tags":["Computer","C++","Linux"],"title":"SQLite","uri":"/posts/computer/sqlite/"},{"categories":["Computer"],"content":"åŸºæœ¬æµç¨‹ //æ‰“å¼€æ•°æ®åº“ sqlite3 *sqldb = NULL; int res = sqlite3_open(db_file_name.c_str(), \u0026sqldb); if (res != SQLITE_OK) { fprintf(stderr, \"Can not open database: %s\\n\", sqlite3_errmsg(sqldb)); return false; } // å…³é—­æ•°æ®åº“ sqlite3_close(sqldb); ","date":"2023-07-20","objectID":"/posts/computer/sqlite/:2:0","tags":["Computer","C++","Linux"],"title":"SQLite","uri":"/posts/computer/sqlite/"},{"categories":["Computer"],"content":"å¸¸ç”¨è¯­å¥ SELECT column1, column2, columnN FROM table_name; --ä»è¡¨ table_name ä¸­é€‰æ‹©column1ï¼Œ column2ï¼Œ columnNåˆ— SELECT * FROM table_name; --é€‰æ‹©æ‰€æœ‰åˆ— SELECT * FROM COMPANY WHERE AGE IN ( 25, 27 ); --åˆ—å‡ºäº† AGE çš„å€¼ä¸º 25 æˆ– 27 çš„æ‰€æœ‰è®°å½• ID NAME AGE ADDRESS SALARY ---------- ---------- ---------- ---------- ---------- 2 Allen 25 Texas 15000.0 4 Mark 25 Rich-Mond 65000.0 5 David 27 Texas 85000.0 --ç›´æ¥çœ‹èœé¸Ÿæ•™ç¨‹å§ï¼Œå¾ˆè¯¦ç»† ","date":"2023-07-20","objectID":"/posts/computer/sqlite/:3:0","tags":["Computer","C++","Linux"],"title":"SQLite","uri":"/posts/computer/sqlite/"},{"categories":["Computer"],"content":"å¸¸ç”¨å‡½æ•° sqlite3_exec()ï¼Œç§°ä¸ºä¾¿æ·å‡½æ•°ï¼Œå°è£…äº†å¥½å¤šä»»åŠ¡ã€‚ int sqlite3_exec(sqlite3*, const char* sql, sqlite_callback, void* data, char** errmmsg); sqlite3* è¡¨ç¤ºæŒ‡å‘æ•°æ®åº“çš„æŒ‡é’ˆï¼› sql ä¸ºæ‰§è¡Œçš„sqlè¯­å¥ï¼› callbackå›è°ƒå‡½æ•° typedef int (*sqlite3_callback) (void*, int, char**,char**); void *æ˜¯ä¸ºsqlite3_exec()ç¬¬å››ä¸ªå‚æ•°æä¾›çš„æ•°æ®ï¼Œ intä»£è¡¨åˆ—çš„æ•°ç›®ï¼Œ char** ä¸€ä¸ªæŒ‡å‘æŒ‡é’ˆæ•°ç»„çš„æŒ‡é’ˆ,æ¯ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªç»“æœè¡Œä¸­çš„åˆ—æ•°æ®ï¼Œ char**ä¸€ä¸ªæŒ‡å‘æŒ‡é’ˆæ•°ç»„çš„æŒ‡é’ˆï¼Œå…¶ä¸­æ¯ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªç»“æœè¡Œä¸­çš„åˆ—åã€‚ å£°æ˜çš„å›è°ƒå‡½æ•°ï¼Œå¦‚æœè¿™ä¸ªå‡½æ•°æ˜¯ç±»æˆå‘˜å‡½æ•°ï¼ŒæŠŠå®ƒå£°æ˜æˆstatic C++æˆå‘˜å‡½æ•°å®é™…ä¸Šéšè—äº†ä¸€ä¸ªå‚æ•°ï¼šthisï¼ŒC++è°ƒç”¨ç±»çš„æˆå‘˜å‡½æ•°çš„æ—¶å€™ï¼Œéšå«æŠŠç±»æŒ‡é’ˆå½“æˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’è¿›å»ã€‚ ç»“æœï¼Œè¿™é€ æˆè·Ÿå‰é¢è¯´çš„ sqlite å›è°ƒå‡½æ•°çš„å‚æ•°ä¸ç›¸ç¬¦ã€‚åªæœ‰å½“æŠŠæˆå‘˜å‡½æ•°å£°æ˜æˆstaticæ—¶ï¼Œå®ƒæ‰æ²¡æœ‰å¤šä½™çš„éšå«çš„thiså‚æ•°ã€‚ void *dataä¸ºå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å‘æä¾›ç»™å›è°ƒå‡½æ•°çš„åº”ç”¨ç¨‹åºç‰¹å®šçš„æ•°æ®ï¼Œä¹Ÿæ˜¯å›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼› errmsg ä¸ºé”™è¯¯ä¿¡æ¯ï¼Œæ˜¯æŒ‡å‘é”™è¯¯æ¶ˆæ¯å­—ç¬¦ä¸²çš„æŒ‡é’ˆ ã€‚sqlite_exec() æœ‰ä¸¤ä¸ªé”™è¯¯æ¶ˆæ¯æ¥æºï¼Œè¿”å›å€¼å’Œå¯è¯»çš„å­—ç¬¦ä¸²errmsgã€‚ sqlite3_prepare_v2() int sqlite3_prepare_v2(sqlite3* db, const char* sql, int sql_len, sqlite3_stmt** stmt, const char** tail); sqlite3* è¡¨ç¤ºæŒ‡å‘æ•°æ®åº“çš„æŒ‡é’ˆï¼› sql ä¸ºæ‰§è¡Œçš„sqlè¯­å¥ï¼› sql_lenè¡¨ç¤ºSQL è¯­å¥çš„é•¿åº¦ã€‚å¦‚æœè®¾ç½®ä¸º -1ï¼Œåˆ™ SQLite å°†è‡ªåŠ¨è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦ stmtç”¨äºå­˜å‚¨ç¼–è¯‘åçš„è¯­å¥å¯¹è±¡ tailç”¨äºå­˜å‚¨ SQL è¯­å¥ä¸­æœªä½¿ç”¨çš„éƒ¨åˆ† sqlite3_get_table() int sqlite3_get_table(sqlite3*, const char *sql, char ***resultp, int *nrow, int *ncolumn, char **errmsg ); resultpè¡¨ç¤ºæŸ¥è¯¢ç»“æœï¼Œä¸€ç»´æ•°ç»„ nrowè¡¨ç¤ºæŸ¥è¯¢è®°å½•ï¼ˆè¡Œæ•°ï¼‰ ncolumnè¡¨ç¤ºåˆ—æ•° ","date":"2023-07-20","objectID":"/posts/computer/sqlite/:4:0","tags":["Computer","C++","Linux"],"title":"SQLite","uri":"/posts/computer/sqlite/"},{"categories":["Computer"],"content":"SQL å¿…çŸ¥å¿…ä¼š file-\u003eOpen DataBase URIâ€¦é€‰æ‹©ä¹¦ç±sqliteæ•°æ®åº“ä¸‹è½½çš„.sqliteæ–‡ä»¶ã€‚ å„ç§è¯­å¥â€“ç›´æ¥çœ‹èœé¸Ÿæ•™ç¨‹å§ï¼Œå¾ˆè¯¦ç»† ","date":"2023-07-20","objectID":"/posts/computer/sqlite/:5:0","tags":["Computer","C++","Linux"],"title":"SQLite","uri":"/posts/computer/sqlite/"},{"categories":["Computer"],"content":"æ£€ç´¢ SELECTï¼šä» SQLite æ•°æ®åº“è¡¨ä¸­è·å–æ•°æ®ï¼Œä»¥ç»“æœè¡¨çš„å½¢å¼è¿”å›æ•°æ® SELECT column1, column2, columnN FROM table_name; SELECT * FROM table_name; --æ£€ç´¢æ‰€æœ‰åˆ— DISTINCTï¼šåªè¿”å›ä¸åŒçš„å€¼ï¼ˆæ£€ç´¢å»é‡ï¼‰(ä½œç”¨äºæ‰€æœ‰åˆ—ï¼Œä¸ä»…ä»…æ˜¯å…¶åçš„é‚£ä¸€åˆ—) SELECT DISTINCT column1, column2,.....columnN FROM table_name LIMITï¼šé™åˆ¶ç”± SELECT è¯­å¥è¿”å›çš„æ•°æ®æ•°é‡ã€‚ å¯æ­é…OFFSET SELECT column1, column2, columnN FROM table_name LIMIT [no of rows] OFFSET [row num] --LIMITåä¸ºæ£€ç´¢çš„è¡Œæ•°ï¼ŒOFFSETåæŒ‡ä»é‚£è¡Œå¼€å§‹ï¼ˆæ£€ç´¢è¡Œä»0å¼€å§‹ï¼‰ ORDER BYï¼šåŸºäºä¸€ä¸ªæˆ–å¤šä¸ªåˆ—æŒ‰å‡åºæˆ–é™åºé¡ºåºæ’åˆ—æ•°æ®ã€‚ ASC é»˜è®¤å€¼ï¼Œä»å°åˆ°å¤§ï¼Œå‡åºæ’åˆ— DESC ä»å¤§åˆ°å°ï¼Œé™åºæ’åˆ— (å¯¹æ¯åˆ—éƒ½è¿›è¡Œé™åºï¼Œéœ€è¦å¯¹æ¯ä¸€åˆ—æŒ‡å®šDESCå…³é”®å­—) SELECT column-list FROM table_name [ORDER BY column1, column2, .. columnN] [ASC | DESC]; æŒ‘æˆ˜é¢˜ç­”æ¡ˆ #lesson 2 --1 select cust_id from Customers --2 select distinct prod_id from OrderItems --3 /*select */ select cust_id from Customers #lesson 3 --1 select cust_name from Customers order by cust_name desc --2 select cust_id, order_num from Orders order by cust_id, order_date desc --3 select quantity, item_price from OrderItems order by quantity desc, item_price desc --4 å¤šï¼Œå°‘by select vend_name from Vendors order by vend_name desc ","date":"2023-07-20","objectID":"/posts/computer/sqlite/:6:0","tags":["Computer","C++","Linux"],"title":"SQLite","uri":"/posts/computer/sqlite/"},{"categories":["Computer"],"content":"è¿‡æ»¤ WHEREï¼šç”¨äºæŒ‡å®šä»ä¸€ä¸ªè¡¨æˆ–å¤šä¸ªè¡¨ä¸­è·å–æ•°æ®çš„æ¡ä»¶ (æœç´¢ã€è¿‡æ»¤æ¡ä»¶ï¼ŒFROMå­å¥ä¹‹å) SELECT column1, column2, columnN FROM table_name WHERE [condition] æ¡ä»¶æ“ä½œç¬¦ æ“ä½œç¬¦ è¯´æ˜ æ“ä½œç¬¦ è¯´æ˜ = ç­‰äº \u003e å¤§äº \u003c\u003e ä¸ç­‰äº \u003e= å¤§äºç­‰äº != ä¸ç­‰äº !\u003e ä¸å¤§äº \u003c å°äº BETWEEN [] AND [] ä¸¤å€¼ä¹‹é—´ \u003c= å°äºç­‰äº IS NULL ä¸ºNULLå€¼ !\u003c ä¸å°äº AND/ORï¼šè¿æ¥è¿ç®—ç¬¦ SELECT column1, column2, columnN FROM table_name WHERE [condition1] AND [condition2]...AND [conditionN]; ----------------------------------------------------- SELECT column1, column2, columnN FROM table_name WHERE [condition1] OR [condition2]...OR [conditionN] INï¼šç”¨äºæŠŠæŸä¸ªå€¼ä¸ä¸€ç³»åˆ—æŒ‡å®šåˆ—è¡¨çš„å€¼è¿›è¡Œæ¯”è¾ƒã€‚ SELECT * FROM COMPANY WHERE AGE IN ( 25, 27 ) --- åˆ—å‡ºäº† AGE çš„å€¼ä¸º 25 æˆ– 27 çš„æ‰€æœ‰è®°å½• NOTï¼šå¦å®šå…¶åè·Ÿçš„æ¡ä»¶ SELECT * FROM COMPANY WHERE AGE NOT IN ( 25, 27 ) --- åˆ—å‡ºäº† AGE çš„å€¼æ—¢ä¸æ˜¯ 25 ä¹Ÿä¸æ˜¯ 27 çš„æ‰€æœ‰è®°å½• LIKEï¼šåŒ¹é…é€šé…ç¬¦æŒ‡å®šæ¨¡å¼çš„æ–‡æœ¬å€¼ %ï¼šä»£è¡¨0ï¼Œ1æˆ–å¤šä¸ªå­—ç¬¦ _ï¼šä»£è¡¨å•ä¸ªå­—ç¬¦ []ï¼šæŒ‡å®šä¸€ä¸ªå­—ç¬¦é›† WHERE condition LIKE '[JM]%' è¡¨ç¤ºJæˆ–Må¼€å¤´ æŒ‘æˆ˜é¢˜ç­”æ¡ˆ #lesson 4 --1 select prod_id, prod_name from Products where prod_price=9.49 --2 select prod_id, prod_name from Products where prod_price\u003e=9 --3 select distinct order_num from OrderItems where quantity\u003e=100 --4 select prod_name, prod_price from Products where prod_price between 3 and 6 order by prod_price #lesson 5 --1 select vend_name from Vendors where vend_country = 'USA' and vend_state = 'CA' --2 select order_num, prod_id, quantity from OrderItems where prod_id in ('BR01', 'BR02', 'BR03') and quantity \u003e= 100 --3 lesson 4ä¸­ç¬¬4é¢˜ select prod_name, prod_price from Products where (prod_price \u003e= 3 and prod_price \u003c= 6) order by prod_price --4 select vend_name from Vendors where vend_country = 'USA' and vend_state = 'CA' order by vend_name #lesson 6 --1 select prod_name, prod_desc from Products where prod_desc like '%toy%' --2 select prod_name, prod_desc from Products where not prod_desc like '%toy%' order by prod_name --3 select prod_name, prod_desc from Products where prod_desc like '%toy%' and prod_desc like '%carrots%' --4 select prod_name, prod_desc from Products where prod_desc like '%toy%carrots%' ","date":"2023-07-20","objectID":"/posts/computer/sqlite/:7:0","tags":["Computer","C++","Linux"],"title":"SQLite","uri":"/posts/computer/sqlite/"},{"categories":["Computer"],"content":"å‡½æ•° ASï¼šå–åˆ«åï¼›æŠŠè¡¨æˆ–åˆ—é‡å‘½å SELECT column_name AS alias_name FROM table_name WHERE [condition]; è¿ç®—ï¼š+-*/ æ‹¼æ¥ Concat()æˆ–è€…+æˆ–è€…|| æ–‡æœ¬å¤„ç†å‡½æ•° å‡½æ•° è¯´æ˜ LENGTH() è¿”å›å­—ç¬¦ä¸²é•¿åº¦ LOWER() è½¬æ¢ä¸ºå°å†™ UPPER() è½¬åŒ–ä¸ºå¤§å†™ LEFT() è¿”å›å­—ç¬¦ä¸²å·¦è¾¹çš„å­—ç¬¦ RIGHT() è¿”å›å­—ç¬¦ä¸²å³è¾¹çš„å­—ç¬¦ LTRIM() å»æ‰å­—ç¬¦ä¸²å·¦è¾¹çš„ç©ºæ ¼ RTRIM() å»æ‰å­—ç¬¦ä¸²å³è¾¹çš„ç©ºæ ¼ SUBSTR() æå–å­—ç¬¦ä¸²ç»„æˆ SOUNDEX() è¿”å›å­—ç¬¦ä¸²çš„SOUNDEXå€¼ï¼ˆå‘éŸ³ç±»ä¼¼ï¼‰ æ—¥æœŸæ—¶é—´å¤„ç†å‡½æ•° SQLite æ—¥æœŸ \u0026 æ—¶é—´ æ•°å€¼å¤„ç†å‡½æ•° ABS() COS() EXP() PI() SIN() TAN() SQRT() èšé›†æ±‡æ€»å‡½æ•° COUNT()ï¼šè®¡ç®—ä¸€ä¸ªæ•°æ®åº“è¡¨ä¸­çš„è¡Œæ•°ã€‚ MAX/MIN() ï¼šæŸåˆ—çš„æœ€å¤§å€¼/æœ€å°å€¼ã€‚ AVG()ï¼šæŸåˆ—çš„å¹³å‡å€¼ã€‚ SUM() ï¼šæŸåˆ—è®¡ç®—æ€»å’Œã€‚ æŒ‘æˆ˜é¢˜ç­”æ¡ˆ #lesson 7 --1 select vend_id, vend_name as vname, vend_address as vaddress, vend_city as vcity from Vendors order by vname --2 select prod_id, prod_price, prod_price*0.9 as sale_price from Products #lesson 8 --1 select cust_id, cust_name, upper(substr(cust_contact,1,2) || substr(cust_city,1,3)) as user_login from Customers --2 select order_num, order_date from Orders where (strftime('%Y', order_date)='2020' and strftime('%m', order_date)='01') order by order_date #lesson 9 --1 select sum(quantity) as items_ordered from OrderItems --2 select sum(quantity) as items_ordered from OrderItems where prod_id = 'BR01' --3 select max(prod_price) from Products where prod_price \u003c= 10 ","date":"2023-07-20","objectID":"/posts/computer/sqlite/:8:0","tags":["Computer","C++","Linux"],"title":"SQLite","uri":"/posts/computer/sqlite/"},{"categories":["Computer"],"content":"åˆ†ç»„ ","date":"2023-07-20","objectID":"/posts/computer/sqlite/:9:0","tags":["Computer","C++","Linux"],"title":"SQLite","uri":"/posts/computer/sqlite/"},{"categories":["Computer"],"content":"ç›´æ¥ä½¿ç”¨ sqlite3 ./***.db sqlite\u003e .schema sqlite\u003e .exit ","date":"2023-07-20","objectID":"/posts/computer/sqlite/:10:0","tags":["Computer","C++","Linux"],"title":"SQLite","uri":"/posts/computer/sqlite/"},{"categories":["Computer"],"content":"æ‹“å±•é˜…è¯» å®˜æ–¹ SQLiteä¸­æ–‡ç½‘ èœé¸Ÿæ•™ç¨‹-SQLite SQLite3ã€€APIç¼–ç¨‹æ‰‹å†Œ ç©è½¬SQLite6ï¼šä½¿ç”¨Cè¯­è¨€æ¥è¯»å†™æ•°æ®åº“ ","date":"2023-07-20","objectID":"/posts/computer/sqlite/:11:0","tags":["Computer","C++","Linux"],"title":"SQLite","uri":"/posts/computer/sqlite/"},{"categories":["C++"],"content":"CMakeæ•™ç¨‹","date":"2023-07-15","objectID":"/posts/c++/cmake%E6%95%99%E7%A8%8B/","tags":["C++","å·¥å…·"],"title":"CMakeæ•™ç¨‹","uri":"/posts/c++/cmake%E6%95%99%E7%A8%8B/"},{"categories":["C++"],"content":"CMakeæ•™ç¨‹ CMakeLists.txt cmake_minimum_required(VERSION 3.10) project(hello) add_executable(hello main.cpp factorial.cpp printhello.cpp) CMake 2.x ä¸€èˆ¬æ–¹ä¾¿åˆ é™¤å¤šä½™æ–‡ä»¶ï¼Œæ–°å»ºBuildæ–‡ä»¶å¤¹ç”¨æ¥ç”Ÿæˆæ–‡ä»¶ mkdir build cd build cmake .. -DCMAKE_BUILD_TYPE=Release make -j4 make install ./hello cd ../ rm -rf build cmake .. -DCMAKE_INSTALL_PREFIX= CMake 3.x cmake -B build -DCMAKE_BUILD_TYPE=Release cmake --build build --parallel 4 cmake --build build --target install ","date":"2023-07-15","objectID":"/posts/c++/cmake%E6%95%99%E7%A8%8B/:1:0","tags":["C++","å·¥å…·"],"title":"CMakeæ•™ç¨‹","uri":"/posts/c++/cmake%E6%95%99%E7%A8%8B/"},{"categories":["C++"],"content":"åŸºç¡€çŸ¥è¯† ","date":"2023-07-15","objectID":"/posts/c++/cmake%E6%95%99%E7%A8%8B/:2:0","tags":["C++","å·¥å…·"],"title":"CMakeæ•™ç¨‹","uri":"/posts/c++/cmake%E6%95%99%E7%A8%8B/"},{"categories":["C++"],"content":"ç®€å•é¡¹ç›® cmake_minimum_required(VERSION major.minor[.patch[.tweak]]) æŒ‡å®šäº†é¡¹ç›®æ‰€éœ€çš„CMakeçš„æœ€ä½ç‰ˆæœ¬ å¼ºåˆ¶è®¾ç½®å°†CMakeè¡Œä¸ºåŒ¹é…åˆ°å¯¹åº”ç‰ˆæœ¬ # cmake_minimum_required(VERSION 3.10) æŒ‡å®šç‰ˆæœ¬ 3.10 project(projectName [VERSION major[.minor[.patch[.tweak]]]] [LANGUAGES languageName ...] ) projectNameï¼šé¡¹ç›®åç§° LANGUAGESï¼šé¡¹ç›®ç¼–ç¨‹è¯­è¨€ï¼š Cã€CXXã€JAVAã€â€¦å¤šç§è¯­è¨€ç©ºæ ¼åˆ†å¼€ï¼›é»˜è®¤Cå’ŒCXX 3.0ç‰ˆæœ¬ä¹‹å‰ä¸æ”¯æŒLANGUAGESå…³é”®å­—ï¼Œproject(hello CXX) # project(hello) helloé¡¹ç›® å¯æ‰§è¡Œæ–‡ä»¶ add_executable(targetName [WIN32] [MACOSX_BUNDLE] [EXCLUDE_FROM_ALL] source1 [source2 ...] ) ä¸ºä¸€ç»„æºæ–‡ä»¶åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ # add_executable(test main.cpp) ä¸ºmain.cppæ„å»ºtestå¯æ‰§è¡Œæ–‡ä»¶ å®šä¹‰åº“ add_library(targetName [STATIC | SHARED | MODULE] [EXCLUDE_FROM_ALL] source1 [source2 ...] ) STATIC | SHARED | MODULEï¼šé™æ€åº“ï¼ŒåŠ¨æ€åº“ï¼ŒåŠ¨æ€åŠ è½½åº“ cmake -DBUILD_SHARED_LIBS=YES /path/to/sourceï¼š-Dé€‰é¡¹è®¾ç½®æ˜¯å¦æ„å»ºä¸ºåŠ¨æ€åº“ï¼Œå¦åˆ™ä¸ºé™æ€åº“ã€‚ set(BUILD_SHARED_LIBS YES)ï¼šè¦åœ¨ add_library() å‘½ä»¤ä¹‹å‰è®¾ç½®ï¼Œï¼ˆçµæ´»æ€§è¾ƒå·®ï¼‰ add_library(collector src1.cpp) ç›®æ ‡é“¾æ¥ è€ƒè™‘Aåº“ä¾èµ–äºBåº“ï¼Œå› æ­¤å°†Aé“¾æ¥åˆ°B target_link_libraries(targetName \u003cPRIVATE|PUBLIC|INTERFACE\u003e item1 [item2 ...] [\u003cPRIVATE|PUBLIC|INTERFACE\u003e item3 [item4 ...]] ... ) å°æ€»ç»“ 1 ç›®æ ‡åç§°ä¸é¡¹ç›®åç§°æ— å…³ï¼Œæœ€å¥½å°†é¡¹ç›®åç§°å’Œå¯æ‰§è¡Œæ–‡ä»¶åç§°åˆ†å¼€ å‘½ååº“çš„ç›®æ ‡æ—¶ï¼Œä¸è¦ç”¨libä½œä¸ºåç§°çš„å¼€å¤´æˆ–ç»“å°¾ã€‚libä¼šè‡ªåŠ¨æˆä¸ºå‰ç¼€ å°½é‡é¿å…ç›´æ¥å°†åº“æŒ‡å®š STATIC æˆ– SHARED ç›®æ ‡åœ¨è°ƒç”¨ target_link_libraries() æ—¶éœ€è¦æŒ‡å®š PRIVATE ã€ PUBLIC å’Œ/æˆ– INTERFACE ","date":"2023-07-15","objectID":"/posts/c++/cmake%E6%95%99%E7%A8%8B/:2:1","tags":["C++","å·¥å…·"],"title":"CMakeæ•™ç¨‹","uri":"/posts/c++/cmake%E6%95%99%E7%A8%8B/"},{"categories":["C++"],"content":"å˜é‡ åŸºæœ¬å˜é‡ set(varName value... [PARENT_SCOPE]) å°†æ‰€æœ‰å˜é‡éƒ½ä½œä¸ºå­—ç¬¦ä¸²å¤„ç†ï¼Œç»™å®šå¤šä¸ªå€¼ï¼Œè¿™äº›å€¼å°†ç”¨ åˆ†å·è¿æ¥åœ¨ä¸€èµ·ã€‚å¯ä»¥ä½¿ç”¨è½¬ä¹‰å­—ç¬¦è¡¨ç¤ºå¼•å·\\\" set(myVar a b c) # myVar = \"a;b;c\" set(myVar a;b;c) # myVar = \"a;b;c\" set(myVar \"a b c\") # myVar = \"a b c\" set(myVar a b;c) # myVar = \"a;b;c\" set(myVar a \"b c\") # myVar = \"a;b c\" ç¯å¢ƒå˜é‡ set(ENV{PATH} \"$ENV{PATH}:/opt/myDir\") åªä¼šå½±å“å½“å‰çš„CMakeå®ä¾‹ï¼Œå¾ˆå°‘ç”¨åˆ° ç¼“å­˜å˜é‡ set(varName value... CACHE type \"docstring\" [FORCE]) å¸ƒå°”ç¼“å­˜å˜é‡ä½¿ç”¨optio()ä»£æ›¿set() option(optVar heilpstring [initialValue]) # initialValueé»˜è®¤OFF set(optVar initialValue CACHE BOOL hilpstring) # ç­‰ä»·option è°ƒè¯•å˜é‡å’Œè¯Šæ–­ message([mode] msg1 [msg2]...) # æ‰“å°è®°å½•ä¿¡æ¯ variable_watch(myVar [command]) # ç›‘æ§å˜é‡ï¼Œå¾ˆå°‘ç”¨ å¤„ç†å­—ç¬¦ä¸² æŸ¥æ‰¾å’Œæ›¿æ¢æ“ä½œã€æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€å¤§å°å†™è½¬æ¢ã€åˆ é™¤ç©ºæ ¼å’Œå…¶ä»–å¸¸è§å­—ç¬¦ä¸²æ“ä½œ æŸ¥æ‰¾ string(FIND inputString subString outVar [REVERSE]) et(longStr abcdefabcdef) set(shortBit def) string(FIND ${longStr} ${shortBit} fwdIndex) string(FIND ${longStr} ${shortBit} revIndex REVERSE) message(\"fwdIndex = ${fwdIndex}, revIndex = ${revIndex}\") # è¾“å‡º fwdIndex = 3, revIndex = 9 # ä»£è¡¨å­å­—ç¬¦ä¸²è¢«æ‰¾åˆ°ï¼Œç¬¬ä¸€æ¬¡æ‰¾åˆ°çš„æ—¶å€™ç´¢å¼•ä¸º3ï¼›æœ€åä¸€æ¬¡æ‰¾åˆ°çš„ç´¢å¼•ä¸º9 æ›¿æ¢ string(REPLACE matchString replaceWith outVar input [input...]) å°†ä½¿ç”¨ replaceWith æ›¿æ¢è¾“å…¥å­—ç¬¦ä¸²ä¸­æ¯ä¸ª matchString ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨ outVar æ­£åˆ™è¡¨è¾¾å¼ string(REGEX MATCH regex outVar input [input...]) string(REGEX MATCHALL regex outVar input [input...]) string(REGEX REPLACE regex replaceWith outVar input [input...]) åˆ—è¡¨ list(LENGTH listVar outVar) # ç»Ÿè®¡ list(GET listVar index [index...]) outVar # æ£€ç´¢ list(APPEND listVar item [item...]) # è¿½åŠ  list(INSERT listVar index item [item...]) # æ’å…¥ list(FIND myList value outVar) # æŸ¥æ‰¾ # åˆ é™¤ list(REMOVE_ITEM myList value [value...]) # ä»åˆ—è¡¨ä¸­åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªç›®æ ‡é¡¹ã€‚å¦‚æœç›®æ ‡é¡¹ä¸åœ¨åˆ—è¡¨ä¸­ï¼Œä¹Ÿä¸ä¼šå‡ºé”™ list(REMOVE_AT myList index [index...]) # æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªè¦åˆ é™¤çš„ç´¢å¼•ï¼Œè¶…è¿‡ç´¢å¼•æŠ¥é”™ list(REMOVE_DUPLICATES myList) # å°†ç¡®ä¿åˆ—è¡¨ä¸åŒ…å«é‡å¤é¡¹ã€‚ # æ’åº (æŒ‰å­—æ¯é¡ºåº) list(REVERSE myList) list(SORT myList) set(myList a b c) # Creates the list \"a;b;c\" list(LENGTH myList len) message(\"length = ${len}\") list(GET myList 2 1 letters) message(\"letters = ${letters}\") list(APPEND myList d e f) message(\"myList (first) = ${myList}\") list(INSERT myList 2 X Y Z) message(\"myList (second) = ${myList}\") list(FIND myList d index) message(\"index = ${index}\") # è¾“å‡º length = 3 letters = c;b myList (first) = a;b;c;d;e;f myList (second) = a;b;X;Y;Z;c;d;e;f index = 6 æ•°å­¦è¡¨è¾¾å¼ math(EXPR outVar mathExpr) ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»ä½¿ç”¨å…³é”®å­— EXPR ï¼Œè€Œ mathExpr å®šä¹‰è¦è®¡ç®—çš„è¡¨è¾¾å¼ï¼Œç»“æœå°†å­˜å‚¨åœ¨ outVar ä¸­ set(x 3) set(y 7) math(EXPR z \"(${x}+${y}) / 2\") message(\"result = ${z}\") # è¾“å‡º result = 5 ","date":"2023-07-15","objectID":"/posts/c++/cmake%E6%95%99%E7%A8%8B/:2:2","tags":["C++","å·¥å…·"],"title":"CMakeæ•™ç¨‹","uri":"/posts/c++/cmake%E6%95%99%E7%A8%8B/"},{"categories":["C++"],"content":"æ§åˆ¶æµ if() if(expression1) # commands ... elseif(expression2) # commands ... else() # commands ... endif() å¾ªç¯ foreach(loopVar IN [LISTS listVar1 ...] [ITEMS item1 ...]) # ... endforeach() while(condition) # ... endwhile() ","date":"2023-07-15","objectID":"/posts/c++/cmake%E6%95%99%E7%A8%8B/:2:3","tags":["C++","å·¥å…·"],"title":"CMakeæ•™ç¨‹","uri":"/posts/c++/cmake%E6%95%99%E7%A8%8B/"},{"categories":["C++"],"content":"å­ç›®å½• add_subdirectory() add_subdirectory(sourceDir [ binaryDir ] [ EXCLUDE_FROM_ALL ]) å…è®¸é¡¹ç›®å°†å¦ä¸€ä¸ªç›®å½•å¼•å…¥åˆ°æ„å»ºä¸­ CMAKE_SOURCE_DIR ï¼šæºçš„æœ€é¡¶å±‚ç›®å½•ï¼ˆæœ€é¡¶å±‚CMakeLists.txtæ‰€åœ¨ä½ç½®ï¼‰ CMAKE_BINARY_DIRï¼šæ„å»ºçš„æœ€é¡¶å±‚ç›®å½• å°±æ˜¯build CMAKE_CURRENT_SOURCE_DIRï¼šå½“å‰å¤„ç†çš„CMakeLists.txtæ–‡ä»¶çš„ç›®å½• CMAKE_CURRENT_BINARY_DIRï¼šå½“å‰å¤„ç†çš„CMakeLists.txtæ–‡ä»¶å¯¹åº”çš„æ„å»ºç›®å½• include() ","date":"2023-07-15","objectID":"/posts/c++/cmake%E6%95%99%E7%A8%8B/:2:4","tags":["C++","å·¥å…·"],"title":"CMakeæ•™ç¨‹","uri":"/posts/c++/cmake%E6%95%99%E7%A8%8B/"},{"categories":["C++"],"content":"å‚è€ƒé˜…è¯» å®˜æ–¹æ‰‹å†Œ Professional-CMake cmake cookbook CMakeçš„é“¾æ¥é€‰é¡¹ï¼šPRIVATEï¼ŒINTERFACEï¼ŒPUBLIC - çŸ¥ä¹ (zhihu.com) An Introduction to Modern CMake vscode æ’ä»¶ ï¼š clangd ","date":"2023-07-15","objectID":"/posts/c++/cmake%E6%95%99%E7%A8%8B/:3:0","tags":["C++","å·¥å…·"],"title":"CMakeæ•™ç¨‹","uri":"/posts/c++/cmake%E6%95%99%E7%A8%8B/"},{"categories":["C++"],"content":"Makeå‘½ä»¤ pythonç‰ˆæœ¬çš„makefile: SCons makeè§„åˆ™ï¼šâ€œç›®æ ‡\"æ˜¯å¿…éœ€çš„ï¼Œä¸å¯çœç•¥ï¼›â€œå‰ç½®æ¡ä»¶\"å’Œ\"å‘½ä»¤\"éƒ½æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯ä¸¤è€…ä¹‹ä¸­å¿…é¡»è‡³å°‘å­˜åœ¨ä¸€ä¸ªã€‚ æ¯æ¡è§„åˆ™å°±æ˜ç¡®ä¸¤ä»¶äº‹ï¼šæ„å»ºç›®æ ‡çš„å‰ç½®æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå¦‚ä½•æ„å»ºã€‚ \u003cç›®æ ‡\u003e : \u003cå‰ç½®æ¡ä»¶\u003e \u003cå‘½ä»¤\u003e æ–‡æœ¬æ–‡ä»¶çš„ç¼–å†™ // functions.h #ifndef _FUNCTIONS_H_ #define _FUNCTIONS_H_ void printhello(); int factorial(int n); #endif // factorial.cpp #include \"functions.h\" int factorial(int n){ if(n == 1) return 1; else return n * factorial(n - 1); } //printhello.cpp #include \u003ciostream\u003e #include \"functions.h\" using namespace std; void printhello(){ int i; cout \u003c\u003c \"Hello world!\" \u003c\u003c endl; } //main.cpp #include \u003ciostream\u003e #include \"functions.h\" using namespace std; int main(){ printhello(); cout \u003c\u003c \"This is main: \" \u003c\u003c endl; cout \u003c\u003c \"This factorial of 5 is: \" \u003c\u003c factorial(5) \u003c\u003c endl; return 0; } æ­£å¸¸ç¼–è¯‘ g++ *.cpp -o hello ./hello å†™makefileæ–‡ä»¶ï¼Œç®¡ç†å·¥ç¨‹ï¼Œå®ç°è‡ªåŠ¨åŒ–ç¼–è¯‘ï¼ˆ.oï¼‰ # VERDION 1 hello: main.cpp printhello.cpp factorial.cpp g++ -o hello main.cpp printhello.cpp factorial.cpp # VERDION 2 CXX = g++ TARGET = hello OBJ = main.o printhello.o factorial.o $(TARGET): $(OBJ) $(CXX) -o $(TARGET) $(OBJ) main.o: main.cpp $(CXX) -c main.cpp printhello.o: printhello.cpp $(CXX) -c printhello.cpp factorial.o: factorial.cpp $(CXX) -c factorial.cpp # VERDION 3 CXX = g++ TARGET = hello OBJ = main.o printhello.o factorial.o CXXFLAGS = -c -Wall # Wall æ‰“å¼€è­¦å‘Šä¿¡æ¯ $(TARGET): $(OBJ) $(CXX) -o $@ $^ %.o: %.cpp $(CXX) $(CXXFLAGS) $\u003c -o $@ .PHONY: clean clean: rm -f *.o $(TARGET) # VERDION 4 CXX = g++ TARGET = hello SRC = $(wildcard *.cpp) OBJ = $(patsubst %.cpp, %.o, $(SRC)) CXXFLAGS = -c -Wall $(TARGET): $(OBJ) $(CXX) -o $@ $^ %.o: %.cpp $(CXX) $(CXXFLAGS) $\u003c -o $@ .PHONY: clean clean: rm -f *.o $(TARGET) # del -f *.o $(TARGET).exe # windowsä¸‹è¦æƒ³åœ¨Makefileä¸­é€šè¿‡å‘½ä»¤è¡Œåˆ é™¤ä¸­é—´æ–‡ä»¶ï¼Œéœ€è¦å°†rmæ›¿æ¢ä¸ºdel ä½¿ç”¨makeå‘½ä»¤æ‰§è¡Œmakefileæ–‡ä»¶ä¸­çš„æŒ‡ä»¤é›† make # make VERBOSE=1 æŸ¥çœ‹makeå…·ä½“æŒ‡ä»¤ åœ¨å½“å‰ç›®å½•ä¸‹æ‰§è¡Œmainç¨‹åº ./hello make clean make -n # æ‰“å°makeæŸ¥çœ‹å…·ä½“æŒ‡ä»¤ï¼Œä¸è¿è¡Œ .PHONY # å¼ºåˆ¶æ¯æ¬¡æ‰§è¡Œ ","date":"2023-07-15","objectID":"/posts/c++/cmake%E6%95%99%E7%A8%8B/:4:0","tags":["C++","å·¥å…·"],"title":"CMakeæ•™ç¨‹","uri":"/posts/c++/cmake%E6%95%99%E7%A8%8B/"},{"categories":["C++"],"content":"å‚è€ƒé˜…è¯» Makefile Tutorial By Example GNU make ","date":"2023-07-15","objectID":"/posts/c++/cmake%E6%95%99%E7%A8%8B/:5:0","tags":["C++","å·¥å…·"],"title":"CMakeæ•™ç¨‹","uri":"/posts/c++/cmake%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"æ­£åˆ™è¡¨è¾¾å¼","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"æ­£åˆ™è¡¨è¾¾å¼ ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:1:0","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"æ­£åˆ™è¡¨è¾¾å¼è¯­æ³• ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:2:0","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"å…ƒå­—ç¬¦ å…ƒå­—ç¬¦ æè¿° . å¥å·åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦é™¤äº†æ¢è¡Œç¬¦ã€‚ \".ar\" =\u003e The car parked in the garage. [ ] åŒ¹é…æ–¹æ‹¬å·å†…çš„ä»»æ„å­—ç¬¦ \"[Tt]he\" =\u003e The car parked in the garage. [^ ] å¦å®šçš„å­—ç¬¦ç§ç±»ã€‚åŒ¹é…é™¤äº†æ–¹æ‹¬å·é‡Œçš„ä»»æ„å­—ç¬¦ \"[^c]ar=\u003e The car parked in the garage. * åŒ¹é…\u003e=0ä¸ªé‡å¤çš„åœ¨*å·ä¹‹å‰çš„å­—ç¬¦ã€‚ \"[a-z]*\" =\u003e The car parked in the garage #21. + åŒ¹é…\u003e=1ä¸ªé‡å¤çš„+å·å‰çš„å­—ç¬¦ã€‚ \"c.+t\" =\u003e The fat cat sat on the mat. ? æ ‡è®°?ä¹‹å‰çš„å­—ç¬¦ä¸ºå¯é€‰. \"[T]?he\" =\u003e The car is parked in the garage. {n,m} åŒ¹é…numä¸ªå¤§æ‹¬å·ä¹‹å‰çš„å­—ç¬¦æˆ–å­—ç¬¦é›† (n \u003c= num \u003c= m). 0~9ä¹‹é—´åŒ¹é…æœ€å°‘2ä½ï¼Œæœ€å¤š3ä½çš„æ•°å­—ï¼š\"[0-9]{2,3}\" =\u003e The number was 9.9997 but we rounded it off to 10.0. 0~9ä¹‹é—´åŒ¹é…åªæ˜¯2ä½çš„æ•°å­—ï¼š\"[0-9]{2,}\" =\u003e The number was 9.9997 but we rounded it off to 10.0. 0~9ä¹‹é—´åŒ¹é…3ä½æ•°å­—ï¼š\"[0-9]{3}\" =\u003e The number was 9.9997 but we rounded it off to 10.0. (xyz) å­—ç¬¦é›†ï¼ŒåŒ¹é…ä¸ xyz å®Œå…¨ç›¸ç­‰çš„å­—ç¬¦ä¸². \"`(c | æˆ–è¿ç®—ç¬¦ï¼ŒåŒ¹é…ç¬¦å·å‰æˆ–åçš„å­—ç¬¦. â€œ`(T \\ è½¬ä¹‰å­—ç¬¦,ç”¨äºåŒ¹é…ä¸€äº›ä¿ç•™çš„å­—ç¬¦ [ ] ( ) { } . * + ? ^ $ \\ | \"`(f ^ ä»å¼€å§‹è¡Œå¼€å§‹åŒ¹é… `[T $ ä»æœ«ç«¯å¼€å§‹åŒ¹é… \"(at\\.)â€ =\u003eThe fat cat. sat. on the mat. \"(at\\.$)\"=\u003eThe fat cat. sat. on the mat. ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:2:1","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"ç®€å†™å­—ç¬¦é›† ç®€å†™ æè¿° . é™¤æ¢è¡Œç¬¦å¤–çš„æ‰€æœ‰å­—ç¬¦ \\w åŒ¹é…æ‰€æœ‰å­—æ¯æ•°å­—ï¼Œç­‰åŒäº [a-zA-Z0-9_] \\W åŒ¹é…æ‰€æœ‰éå­—æ¯æ•°å­—ï¼Œå³ç¬¦å·ï¼Œç­‰åŒäºï¼š [^\\w] \\d åŒ¹é…æ•°å­—ï¼š [0-9] \\D åŒ¹é…éæ•°å­—ï¼š [^\\d] \\s åŒ¹é…æ‰€æœ‰ç©ºæ ¼å­—ç¬¦ï¼Œç­‰åŒäºï¼š [\\t\\n\\f\\r\\p{Z}] \\S åŒ¹é…æ‰€æœ‰éç©ºæ ¼å­—ç¬¦ï¼š [^\\s] \\f åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦ \\n åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ \\r åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦ \\t åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ \\v åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦ \\p åŒ¹é… CR/LFï¼ˆç­‰åŒäº \\r\\nï¼‰ï¼Œç”¨æ¥åŒ¹é… DOS è¡Œç»ˆæ­¢ç¬¦ ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:2:2","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"é›¶å®½åº¦æ–­è¨€ ç¬¦å· æè¿° ?= æ­£å…ˆè¡Œæ–­è¨€-å­˜åœ¨ â€œ`(T ?! è´Ÿå…ˆè¡Œæ–­è¨€-æ’é™¤ â€œ`(T ?\u003c= æ­£åå‘æ–­è¨€-å­˜åœ¨ â€œ`(?\u003c=(T ?\u003c! è´Ÿåå‘æ–­è¨€-æ’é™¤ â€œ`(?\u003c!(T ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:2:3","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"æ ‡å¿—(å¯é€‰é¡¹) æ ‡å¿— æè¿° i å¿½ç•¥å¤§å°å†™ã€‚ \"The/gi\" =\u003e The fat cat sat on the mat. g å…¨å±€æœç´¢ã€‚ \".(at)/gi\" =\u003e The fat cat sat on the mat. m å¤šè¡Œä¿®é¥°ç¬¦ï¼šé”šç‚¹å…ƒå­—ç¬¦ ^ $ å·¥ä½œèŒƒå›´åœ¨æ¯è¡Œçš„èµ·å§‹ã€‚ ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:2:4","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"è´ªå©ªä¸æƒ°æ€§åŒ¹é… é»˜è®¤è´ªå©ªåŒ¹é…ï¼Œæ„å‘³ç€ä¼šåŒ¹é…å°½å¯èƒ½é•¿çš„å­ä¸² ?è½¬ä¸ºæƒ°æ€§åŒ¹é…,åˆ™é‡åˆ°å°±åœ â€œ(.*at)\"=\u003eThe fat cat sat on the mat. â€œ(.*?at)\"=\u003eThe fat cat sat on the mat. ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:2:5","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"æ­£åˆ™è¡¨è¾¾å¼æ“ä½œ ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:3:0","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"åŒ¹é… #include \u003cregex\u003e bool regex_match (const basic_string\u003ccharT,ST,SA\u003e\u0026 s, const basic_regex\u003ccharT,traits\u003e\u0026 rgx, regex_constants::match_flag_type flags = regex_constants::match_default); /** ç¬¬ä¸€ä¸ªå‚æ•°sä¸ºï¼šéœ€è¦ç”¨æ­£åˆ™è¡¨è¾¾å¼å»åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œç®€è¨€ä¹‹å°±æ˜¯è¦å¤„ç†çš„å­—ç¬¦ä¸²ã€‚ ç¬¬äºŒä¸ªå‚æ•°rgxä¸ºï¼šä¸ºä¸€ä¸ªbasic_regexçš„ä¸€ä¸ªå¯¹è±¡ï¼Œè¿›è¡ŒåŒ¹é…çš„æ¨¡å¼ï¼Œç”¨æ­£åˆ™å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œå…¶å£°æ˜ä¸º: (1)typedef basic_regex\u003cchar\u003e regex;//æ­£å¸¸å­—ç¬¦å¤„ç†ï¼ˆå¸¸ç”¨ï¼‰ (2)typedef basic_regex\u003cwchar_t\u003e wregex;//å®½å­—ç¬¦å¤„ç† ç¬¬ä¸‰ä¸ªå‚æ•°flagsæ˜¯æ§åˆ¶ç¬¬äºŒä¸ªå‚æ•°å¦‚ä½•å»åŒ¹é…ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å¤„å¯ä»¥è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªå¸¸é‡å»æ§åˆ¶ï¼Œä¸€èˆ¬è®¾ç½®æœ‰é»˜è®¤å€¼ è¿”å›å€¼ä¸ºï¼šå¦‚æœåŒ¹é…æˆåŠŸï¼Œè¿”å›True,å¦åˆ™è¿”å›False */ ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:3:1","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"æœç´¢ bool regex_search (const basic_string\u003ccharT,ST,SA\u003e\u0026 s, const basic_regex\u003ccharT,traits\u003e\u0026 rgx, regex_constants::match_flag_type flags = regex_constants::match_default); //å‚æ•°å«ä¹‰ä¸regex_matchä¸€è‡´ï¼Œæ­¤æ–¹æ³•ä¸è¿”å›åŒ¹é…æˆåŠŸçš„å­—ç¬¦ä¸²ï¼Œåªæ˜¯ç¡®å®šé‡Œé¢æ˜¯å¦æœ‰æ»¡è¶³æ­£åˆ™å¼çš„å­—å¥ bool regex_search (const basic_string\u003ccharT,ST,SA\u003e\u0026 s, match_results\u003ctypename basic_string\u003ccharT,ST,SA\u003e::const_iterator,Alloc\u003e\u0026 m, const basic_regex\u003ccharT,traits\u003e\u0026 rgx, regex_constants::match_flag_type flags = regex_constants::match_default); //å…¶ä»–å‚æ•°å«ä¹‰ä¸€æ ·ï¼Œå¤šäº†ä¸€ä¸ªmå‚æ•°ï¼Œå…¶å«ä¹‰ä¸ºæ­¤å¤„ä¸ºä¸€ä¸ªmatch_resultsçš„ç±»å‹ï¼Œå…¶ä½œç”¨æ˜¯å­˜å‚¨åŒ¹é…çš„ç»“æœæˆ–è€…æ»¡è¶³å­è¡¨è¾¾å¼åŒ¹é…çš„ç»“æœï¼Œè¿”å›ç»“æœä¸ºä¸€ä¸ªè¿­ä»£å™¨ ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:3:2","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"æ›¿æ¢ basic_string\u003ccharT,ST,SA\u003e regex_replace (const basic_string\u003ccharT,ST,SA\u003e\u0026 s, const basic_regex\u003ccharT,traits\u003e\u0026 rgx, const charT* fmt, regex_constants::match_flag_type flags = regex_constants::match_default); //ç¬¬ä¸€ä¸ªå‚æ•°sè¡¨ç¤ºè¦è¢«æ“ä½œçš„å­—ç¬¦ä¸²å¯¹è±¡ //ç¬¬äºŒä¸ªå‚æ•°rgxä¸ºåŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ //ç¬¬ä¸‰ä¸ªå‚æ•°fmtä¸ºä»¥ä½•ç§æ–¹å¼è¿›è¡Œæ›¿æ¢ //ç¬¬å››ä¸ªå‚æ•°flagsä¸ºä¸€ç§æ–¹å¼ï¼Œä»£è¡¨æ€æ ·å»æ›¿æ¢ //è¿”å›å€¼ä¸ºï¼šå¦‚æœåŒ¹é…æˆåŠŸè¿”å›å·²ç»æ›¿æ¢æˆåŠŸçš„å­—ç¬¦ä¸²ï¼Œå¦åˆ™åŒ¹é…å¤±è´¥ï¼Œè¿”å›åŸå­—ç¬¦ä¸² ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:3:3","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"py-æ­£åˆ™è¡¨è¾¾å¼æ“ä½œ re æ¨¡å—çš„ä¸€èˆ¬ä½¿ç”¨æ­¥éª¤ ä½¿ç”¨compileå‡½æ•°å°†æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²å½¢å¼ç¼–è¯‘ä¸ºä¸€ä¸ª Pattern å¯¹è±¡ é€šè¿‡ Pattern å¯¹è±¡æä¾›çš„ä¸€ç³»åˆ—æ–¹æ³•å¯¹æ–‡æœ¬è¿›è¡ŒåŒ¹é…æŸ¥æ‰¾ï¼Œè·å¾—åŒ¹é…ç»“æœï¼ˆä¸€ä¸ª Match å¯¹è±¡ï¼‰ æœ€åä½¿ç”¨ Match å¯¹è±¡æä¾›çš„å±æ€§å’Œæ–¹æ³•è·å¾—ä¿¡æ¯ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œå…¶ä»–çš„æ“ä½œ ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:4:0","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"compileå‡½æ•° ç”¨äºç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”Ÿæˆä¸€ä¸ª Pattern å¯¹è±¡ import re re.compile(pattern[, flag]) patternï¼š åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ flag ï¼šä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºåŒ¹é…æ¨¡å¼ï¼Œæ¯”å¦‚å¿½ç•¥å¤§å°å†™ï¼Œå¤šè¡Œæ¨¡å¼ç­‰ ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:4:1","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"match ä»å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®åŒ¹é…ä¸€ä¸ªæ¨¡å¼ï¼Œå¦‚æœä¸æ˜¯èµ·å§‹ä½ç½®åŒ¹é…æˆåŠŸçš„è¯ï¼Œmatch()å°±è¿”å›noneã€‚å¿…é¡»ä»å­—ç¬¦ä¸²å¼€å¤´åŒ¹é… re.match(pattern,string,flags=0) patternï¼šåŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ stringï¼šè¦åŒ¹é…çš„å­—ç¬¦ä¸² flagsï¼šæ ‡å¿—ä½ï¼Œç”¨äºæ§åˆ¶æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ–¹å¼ï¼Œå¦‚ï¼šæ˜¯å¦åŒºåˆ†å¤§å°å†™ï¼Œå¤šè¡ŒåŒ¹é…ç­‰ç­‰ è¿”å›ä¸€ä¸ªåŒ¹é…çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯åŒ¹é…çš„å†…å®¹ã€‚ä»èµ·å§‹ä½ç½®å¼€å§‹æ²¡æœ‰åŒ¹é…æˆåŠŸï¼Œå³ä¾¿å…¶ä»–éƒ¨åˆ†åŒ…å«éœ€è¦åŒ¹é…çš„å†…å®¹ï¼Œre.match()ä¹Ÿä¼šè¿”å›Noneã€‚ ä¸€èˆ¬ä¸€ä¸ªå°æ‹¬å·æ‹¬èµ·æ¥å°±æ˜¯ä¸€ä¸ªæ•è·ç»„ã€‚ä½¿ç”¨group()æ¥æå–æ¯ç»„åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ã€‚group()ä¼šè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å°ç»„å­—ç¬¦ä¸²çš„å…ƒç»„ï¼Œä» 0 åˆ° æ‰€å«çš„å°ç»„å·ã€‚ 0ï¼šè¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼ä¸­ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²ã€‚ 1ï¼šè¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼ä¸­ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ª() ä¸­çš„å­—ç¬¦ä¸²ã€‚ 2ï¼šè¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼ä¸­ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²ä¸­çš„ç¬¬äºŒä¸ª() ä¸­çš„å­—ç¬¦ä¸²ã€‚ â€¦ import re msg = 'name:Alice,age:6,score:80' obj = re.match('name:(\\w+),age:(\\d+)', msg) print(obj.group(0)) # name:Alice,age:6 ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸² print(obj.group(1)) # Alice ç¬¬ä¸€åŒ¹é… print(obj.group(2)) # 6 ç¬¬äºŒåŒ¹é… print(obj.groups()) # ('Alice', '6') print(obj.span()) # (0, 16) è¿”å›ç»“æœçš„èŒƒå›´ ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:4:2","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"search ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:4:3","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"findall ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:4:4","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"finditer ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:4:5","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"split ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:4:6","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"sub ç”¨äºæ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„åŒ¹é…é¡¹ def sub(pattern, repl, string, count=0, flags=0): return _compile(pattern, flags).sub(repl, string, count) patternï¼šè¯¥å‚æ•°è¡¨ç¤ºæ­£åˆ™ä¸­çš„æ¨¡å¼å­—ç¬¦ä¸²ï¼› replï¼šè¯¥å‚æ•°è¡¨ç¤ºè¦æ›¿æ¢çš„å­—ç¬¦ä¸²ï¼ˆå³åŒ¹é…åˆ°patternåæ›¿æ¢ä¸ºreplï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸ªå‡½æ•°ï¼› stringï¼šè¯¥å‚æ•°è¡¨ç¤ºè¦è¢«å¤„ç†ï¼ˆæŸ¥æ‰¾æ›¿æ¢ï¼‰çš„åŸå§‹å­—ç¬¦ä¸²ï¼› countï¼šå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºæ˜¯è¦æ›¿æ¢çš„æœ€å¤§æ¬¡æ•°ï¼Œè€Œä¸”å¿…é¡»æ˜¯éè´Ÿæ•´æ•°ï¼Œè¯¥å‚æ•°é»˜è®¤ä¸º0ï¼Œå³æ‰€æœ‰çš„åŒ¹é…éƒ½ä¼šè¢«æ›¿æ¢ï¼› flagsï¼šå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºç¼–è¯‘æ—¶ç”¨çš„åŒ¹é…æ¨¡å¼ï¼ˆå¦‚å¿½ç•¥å¤§å°å†™ã€å¤šè¡Œæ¨¡å¼ç­‰ï¼‰ï¼Œæ•°å­—å½¢å¼ï¼Œé»˜è®¤ä¸º0ã€‚ ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:4:7","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"subn ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:4:8","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"å‚è€ƒé˜…è¯» æ ‡å‡†åº“å¤´æ–‡ä»¶\u003cregex\u003e æœ€å…¨çš„å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼å¤§å…¨â€”â€”åŒ…æ‹¬æ ¡éªŒæ•°å­—ã€å­—ç¬¦ã€ä¸€äº›ç‰¹æ®Šçš„éœ€æ±‚ç­‰ç­‰ å­¦ä¹ æ­£åˆ™è¡¨è¾¾å¼ C++æ­£åˆ™è¡¨è¾¾å¼ åœ¨çº¿æ­£åˆ™è¡¨è¾¾å¼ æ­£åˆ™è¡¨è¾¾å¼å¯è§†åŒ– re.sub()ç”¨æ³•çš„è¯¦ç»†ä»‹ç» èœé¸Ÿæ•™ç¨‹ï¼špythonæ­£åˆ™è¡¨è¾¾å¼ ","date":"2023-07-15","objectID":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/:5:0","tags":["Computer","Linux"],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/posts/computer/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"categories":["Computer"],"content":"Dockeræ•™ç¨‹","date":"2023-07-10","objectID":"/posts/computer/docker%E6%95%99%E7%A8%8B/","tags":["Computer","å·¥å…·"],"title":"Dockeræ•™ç¨‹","uri":"/posts/computer/docker%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"dockeræ•™ç¨‹ ","date":"2023-07-10","objectID":"/posts/computer/docker%E6%95%99%E7%A8%8B/:1:0","tags":["Computer","å·¥å…·"],"title":"Dockeræ•™ç¨‹","uri":"/posts/computer/docker%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"1 dockerå®‰è£… å®˜æ–¹æ•™ç¨‹ ssh abcserver # abcserver tmux # tmuxé‡Œå®‰è£… # 1. æ›´æ–° apt åŒ…ç´¢å¼•å¹¶å®‰è£…åŒ…ä»¥å…è®¸ apt é€šè¿‡ HTTPS ä½¿ç”¨å­˜å‚¨åº“ï¼š sudo apt-get update sudo apt-get install \\ ca-certificates \\ curl \\ gnupg # 2. æ·»åŠ  Docker çš„å®˜æ–¹ GPG å¯†é’¥ï¼š sudo mkdir -m 0755 -p /etc/apt/keyrings curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg # 3. ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è®¾ç½®å­˜å‚¨åº“ï¼š echo \\ \"deb [arch=\"$(dpkg --print-architecture)\" signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\ \"$(. /etc/os-release \u0026\u0026 echo \"$VERSION_CODENAME\")\" stable\" | \\ sudo tee /etc/apt/sources.list.d/docker.list \u003e /dev/null # 4. æ›´æ–°aptè½¯ä»¶åŒ…ç´¢å¼•ï¼š sudo apt-get update # 5. å®‰è£…Dockerå¼•æ“ï¼Œå®¹å™¨å’ŒDockerç»„æˆ sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin # 6. é€šè¿‡è¿è¡ŒHello-World Imageæ¥éªŒè¯Docker Engineå®‰è£…æˆåŠŸï¼š # sudo docker run hello-world docker --version ","date":"2023-07-10","objectID":"/posts/computer/docker%E6%95%99%E7%A8%8B/:2:0","tags":["Computer","å·¥å…·"],"title":"Dockeræ•™ç¨‹","uri":"/posts/computer/docker%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"2 dockeræ•™ç¨‹ å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ°dockerç”¨æˆ·ç»„ ä¸ºäº†é¿å…æ¯æ¬¡ä½¿ç”¨dockerå‘½ä»¤éƒ½éœ€è¦åŠ ä¸Šsudoæƒé™ï¼Œå¯ä»¥å°†å½“å‰ç”¨æˆ·åŠ å…¥å®‰è£…ä¸­è‡ªåŠ¨åˆ›å»ºçš„dockerç”¨æˆ·ç»„(å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£)ï¼šæ‰§è¡Œå®Œæ­¤æ“ä½œåï¼Œéœ€è¦é€€å‡ºæœåŠ¡å™¨ï¼Œå†é‡æ–°ç™»å½•å›æ¥ï¼Œæ‰å¯ä»¥çœå»sudoæƒé™ã€‚ sudo usermod -aG docker $USER é•œåƒï¼ˆimagesï¼‰ docker pull ubuntu:20.04ï¼šæ‹‰å–ä¸€ä¸ªé•œåƒ docker imagesï¼šåˆ—å‡ºæœ¬åœ°æ‰€æœ‰é•œåƒ docker image rm ubuntu:20.04 æˆ– docker rmi ubuntu:20.04ï¼šåˆ é™¤é•œåƒubuntu:20.04 æ²¡æœ‰åç§°ç›´æ¥ç”¨id docker [container] commit CONTAINER IMAGE_NAME:TAGï¼šåˆ›å»ºæŸä¸ªcontainerçš„é•œåƒ []å†…å®¹ä¸ºå¯é€‰ docker save -o ubuntu_20_04.tar ubuntu:20.04ï¼šå°†é•œåƒubuntu:20.04å¯¼å‡ºåˆ°æœ¬åœ°æ–‡ä»¶ubuntu_20_04.tarä¸­ docker load -i ubuntu_20_04.tarï¼šå°†é•œåƒubuntu:20.04ä»æœ¬åœ°æ–‡ä»¶ubuntu_20_04.tarä¸­åŠ è½½å‡ºæ¥ å®¹å™¨(container) docker run -d -t -v /home/å¾…æ˜ å°„è·¯å¾„:/data --privileged --device=/dev/kfd/ --device=/dev/dri/ --network=host --group-add video --name å®¹å™¨åå­— é•œåƒåœ°å€ docker [container] create -it ubuntu:20.04ï¼šåˆ©ç”¨é•œåƒubuntu:20.04åˆ›å»ºä¸€ä¸ªå®¹å™¨ docker ps -aï¼šæŸ¥çœ‹æœ¬åœ°çš„æ‰€æœ‰å®¹å™¨ docker psï¼šæ˜¾ç¤ºæ‰€æœ‰åœ¨è¿è¡Œçš„å®¹å™¨ docker ps -a â€“format â€œtable {{.ID}}\\t{{.Names}}\\t{{.Image}}\\t{{.Status}}\\t{{.Size}}â€ docker [container] start CONTAINERï¼šå¯åŠ¨å®¹å™¨ docker [container] stop CONTAINERï¼šåœæ­¢å®¹å™¨ docker [container] restart CONTAINERï¼šé‡å¯å®¹å™¨ docker [contaienr] run -itd ubuntu:20.04ï¼šåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨ docker [contaienr] run -it ubuntu:20.04ï¼šåˆ›å»ºå¯åŠ¨å¹¶è¿›å…¥ä¸€ä¸ªå®¹å™¨ docker [container] attach CONTAINERï¼šè¿›å…¥å®¹å™¨ å…ˆæŒ‰Ctrl+pï¼Œå†æŒ‰Ctrl+qå¯ä»¥æŒ‚èµ·å®¹å™¨ docker [container] exec CONTAINER COMMANDï¼šåœ¨å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤ docker exec -it CONTAINER /bin/bash æŸ¥çœ‹ç¯å¢ƒ docker [container] rm CONTAINERï¼šåˆ é™¤å®¹å™¨ docker container pruneï¼šåˆ é™¤æ‰€æœ‰å·²åœæ­¢çš„å®¹å™¨ docker export -o xxx.tar CONTAINERï¼šå°†å®¹å™¨CONTAINERå¯¼å‡ºåˆ°æœ¬åœ°æ–‡ä»¶xxx.tarä¸­ docker import xxx.tar image_name:tagï¼šå°†æœ¬åœ°æ–‡ä»¶xxx.tarå¯¼å…¥æˆé•œåƒï¼Œå¹¶å°†é•œåƒå‘½åä¸ºimage_name:tag docker export/importä¸docker save/loadçš„åŒºåˆ«ï¼š export/importä¼šä¸¢å¼ƒå†å²è®°å½•å’Œå…ƒæ•°æ®ä¿¡æ¯ï¼Œä»…ä¿å­˜å®¹å™¨å½“æ—¶çš„å¿«ç…§çŠ¶æ€ save/loadä¼šä¿å­˜å®Œæ•´è®°å½•ï¼Œä½“ç§¯æ›´å¤§ docker top CONTAINERï¼šæŸ¥çœ‹æŸä¸ªå®¹å™¨å†…çš„æ‰€æœ‰è¿›ç¨‹ docker statsï¼šæŸ¥çœ‹æ‰€æœ‰å®¹å™¨çš„ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬CPUã€å†…å­˜ã€å­˜å‚¨ã€ç½‘ç»œç­‰ä¿¡æ¯ docker system df -vï¼šå®¹å™¨ï¼Œé•œåƒå ç”¨ç©ºé—´æ˜¾ç¤º docker inspect CONTAINER : å¯è§†åŒ–æŸ¥çœ‹å®¹å™¨é…ç½®ä¿¡æ¯ #!/bin/bash # åˆ—å‡º /var/lib/docker/overlay2 ä¸‹çš„ç›®å½•ï¼Œç­›é€‰å‡ºä»¥ G ç»“å°¾çš„è¡Œ du -h -d 1 /var/lib/docker/overlay2 | grep -E \"G\\b\" | head -n -1 | awk '{print $1, $2}' | while read size dir; do # è·å–ä¸å½“å‰ç›®å½•åŒ¹é…çš„å®¹å™¨ ID container_id=$(docker ps -qa | xargs -I {} sh -c \"docker inspect --format='{{.GraphDriver.Data.MergedDir}}' {} | grep '$dir' \u003e/dev/null \u0026\u0026 echo {}\") if [ -n \"$container_id\" ]; then # è·å–å®¹å™¨åç§° container_name=$(docker ps -a --filter id=\"$container_id\" --format \"{{.Names}}\") # è¾“å‡ºæ‰€éœ€æ ¼å¼ echo \"$size $dir $container_id $container_name\" fi done docker cp xxx CONTAINER:xxx æˆ– docker cp CONTAINER:xxx xxxï¼šåœ¨æœ¬åœ°å’Œå®¹å™¨é—´å¤åˆ¶æ–‡ä»¶ docker rename CONTAINER1 CONTAINER2ï¼šé‡å‘½åå®¹å™¨ docker update CONTAINER --memory 500MBï¼šä¿®æ”¹å®¹å™¨é™åˆ¶ ","date":"2023-07-10","objectID":"/posts/computer/docker%E6%95%99%E7%A8%8B/:3:0","tags":["Computer","å·¥å…·"],"title":"Dockeræ•™ç¨‹","uri":"/posts/computer/docker%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"gitæ•™ç¨‹","date":"2023-07-10","objectID":"/posts/computer/git%E6%95%99%E7%A8%8B/","tags":["Computer","å·¥å…·"],"title":"gitæ•™ç¨‹","uri":"/posts/computer/git%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"gitæ•™ç¨‹ gitå¯è§†åŒ–çš„å­¦ä¹ ç½‘ç«™ ","date":"2023-07-10","objectID":"/posts/computer/git%E6%95%99%E7%A8%8B/:1:0","tags":["Computer","å·¥å…·"],"title":"gitæ•™ç¨‹","uri":"/posts/computer/git%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"1 gitåŸºæœ¬æ¦‚å¿µ å·¥ä½œåŒºï¼šä»“åº“çš„ç›®å½•ã€‚å·¥ä½œåŒºæ˜¯ç‹¬ç«‹äºå„ä¸ªåˆ†æ”¯çš„ã€‚ æš‚å­˜åŒºï¼šæ•°æ®æš‚æ—¶å­˜æ”¾çš„åŒºåŸŸï¼Œç±»ä¼¼äºå·¥ä½œåŒºå†™å…¥ç‰ˆæœ¬åº“å‰çš„ç¼“å­˜åŒºã€‚æš‚å­˜åŒºæ˜¯ç‹¬ç«‹äºå„ä¸ªåˆ†æ”¯çš„ã€‚ ç‰ˆæœ¬åº“ï¼šå­˜æ”¾æ‰€æœ‰å·²ç»æäº¤åˆ°æœ¬åœ°ä»“åº“çš„ä»£ç ç‰ˆæœ¬ã€‚ ç‰ˆæœ¬ç»“æ„ï¼šæ ‘ç»“æ„ï¼Œæ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªä»£ç ç‰ˆæœ¬ã€‚ ","date":"2023-07-10","objectID":"/posts/computer/git%E6%95%99%E7%A8%8B/:2:0","tags":["Computer","å·¥å…·"],"title":"gitæ•™ç¨‹","uri":"/posts/computer/git%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"2 gitå¸¸ç”¨å‘½ä»¤ ","date":"2023-07-10","objectID":"/posts/computer/git%E6%95%99%E7%A8%8B/:3:0","tags":["Computer","å·¥å…·"],"title":"gitæ•™ç¨‹","uri":"/posts/computer/git%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"å…¨å±€è®¾ç½® git config --global user.name xxxï¼šè®¾ç½®å…¨å±€ç”¨æˆ·åï¼Œä¿¡æ¯è®°å½•åœ¨~/.gitconfigæ–‡ä»¶ä¸­ git config --global user.email xxx@xxx.comï¼šè®¾ç½®å…¨å±€é‚®ç®±åœ°å€ï¼Œä¿¡æ¯è®°å½•åœ¨~/.gitconfigæ–‡ä»¶ä¸­ git initï¼šå°†å½“å‰ç›®å½•é…ç½®æˆgitä»“åº“ï¼Œä¿¡æ¯è®°å½•åœ¨éšè—çš„.gitæ–‡ä»¶å¤¹ä¸­ git config --global core.autocrlf trueï¼šå¿½ç•¥linuxå’Œwindowsæ¢è¡Œå·®åˆ«ã€‚ ","date":"2023-07-10","objectID":"/posts/computer/git%E6%95%99%E7%A8%8B/:3:1","tags":["Computer","å·¥å…·"],"title":"gitæ•™ç¨‹","uri":"/posts/computer/git%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"å¸¸ç”¨å‘½ä»¤ git add XX ï¼šå°†XXæ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº git add .ï¼šå°†æ‰€æœ‰å¾…åŠ å…¥æš‚å­˜åŒºçš„æ–‡ä»¶åŠ å…¥æš‚å­˜åŒº git commit -m \"ç»™è‡ªå·±çœ‹çš„å¤‡æ³¨ä¿¡æ¯\"ï¼šå°†æš‚å­˜åŒºçš„å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯ git commit --amend: ä¿®æ”¹æœ€è¿‘ä¸€æ¬¡æäº¤commit git statusï¼šæŸ¥çœ‹ä»“åº“çŠ¶æ€ git logï¼šæŸ¥çœ‹å½“å‰åˆ†æ”¯çš„æ‰€æœ‰ç‰ˆæœ¬ git push -u (ç¬¬ä¸€æ¬¡éœ€è¦-uä»¥åä¸éœ€è¦) ï¼šå°†å½“å‰åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“ git clone git@git.acwing.com:xxx/XXX.gitï¼šå°†è¿œç¨‹ä»“åº“XXXä¸‹è½½åˆ°å½“å‰ç›®å½•ä¸‹ git branchï¼šæŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯å’Œå½“å‰æ‰€å¤„åˆ†æ”¯ ","date":"2023-07-10","objectID":"/posts/computer/git%E6%95%99%E7%A8%8B/:3:2","tags":["Computer","å·¥å…·"],"title":"gitæ•™ç¨‹","uri":"/posts/computer/git%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"æŸ¥çœ‹å‘½ä»¤ git diff XXï¼šæŸ¥çœ‹XXæ–‡ä»¶ç›¸å¯¹äºæš‚å­˜åŒºä¿®æ”¹äº†å“ªäº›å†…å®¹ git statusï¼šæŸ¥çœ‹ä»“åº“çŠ¶æ€ git logï¼šæŸ¥çœ‹å½“å‰åˆ†æ”¯çš„æ‰€æœ‰ç‰ˆæœ¬ï¼ŒæŒ‰qé€€å‡º å…ˆç”¨å·¥ä½œåŒºä¸­çš„XXä¸ç¼“å­˜åŒºä¸­çš„XXè¿›è¡Œæ¯”è¾ƒï¼Œè‹¥ç¼“å­˜åŒºä¸­æ²¡æœ‰XXï¼Œå†ç”¨å·¥ä½œåŒºä¸­çš„XXä¸å½“å‰headæŒ‡å‘çš„ç‰ˆæœ¬ä¸­çš„XXè¿›è¡Œæ¯”è¾ƒã€‚ git log --pretty=onelineï¼šç”¨ä¸€è¡Œæ¥æ˜¾ç¤º git reflogï¼šæŸ¥çœ‹HEADæŒ‡é’ˆçš„ç§»åŠ¨å†å²ï¼ˆåŒ…æ‹¬è¢«å›æ»šçš„ç‰ˆæœ¬ï¼‰ å›æ»šå…¶ä»–ç‰ˆæœ¬åæƒ³å›åˆ°å›æ»šå‰ç‰ˆæœ¬ä½¿ç”¨reflogæ‰¾åˆ°å¯¹åº”ç¼–å· git branchï¼šæŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯å’Œå½“å‰æ‰€å¤„åˆ†æ”¯ git pull ï¼šå°†è¿œç¨‹ä»“åº“çš„å½“å‰åˆ†æ”¯ä¸æœ¬åœ°ä»“åº“çš„å½“å‰åˆ†æ”¯åˆå¹¶ ","date":"2023-07-10","objectID":"/posts/computer/git%E6%95%99%E7%A8%8B/:3:3","tags":["Computer","å·¥å…·"],"title":"gitæ•™ç¨‹","uri":"/posts/computer/git%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"åˆ é™¤å‘½ä»¤ git rm --cached XXï¼šå°†æ–‡ä»¶ä»ä»“åº“ç´¢å¼•ç›®å½•ä¸­åˆ æ‰ï¼Œä¸å¸Œæœ›ç®¡ç†è¿™ä¸ªæ–‡ä»¶ git restore --staged xxï¼šå°†xxä»æš‚å­˜åŒºé‡Œç§»é™¤ git restore -- xx å°†xxä»æš‚å­˜åŒºæ¢å¤åˆ°å·¥ä½œåŒºï¼Œå…¶ä¸­ â€“ å¯ä»¥ä¸åŠ  git checkout â€” XXæˆ–git restore XXï¼šå°†XXæ–‡ä»¶å°šæœªåŠ å…¥æš‚å­˜åŒºçš„ä¿®æ”¹å…¨éƒ¨æ’¤é”€ ","date":"2023-07-10","objectID":"/posts/computer/git%E6%95%99%E7%A8%8B/:3:4","tags":["Computer","å·¥å…·"],"title":"gitæ•™ç¨‹","uri":"/posts/computer/git%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"ä»£ç å›æ»š git reset --hard HEAD^ æˆ–``git reset â€“hard HEAD~ `ï¼šå°†ä»£ç åº“å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ git reset --hard HEAD^^ï¼šå¾€ä¸Šå›æ»šä¸¤æ¬¡ï¼Œä»¥æ­¤ç±»æ¨ git reset --hard HEAD~100ï¼šå¾€ä¸Šå›æ»š100ä¸ªç‰ˆæœ¬ git reset --hard ç‰ˆæœ¬å·ï¼šå›æ»šåˆ°æŸä¸€ç‰¹å®šç‰ˆæœ¬ ç‰ˆæœ¬å·ä¸ºå“ˆå¸Œå€¼å‰7ä½ git reset --soft HEAD^ï¼šæ’¤é”€commit ","date":"2023-07-10","objectID":"/posts/computer/git%E6%95%99%E7%A8%8B/:3:5","tags":["Computer","å·¥å…·"],"title":"gitæ•™ç¨‹","uri":"/posts/computer/git%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"è¿œç¨‹ä»“åº“ git remote add origin git@git.acwing.com:xxx/XXX.gitï¼šå°†æœ¬åœ°ä»“åº“å…³è”åˆ°è¿œç¨‹ä»“åº“ git remote prune originï¼šæ¸…ç†è¿œç¨‹å·²åˆ é™¤çš„åˆ†æ”¯ git push -u (ç¬¬ä¸€æ¬¡éœ€è¦-uä»¥åä¸éœ€è¦) ï¼šå°†å½“å‰åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“ git push origin branch_nameï¼šå°†æœ¬åœ°çš„æŸä¸ªåˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“ git clone git@git.acwing.com:xxx/XXX.gitï¼šå°†è¿œç¨‹ä»“åº“XXXä¸‹è½½åˆ°å½“å‰ç›®å½•ä¸‹ git push --set-upstream origin branch_nameï¼šè®¾ç½®æœ¬åœ°çš„branch_nameåˆ†æ”¯å¯¹åº”è¿œç¨‹ä»“åº“çš„branch_nameåˆ†æ”¯ git push -d origin branch_nameï¼šåˆ é™¤è¿œç¨‹ä»“åº“çš„branch_nameåˆ†æ”¯ git checkout -t origin/branch_nameï¼š å°†è¿œç¨‹çš„branch_nameåˆ†æ”¯æ‹‰å–åˆ°æœ¬åœ° git pull ï¼šå°†è¿œç¨‹ä»“åº“çš„å½“å‰åˆ†æ”¯ä¸æœ¬åœ°ä»“åº“çš„å½“å‰åˆ†æ”¯åˆå¹¶ git pull origin branch_nameï¼šå°†è¿œç¨‹ä»“åº“çš„branch_nameåˆ†æ”¯ä¸æœ¬åœ°ä»“åº“çš„å½“å‰åˆ†æ”¯åˆå¹¶ git branch --set-upstream-to=origin/branch_name1 branch_name2ï¼šå°†è¿œç¨‹çš„branch_name1åˆ†æ”¯ä¸æœ¬åœ°branch_name2åˆ†æ”¯å¯¹åº” ","date":"2023-07-10","objectID":"/posts/computer/git%E6%95%99%E7%A8%8B/:3:6","tags":["Computer","å·¥å…·"],"title":"gitæ•™ç¨‹","uri":"/posts/computer/git%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"åˆ†æ”¯å‘½ä»¤ git branch branch_nameï¼šåˆ›å»ºæ–°åˆ†æ”¯ git branchï¼šæŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯å’Œå½“å‰æ‰€å¤„åˆ†æ”¯ git checkout -b branch_nameï¼šåˆ›å»ºå¹¶åˆ‡æ¢åˆ°branch_nameè¿™ä¸ªåˆ†æ”¯ git checkout branch_nameï¼šåˆ‡æ¢åˆ°branch_nameè¿™ä¸ªåˆ†æ”¯ git merge branch_nameï¼šå°†åˆ†æ”¯branch_nameåˆå¹¶åˆ°å½“å‰åˆ†æ”¯ä¸Š git branch -d branch_nameï¼šåˆ é™¤æœ¬åœ°ä»“åº“çš„branch_nameåˆ†æ”¯ git push --set-upstream origin branch_nameï¼šè®¾ç½®æœ¬åœ°çš„branch_nameåˆ†æ”¯å¯¹åº”è¿œç¨‹ä»“åº“çš„branch_nameåˆ†æ”¯ git push -d origin branch_nameï¼šåˆ é™¤è¿œç¨‹ä»“åº“çš„branch_nameåˆ†æ”¯ git checkout -t origin/branch_name å°†è¿œç¨‹çš„branch_nameåˆ†æ”¯æ‹‰å–åˆ°æœ¬åœ° git pull ï¼šå°†è¿œç¨‹ä»“åº“çš„å½“å‰åˆ†æ”¯ä¸æœ¬åœ°ä»“åº“çš„å½“å‰åˆ†æ”¯åˆå¹¶ git pull origin branch_nameï¼šå°†è¿œç¨‹ä»“åº“çš„branch_nameåˆ†æ”¯ä¸æœ¬åœ°ä»“åº“çš„å½“å‰åˆ†æ”¯åˆå¹¶ git branch --set-upstream-to=origin/branch_name1 branch_name2ï¼šå°†è¿œç¨‹çš„branch_name1åˆ†æ”¯ä¸æœ¬åœ°çš„branch_name2åˆ†æ”¯å¯¹åº” git rebase -i HEAD^/HEAD~xç”¨æ¥è°ƒæ•´commité¡ºåºï¼Œæˆ–è€…åˆ é™¤ä¸­é—´æŸä¸ª/äº›commit æ‰§è¡Œåä¼šè¿›å…¥ä¸€ä¸ªç±»ä¼¼vimçš„ç•Œé¢, å¯ä»¥ä¿®æ”¹/åˆ é™¤commit, ç„¶åé€šè¿‡:wqä¿å­˜å³å¯ git cherry-pick \u003ccommitHash\u003e æŠŠcommitå¤åˆ¶åˆ°å½“å‰åˆ†æ”¯ä½œä¸ºä¸€ä¸ªæ–°çš„commit a -\u003e b -\u003e c(HEAD)(master) | -\u003e d -\u003e e(branch B) git cherry-pick \u003ccommitHash d\u003e a -\u003e b -\u003e c -\u003e d(HEAD)(master) | -\u003e d -\u003e e(branch B) é‡åˆ°å†²çªæ—¶å¯ä»¥ç”¨â€“continue(å¤„ç†å†²çªåç»§ç»­æ“ä½œ)/â€“abort(æ”¾å¼ƒæ“ä½œ) ","date":"2023-07-10","objectID":"/posts/computer/git%E6%95%99%E7%A8%8B/:3:7","tags":["Computer","å·¥å…·"],"title":"gitæ•™ç¨‹","uri":"/posts/computer/git%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"stashæš‚å­˜ git stashï¼šå°†å·¥ä½œåŒºå’Œæš‚å­˜åŒºä¸­å°šæœªæäº¤çš„ä¿®æ”¹å­˜å…¥æ ˆä¸­ git stash applyï¼šå°†æ ˆé¡¶å­˜å‚¨çš„ä¿®æ”¹æ¢å¤åˆ°å½“å‰åˆ†æ”¯ï¼Œä½†ä¸åˆ é™¤æ ˆé¡¶å…ƒç´  git stash dropï¼šåˆ é™¤æ ˆé¡¶å­˜å‚¨çš„ä¿®æ”¹ git stash popï¼šå°†æ ˆé¡¶å­˜å‚¨çš„ä¿®æ”¹æ¢å¤åˆ°å½“å‰åˆ†æ”¯ï¼ŒåŒæ—¶åˆ é™¤æ ˆé¡¶å…ƒç´  git stash listï¼šæŸ¥çœ‹æ ˆä¸­æ‰€æœ‰å…ƒç´  ","date":"2023-07-10","objectID":"/posts/computer/git%E6%95%99%E7%A8%8B/:3:8","tags":["Computer","å·¥å…·"],"title":"gitæ•™ç¨‹","uri":"/posts/computer/git%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"3 å…¶ä»– äº‘ç«¯å¤åˆ¶åˆ°æœ¬åœ° rm project -rf git clone git@git.acwing.com:abc/project .git è¿æ¥gitlabæ—¶ï¼šfatal: remote origin already exists. git remote remove origin git remote add origin git@git.acwing.com:xxx/XXX.git å°†æœ¬åœ°ä»“åº“å…³è”åˆ°è¿œç¨‹ä»“åº“ ä¸ªäººå¼€å‘ä¸€èˆ¬æµç¨‹ git init git pull git add . git commit git push origin branch_name å¤šäººæäº¤ ç¬¬ä¸€ä¸ªæäº¤åï¼Œç¬¬äºŒä¸ªæäº¤å…ˆpullæ–°ç‰ˆæœ¬ï¼Œåˆå¹¶æœ¬åœ°ä¿®æ”¹å†²çªï¼Œå†pushè‡ªå·±çš„ ","date":"2023-07-10","objectID":"/posts/computer/git%E6%95%99%E7%A8%8B/:4:0","tags":["Computer","å·¥å…·"],"title":"gitæ•™ç¨‹","uri":"/posts/computer/git%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"å¸¸ç”¨ git restore --staged xx # å°†xxä»æš‚å­˜åŒºé‡Œç§»é™¤ git checkout -b new_branch origin/old_branch # æ–°å»ºåˆ†æ”¯ git push origin branch_name # æäº¤åˆ°åˆ†æ”¯ # åˆå¹¶åˆ†æ”¯ git checkout -b branch_name origin/branch_name # è¿œç«¯åˆ†æ”¯ä¸‹è½½ git checkout develop git merge branch_name git status ä¿®æ”¹commitæ³¨é‡Š # ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤çš„æ³¨é‡Š git commit --amend # ä¿®æ”¹é€€å‡ºåï¼ŒæŸ¥çœ‹ä¸€ä¸‹git log git push --force origin branch_name # å¼ºåˆ¶æäº¤ # ä¿®æ”¹ä»¥å‰æäº¤çš„æ³¨é‡Š git rebase -i HEAD~2 # æ•°å­—æŒ‡çš„æ˜¯å€’æ•°ç¬¬næ¬¡æäº¤è®°å½•çš„æ³¨é‡Š # pick æ”¹æˆ edit åé€€å‡º git commit --amend # ä¿®æ”¹ git rebase --continue git push --force origin branch_name # å¼ºåˆ¶æäº¤ æ‹‰å–è¿œç¨‹åˆ†æ”¯ git fetch origin master git merge FETCH_HEAD #FETCH_HEAD æ˜¯ä¸€ä¸ª Git å†…éƒ¨çš„å¼•ç”¨ï¼Œè¡¨ç¤ºæœ€è¿‘ä¸€æ¬¡ git fetch å‘½ä»¤æ‹‰å–çš„å†…å®¹ [Git].gitignoreæ–‡ä»¶çš„é…ç½®ä½¿ç”¨ - çŸ¥ä¹ (zhihu.com) ","date":"2023-07-10","objectID":"/posts/computer/git%E6%95%99%E7%A8%8B/:5:0","tags":["Computer","å·¥å…·"],"title":"gitæ•™ç¨‹","uri":"/posts/computer/git%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"GDBè°ƒè¯•","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"GDBè°ƒè¯• gcc -o main main.c -g æˆ–è€…-Gç”ŸæˆDebugå¯è°ƒè¯•ç‰ˆæœ¬ mkdir build \u0026\u0026 cd build cmake .. -DCMAKE_BUILD_TYPE=Debug make gdb filename æŒ‡å®šè°ƒè¯•çš„æ–‡ä»¶ hipç¨‹åº hipcc demo.cpp -o demo -gï¼Œç„¶åhipgdb hipcc demo.cpp -o demo -gdwarf-4ï¼Œç„¶ågdb æ‰“æ—¥å¿— HIP_LOG_LEVEL=4 HIP_MODULE_MASK=0x7fffffff HIP_ENABLE_LIST=\"hip:hsa:thunk\" ./demo è®¾ç½®äº†HIPçš„æ—¥å¿—çº§åˆ«å’Œæ¨¡å—æ©ç ï¼Œç”Ÿæˆdemo_xxx.nanoæ–‡ä»¶ hiplogdump sort demo_xxx.nano \u003elog.txt gdb [exec file] [core file]ï¼šè°ƒå¼coredumpå†…æ ¸è½¬å‚¨æ–‡ä»¶ï¼Œç›´æ¥è¿›å»btæŸ¥çœ‹è°ƒç”¨æ ˆä¿¡æ¯ã€‚ gdb attach -p \u003cè¿›ç¨‹ID\u003e :è¿›è¡Œè¿›ç¨‹è°ƒè¯•å¹¶é™„åŠ åˆ°æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ r ç¨‹åºè¿è¡Œ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:1:0","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"æ–­ç‚¹æ“ä½œ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:2:0","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"è®¾ç½®æ–­ç‚¹ b demo.cpp:123 # b æ–‡ä»¶:è¡Œå· b function_name # æ‰€æœ‰åŒåå‡½æ•° b class1::function_name # æŒ‡å®šå‡½æ•° b +5 # åç§»é‡æ‰“æ–­ç‚¹ï¼Œå½“å‰73è¡Œï¼Œ +5åˆ°78è¡Œ b demo.cpp:123 if i==3 # b æ–­ç‚¹ æ¡ä»¶ æ»¡è¶³æ¡ä»¶å‘½ä¸­æ–­ç‚¹ b *0x11111 # æŒ‡ä»¤åœ°å€è®¾ç½®æ–­ç‚¹ï¼ˆè°ƒè¯•ç¨‹åºæ²¡æœ‰ç¬¦å·ä¿¡æ¯æ—¶ï¼‰ä½¿ç”¨p function_nameè·å¾—å‡½æ•°åœ°å€0x11111,åœ¨æ–­ç‚¹ç„¶årè¿è¡Œ rb funtion_nam* # æ­£åˆ™è¡¨è¾¾å¼ tb # ä¸´æ—¶æ–­ç‚¹ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:2:1","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"åˆ é™¤æ–­ç‚¹ï¼ˆdeleteæ˜¯å…¨å±€çš„ï¼‰ delete #åˆ é™¤æ‰€æœ‰æ–­ç‚¹ delete 5 # åˆ é™¤5å·æ–­ç‚¹ delete 5 6 # åˆ é™¤5å·å’Œ6å·æ–­ç‚¹ delete 5-8 11-13 #åˆ é™¤æŒ‡å®šèŒƒå›´æ–­ç‚¹ clear function_name # åˆ é™¤æŒ‡å®šå‡½æ•°æ–­ç‚¹ clear demo.cpp:123 # åˆ é™¤æŒ‡å®šè¡Œå·æ–­ç‚¹ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:2:2","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"æŸ¥çœ‹æ–­ç‚¹ info b # å¸¸ç”¨ info: info i ä¸¤ç§æ–¹å¼ breakpointï¼š breakpoint break b ä¸‰ç§æ–¹å¼ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:2:3","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"å¯ç”¨/ç¦ç”¨æ–­ç‚¹ enable/disabele æ–­ç‚¹ç¼–å· #å¯ç”¨/ç¦ç”¨æ–­ç‚¹ï¼Œå¯ä»¥å•ä¸€ç¼–å·å¦‚`1`ï¼Œä¹Ÿå¯ä»¥èŒƒå›´`2-7` enable once æ–­ç‚¹ç¼–å· # å¯ç”¨ä¸€æ¬¡åè‡ªåŠ¨ç¦ç”¨ enable delete æ–­ç‚¹ç¼–å· # å¯ç”¨ååˆ é™¤ enable count æ•°é‡N æ–­ç‚¹ç¼–å· # å¯ç”¨æ–­ç‚¹å¹¶å‘½ä¸­Næ¬¡ ignore æ–­ç‚¹ç¼–å· æ¬¡æ•°N # å¿½ç•¥æ–­ç‚¹å‰Næ¬¡å‘½ä¸­ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:2:4","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"è§‚å¯Ÿç‚¹ watch å˜é‡/è¡¨è¾¾å¼ # è§‚å¯Ÿç‚¹ï¼Œç›‘è§†å˜é‡ rwatch å˜é‡/è¡¨è¾¾å¼ # è¯»å–è§‚å¯Ÿç‚¹ï¼Œå˜é‡æˆ–è¡¨è¾¾å¼è¢«è¯»å–æ—¶ï¼Œç¨‹åºä¸­æ–­ awatch å˜é‡/è¡¨è¾¾å¼ # è¯»å†™è§‚å¯Ÿç‚¹ï¼Œæ— è®ºå˜é‡æˆ–è¡¨è¾¾å¼è¢«è¯»å–è¿˜æ˜¯å†™å…¥æ—¶ï¼Œç¨‹åºéƒ½ä¸­æ–­ info watchpoints # æŸ¥çœ‹æ‰€æœ‰è§‚å¯Ÿç‚¹ delete/disable/enable è§‚å¯Ÿç‚¹ç¼–å· # åˆ é™¤/ç¦ç”¨/å¯ç”¨è§‚å¯Ÿç‚¹ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:2:5","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"æ•è·ç‚¹ C++å¼‚å¸¸ åŠ¨æ€åº“è½½å…¥ catch äº‹ä»¶ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:2:6","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"æ‰§è¡Œ s æ­¥è¿› finishè·³å‡º n ï¼šè·³è¿‡ (next) c ï¼šç»§ç»­ï¼ˆcontinueï¼‰ jump Nï¼šè·³åˆ°ç¬¬Nè¡Œ ï¼Œæˆ–è€…å‡½æ•° where ï¼šæ˜¾ç¤ºå½“å‰æ‰§è¡Œçš„å…·ä½“å‡½æ•°å’Œä»£ç è¡Œ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:3:0","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"æŸ¥çœ‹æ˜¾ç¤º info args ï¼šè¿›å…¥ä¸€ä¸ªå‡½æ•°æŸ¥çœ‹å‚æ•°ä¿¡æ¯ info locals ï¼šæŸ¥çœ‹å±€éƒ¨å˜é‡å€¼ info functions ï¼šæŸ¥çœ‹æœ‰å“ªäº›å‡½æ•° ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:4:0","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"çª—å£æ˜¾ç¤º gdb -tui filename # æ˜¾ç¤ºä»£ç çª—å£ tui enable # æ˜¾ç¤º crtl + x å†æŒ‰aå…³é—­æ‰“å¼€çª—å£ layout src # æ˜¾ç¤ºæºç  layout asm # æ˜¾ç¤ºæ±‡ç¼– layout split # æ˜¾ç¤ºæºä»£ç å’Œæ±‡ç¼– layout regs # æ˜¾ç¤ºå¯„å­˜å™¨ refresh # åˆ·æ–°å±å¹• crtl + l update # æ›´æ–°æºä»£ç  ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:4:1","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"æŸ¥çœ‹æºä»£ç  l # æŸ¥çœ‹ä¸Šä¸‹æ–‡(list) é»˜è®¤å½“å‰ä»£ç è¡Œçš„å‰5è¡Œå’Œå5è¡Œ set listsize 20 # è®¾ç½®æ˜¾ç¤ºè¡Œæ•° 20è¡Œ list demo.cpp:123 # æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶æŒ‡å®šè¡Œä»£ç  list function_name # æŸ¥çœ‹æŒ‡å®šå‡½æ•°çš„æºä»£ç  # æœç´¢æºä»£ç  serach æ­£åˆ™è¡¨è¾¾å¼ forward-search æ­£åˆ™è¡¨è¾¾å¼ # æ­£å‘æœç´¢ reverse-search æ­£åˆ™è¡¨è¾¾å¼ # åå‘æœç´¢ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:4:2","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"æŸ¥çœ‹/ä¿®æ”¹å˜é‡çš„å€¼ print å˜é‡ # æ‰“å°å˜é‡ p å˜é‡ p å˜é‡å=å€¼ #ä¿®æ”¹æŸ¥çœ‹çš„å˜é‡å€¼ # ä¸€äº›å†…åµŒå‡½æ•° p sizeof(a) p strcmp(\"123\". \"12\") p strlen(\"string\") # æŸ¥çœ‹ç»“æ„ä½“/ ç±»çš„å€¼ set print null-stop # è®¾ç½®å­—ç¬¦ä¸²æ˜¾ç¤ºè§„åˆ™ï¼Œé‡åˆ°ç»“ç»“æŸç¬¦æ—¶åœæ­¢æ˜¾ç¤º set print pretty # ç¾åŒ–ï¼Œæ ¼å¼åŒ–ç»“æ„ä½“ p new_node-\u003eName # æŸ¥çœ‹ç»“æ„ä½“/ç±»å•ä¸ªæˆå‘˜ p *new_node # æŸ¥çœ‹æ•´ä¸ªç»“æ„ä½“/ç±» # æŸ¥çœ‹æ•°ç»„ set print array # æ§åˆ¶æ•°ç»„æ˜¾ç¤º set print array-indexes # æ˜¾ç¤ºæ•°ç»„ç´¢å¼• # æŸ¥çœ‹è”åˆä½“ set print union # è‡ªåŠ¨æ˜¾ç¤ºå˜é‡å€¼,å’Œæ–­ç‚¹ç±»ä¼¼ display å˜é‡å display {var1, var2, var3} # å¤šå˜é‡åæ—¶ï¼Œé•¿åº¦è¦ç›¸åŒ undisplay å˜é‡ç¼–å· # å–æ¶ˆè‡ªåŠ¨æ˜¾ç¤ºï¼Œinfo displayå¯æŸ¥çœ‹ç¼–å· enabele/disable display å˜é‡ç¼–å· # å¯ç”¨/ç¦ç”¨è‡ªåŠ¨æ˜¾ç¤º ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:4:3","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"æŸ¥çœ‹å˜é‡ç±»å‹ # ptype /é€‰é¡¹ å˜é‡æˆ–ç±»å‹ æŸ¥çœ‹å„ä¸ªå˜é‡ç±»å‹ ptype node_head # æŸ¥çœ‹å˜é‡ç±»å‹ï¼Œæ˜¾ç¤ºæˆå‘˜åç§°å’Œç±»å‹ # é€‰é¡¹ /r # åŸå§‹æ•°æ®æ˜¾ç¤ºï¼Œä¸ä¼šä»£æ›¿ä¸€äº›typedefå®šä¹‰ /m # æŸ¥çœ‹ç±»æ—¶ï¼Œåªæ˜¾ç¤ºç±»çš„æˆå‘˜å˜é‡ /M # æ˜¾ç¤ºç±»çš„æ–¹æ³•ï¼ˆé»˜è®¤ï¼‰ /t # ä¸æ‰“å°ç±»ä¸­çš„typedefæ•°æ® /o # æ‰“å°ç»“æ„ä½“å­—æ®µåç§»é‡å’Œå¤§å°ä¿¡æ¯ whatis å˜é‡æˆ–è¡¨è¾¾å¼ # æŸ¥çœ‹å˜é‡ç±»å‹ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:4:4","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"æŸ¥çœ‹å†…å­˜ # x /é€‰é¡¹ åœ°å€ æŸ¥çœ‹å„ä¸ªå˜é‡å†…å­˜ä¿¡æ¯ const char* str = \"test\"; x str # é»˜è®¤16è¿›åˆ¶æ˜¾ç¤ºï¼Œå†…å­˜å­˜å‚¨å†…å®¹å’Œâ€œtest\"ç›¸åï¼ˆå°ç«¯å­˜å‚¨ï¼‰ 0x74736574 x /s str # ç›´æ¥æ˜¾ç¤ºå†…å®¹ â€test\" x /d str # åè¿›åˆ¶æ˜¾ç¤º x /4d str # åè¿›åˆ¶æ˜¾ç¤ºï¼Œæ˜¾ç¤ºå®½åº¦ä¸º4 # å˜é‡éæŒ‡é’ˆç±»å‹ï¼Œå¦‚intï¼Œ å…ˆp \u0026value_name, åœ¨ä½¿ç”¨xæŸ¥çœ‹ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:4:5","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"æŸ¥çœ‹å¯„å­˜å™¨ æŒ‡é’ˆå¯„å­˜å™¨$rip (32ä½EIPï¼Œ64RIP)æŒ‡å‘å½“å‰æ‰§è¡Œçš„ä»£ç ä½ç½® æ ˆæŒ‡é’ˆå¯„å­˜å™¨$rspæŒ‡å‘å½“å‰æ ˆé¡¶ é€šç”¨å¯„å­˜å™¨å­˜å‚¨ä¸€äº›å˜é‡å€¼ï¼Œå‡½æ•°å‚æ•°åŠè¿”å›å€¼ç­‰ info registers # ç®€å†™ i r info registers rax # æ˜¾ç¤ºç‰¹å®šå¯„å­˜å™¨å€¼ info all-registers # æ˜¾ç¤ºæ‰€æœ‰å¯„å­˜å™¨å€¼ function_test(intc a, const char* str) è°ƒç”¨function_test(10, \"test\") ç¬¬ä¸€ä¸ªå‚æ•°å­˜å‚¨åœ¨å¯„å­˜å™¨rdi,ç¬¬äºŒä¸ªå‚æ•°å­˜å‚¨åœ¨rsiä¸­,æ˜¯å­—ç¬¦ä¸²æŒ‡é’ˆ i r rdi i r rsi x /s $rsi # æŸ¥çœ‹å¯„å­˜å™¨å€¼ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:4:6","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"æŸ¥çœ‹æ±‡ç¼– starti #å¼€å§‹æ‰§è¡Œç¨‹åºå¹¶åœåœ¨ç¬¬ä¸€ä¸ªæ±‡ç¼–æŒ‡ä»¤å¤„ layout asm #æ˜¾ç¤ºæ±‡ç¼–çª—å£ si #å•æ­¥ set disassembly-flavor intel # s disassemble /mr ./demo #æŸ¥çœ‹åæ±‡ç¼–ä»£ç  ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:4:7","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"æŸ¥çœ‹è°ƒç”¨æ ˆ bt # æŸ¥çœ‹å›æº¯ backtrace bt 2 # åªæ˜¾ç¤ºä¸¤ä¸ªæ ˆå¸§ f 2 # frameåˆ‡æ¢æ ˆå¸§ï¼ŒæŸ¥çœ‹è°ƒè¯•ä½ç½® up/down 2 # åŸºäºå½“å‰å¸§æ¥åˆ‡æ¢ f å¸§åœ°å€ # é€šè¿‡å¸§åœ°å€åˆ‡æ¢ info frame # æŸ¥çœ‹å¸§ä¿¡æ¯ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:4:8","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"å¤šçº¿ç¨‹è°ƒè¯• info threads # æŸ¥çœ‹çº¿ç¨‹, *å·è¡¨ç¤ºå½“å‰çº¿ç¨‹ thread N # åˆ‡æ¢çº¿ç¨‹ b M thread N # ä¸ºNå·çº¿ç¨‹Mè¡Œè®¾ç½®æ–­ç‚¹ thread apply N command # ä¸ºNå·çº¿ç¨‹æ‰§è¡Œcommandå‘½ä»¤ thread apply all bt # æŸ¥çœ‹æ‰€ç”¨çº¿ç¨‹å †æ ˆä¿¡æ¯ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:5:0","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"å¤šè¿›ç¨‹è°ƒè¯• info inferiors # æŸ¥çœ‹è¿›ç¨‹ inferior N # åˆ‡æ¢ç›¸åº”è¿›ç¨‹ set follow-fork-mode child # è®¾ç½®è°ƒè¯•å­è¿›ç¨‹ set detach-on-fork off # å¯¹æ‰€æœ‰çš„è¿›ç¨‹è¿›è¡Œè°ƒè¯• ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:6:0","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"å†…å­˜æ£€æŸ¥ # éœ€è¦å®‰è£… libasan å³AddressSanitizer g++ -fsanitize=address -g -o demo ./demo.cpp ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:7:0","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"coredumpè°ƒè¯• # åœ¨è°ƒè¯•ç•Œé¢ç”Ÿæˆcoredumpæ–‡ä»¶ ps aux | grep ./demo # æŸ¥çœ‹è¿›ç¨‹å· gdb attach -p \u003cè¿›ç¨‹ID\u003e # é™„åŠ åˆ°è¿›ç¨‹ gcore ****.core detach q # é…ç½®å¹¶ç”Ÿæˆcoredumpæ–‡ä»¶ /etc/security/limits.confæ·»åŠ  soft core unlimited echo -e \"/root/corefile/core-%e-%s-%p-%t\" \u003e /proc/sys/kernel/core_pattern # %eè¿›ç¨‹åç§°ã€‚%så´©æºƒä¿¡å·ï¼Œ%pè¿›ç¨‹id,%tæ—¶é—´æˆ³ # è°ƒè¯• gdb [exec file] [core file] # è°ƒå¼coredumpå†…æ ¸è½¬å‚¨æ–‡ä»¶ï¼Œç›´æ¥è¿›å»`bt`æŸ¥çœ‹è°ƒç”¨æ ˆä¿¡æ¯ã€‚ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:8:0","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"å‘è¡Œç‰ˆè°ƒè¯• # ä»è°ƒè¯•ç‰ˆä¸­æå–è°ƒè¯•ç¬¦å· objcopy --only-keep-debug demo demo.symbol # ç”Ÿæˆè°ƒè¯•ç¬¦å·è¡¨ gdb --symbol=demo.symbol -exec=demo_release # åŠ ä¸Šè°ƒè¯•ç¬¦å·è°ƒè¯•å‘è¡Œç‰ˆ gdb --symbol=demo -exec=demo_release # ç›´æ¥ä½¿ç”¨è°ƒè¯•ç‰ˆä½œä¸ºç¬¦å·æº ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:9:0","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"å…¶ä»– // int 3æ˜¯ç”¨äºè§¦å‘è°ƒè¯•ä¸­æ–­çš„æŒ‡ä»¤ asm{ int 3; } ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:10:0","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"å‚è€ƒé˜…è¯» C/C++ä»£ç è°ƒè¯•çš„è‰ºæœ¯ï¼ˆç¬¬2ç‰ˆï¼‰ (è±†ç“£) (douban.com) GDB é«˜çº§è°ƒè¯•-å¤šçº¿ç¨‹ã€åå°è°ƒè¯•ã€å¤šè¿›ç¨‹ã€åå‘è°ƒè¯• GDBè°ƒè¯•-ä»å…¥é—¨å®è·µåˆ°åŸç† 100ä¸ªgdbå°æŠ€å·§ GDBå®˜æ–¹æ‰‹å†Œ ","date":"2023-06-18","objectID":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/:11:0","tags":["Computer","Linux","C++"],"title":"GDBè°ƒè¯•","uri":"/posts/computer/gdb%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"Shellç¼–ç¨‹","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"Shellç¼–ç¨‹ ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:1:0","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"æ¦‚è®º shellæ˜¯é€šè¿‡å‘½ä»¤è¡Œä¸æ“ä½œç³»ç»Ÿæ²Ÿé€šçš„è¯­è¨€ã€‚ Linuxä¸­å¸¸è§çš„shellè„šæœ¬æœ‰å¾ˆå¤šç§ï¼Œå¸¸è§çš„æœ‰ï¼š Bourne Shell (/usr/bin/shæˆ–/bin/sh) Bourne Again Shell (/bin/bash) C Shell (/usr/bin/csh) K Shell (/usr/bin/ksh) zsh â€¦ Linuxç³»ç»Ÿä¸­ä¸€èˆ¬é»˜è®¤ä½¿ç”¨bashï¼Œæ–‡ä»¶å¼€å¤´éœ€è¦å†™#! /bin/bashï¼ŒæŒ‡æ˜bashä¸ºè„šæœ¬è§£é‡Šå™¨ã€‚ #! /bin/bash echo Hello World # echoç±»ä¼¼äºC++çš„å­—ç¬¦ä¸² è¿è¡Œæ–¹å¼ # ä½œä¸ºå¯æ‰§è¡Œæ–‡ä»¶è¿è¡Œ chmod +x test.sh # å¢åŠ æ‰§è¡Œæƒé™ å¯æ‰§è¡Œæ–‡ä»¶ä¸ºç»¿è‰² ./test.sh # å½“å‰è·¯å¾„ä¸‹æ‰§è¡Œ /home/acs/test.sh # ç»å¯¹è·¯å¾„ä¸‹æ‰§è¡Œ ~/test.sh # å®¶ç›®å½•è·¯å¾„ä¸‹æ‰§è¡Œ # è§£é‡Šå™¨æ‰§è¡Œ bash test.sh nohup bash test.sh # åå°è¿è¡Œ ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:2:0","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"æ³¨é‡Š å•è¡Œæ³¨é‡Šï¼š# # è¿™æ˜¯ä¸€è¡Œæ³¨é‡Š echo Hello World å¤šè¡Œæ³¨é‡Šï¼š :\u003c\u003cstring string :\u003c\u003cEOF æ³¨é‡Š1 æ³¨é‡Š2 æ³¨é‡Š3 EOF # EOFå¯ä»¥æ›¿æ¢æˆå…¶å®ƒä»»æ„å­—ç¬¦ä¸² :\u003c\u003cabc æ³¨é‡Š4 æ³¨é‡Š5 æ³¨é‡Š6 abc ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:3:0","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"å˜é‡ ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:4:0","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"å®šä¹‰å˜é‡ ä¸éœ€è¦åŠ $ç¬¦å·ï¼Œç­‰å·ä¸¤è¾¹ä¸èƒ½æœ‰ç©ºæ ¼ name1='abc' # å•å¼•å·å®šä¹‰å­—ç¬¦ä¸² name2=\"abc\" # åŒå¼•å·å®šä¹‰å­—ç¬¦ä¸² name3=abc # ä¹Ÿå¯ä»¥ä¸åŠ å¼•å·ï¼ŒåŒæ ·è¡¨ç¤ºå­—ç¬¦ä¸² ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:4:1","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"ä½¿ç”¨å˜é‡ éœ€è¦åŠ ä¸Š$ç¬¦å·ï¼Œæˆ–è€…${}ç¬¦å·ã€‚èŠ±æ‹¬å·æ˜¯å¯é€‰çš„ï¼Œä¸»è¦ä¸ºäº†å¸®åŠ©è§£é‡Šå™¨è¯†åˆ«å˜é‡è¾¹ç•Œã€‚ name=abc echo $name # è¾“å‡ºabc echo ${name} # è¾“å‡ºabc echo ${name}acwing # è¾“å‡ºabcacwing,ç­‰ä»·äºecho \"${name}acwing\" ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:4:2","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"åªè¯»å˜é‡ ä½¿ç”¨readonlyæˆ–è€…declareå°†å˜é‡å˜ä¸ºåªè¯» name=abc readonly name declare -r name # ä¸¤ç§å†™æ³•å‡å¯ name=abc # ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ­¤æ—¶nameåªè¯» type+å‘½ä»¤å¯ä»¥è§£é‡Šè¯¥å‘½ä»¤çš„æ¥æºï¼ˆå†…åµŒå‘½ä»¤ã€‚ç¬¬ä¸‰æ–¹å‘½ä»¤ç­‰ï¼‰ type readonly #readonly is a shell builtin(shellå†…éƒ¨å‘½ä»¤) ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:4:3","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"åˆ é™¤å˜é‡ unsetåˆ é™¤å˜é‡ name=abc unset name echo $name # è¾“å‡ºç©ºè¡Œ ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:4:4","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"å˜é‡ç±»å‹ è‡ªå®šä¹‰å˜é‡ï¼ˆå±€éƒ¨å˜é‡ï¼‰ï¼Œå­è¿›ç¨‹ä¸èƒ½è®¿é—®çš„å˜é‡ ç¯å¢ƒå˜é‡ï¼ˆå…¨å±€å˜é‡ï¼‰ï¼Œå­è¿›ç¨‹å¯ä»¥è®¿é—®çš„å˜é‡ è‡ªå®šä¹‰å˜é‡æ”¹æˆç¯å¢ƒå˜é‡ï¼š name=abc # å®šä¹‰å˜é‡ export name # ç¬¬ä¸€ç§æ–¹æ³• declare -x name # ç¬¬äºŒç§æ–¹æ³• ç¯å¢ƒå˜é‡æ”¹ä¸ºè‡ªå®šä¹‰å˜é‡ï¼š export name=abc # å®šä¹‰ç¯å¢ƒå˜é‡ declare +x name # æ”¹ä¸ºè‡ªå®šä¹‰å˜é‡ ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:4:5","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"å­—ç¬¦ä¸² å•å¼•å·ä¸åŒå¼•å·çš„åŒºåˆ«ï¼š å•å¼•å·ä¸­çš„å†…å®¹ä¼šåŸæ ·è¾“å‡ºï¼Œä¸ä¼šæ‰§è¡Œã€ä¸ä¼šå–å˜é‡ï¼› åŒå¼•å·ä¸­çš„å†…å®¹å¯ä»¥æ‰§è¡Œã€å¯ä»¥å–å˜é‡ï¼› name=abc # ä¸ç”¨å¼•å· echo 'hello, $name \\\"hh\\\"' # å•å¼•å·å­—ç¬¦ä¸²ï¼Œè¾“å‡º hello, $name \\\"hh\\\" echo \"hello, $name \\\"hh\\\"\" # åŒå¼•å·å­—ç¬¦ä¸²ï¼Œè¾“å‡º hello, abc \"hh\" echo ${#name} # è·å–å­—ç¬¦ä¸²é•¿åº¦,è¾“å‡º3 echo ${name:0:5} # æå–å­ä¸²,æå–ä»0å¼€å§‹çš„5ä¸ªå­—ç¬¦ ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:4:6","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"é»˜è®¤å˜é‡ æ–‡ä»¶å‚æ•°å˜é‡ åœ¨æ‰§è¡Œshellè„šæœ¬æ—¶ï¼Œå¯ä»¥å‘è„šæœ¬ä¼ é€’å‚æ•°ã€‚$1æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ$2æ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨ã€‚ç‰¹æ®Šçš„,$0æ˜¯æ–‡ä»¶åï¼ˆåŒ…å«è·¯å¾„ï¼‰ ä¼ é€’å‚æ•°ï¼Œè¶…è¿‡ç”¨å¤§æ‹¬å·ï¼Œå¦‚${10} å…¶å®ƒå‚æ•°ç›¸å…³å˜é‡ å‚æ•° è¯´æ˜ $# ä»£è¡¨æ–‡ä»¶ä¼ å…¥çš„å‚æ•°ä¸ªæ•°ï¼Œå¦‚ä¸Šä¾‹å€¼ä¸º4 $* ç”±æ‰€æœ‰å‚æ•°æ„æˆçš„ç”¨ç©ºæ ¼éš”å¼€çš„å­—ç¬¦ä¸²ï¼Œå¦‚ä¸Šä¾‹å€¼ä¸º\"$1 $2 $3 $4\" $@ æ¯ä¸ªå‚æ•°åˆ†åˆ«ç”¨åŒå¼•å·æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²ï¼Œå¦‚ä¸Šä¾‹ä¸­å€¼ä¸º\"$1\" â€œ$2â€ â€œ$3â€ â€œ$4â€ $$ è„šæœ¬å½“å‰è¿è¡Œçš„è¿›ç¨‹ID $? ä¸Šä¸€æ¡å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ï¼ˆæ³¨æ„ä¸æ˜¯stdoutï¼Œè€Œæ˜¯exit codeï¼‰ã€‚0è¡¨ç¤ºæ­£å¸¸é€€å‡ºï¼Œå…¶ä»–å€¼è¡¨ç¤ºé”™è¯¯ $(command) è¿”å›commandè¿™æ¡å‘½ä»¤çš„stdoutï¼ˆå¯åµŒå¥—ï¼‰ è·å–é€€å‡ºçŠ¶æ€ command è¿”å›commandè¿™æ¡å‘½ä»¤çš„stdoutï¼ˆä¸å¯åµŒå¥—ï¼‰è·å–è¾“å‡º #! /bin/bash echo \"æ–‡ä»¶åï¼š\"$0 echo \"ç¬¬ä¸€ä¸ªå‚æ•°ï¼š\"$1 echo \"ç¬¬äºŒä¸ªå‚æ•°ï¼š\"$2 echo \"ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š\"$3 echo \"ç¬¬å››ä¸ªå‚æ•°ï¼š\"$4 echo $# echo $* echo $@ echo $$ echo $? echo $(ls) echo `ls` # æ‰§è¡Œ ./test.sh 1 2 3 4 æ–‡ä»¶åï¼š./test.sh ç¬¬ä¸€ä¸ªå‚æ•°ï¼š1 ç¬¬äºŒä¸ªå‚æ•°ï¼š2 ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š3 ç¬¬å››ä¸ªå‚æ•°ï¼š4 4 1 2 3 4 1 2 3 4 1313 0 test.sh test.sh ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:4:7","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"æ•°ç»„ æ•°ç»„ä¸­å¯ä»¥å­˜æ”¾å¤šä¸ªä¸åŒç±»å‹çš„å€¼ï¼Œåªæ”¯æŒä¸€ç»´æ•°ç»„ï¼Œåˆå§‹åŒ–æ—¶ä¸éœ€è¦æŒ‡æ˜æ•°ç»„å¤§å°ã€‚ æ•°ç»„ä¸‹æ ‡ä»0å¼€å§‹ã€‚ # å®šä¹‰æ•°ç»„ç”¨å°æ‹¬å·è¡¨ç¤ºï¼Œå…ƒç´ ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ã€‚ array=(1 abc \"def\" abc) array[0]=1 array[1]=abc array[2]=\"def\" array[3]=abc # è¯»å–æ•°ç»„ä¸­æŸä¸ªå…ƒç´ çš„å€¼ ${array[index]} array=(1 abc \"def\" yxc) echo ${array[0]} echo ${array[1]} echo ${array[2]} echo ${array[3]} # è¯»å–æ•´ä¸ªæ•°ç»„ ${array[@]} # ç¬¬ä¸€ç§å†™æ³• ${array[*]} # ç¬¬äºŒç§å†™æ³• array=(1 abc \"def\" abc) echo ${array[@]} # ç¬¬ä¸€ç§å†™æ³• echo ${array[*]} # ç¬¬äºŒç§å†™æ³• # æ•°ç»„é•¿åº¦,ç±»ä¼¼äºå­—ç¬¦ä¸² ${#array[@]} # ç¬¬ä¸€ç§å†™æ³• ${#array[*]} # ç¬¬äºŒç§å†™æ³• array=(1 abc \"def\" abc) echo ${#array[@]} # ç¬¬ä¸€ç§å†™æ³• echo ${#array[*]} # ç¬¬äºŒç§å†™æ³• ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:4:8","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"expr å‘½ä»¤ expr å‘½ä»¤ç”¨äºæ±‚è¡¨è¾¾å¼çš„å€¼ï¼Œæ ¼å¼ä¸ºï¼šexpr è¡¨è¾¾å¼ ç”¨ç©ºæ ¼éš”å¼€æ¯ä¸€é¡¹ ç”¨åæ–œæ æ”¾åœ¨shellç‰¹å®šçš„å­—ç¬¦å‰é¢ï¼ˆå‘ç°è¡¨è¾¾å¼è¿è¡Œé”™è¯¯æ—¶ï¼Œå¯ä»¥è¯•è¯•è½¬ä¹‰ï¼‰ å¯¹åŒ…å«ç©ºæ ¼å’Œå…¶ä»–ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²è¦ç”¨å¼•å·æ‹¬èµ·æ¥ exprä¼šåœ¨stdoutä¸­è¾“å‡ºç»“æœã€‚å¦‚æœä¸ºé€»è¾‘å…³ç³»è¡¨è¾¾å¼ï¼Œåˆ™ç»“æœä¸ºçœŸæ—¶ï¼Œstdoutè¾“å‡º1ï¼Œå¦åˆ™è¾“å‡º0ã€‚ exprçš„exit codeï¼šå¦‚æœä¸ºé€»è¾‘å…³ç³»è¡¨è¾¾å¼ï¼Œåˆ™ç»“æœä¸ºçœŸæ—¶ï¼Œexit codeä¸º0ï¼Œå¦åˆ™ä¸º1ã€‚ ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:5:0","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"å­—ç¬¦ä¸²è¡¨è¾¾å¼ length stringï¼šè¿”å›stringçš„é•¿åº¦ index string charset charsetä¸­ä»»æ„å•ä¸ªå­—ç¬¦åœ¨string ä¸­æœ€å‰é¢çš„å­—ç¬¦ä½ç½®ï¼Œä¸‹æ ‡ä»1å¼€å§‹ã€‚å¦‚æœåœ¨string ä¸­å®Œå…¨ä¸å­˜åœ¨charsetä¸­çš„å­—ç¬¦ï¼Œåˆ™è¿”å›0ã€‚ substr string postion length è¿”å›STRINGå­—ç¬¦ä¸²ä¸­ä»postion å¼€å§‹ï¼Œé•¿åº¦æœ€å¤§ä¸ºlengthçš„å­ä¸²ã€‚å¦‚æœpostion æˆ–lengthä¸ºè´Ÿæ•°ï¼Œ0æˆ–éæ•°å€¼ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚ str=\"Hello World!\" echo `expr length $str` #ç­‰ä»·äºecho `expr length Hello World!`ï¼›ä¸­é—´æœ‰ç©ºæ ¼ï¼Œlengthåªèˆ¹ä¸€ä¸ªå‚æ•°ï¼Œä¸€èˆ¬åŠ åŒå¼•å·å­—ç¬¦ä¸²ä¼ å…¥ syntax error:unexpecter argument 'World!'. echo `expr length \"$str\"` # ``ä¸æ˜¯å•å¼•å·ï¼Œè¡¨ç¤ºæ‰§è¡Œè¯¥å‘½ä»¤ï¼Œè¾“å‡º12 echo `expr index \"$str\" aWd` # è¾“å‡º7ï¼Œä¸‹æ ‡ä»1å¼€å§‹ echo `expr substr \"$str\" 2 3` # è¾“å‡º ell ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:5:1","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"æ•´æ•°è¡¨è¾¾å¼ expræ”¯æŒæ™®é€šçš„ç®—æœ¯æ“ä½œï¼Œç®—æœ¯è¡¨è¾¾å¼ä¼˜å…ˆçº§ä½äºå­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼Œé«˜äºé€»è¾‘å…³ç³»è¡¨è¾¾å¼ã€‚ +-ï¼šåŠ å‡è¿ç®—ã€‚ä¸¤ç«¯å‚æ•°ä¼šè½¬æ¢ä¸ºæ•´æ•°ï¼Œå¦‚æœè½¬æ¢å¤±è´¥åˆ™æŠ¥é”™ã€‚ / %ï¼šä¹˜ï¼Œé™¤ï¼Œå–æ¨¡è¿ç®—ã€‚ä¸¤ç«¯å‚æ•°ä¼šè½¬æ¢ä¸ºæ•´æ•°ï¼Œå¦‚æœè½¬æ¢å¤±è´¥åˆ™æŠ¥é”™ã€‚ () å¯ä»¥æ”¹å˜ä¼˜å…ˆçº§ï¼Œä½†éœ€è¦ç”¨åæ–œæ è½¬ä¹‰ a=3 b=4 echo `expr $a + $b` # è¾“å‡º7 echo `expr $a - $b` # è¾“å‡º-1 echo `expr $a \\* $b` # è¾“å‡º12ï¼Œ*éœ€è¦è½¬ä¹‰ echo `expr $a / $b` # è¾“å‡º0ï¼Œæ•´é™¤ echo `expr $a % $b` # è¾“å‡º3 echo `expr \\( $a + 1 \\) \\* \\( $b + 1 \\)` # è¾“å‡º20ï¼Œå€¼ä¸º(a + 1) * (b + 1) ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:5:2","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"é€»è¾‘å…³ç³»è¡¨è¾¾å¼ | å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°éç©ºä¸”é0ï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ï¼Œå¦åˆ™è¿”å›ç¬¬äºŒä¸ªå‚æ•°çš„å€¼ï¼Œä½†è¦æ±‚ç¬¬äºŒä¸ªå‚æ•°çš„å€¼ä¹Ÿæ˜¯éç©ºæˆ–é0ï¼Œå¦åˆ™è¿”å›0ã€‚å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éç©ºæˆ–é0æ—¶ï¼Œä¸ä¼šè®¡ç®—ç¬¬äºŒä¸ªå‚æ•°ã€‚ \u0026 å¦‚æœä¸¤ä¸ªå‚æ•°éƒ½éç©ºä¸”é0ï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¦åˆ™è¿”å›0ã€‚å¦‚æœç¬¬ä¸€ä¸ªå‚ä¸º0æˆ–ä¸ºç©ºï¼Œåˆ™ä¸ä¼šè®¡ç®—ç¬¬äºŒä¸ªå‚æ•°ã€‚ \u003c \u003c= = == != \u003e= \u003e æ¯”è¾ƒä¸¤ç«¯çš„å‚æ•°ï¼Œå¦‚æœä¸ºtrueï¼Œåˆ™è¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚â€==â€æ˜¯â€=â€çš„åŒä¹‰è¯ã€‚â€exprâ€é¦–å…ˆå°è¯•å°†ä¸¤ç«¯å‚æ•°è½¬æ¢ä¸ºæ•´æ•°ï¼Œå¹¶åšç®—æœ¯æ¯”è¾ƒï¼Œå¦‚æœè½¬æ¢å¤±è´¥ï¼Œåˆ™æŒ‰å­—ç¬¦é›†æ’åºè§„åˆ™åšå­—ç¬¦æ¯”è¾ƒã€‚ () å¯ä»¥æ”¹å˜ä¼˜å…ˆçº§ï¼Œä½†éœ€è¦ç”¨åæ–œæ è½¬ä¹‰ \u0026\u0026 è¡¨ç¤ºä¸ï¼Œ|| è¡¨ç¤ºæˆ– äºŒè€…å…·æœ‰çŸ­è·¯åŸåˆ™ï¼š expr1 \u0026\u0026 expr2ï¼šå½“expr1ä¸ºå‡æ—¶ï¼Œç›´æ¥å¿½ç•¥expr2 expr1 || expr2ï¼šå½“expr1ä¸ºçœŸæ—¶ï¼Œç›´æ¥å¿½ç•¥expr2 è¡¨è¾¾å¼çš„exit codeä¸º0ï¼Œè¡¨ç¤ºçœŸï¼›ä¸ºéé›¶ï¼Œè¡¨ç¤ºå‡ã€‚ï¼ˆä¸C/C++ä¸­çš„å®šä¹‰ç›¸åï¼‰ a=3 b=4 # é™¤äº†è½¬ä¹‰å­—ç¬¦è¿˜å¯ç›´æ¥åŠ å•å¼•å· echo `expr $a \\\u003e $b` # è¾“å‡º0ï¼Œ\u003eéœ€è¦è½¬ä¹‰ echo `expr $a '\u003c' $b` # è¾“å‡º1ï¼Œä¹Ÿå¯ä»¥å°†ç‰¹æ®Šå­—ç¬¦ç”¨å¼•å·å¼•èµ·æ¥ echo `expr $a '\u003e=' $b` # è¾“å‡º0 echo `expr $a \\\u003c\\= $b` # è¾“å‡º1 c=0 d=5 echo `expr $c \\\u0026 $d` # è¾“å‡º0 echo `expr $a \\\u0026 $b` # è¾“å‡º3 echo `expr $c \\| $d` # è¾“å‡º5 echo `expr $a \\| $b` # è¾“å‡º3 ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:5:3","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"readå‘½ä»¤ readå‘½ä»¤ç”¨äºä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–å•è¡Œæ•°æ®ã€‚å½“è¯»åˆ°æ–‡ä»¶ç»“æŸç¬¦æ—¶ï¼Œexit codeä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚ -p: åé¢å¯ä»¥æ¥æç¤ºä¿¡æ¯ -tï¼šåé¢è·Ÿç§’æ•°ï¼Œå®šä¹‰è¾“å…¥å­—ç¬¦çš„ç­‰å¾…æ—¶é—´ï¼Œè¶…è¿‡ç­‰å¾…æ—¶é—´åä¼šè‡ªåŠ¨å¿½ç•¥æ­¤å‘½ä»¤ acs@9e0ebfcd82d7:~$ read name # è¯»å…¥nameçš„å€¼ acwing yxc # æ ‡å‡†è¾“å…¥ acs@9e0ebfcd82d7:~$ echo $name # è¾“å‡ºnameçš„å€¼ acwing yxc #æ ‡å‡†è¾“å‡º acs@9e0ebfcd82d7:~$ read -p \"Please input your name: \" -t 30 name # è¯»å…¥nameçš„å€¼ï¼Œç­‰å¾…æ—¶é—´30ç§’ Please input your name: acwing yxc # æ ‡å‡†è¾“å…¥ acs@9e0ebfcd82d7:~$ echo $name # è¾“å‡ºnameçš„å€¼ acwing yxc # æ ‡å‡†è¾“å‡º ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:6:0","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"echoå‘½ä»¤ echoç”¨äºè¾“å‡ºå­—ç¬¦ä¸²ã€‚å‘½ä»¤æ ¼å¼ï¼šecho string # æ˜¾ç¤ºæ™®é€šå­—ç¬¦ä¸² echo \"Hello AC Terminal\" echo Hello AC Terminal # å¼•å·å¯ä»¥çœç•¥ # æ˜¾ç¤ºè½¬ä¹‰å­—ç¬¦ echo \"\\\"Hello AC Terminal\\\"\" # æ³¨æ„åªèƒ½ä½¿ç”¨åŒå¼•å·ï¼Œå¦‚æœä½¿ç”¨å•å¼•å·ï¼Œåˆ™ä¸è½¬ä¹‰ echo \\\"Hello AC Terminal\\\" # ä¹Ÿå¯ä»¥çœç•¥åŒå¼•å· # æ˜¾ç¤ºå˜é‡ name=abc echo \"My name is $name\" # è¾“å‡º My name is abc # æ˜¾ç¤ºæ¢è¡Œ echo -e \"Hi\\n\" # -e å¼€å¯è½¬ä¹‰ echo \"acwing\" # æ˜¾ç¤ºä¸æ¢è¡Œ echo -e \"Hi \\c\" # -e å¼€å¯è½¬ä¹‰ \\c ä¸æ¢è¡Œ echo \"acwing\" # æ˜¾ç¤ºç»“æœå®šå‘è‡³æ–‡ä»¶ echo \"Hello World\" \u003e output.txt # å°†å†…å®¹ä»¥è¦†ç›–çš„æ–¹å¼è¾“å‡ºåˆ°output.txtä¸­ # åŸæ ·è¾“å‡ºå­—ç¬¦ä¸²ï¼Œä¸è¿›è¡Œè½¬ä¹‰æˆ–å–å˜é‡(ç”¨å•å¼•å·) name=acwing echo '$name\\\"' # æ˜¾ç¤ºå‘½ä»¤çš„æ‰§è¡Œç»“æœ echo `date` # Thu Apr 6 15:30:20 CST 2023 ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:7:0","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"printf å‘½ä»¤ printfå‘½ä»¤ç”¨äºæ ¼å¼åŒ–è¾“å‡ºï¼Œç±»ä¼¼äºC/C++ä¸­çš„printfå‡½æ•°ã€‚é»˜è®¤ä¸ä¼šåœ¨å­—ç¬¦ä¸²æœ«å°¾æ·»åŠ æ¢è¡Œç¬¦ã€‚ å‘½ä»¤æ ¼å¼ï¼šprintf format-string [arguments...] printf \"%10d.\\n\" 123 # å 10ä½ï¼Œå³å¯¹é½ printf \"%-10.2f.\\n\" 123.123321 # å 10ä½ï¼Œä¿ç•™2ä½å°æ•°ï¼Œå·¦å¯¹é½ printf \"My name is %s\\n\" \"abc\" # æ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸² printf \"%d * %d = %d\\n\" 2 3 `expr 2 \\* 3` # è¡¨è¾¾å¼çš„å€¼ä½œä¸ºå‚æ•° # è¾“å‡ºç»“æœ 123. 123.12 . My name is abc 2 * 3 = 6 ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:8:0","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"testå‘½ä»¤ åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥man testï¼Œå¯ä»¥æŸ¥çœ‹testå‘½ä»¤çš„ç”¨æ³•ã€‚ testå‘½ä»¤ç”¨äºåˆ¤æ–­æ–‡ä»¶ç±»å‹ï¼Œä»¥åŠå¯¹å˜é‡åšæ¯”è¾ƒã€‚ testå‘½ä»¤ç”¨exit codeè¿”å›ç»“æœï¼Œè€Œä¸æ˜¯ä½¿ç”¨stdoutã€‚0è¡¨ç¤ºçœŸï¼Œé0è¡¨ç¤ºå‡ã€‚ expr stdoutè¾“å‡º 1è¡¨ç¤ºçœŸï¼Œ0è¡¨ç¤ºå‡ã€‚ test exit codeé€€å‡ºçŠ¶æ€ 0è¡¨ç¤ºçœŸï¼Œé0è¡¨ç¤ºå‡ã€‚ acs@a1d78bab476e:~learn$ test 2 -lt 3 acs@a1d78bab476e:~learn$ echo $? 0 acs@a1d78bab476e:~learn$ ls # åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ output.txt test.sh # ä½¿ç”¨\u0026\u0026 ||å®ç°ifåˆ¤æ–­ acs@a1d78bab476e:~learn$ test -e test.sh \u0026\u0026 echo \"exist\" || echo \"Not exist\" exist # test.sh æ–‡ä»¶å­˜åœ¨ acs@a1d78bab476e:~learn$ test -e tesh.sh \u0026\u0026 echo \"exist\" || echo \"Not exist\" Not exist # tesh.sh æ–‡ä»¶ä¸å­˜åœ¨ test -e filename # åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ test -f filename # æ˜¯å¦ä¸ºæ–‡ä»¶ test -d filename # æ˜¯å¦ä¸ºç›®å½• # æƒé™åˆ¤æ–­ test -r filename# åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å¯è¯» test -w filename# åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å¯å†™ test -x filename# åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œ test -s filename# åˆ¤æ–­æ˜¯å¦ä¸ºéç©ºæ–‡ä»¶ # æ•´æ•°æ¯”è¾ƒ test $a -eq $b # aæ˜¯å¦ç­‰äºb equalï¼ˆç›¸ç­‰ï¼‰ test $a -ne $b # aæ˜¯å¦ä¸ç­‰äºb not equalï¼ˆä¸ç­‰ï¼‰ test $a -gt $b # aæ˜¯å¦å¤§äºb greater thanï¼ˆå¤§äºï¼‰ test $a -lt $b # aæ˜¯å¦å°äºb less thanï¼ˆå°äºï¼‰ test $a -ge $b # aæ˜¯å¦å¤§äºç­‰äºb greater than or equalï¼ˆå¤§äºæˆ–ç­‰äºï¼‰ test $a -le $b # aæ˜¯å¦å°äºç­‰äºb less than or equalï¼ˆå°äºæˆ–ç­‰äºï¼‰ # å­—ç¬¦ä¸²æ¯”è¾ƒ test -z STRING # åˆ¤æ–­STRINGæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™è¿”å›true test -n STRING # åˆ¤æ–­STRINGæ˜¯å¦éç©ºï¼Œå¦‚æœéç©ºï¼Œåˆ™è¿”å›trueï¼ˆ-nå¯ä»¥çœç•¥ï¼‰ test str1 == str2 # åˆ¤æ–­str1æ˜¯å¦ç­‰äºstr2 test str1 != str2 # åˆ¤æ–­str1æ˜¯å¦ä¸ç­‰äºstr2 # å¤šé‡æ¡ä»¶åˆ¤å®š test -r filename -a -x filename test -r filename -o -x filename test ! -r filename -a # ä¸¤æ¡ä»¶æ˜¯å¦åŒæ—¶æˆç«‹ -o # ä¸¤æ¡ä»¶æ˜¯å¦è‡³å°‘ä¸€ä¸ªæˆç«‹ ! # å–åã€‚å¦‚ test ! -x fileï¼Œå½“fileä¸å¯æ‰§è¡Œæ—¶ï¼Œè¿”å›true åˆ¤æ–­ç¬¦å·[] []ä¸testç”¨æ³•å‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œæ›´å¸¸ç”¨äºifè¯­å¥ä¸­ã€‚[[]]æ˜¯[]çš„åŠ å¼ºç‰ˆï¼Œæ”¯æŒçš„ç‰¹æ€§æ›´å¤šã€‚ acs@a1d78bab476e:~learn$ [2 -lt 3] acs@a1d78bab476e:~learn$ echoi $? 0 acs@a1d78bab476e:~learn$ ls # åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ output.txt test.sh acs@a1d78bab476e:~learn$ [ -e test.sh ] \u0026\u0026 echo \"exist\" || echo \"Not exist\" exist # test.sh æ–‡ä»¶å­˜åœ¨ acs@a1d78bab476e:~learn$ [ -e tesh.sh ] \u0026\u0026 echo \"exist\" || echo \"Not exist\" Not exist # tesh.sh æ–‡ä»¶ä¸å­˜åœ¨ æ³¨æ„ï¼š []å†…çš„æ¯ä¸€é¡¹éƒ½è¦ç”¨ç©ºæ ¼éš”å¼€ []]å†…çš„å˜é‡ï¼Œæœ€å¥½ç”¨åŒå¼•å·æ‹¬èµ·æ¥ []]å†…çš„å¸¸æ•°ï¼Œæœ€å¥½ç”¨å•æˆ–åŒå¼•å·æ‹¬èµ·æ¥ name=\"acwing abc\" [ $name == \"acwing abc\" ] # é”™è¯¯ï¼Œç­‰ä»·äº [ acwing abc == \"acwing abc\" ]ï¼Œå‰é¢å‚æ•°å¤ªå¤š [ \"$name\" == \"acwing abc\" ] # æ­£ç¡® ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:9:0","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"åˆ¤æ–­è¯­å¥ if..thenå½¢å¼ ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:10:0","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"å•å±‚if if condition then è¯­å¥1 è¯­å¥2 ... fi # å®ä¾‹ a=3 b=4 if [ \"$a\" -lt \"$b\" ] \u0026\u0026 [ \"$a\" -gt 2 ] then echo ${a}åœ¨èŒƒå›´å†… fi # è¾“å‡º 3åœ¨èŒƒå›´å†… ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:10:1","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"å•å±‚if-else å‘½ä»¤æ ¼å¼ if condition then è¯­å¥1 è¯­å¥2 ... else è¯­å¥1 è¯­å¥2 ... fi # å®ä¾‹ a=3 b=4 if ! [ \"$a\" -lt \"$b\" ] then echo ${a}ä¸å°äº${b} else echo ${a}å°äº${b} fi # è¾“å‡º 3å°äº4 ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:10:2","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"å¤šå±‚if-elif-elif-else if condition then è¯­å¥1 è¯­å¥2 ... elif condition then è¯­å¥1 è¯­å¥2 ... elif condition then è¯­å¥1 è¯­å¥2 else è¯­å¥1 è¯­å¥2 ... fi #ç¤ºä¾‹ï¼š a=4 if [ $a -eq 1 ] then echo ${a}ç­‰äº1 elif [ $a -eq 2 ] then echo ${a}ç­‰äº2 elif [ $a -eq 3 ] then echo ${a}ç­‰äº3 else echo å…¶ä»– fi # è¾“å‡º å…¶ä»– ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:10:3","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"caseâ€¦esacå½¢å¼ ç±»ä¼¼äºC/C++ä¸­çš„switchè¯­å¥ã€‚ case $å˜é‡åç§° in å€¼1) è¯­å¥1 è¯­å¥2 ... ;; # ç±»ä¼¼äºC/C++ä¸­çš„break å€¼2) è¯­å¥1 è¯­å¥2 ... ;; *) # ç±»ä¼¼äºC/C++ä¸­çš„default è¯­å¥1 è¯­å¥2 ... ;; esac # ç¤ºä¾‹ï¼š a=4 case $a in 1) echo ${a}ç­‰äº1 ;; 2) echo ${a}ç­‰äº2 ;; 3) echo ${a}ç­‰äº3 ;; *) echo å…¶ä»– ;; esac # è¾“å‡ºï¼šå…¶ä»– ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:10:4","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"å¾ªç¯è¯­å¥ ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:11:0","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"forâ€¦inâ€¦doâ€¦done for var in val1 val2 val3 do è¯­å¥1 è¯­å¥2 ... done # ç¤ºä¾‹1ï¼Œè¾“å‡ºa 2 ccï¼Œæ¯ä¸ªå…ƒç´ ä¸€è¡Œï¼š for i in a 2 cc do echo $i done #ç¤ºä¾‹2ï¼Œè¾“å‡ºå½“å‰è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åï¼Œæ¯ä¸ªæ–‡ä»¶åä¸€è¡Œï¼š for file in `ls` do echo $file done # ç¤ºä¾‹3ï¼Œè¾“å‡º1-10;seqè¿”å›ä¸€ä¸ªåºåˆ— for i in $(seq 1 10) do echo $i done # ç¤ºä¾‹4ï¼Œä½¿ç”¨{1..10} æˆ–è€… {a..z} for i in {a..z} do echo $i done ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:11:1","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"for ((â€¦;â€¦;â€¦)) doâ€¦done for ((expression; condition; expression)) do è¯­å¥1 è¯­å¥2 done # ç¤ºä¾‹ï¼Œè¾“å‡º1-10ï¼Œæ¯ä¸ªæ•°å ä¸€è¡Œï¼š for ((i=1; i\u003c=10; i++)) do echo $i done ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:11:2","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"whileâ€¦doâ€¦doneå¾ªç¯ while condition do è¯­å¥1 è¯­å¥2 ... done # ç¤ºä¾‹ï¼Œæ–‡ä»¶ç»“æŸç¬¦ä¸ºCtrl+dï¼Œè¾“å…¥æ–‡ä»¶ç»“æŸç¬¦åreadæŒ‡ä»¤è¿”å›falseã€‚ while read name do echo $name done ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:11:3","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"untilâ€¦doâ€¦doneå¾ªç¯ å½“æ¡ä»¶ä¸ºçœŸæ—¶ç»“æŸã€‚ until condition do è¯­å¥1 è¯­å¥2 ... done # ç¤ºä¾‹ï¼Œå½“ç”¨æˆ·è¾“å…¥yesæˆ–è€…YESæ—¶ç»“æŸï¼Œå¦åˆ™ä¸€ç›´ç­‰å¾…è¯»å…¥ã€‚ until [ \"${word}\" == \"yes\" ] || [ \"${word}\" == \"YES\" ] do read -p \"Please input yes/YES to stop this program: \" word done ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:11:4","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"breakå‘½ä»¤ è·³å‡ºå½“å‰ä¸€å±‚å¾ªç¯ï¼Œæ³¨æ„ä¸C/C++ä¸åŒçš„æ˜¯ï¼šbreakä¸èƒ½è·³å‡ºcaseè¯­å¥ã€‚ # ç¤ºä¾‹ while read name do for ((i=1;i\u003c=10;i++)) do case $i in 8) break ;; *) echo $i ;; esac done done # è¯¥ç¤ºä¾‹æ¯è¯»å…¥éEOFçš„å­—ç¬¦ä¸²ï¼Œä¼šè¾“å‡ºä¸€é1-7ã€‚ # è¯¥ç¨‹åºå¯ä»¥è¾“å…¥Ctrl+dæ–‡ä»¶ç»“æŸç¬¦æ¥ç»“æŸï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨Ctrl+cæ€æ‰è¯¥è¿›ç¨‹ã€‚ ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:11:5","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"continueå‘½ä»¤ è·³å‡ºå½“å‰å¾ªç¯ã€‚ # ç¤ºä¾‹ï¼š for ((i=1;i\u003c=10;i++)) do if [ `expr $i % 2` -eq 0 ] then continue fi echo $i done # è¯¥ç¨‹åºè¾“å‡º1-10ä¸­çš„æ‰€æœ‰å¥‡æ•°ã€‚ ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:11:6","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"æ­»å¾ªç¯çš„å¤„ç†æ–¹å¼ å¦‚æœAC Terminalå¯ä»¥æ‰“å¼€è¯¥ç¨‹åºï¼Œåˆ™è¾“å…¥Ctrl+cå³å¯ã€‚ å¦åˆ™å¯ä»¥ç›´æ¥å…³é—­è¿›ç¨‹ï¼š ä½¿ç”¨topå‘½ä»¤æ‰¾åˆ°è¿›ç¨‹çš„PIDæˆ–è€…ps auxè¿”å›å½“å‰æ‰“å¼€çš„æ‰€æœ‰è¿›ç¨‹ã€‚shift+MæŒ‰ç…§å†…å­˜æ’åº è¾“å…¥kill -9 PIDå³å¯å…³æ‰æ­¤è¿›ç¨‹ ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:11:7","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"å‡½æ•° bashä¸­çš„å‡½æ•°ç±»ä¼¼äºC/C++ä¸­çš„å‡½æ•°ï¼Œä½†returnçš„è¿”å›å€¼ä¸C/C++ä¸åŒï¼Œè¿”å›çš„æ˜¯exit codeï¼Œå–å€¼ä¸º0-255ï¼Œ0è¡¨ç¤ºæ­£å¸¸ç»“æŸã€‚ å¦‚æœæƒ³è·å–å‡½æ•°çš„è¾“å‡ºç»“æœï¼Œå¯ä»¥é€šè¿‡echoè¾“å‡ºåˆ°stdoutä¸­ï¼Œç„¶åé€šè¿‡$(function_name)æ¥è·å–stdoutä¸­çš„ç»“æœã€‚ å‡½æ•°çš„returnå€¼å¯ä»¥é€šè¿‡$?æ¥è·å–ã€‚ [function] func_name() { # functionå…³é”®å­—å¯ä»¥çœç•¥ è¯­å¥1 è¯­å¥2 ... } ä¸è·å– returnå€¼å’Œstdoutå€¼ func() { name=abc echo \"Hello $name\" } func # è¾“å‡ºç»“æœï¼šHello abc è·å– returnå€¼å’Œstdoutå€¼ ä¸å†™returnæ—¶ï¼Œé»˜è®¤return 0ã€‚ func() { name=abc echo \"Hello $name\" return 123 } output=$(func) ret=$? echo \"output = $output\" echo \"return = $ret\" # è¾“å‡ºç»“æœï¼š # output = Hello abc # return = 123 å‡½æ•°çš„è¾“å…¥å‚æ•° åœ¨å‡½æ•°å†…ï¼Œ$1è¡¨ç¤ºç¬¬ä¸€ä¸ªè¾“å…¥å‚æ•°ï¼Œ$2è¡¨ç¤ºç¬¬äºŒä¸ªè¾“å…¥å‚æ•°ï¼Œä¾æ­¤ç±»æ¨ã€‚ å‡½æ•°å†…çš„$0ä»ç„¶æ˜¯æ–‡ä»¶åï¼Œè€Œä¸æ˜¯å‡½æ•°åã€‚ func() { # é€’å½’è®¡ç®— $1 + ($1 - 1) + ($1 - 2) + ... + 0 word=\"\" while [ \"${word}\" != 'y' ] \u0026\u0026 [ \"${word}\" != 'n' ] do read -p \"è¦è¿›å…¥func($1)å‡½æ•°å—ï¼Ÿè¯·è¾“å…¥y/nï¼š\" word done if [ \"$word\" == 'n' ] then echo 0 return 0 fi if [ $1 -le 0 ] then echo 0 return 0 fi sum=$(func $(expr $1 - 1)) echo $(expr $sum + $1) } echo $(func 10) # è¾“å‡ºç»“æœ:55 å‡½æ•°å†…çš„å±€éƒ¨å˜é‡ å¯ä»¥åœ¨å‡½æ•°å†…å®šä¹‰å±€éƒ¨å˜é‡ï¼Œä½œç”¨èŒƒå›´ä»…åœ¨å½“å‰å‡½æ•°å†…ã€‚ å¯ä»¥åœ¨é€’å½’å‡½æ•°ä¸­å®šä¹‰å±€éƒ¨å˜é‡ã€‚ local å˜é‡å=å˜é‡å€¼ #! /bin/bash func() { local name=abc echo $name } func echo $name # è¾“å‡ºç»“æœï¼šabc # ç¬¬ä¸€è¡Œä¸ºå‡½æ•°å†…çš„nameå˜é‡ï¼Œç¬¬äºŒè¡Œä¸ºå‡½æ•°å¤–è°ƒç”¨nameå˜é‡ï¼Œä¼šå‘ç°æ­¤æ—¶è¯¥å˜é‡ä¸å­˜åœ¨ã€‚ ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:12:0","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"exitå‘½ä»¤ exitå‘½ä»¤ç”¨æ¥é€€å‡ºå½“å‰shellè¿›ç¨‹ï¼Œå¹¶è¿”å›ä¸€ä¸ªé€€å‡ºçŠ¶æ€ï¼›ä½¿ç”¨$?å¯ä»¥æ¥æ”¶è¿™ä¸ªé€€å‡ºçŠ¶æ€ã€‚ exitå‘½ä»¤å¯ä»¥æ¥å—ä¸€ä¸ªæ•´æ•°å€¼ä½œä¸ºå‚æ•°ï¼Œä»£è¡¨é€€å‡ºçŠ¶æ€ã€‚å¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤çŠ¶æ€å€¼æ˜¯ 0ã€‚ exité€€å‡ºçŠ¶æ€åªèƒ½æ˜¯ä¸€ä¸ªä»‹äº 0~255 ä¹‹é—´çš„æ•´æ•°ï¼Œå…¶ä¸­åªæœ‰ 0 è¡¨ç¤ºæˆåŠŸï¼Œå…¶å®ƒå€¼éƒ½è¡¨ç¤ºå¤±è´¥ã€‚ #! /bin/bash if [ $# -ne 1 ] # å¦‚æœä¼ å…¥å‚æ•°ä¸ªæ•°ç­‰äº1ï¼Œåˆ™æ­£å¸¸é€€å‡ºï¼›å¦åˆ™éæ­£å¸¸é€€å‡ºã€‚ then echo \"arguments not valid\" exit 1 else echo \"arguments valid\" exit 0 fi # æ‰§è¡Œè¯¥è„šæœ¬ï¼š ./test.sh acwing arguments valid echo $? # ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œåˆ™æ­£å¸¸é€€å‡ºï¼Œexit codeä¸º0 0 ./test.sh arguments not valid echo $? # ä¼ å…¥å‚æ•°ä¸ªæ•°ä¸æ˜¯1ï¼Œåˆ™éæ­£å¸¸é€€å‡ºï¼Œexit codeä¸º1 1 ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:13:0","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"æ–‡ä»¶é‡å®šå‘ æ¯ä¸ªè¿›ç¨‹é»˜è®¤æ‰“å¼€3ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼š stdinæ ‡å‡†è¾“å…¥ï¼Œä»å‘½ä»¤è¡Œè¯»å–æ•°æ®ï¼Œæ–‡ä»¶æè¿°ç¬¦ä¸º0 stdoutæ ‡å‡†è¾“å‡ºï¼Œå‘å‘½ä»¤è¡Œè¾“å‡ºæ•°æ®ï¼Œæ–‡ä»¶æè¿°ç¬¦ä¸º1 stderræ ‡å‡†é”™è¯¯è¾“å‡ºï¼Œå‘å‘½ä»¤è¡Œè¾“å‡ºæ•°æ®ï¼Œæ–‡ä»¶æè¿°ç¬¦ä¸º2 å¯ä»¥ç”¨æ–‡ä»¶é‡å®šå‘å°†è¿™ä¸‰ä¸ªæ–‡ä»¶é‡å®šå‘åˆ°å…¶ä»–æ–‡ä»¶ä¸­ã€‚ å‘½ä»¤ è¯´æ˜ command \u003e file å°†stdouté‡å®šå‘åˆ°fileä¸­ command \u003c file å°†stdiné‡å®šå‘åˆ°fileä¸­ command Â» file å°†stdoutä»¥è¿½åŠ æ–¹å¼é‡å®šå‘åˆ°fileä¸­ command n\u003e file å°†æ–‡ä»¶æè¿°ç¬¦né‡å®šå‘åˆ°fileä¸­ command nÂ» file å°†æ–‡ä»¶æè¿°ç¬¦nä»¥è¿½åŠ æ–¹å¼é‡å®šå‘åˆ°fileä¸­ è¾“å…¥å’Œè¾“å‡ºé‡å®šå‘ echo -e \"Hello \\c\" \u003e output.txt # å°†stdouté‡å®šå‘åˆ°output.txtä¸­ echo \"World\" \u003e\u003e output.txt # å°†å­—ç¬¦ä¸²è¿½åŠ åˆ°output.txtä¸­ read str \u003c output.txt # ä»output.txtä¸­è¯»å–å­—ç¬¦ä¸² echo $str # è¾“å‡ºç»“æœï¼šHello World åŒæ—¶é‡å®šå‘stdinå’Œstdout #! /bin/bash read a read b echo $(expr \"$a\" + \"$b\") åˆ›å»ºinput.txtï¼Œé‡Œé¢çš„å†…å®¹ä¸ºï¼š 3 4 # æ‰§è¡Œå‘½ä»¤ï¼š ./test.sh \u003c input.txt \u003e output.txt # ä»input.txtä¸­è¯»å–å†…å®¹ï¼Œå°†è¾“å‡ºå†™å…¥output.txtä¸­ cat output.txt # æŸ¥çœ‹output.txtä¸­çš„å†…å®¹ 7 ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:14:0","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"å¼•å…¥å¤–éƒ¨è„šæœ¬ ç±»ä¼¼äºC/C++ä¸­çš„includeæ“ä½œï¼Œbashä¹Ÿå¯ä»¥å¼•å…¥å…¶ä»–æ–‡ä»¶ä¸­çš„ä»£ç ã€‚ . filename # æ³¨æ„ç‚¹å’Œæ–‡ä»¶åä¹‹é—´æœ‰ä¸€ä¸ªç©ºæ ¼ source filename # test1.sh #! /bin/bash name=abc # å®šä¹‰å˜é‡name # åˆ›å»ºtest2.sh #! /bin/bash source test1.sh # æˆ– . test1.sh echo My name is: $name # å¯ä»¥ä½¿ç”¨test1.shä¸­çš„å˜é‡ # æ‰§è¡Œå‘½ä»¤ï¼š ./test2.sh My name is: abc ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:15:0","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"æ–‡æœ¬å¤„ç†ä¸‰å‰‘å®¢ ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:16:0","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"grep é€‚åˆå•çº¯çš„æŸ¥æ‰¾æˆ–åŒ¹é…æ–‡æœ¬ grep -l './hip-prof-3912.db' log_*.txt:æŸ¥æ‰¾æ–‡æœ¬ ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:16:1","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"sed æ›´é€‚åˆç¼–è¾‘åŒ¹é…åˆ°çš„æ–‡æœ¬ ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:16:2","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"awk æ›´é€‚åˆæ ¼å¼åŒ–æ–‡æœ¬ï¼Œå¯¹æ–‡æœ¬è¿›è¡Œè¾ƒå¤æ‚æ ¼å¼å¤„ç† AWKæ‰§è¡Œçš„æµç¨‹ï¼šè¯»ï¼ˆReadï¼‰ã€æ‰§è¡Œï¼ˆExecuteï¼‰ä¸é‡å¤ï¼ˆRepeatï¼‰ è¯»ï¼ˆReadï¼‰ï¼šä»è¾“å…¥æµï¼ˆæ–‡ä»¶ã€ç®¡é“æˆ–æ ‡å‡†è¾“å…¥ï¼‰ä¸­è¯»å–ä¸€è¡Œï¼Œç„¶åå°†å…¶å­˜å…¥å†…å­˜ä¸­ã€‚ æ‰§è¡Œï¼ˆExecuteï¼‰ï¼šå¯¹äºæ¯ä¸€è¡Œçš„è¾“å…¥ï¼Œæ‰€æœ‰çš„AWKå‘½ä»¤æŒ‰é¡ºåºæ‰§è¡Œã€‚ é‡å¤ï¼ˆRepeatï¼‰ï¼šä¸€ç›´é‡å¤ä¸Šè¿°ä¸¤ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ–‡ä»¶ç»“æŸã€‚ ç¨‹åºç»“æ„ å¼€å§‹å—ï¼ˆBEGIN blockï¼‰ï¼šå¯åŠ¨ï¼Œåªæ‰§è¡Œä¸€æ¬¡ï¼›BEGINæ˜¯å…³é”®å­—éœ€å¤§å†™ï¼›å¯é€‰ï¼ˆç¨‹åºå¯ä»¥æ²¡æœ‰å¼€å§‹å—ï¼‰ ä¸»ä½“å—(Body block)ï¼šè¾“å…¥è¡Œï¼Œæ‰§è¡Œå‘½ä»¤ ç»“æŸå—ï¼ˆEND blockï¼‰ï¼šä»‹ç´ æ‰§è¡Œï¼ŒENDæ˜¯å…³é”®å­—éœ€å¤§å†™ï¼›å¯é€‰ï¼ˆç¨‹åºå¯ä»¥æ²¡æœ‰å¼€å§‹å—ï¼‰ [user553@login05 shell]$ cat stu.txt 1ï¼‰ å¼ ä¸‰ ç‰©ç† 60 2ï¼‰ æå›› æ•°å­¦ 70 3ï¼‰ ç‹äº” è‹±è¯­ 80 4ï¼‰ èµµå…­ è¯­æ–‡ 90 5ï¼‰ å­™ä¸ƒ åŒ–å­¦ 100 [user553@login05 shell]$ awk '{print}' stu.txt 1ï¼‰ å¼ ä¸‰ ç‰©ç† 60 2ï¼‰ æå›› æ•°å­¦ 70 3ï¼‰ ç‹äº” è‹±è¯­ 80 4ï¼‰ èµµå…­ è¯­æ–‡ 90 5ï¼‰ å­™ä¸ƒ åŒ–å­¦ 100 [user553@login05 shell]$ awk 'BEGIN{printf \"ç¼–å·\\tå§“å\\tç§‘ç›®\\tæˆç»©\\n\"} {print}' stu.txt ç¼–å· å§“å ç§‘ç›® æˆç»© 1ï¼‰ å¼ ä¸‰ ç‰©ç† 60 2ï¼‰ æå›› æ•°å­¦ 70 3ï¼‰ ç‹äº” è‹±è¯­ 80 4ï¼‰ èµµå…­ è¯­æ–‡ 90 5ï¼‰ å­™ä¸ƒ åŒ–å­¦ 100 è¯­æ³• awk [options] ' Pattern{Action} '\u003cfile\u003e awkä¸­æœ€å¸¸ç”¨çš„åŠ¨ä½œActionå°±æ˜¯printå’Œprintf é€è¡Œå¤„ç†çš„ï¼Œé»˜è®¤ä»¥æ¢è¡Œç¬¦ä¸ºæ ‡è®°ï¼Œè¯†åˆ«æ¯ä¸€è¡Œï¼›awkä¼šæŒ‰ç…§ç”¨æˆ·æŒ‡å®šçš„åˆ†éš”ç¬¦å»åˆ†å‰²å½“å‰è¡Œï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä½¿ç”¨ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦ã€‚ $0å’Œ$NFå‡ä¸ºå†…ç½®å˜é‡ã€‚$NFè¡¨ç¤ºå½“å‰è¡Œåˆ†å‰²åçš„æœ€åä¸€åˆ—ã€‚ å†…ç½®å˜é‡ä¸èƒ½åŠ åŒå¼•å·ï¼Œå¦åˆ™ä¼šå½“æ–‡æœ¬è¾“å‡º [user553@login05 shell]$ echo aaa | awk '{print $1}' aaa [user553@login05 shell]$ echo aaa | awk '{print \"$1\"}' $1 # é€šè¿‡ç®¡é“è¾“å‡ºç£ç›˜ä¿¡æ¯ï¼›printfä¸­å¯ä»¥æ ¼å¼åŒ–è¾“å‡ºçš„å­—ç¬¦ä¸²ï¼Œç¡®ä¿è¾“å‡ºæ˜¯ç­‰å®½å­—ç¬¦æ˜¾ç¤ºã€‚ [user553@login05 shell]$ df -h | awk '{print $1\"\\t\"$2\"\\t\"%5}' Filesystem Size0 /dev/sda3 422G0 devtmpfs 126G0 /dev/sda1 2.0G0 ParaStor_01_work 27P0 ParaStor_01_home 215T0 /dev/sdc1 15T0 ParaStor_01_nvme 388T0 [user553@login05 shell]$ df -h | awk '{printf \"%20s\\t %s\\t %s\\t\\n\", $1,$2,$5}' Filesystem Size Use% /dev/sda3 422G 16% devtmpfs 126G 0% /dev/sda1 2.0G 9% ParaStor_01_work 27P 15% ParaStor_01_home 215T 59% /dev/sdc1 15T 1% ParaStor_01_nvme 388T 2% Patternï¼Œå…¶å®å°±æ˜¯é€‰æ‹©çš„æ¡ä»¶ AWKæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼›æ­£åˆ™è¡¨è¾¾å¼è¢«æ”¾å…¥ä¸¤ä¸ªæ–œçº¿ä¸­ï¼š/æ­£åˆ™è¡¨è¾¾å¼/ã€‚ # ä»/etc/passwdæ–‡ä»¶ä¸­æ‰¾å‡ºä»¥rootå¼€å¤´çš„è¡Œ [user553@login05 shell]$ grep \"^root\" /etc/passwd root:x:0:0:root:/root:/bin/bash [user553@login05 shell]$ awk '/^root/ {print $0}' /etc/passwd root:x:0:0:root:/root:/bin/bash [Options]å¯é€‰å‚æ•°ã€‚æœ€å¸¸ç”¨çš„æ˜¯ï¼š -Fï¼Œ ç”¨äºæŒ‡å®šè¾“å…¥åˆ†éš”ç¬¦ï¼› -v varname=value å˜é‡ååŒºåˆ†å­—ç¬¦å¤§å°å†™ï¼Œ ç”¨äºè®¾ç½®å˜é‡çš„å€¼ $ awk -v myvar='hello world!' 'BEGIN {print myvar}' hello world! [user553@login05 shell]$ awk -F\" \" 'NR==2 {print $0}' stu.txt 2ï¼‰ æå›› æ•°å­¦ 70 awk ifè¯­å¥ï¼šå¿…é¡»ç”¨åœ¨{}ä¸­ï¼Œä¸”æ¯”è¾ƒå†…å®¹ç”¨()æ‹¬èµ·æ¥ã€‚ # ç»Ÿè®¡uidå°äºç­‰äº500å’Œå¤§äº500çš„ç”¨æˆ·ä¸ªæ•° [user553@login05 shell]$ awk -F: 'BEGIN {i=0;j=0} {if($3\u003c=500) {i++} else {j++}} END{print i, j}' /etc/passwd 41 24 forå¾ªç¯ [user553@login05 shell]$ awk 'BEGIN {for(i=1; i\u003c=10;i++){if(i%2!=0) continue;print i}}' 2 4 6 8 10 ","date":"2023-06-17","objectID":"/posts/computer/shell%E7%BC%96%E7%A8%8B/:16:3","tags":["Computer","Linux"],"title":"Shellç¼–ç¨‹","uri":"/posts/computer/shell%E7%BC%96%E7%A8%8B/"},{"categories":["Computer"],"content":"tmuxæ•™ç¨‹","date":"2023-06-16","objectID":"/posts/computer/tmux%E6%95%99%E7%A8%8B/","tags":["Computer","å·¥å…·","Linux"],"title":"tmuxæ•™ç¨‹","uri":"/posts/computer/tmux%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"tmuxæ•™ç¨‹ åŠŸèƒ½ åˆ†å±ã€‚ å…è®¸æ–­å¼€Terminalè¿æ¥åï¼Œç»§ç»­è¿è¡Œè¿›ç¨‹ã€‚ ç»“æ„ ä¸€ä¸ªtmuxå¯ä»¥åŒ…å«å¤šä¸ªsessionï¼Œä¸€ä¸ªsessionå¯ä»¥åŒ…å«å¤šä¸ªwindowï¼Œä¸€ä¸ªwindowå¯ä»¥åŒ…å«å¤šä¸ªpaneã€‚ ","date":"2023-06-16","objectID":"/posts/computer/tmux%E6%95%99%E7%A8%8B/:1:0","tags":["Computer","å·¥å…·","Linux"],"title":"tmuxæ•™ç¨‹","uri":"/posts/computer/tmux%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"å¸¸ç”¨æ“ä½œ tmuxï¼šæ–°å»ºä¸€ä¸ªsessionï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªwindowï¼Œwindowä¸­åŒ…å«ä¸€ä¸ªpaneï¼Œpaneé‡Œæ‰“å¼€äº†ä¸€ä¸ªshellå¯¹è¯æ¡†ã€‚ tmux kill-server ï¼šå…³é—­æ‰€æœ‰session æŒ‰ä¸‹Ctrl + B åæ¾å¼€ï¼Œç„¶åæŒ‰% ï¼ˆshift + 5ï¼‰ï¼šå°†å½“å‰paneå·¦å³å¹³åˆ†æˆä¸¤ä¸ªpane æŒ‰ä¸‹Ctrl + B åæ¾å¼€ï¼Œç„¶åæŒ‰\"ï¼šå°†å½“å‰paneä¸Šä¸‹å¹³åˆ†æˆä¸¤ä¸ªpaneã€‚ Ctrl + Dï¼šå…³é—­å½“å‰paneï¼› å¦‚æœå½“å‰windowçš„æ‰€æœ‰paneå‡å·²å…³é—­ï¼Œåˆ™è‡ªåŠ¨å…³é—­windowï¼›å¦‚æœå½“å‰sessionçš„æ‰€æœ‰windowå‡å·²å…³é—­ï¼Œåˆ™è‡ªåŠ¨å…³é—­sessionã€‚ é¼ æ ‡ç‚¹å‡»å¯ä»¥é€‰paneã€‚(æˆ‘é¼ æ ‡åŠ¨ä¸äº†) æŒ‰ä¸‹Ctrl + B åæ¾å¼€ï¼Œç„¶åæŒ‰æ–¹å‘é”®ï¼šé€‰æ‹©ç›¸é‚»çš„paneã€‚ é¼ æ ‡æ‹–åŠ¨paneä¹‹é—´çš„åˆ†å‰²çº¿ï¼Œå¯ä»¥è°ƒæ•´åˆ†å‰²çº¿çš„ä½ç½®ã€‚ æŒ‰ä½Ctrl + B çš„åŒæ—¶æŒ‰æ–¹å‘é”®ï¼Œå¯ä»¥è°ƒæ•´paneä¹‹é—´åˆ†å‰²çº¿çš„ä½ç½®ã€‚ æŒ‰ä¸‹Ctrl + B åæ¾å¼€ï¼Œç„¶åæŒ‰zï¼šå°†å½“å‰paneå…¨å±/å–æ¶ˆå…¨å±ã€‚ æŒ‰ä¸‹Ctrl + B åæ¾å¼€ï¼Œç„¶åæŒ‰dï¼šæŒ‚èµ·å½“å‰sessionã€‚ tmux aï¼šæ‰“å¼€ä¹‹å‰æŒ‚èµ·çš„sessionã€‚ æŒ‰ä¸‹Ctrl + B åæ¾å¼€ï¼Œç„¶åæŒ‰sï¼šé€‰æ‹©å…¶å®ƒsessionã€‚ æ–¹å‘é”® â€”â€” ä¸Šï¼šé€‰æ‹©ä¸Šä¸€é¡¹ session/window/pane æ–¹å‘é”® â€”â€” ä¸‹ï¼šé€‰æ‹©ä¸‹ä¸€é¡¹ session/window/pane æ–¹å‘é”® â€”â€” å³ï¼šå±•å¼€å½“å‰é¡¹ session/window æ–¹å‘é”® â€”â€” å·¦ï¼šé—­åˆå½“å‰é¡¹ session/window æŒ‰ä¸‹Ctrl + B åæ¾å¼€ï¼Œç„¶åæŒ‰cï¼šåœ¨å½“å‰sessionä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„windowã€‚ æŒ‰ä¸‹Ctrl + B åæ¾å¼€ï¼Œç„¶åæŒ‰wï¼šé€‰æ‹©å…¶ä»–windowï¼Œæ“ä½œæ–¹æ³•ä¸(12)å®Œå…¨ç›¸åŒã€‚ æŒ‰ä¸‹Ctrl + B åæ¾å¼€ï¼Œç„¶åæŒ‰PageUpï¼šç¿»é˜…å½“å‰paneå†…çš„å†…å®¹ã€‚ é¼ æ ‡æ»šè½®ï¼šç¿»é˜…å½“å‰paneå†…çš„å†…å®¹ã€‚ åœ¨tmuxä¸­é€‰ä¸­æ–‡æœ¬æ—¶ï¼Œéœ€è¦æŒ‰ä½shifté”®ã€‚ï¼ˆä»…æ”¯æŒWindowså’ŒLinuxï¼Œä¸æ”¯æŒMacï¼‰ tmuxä¸­å¤åˆ¶/ç²˜è´´æ–‡æœ¬çš„é€šç”¨æ–¹å¼ï¼š æŒ‰ä¸‹Ctrl + B åæ¾å¼€ï¼Œç„¶åæŒ‰[ ç”¨é¼ æ ‡é€‰ä¸­æ–‡æœ¬ï¼Œè¢«é€‰ä¸­çš„æ–‡æœ¬ä¼šè¢«è‡ªåŠ¨å¤åˆ¶åˆ°tmuxçš„å‰ªè´´æ¿ æŒ‰ä¸‹Ctrl + B åæ¾å¼€ï¼Œç„¶åæŒ‰]ï¼Œä¼šå°†å‰ªè´´æ¿ä¸­çš„å†…å®¹ç²˜è´´åˆ°å…‰æ ‡å¤„ ","date":"2023-06-16","objectID":"/posts/computer/tmux%E6%95%99%E7%A8%8B/:2:0","tags":["Computer","å·¥å…·","Linux"],"title":"tmuxæ•™ç¨‹","uri":"/posts/computer/tmux%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"å®‰è£…tmux æ— ç½‘ç»œä½¿ç”¨appImagesç‰ˆæœ¬ï¼š apps â€“ AppImages Releases Â· nelsonenzo/tmux-appimage (github.com) chmod +x ./tmux.appimage # ä¸‹è½½åï¼Œæ·»åŠ æƒé™ cp tmux.appimage /usr/local/bin/tmux # æ”¾åˆ°PATHç¯å¢ƒå˜é‡è®°å½•çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œä»¥ä¾¿åœ¨ä»»æ„åœ°æ–¹ç›´æ¥è°ƒç”¨ ","date":"2023-06-16","objectID":"/posts/computer/tmux%E6%95%99%E7%A8%8B/:3:0","tags":["Computer","å·¥å…·","Linux"],"title":"tmuxæ•™ç¨‹","uri":"/posts/computer/tmux%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"é…ç½®æ–‡ä»¶ ~/.tmux.conf ä»¤å…¶ç”Ÿæ•ˆä¸¤ç§æ–¹å¼ï¼š 1ï¼štmux source-file ~/.tmux.conf 2ï¼šåœ¨tmuxçª—å£ä¸­ï¼Œå…ˆæŒ‰ä¸‹Ctrl+bæŒ‡ä»¤å‰ç¼€ï¼Œç„¶åæŒ‰ä¸‹ç³»ç»ŸæŒ‡ä»¤:ï¼Œè¿›å…¥åˆ°å‘½ä»¤æ¨¡å¼åè¾“å…¥source-file ~/.tmux.confï¼Œå›è½¦åç”Ÿæ•ˆã€‚ ctrl + B æ”¹æˆ ctrl + A set-option -g status-keys vi setw -g mode-keys vi setw -g monitor-activity on # setw -g c0-change-trigger 10 # setw -g c0-change-interval 100 # setw -g c0-change-interval 50 # setw -g c0-change-trigger 75 set-window-option -g automatic-rename on set-option -g set-titles on set -g history-limit 100000 #set-window-option -g utf8 on # set command prefix set-option -g prefix C-a unbind-key C-b bind-key C-a send-prefix bind h select-pane -L bind j select-pane -D bind k select-pane -U bind l select-pane -R bind -n M-Left select-pane -L bind -n M-Right select-pane -R bind -n M-Up select-pane -U bind -n M-Down select-pane -D bind \u003c resize-pane -L 7 bind \u003e resize-pane -R 7 bind - resize-pane -D 7 bind + resize-pane -U 7 bind-key -n M-l next-window bind-key -n M-h previous-window set -g status-interval 1 # status bar set -g status-bg black set -g status-fg blue #set -g status-utf8 on set -g status-justify centre set -g status-bg default set -g status-left \" #[fg=green]#S@#H #[default]\" set -g status-left-length 20 # mouse support # for tmux 2.1 # set -g mouse-utf8 on set -g mouse on # # for previous version #set -g mode-mouse on #set -g mouse-resize-pane on #set -g mouse-select-pane on #set -g mouse-select-window on #set -g status-right-length 25 set -g status-right \"#[fg=green]%H:%M:%S #[fg=magenta]%a %m-%d #[default]\" # fix for tmux 1.9 bind '\"' split-window -vc \"#{pane_current_path}\" bind '%' split-window -hc \"#{pane_current_path}\" bind 'c' new-window -c \"#{pane_current_path}\" # run-shell \"powerline-daemon -q\" # vim: ft=conf ","date":"2023-06-16","objectID":"/posts/computer/tmux%E6%95%99%E7%A8%8B/:4:0","tags":["Computer","å·¥å…·","Linux"],"title":"tmuxæ•™ç¨‹","uri":"/posts/computer/tmux%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"Vimæ•™ç¨‹","date":"2023-06-16","objectID":"/posts/computer/vim%E6%95%99%E7%A8%8B/","tags":["Computer","å·¥å…·","Linux"],"title":"Vimæ•™ç¨‹","uri":"/posts/computer/vim%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"Vimæ•™ç¨‹ åŠŸèƒ½ å‘½ä»¤è¡Œæ¨¡å¼ä¸‹çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚ æ ¹æ®æ–‡ä»¶æ‰©å±•åè‡ªåŠ¨åˆ¤åˆ«ç¼–ç¨‹è¯­è¨€ã€‚æ”¯æŒä»£ç ç¼©è¿›ã€ä»£ç é«˜äº®ç­‰åŠŸèƒ½ã€‚ ä½¿ç”¨æ–¹å¼ï¼švim filename æ¨¡å¼ ä¸€èˆ¬å‘½ä»¤æ¨¡å¼ ç¼–è¾‘æ¨¡å¼ åœ¨ä¸€èˆ¬å‘½ä»¤æ¨¡å¼é‡ŒæŒ‰ä¸‹iï¼Œä¼šè¿›å…¥ç¼–è¾‘æ¨¡å¼ã€‚ æŒ‰ä¸‹ESCä¼šé€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œè¿”å›åˆ°ä¸€èˆ¬å‘½ä»¤æ¨¡å¼ã€‚ å‘½ä»¤è¡Œæ¨¡å¼ åœ¨ä¸€èˆ¬å‘½ä»¤æ¨¡å¼é‡ŒæŒ‰ä¸‹:/?ä¸‰ä¸ªå­—æ¯ä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œä¼šè¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ã€‚ å‘½ä»¤è¡Œåœ¨æœ€ä¸‹é¢ã€‚ å¯ä»¥æŸ¥æ‰¾ã€æ›¿æ¢ã€ä¿å­˜ã€é€€å‡ºã€é…ç½®ç¼–è¾‘å™¨ç­‰ã€‚ å¼‚å¸¸å¤„ç† æ¯æ¬¡ç”¨vimç¼–è¾‘æ–‡ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª.filename.swpçš„ä¸´æ—¶æ–‡ä»¶ã€‚ å¦‚æœæ‰“å¼€æŸä¸ªæ–‡ä»¶æ—¶ï¼Œè¯¥ä¸´æ—¶æ–‡ä»¶swpæ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚æ­¤æ—¶è§£å†³åŠæ³•æœ‰ä¸¤ç§ï¼š æ‰¾åˆ°æ­£åœ¨æ‰“å¼€è¯¥æ–‡ä»¶çš„ç¨‹åºï¼Œå¹¶é€€å‡º ç›´æ¥åˆ æ‰è¯¥swpæ–‡ä»¶å³å¯ ","date":"2023-06-16","objectID":"/posts/computer/vim%E6%95%99%E7%A8%8B/:1:0","tags":["Computer","å·¥å…·","Linux"],"title":"Vimæ•™ç¨‹","uri":"/posts/computer/vim%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"å¸¸ç”¨æ“ä½œ iï¼šè¿›å…¥ç¼–è¾‘æ¨¡å¼ i:åœ¨å…‰æ ‡æ‰€åœ¨å­—ç¬¦å‰å¼€å§‹æ’å…¥ a:åœ¨å…‰æ ‡æ‰€åœ¨å­—ç¬¦åå¼€å§‹æ’å…¥ o:åœ¨å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸‹é¢å¦èµ·ä¸€æ–°è¡Œæ’å…¥ s:åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„å­—ç¬¦å¹¶å¼€å§‹æ’å…¥ ESCï¼šè¿›å…¥ä¸€èˆ¬å‘½ä»¤æ¨¡å¼ ç§»åŠ¨æ“ä½œ h æˆ– å·¦ç®­å¤´é”®ï¼šå…‰æ ‡å‘å·¦ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ j æˆ– å‘ä¸‹ç®­å¤´ï¼šå…‰æ ‡å‘ä¸‹ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ k æˆ– å‘ä¸Šç®­å¤´ï¼šå…‰æ ‡å‘ä¸Šç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ l æˆ– å‘å³ç®­å¤´ï¼šå…‰æ ‡å‘å³ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ w : è·³ä¸‹ä¸€ä¸ªå•è¯ bï¼šå›é€€ä¸Šä¸ªå•è¯ %ï¼šè·³æ‹¬å· å›ºå®šè¡Œï¼Œåœ¨è¡Œé—´ç§»åŠ¨ n\u003cSpace\u003eï¼šnè¡¨ç¤ºæ•°å­—ï¼ŒæŒ‰ä¸‹æ•°å­—åå†æŒ‰ç©ºæ ¼ï¼Œå…‰æ ‡ä¼šå‘å³ç§»åŠ¨è¿™ä¸€è¡Œçš„nä¸ªå­—ç¬¦ 0 æˆ– åŠŸèƒ½é”®[Home]ï¼šå…‰æ ‡ç§»åŠ¨åˆ°æœ¬è¡Œå¼€å¤´ $æˆ– åŠŸèƒ½é”®[End]ï¼šå…‰æ ‡ç§»åŠ¨åˆ°æœ¬è¡Œæœ«å°¾ å…¨æ–‡å†…å®¹ï¼Œç§»åŠ¨åˆ°æŸè¡Œ ggï¼šå…‰æ ‡ç§»åŠ¨åˆ°ç¬¬ä¸€è¡Œï¼Œç›¸å½“äº1G Gï¼šå…‰æ ‡ç§»åŠ¨åˆ°æœ€åä¸€è¡Œ :n æˆ– nGï¼šnä¸ºæ•°å­—ï¼Œå…‰æ ‡ç§»åŠ¨åˆ°ç¬¬nè¡Œ n\u003cEnter\u003eï¼šnä¸ºæ•°å­—ï¼Œå…‰æ ‡å‘ä¸‹ç§»åŠ¨nè¡Œ æŸ¥æ‰¾æ“ä½œ /wordï¼šå‘å…‰æ ‡ä¹‹ä¸‹å¯»æ‰¾ç¬¬ä¸€ä¸ªå€¼ä¸ºwordçš„å­—ç¬¦ä¸²ã€‚ ?wordï¼šå‘å…‰æ ‡ä¹‹ä¸Šå¯»æ‰¾ç¬¬ä¸€ä¸ªå€¼ä¸ºwordçš„å­—ç¬¦ä¸²ã€‚ :n1,n2s/word1/word2/gï¼šn1ä¸n2ä¸ºæ•°å­—ï¼Œåœ¨ç¬¬n1è¡Œä¸n2è¡Œä¹‹é—´å¯»æ‰¾word1è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶å°†è¯¥å­—ç¬¦ä¸²æ›¿æ¢ä¸ºword2 :1,$s/word1/word2/gï¼šå°†å…¨æ–‡çš„word1æ›¿æ¢ä¸ºword2 :1,$s/word1/word2/gcï¼šå°†å…¨æ–‡çš„word1æ›¿æ¢ä¸ºword2ï¼Œä¸”åœ¨æ›¿æ¢å‰è¦æ±‚ç”¨æˆ·ç¡®è®¤ã€‚ nï¼šé‡å¤å‰ä¸€ä¸ªæŸ¥æ‰¾æ“ä½œ Nï¼šåå‘é‡å¤å‰ä¸€ä¸ªæŸ¥æ‰¾æ“ä½œ å¤åˆ¶ç²˜è´´ï¼Œåˆ é™¤æ“ä½œ vï¼šé€‰ä¸­æ–‡æœ¬ dï¼šåˆ é™¤é€‰ä¸­çš„æ–‡æœ¬; dawåˆ é™¤å•è¯ dd: åˆ é™¤å½“å‰è¡Œ yï¼šå¤åˆ¶é€‰ä¸­çš„æ–‡æœ¬ yy: å¤åˆ¶å½“å‰è¡Œ p: å°†å¤åˆ¶çš„æ•°æ®åœ¨å…‰æ ‡çš„ä¸‹ä¸€è¡Œ/ä¸‹ä¸€ä¸ªä½ç½®ç²˜è´´ uï¼šæ’¤é”€ Ctrl + rï¼šå–æ¶ˆæ’¤é”€ ä¿å­˜æ“ä½œ :wä¿å­˜ :w! å¼ºåˆ¶ä¿å­˜ :q é€€å‡º :q! å¼ºåˆ¶é€€å‡º :wq ä¿å­˜å¹¶é€€å‡º æ ¼å¼åŒ–æ“ä½œ set paste è®¾ç½®æˆç²˜è´´æ¨¡å¼ï¼Œå–æ¶ˆä»£ç è‡ªåŠ¨ç¼©è¿› :set nopaste å–æ¶ˆç²˜è´´æ¨¡å¼ï¼Œå¼€å¯ä»£ç è‡ªåŠ¨ç¼©è¿› \u003eï¼šå°†é€‰ä¸­çš„æ–‡æœ¬æ•´ä½“å‘å³ç¼©è¿›ä¸€æ¬¡ \u003cï¼šå°†é€‰ä¸­çš„æ–‡æœ¬æ•´ä½“å‘å·¦ç¼©è¿›ä¸€æ¬¡ :set nu æ˜¾ç¤ºè¡Œå· :set nonu éšè—è¡Œå· gg=Gï¼šå°†å…¨æ–‡ä»£ç æ ¼å¼åŒ– :noh å…³é—­æŸ¥æ‰¾å…³é”®è¯é«˜äº® Ctrl + qï¼šå½“vimå¡æ­»æ—¶ï¼Œå¯ä»¥å–æ¶ˆå½“å‰æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤ ","date":"2023-06-16","objectID":"/posts/computer/vim%E6%95%99%E7%A8%8B/:2:0","tags":["Computer","å·¥å…·","Linux"],"title":"Vimæ•™ç¨‹","uri":"/posts/computer/vim%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"å¸¸ç”¨æŠ€å·§ ","date":"2023-06-16","objectID":"/posts/computer/vim%E6%95%99%E7%A8%8B/:3:0","tags":["Computer","å·¥å…·","Linux"],"title":"Vimæ•™ç¨‹","uri":"/posts/computer/vim%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":".èŒƒå¼ # h $a;\u003cesc\u003e # $ -\u003e åˆ°è¡Œå°¾ï¼› a -\u003e åœ¨å…‰æ ‡æ‰€åœ¨å­—ç¬¦åå¼€å§‹æ’å…¥ $aç­‰ä»·A j$. # j -\u003e å…‰æ ‡ä¸‹ç§»ï¼› .ï¼š-\u003e é‡å¤æ“ä½œç›¸å½“äº(a;\u003cesc\u003e) # åœ¨ä¸€ä¸ªå­—ç¬¦å‰åæ·»åŠ ä¸€ä¸ªç©ºæ ¼,ç¤ºä¾‹+å· f+ # f -\u003e å½“å‰è¡Œä¸­å‘åæŸ¥æ‰¾ä¸‹ä¸€ä¸ªæŒ‡å®šå­—ç¬¦ï¼Œè¿™é‡Œæ˜¯+ s\u003cspace\u003e+\u003cspace\u003e\u003cesc\u003e # s -\u003e åˆ é™¤å¹¶è¿›å…¥æ’å…¥æ¨¡å¼ ;. # ; -\u003e é‡å¤ä¸Šä¸€æ¬¡fæŸ¥æ‰¾å‘½ä»¤çš„å­—ç¬¦ # æŸ¥æ‰¾æ›¿æ¢ å°†contentæ›¿æ¢æˆcopy; ä¹Ÿå¯ä»¥ä½¿ç”¨ :%s/content/copy/gc /content # /content -\u003e æŸ¥æ‰¾contentå­—ç¬¦ * # * -\u003e æœç´¢å‘½ä»¤ï¼Œç”¨äºåœ¨å½“å‰å…‰æ ‡ä½ç½®å‘åæŸ¥æ‰¾ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹; cw # cw -\u003e åˆ é™¤å½“å‰å•è¯å¹¶è¿›å…¥æ’å…¥æ¨¡å¼ copy\u003cesc\u003e n. # n -\u003e é‡å¤ä¸Šä¸€æ¬¡æœç´¢å‘½ä»¤(*) . -\u003e (cw copy\u003cesc\u003e) ","date":"2023-06-16","objectID":"/posts/computer/vim%E6%95%99%E7%A8%8B/:3:1","tags":["Computer","å·¥å…·","Linux"],"title":"Vimæ•™ç¨‹","uri":"/posts/computer/vim%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"vi + ctags ctags -R # å…¨å±€ä»£ç ç´¢å¼•æ–‡ä»¶ crtl+] # è·³è½¬å‡½æ•°æˆ–å˜é‡å®šä¹‰ g crtl+] # è·³è½¬ç›¸åŒå‡½æ•°æˆ–å˜é‡å®šä¹‰ crtl+o # è¿”å› vim -t function_name # ç›´æ¥è·³è½¬åˆ°è¯¥å‡½æ•° ","date":"2023-06-16","objectID":"/posts/computer/vim%E6%95%99%E7%A8%8B/:3:2","tags":["Computer","å·¥å…·","Linux"],"title":"Vimæ•™ç¨‹","uri":"/posts/computer/vim%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"é…ç½®æ–‡ä»¶ \"è¯­æ³•é«˜äº® syntax on \"å¯ç”¨é¼ æ ‡ if has(\"autocmd\") au BufReadPost * if line(\"'\\\"\") \u003e 1 \u0026\u0026 line(\"'\\\"\") \u003c= line(\"$\") | exe \"normal! g'\\\"\" | endif set mouse=a endif \"æ˜¾ç¤ºæ‹¬å·åŒ¹é… set showmatch \"ç¼©è¿› set cindent set autoindent set shiftwidth=4 \"æ˜¾ç¤ºç»ˆç«¯ set showcmd \" è®¾ç½®tab set ts=4 set expandtab \"æ‹¬å·åŒ¹é… inoremap { {}\u003cLeft\u003e noremap {\u003cCR\u003e {\u003cCR\u003e}\u003cEsc\u003eO inoremap { { inoremap {} {} ","date":"2023-06-16","objectID":"/posts/computer/vim%E6%95%99%E7%A8%8B/:4:0","tags":["Computer","å·¥å…·","Linux"],"title":"Vimæ•™ç¨‹","uri":"/posts/computer/vim%E6%95%99%E7%A8%8B/"},{"categories":["Computer"],"content":"Linxå¸¸ç”¨æŒ‡ä»¤","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"LinuxåŸºç¡€ ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:1:0","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"1. Linuxå¯åŠ¨ å†…æ ¸å¼•å¯¼ã€‚ è¿è¡Œ initã€‚ ç³»ç»Ÿåˆå§‹åŒ–ã€‚ å»ºç«‹ç»ˆç«¯ ã€‚ ç”¨æˆ·ç™»å½•ç³»ç»Ÿã€‚ ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:2:0","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"2. å¸¸ç”¨æ–‡ä»¶ç®¡ç†å‘½ä»¤ ls: åˆ—å‡ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼Œè“è‰²çš„æ˜¯æ–‡ä»¶å¤¹ï¼Œç™½è‰²çš„æ˜¯æ™®é€šæ–‡ä»¶ï¼Œç»¿è‰²çš„æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ ls -aï¼šæŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶åŒ…æ‹¬éšè—æ–‡ä»¶ï¼ˆä»¥.å¼€å¤´çš„æ–‡ä»¶å°±æ˜¯éšè—æ–‡ä»¶ï¼‰ ls -lï¼šæŸ¥çœ‹å½“å‰è·¯å¾„ä¸‹æ–‡ä»¶çš„è¯»ã€å†™ã€æ‰§è¡Œæƒé™ ls | wc -lï¼šæŸ¥çœ‹lsä¸‹æœ‰å¤šå°‘ä¸ªæ–‡ä»¶ pwd: æ˜¾ç¤ºå½“å‰è·¯å¾„ cd XXX: è¿›å…¥XXXç›®å½•ä¸‹, cd .. è¿”å›ä¸Šå±‚ç›®å½• .ï¼šå½“å‰ç›®å½•ï¼› ..ï¼šä¸Šçº§ç›®å½• ~ï¼šå®¶ç›®å½•ï¼Œå›åˆ°è·¯å¾„/home/acsä¸‹ cd -ï¼šè¿”å›æ”¹å˜è·¯å¾„å‰çš„è·¯å¾„ cp XXX YYY: å°†XXXæ–‡ä»¶å¤åˆ¶æˆYYYï¼ŒXXXå’ŒYYYå¯ä»¥æ˜¯ä¸€ä¸ªè·¯å¾„ mkdir XXX: åˆ›å»ºç›®å½•XXX mkdir -pï¼šå¦‚æœæ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º rm XXX: åˆ é™¤æ™®é€šæ–‡ä»¶; rm XXX -r: åˆ é™¤æ–‡ä»¶å¤¹; rm *./txtï¼šåˆ é™¤æ‰€æœ‰åŒç±»æ–‡ä»¶æ¯”å¦‚txtæ ¼å¼ rm *ï¼šåˆ é™¤æ‰€æœ‰æ–‡ä»¶ï¼ˆä¸åŒ…æ‹¬æ–‡ä»¶å¤¹ï¼‰ rm * -r ï¼šåˆ é™¤æ‰€æœ‰æ–‡ä»¶å¤¹ rmkdirï¼šåˆ é™¤ä¸€ä¸ªç©ºçš„ç›®å½• mv XXX YYY: å°†XXXæ–‡ä»¶ç§»åŠ¨åˆ°YYYï¼Œå’Œcpå‘½ä»¤ä¸€æ ·ï¼ŒXXXå’ŒYYYå¯ä»¥æ˜¯ä¸€ä¸ªè·¯å¾„ï¼›é‡å‘½åä¹Ÿæ˜¯ç”¨è¿™ä¸ªå‘½ä»¤ touch XXX: åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ cat XXX: å±•ç¤ºæ–‡ä»¶XXXä¸­çš„å†…å®¹ tacæœ€åä¸€è¡Œå¼€å§‹æ˜¾ç¤º ; nlæ˜¾ç¤ºåŒæ—¶å¸¦è¡Œå· å¤åˆ¶æ–‡æœ¬ï¼šwindows/Linuxä¸‹ï¼šCtrl + insertï¼ŒMacä¸‹ï¼šcommand + c ç²˜è´´æ–‡æœ¬ï¼šwindows/Linuxä¸‹ï¼šShift + insertï¼ŒMacä¸‹ï¼šcommand + v clearæ¸…å± historyï¼šæŸ¥çœ‹å†å²è¾“å…¥æŒ‡ä»¤ treeï¼šä»¥æ ‘å½¢æ˜¾ç¤ºæ–‡ä»¶ç›®å½•ç»“æ„ file xxxï¼šæŸ¥çœ‹æ–‡ä»¶å±æ€§ where/which xxxï¼šæŸ¥çœ‹xxxåœ¨å“ª ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:3:0","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"3. ç¯å¢ƒå˜é‡ ç¯å¢ƒå˜é‡ç±»ä¼¼äºå…¨å±€å˜é‡ï¼Œå¯ä»¥è¢«å„ä¸ªè¿›ç¨‹è®¿é—®åˆ°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ç¯å¢ƒå˜é‡æ¥æ–¹ä¾¿åœ°ä¿®æ”¹ç³»ç»Ÿé…ç½®ã€‚ æŸ¥çœ‹ åˆ—å‡ºå½“å‰ç¯å¢ƒä¸‹çš„æ‰€æœ‰ç¯å¢ƒå˜é‡ï¼š env # æ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„å˜é‡ set # æ˜¾ç¤ºå½“å‰shellçš„å˜é‡ï¼ŒåŒ…æ‹¬å½“å‰ç”¨æˆ·çš„å˜é‡; export # æ˜¾ç¤ºå½“å‰å¯¼å‡ºæˆç”¨æˆ·å˜é‡çš„shellå˜é‡ è¾“å‡ºæŸä¸ªç¯å¢ƒå˜é‡çš„å€¼ï¼š echo $PATH ä¿®æ”¹ ä¸ºäº†å°†å¯¹ç¯å¢ƒå˜é‡çš„ä¿®æ”¹åº”ç”¨åˆ°æœªæ¥æ‰€æœ‰ç¯å¢ƒä¸‹ï¼Œå¯ä»¥å°†ä¿®æ”¹å‘½ä»¤æ”¾åˆ°~/.bashrcæ–‡ä»¶ä¸­ã€‚ ä¿®æ”¹å®Œ~/.bashrcæ–‡ä»¶åï¼Œè®°å¾—æ‰§è¡Œsource ~/.bashrcï¼Œæ¥å°†ä¿®æ”¹åº”ç”¨åˆ°å½“å‰çš„bashç¯å¢ƒä¸‹ã€‚ declareè®¾ç½®ç¯å¢ƒå˜é‡ declare [+/-][é€‰é¡¹] [å˜é‡å=å˜é‡å€¼] unset \u003cå¾…æ¸…é™¤ç¯å¢ƒå˜é‡\u003e å¸¸è§ç¯å¢ƒå˜é‡ HOMEï¼šç”¨æˆ·çš„å®¶ç›®å½•ã€‚ PATHï¼šå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå‘½ä»¤ï¼‰çš„å­˜å‚¨è·¯å¾„ã€‚è·¯å¾„ä¸è·¯å¾„ä¹‹é—´ç”¨:åˆ†éš”ã€‚å½“æŸä¸ªå¯æ‰§è¡Œæ–‡ä»¶åŒæ—¶å‡ºç°åœ¨å¤šä¸ªè·¯å¾„ä¸­æ—¶ï¼Œä¼šé€‰æ‹©ä»å·¦åˆ°å³æ•°ç¬¬ä¸€ä¸ªè·¯å¾„ä¸­çš„æ‰§è¡Œã€‚ä¸‹åˆ—æ‰€æœ‰å­˜å‚¨è·¯å¾„çš„ç¯å¢ƒå˜é‡ï¼Œå‡é‡‡ç”¨ä»å·¦åˆ°å³çš„ä¼˜å…ˆé¡ºåºã€‚ LD_LIBRARY_PATHï¼šç”¨äºæŒ‡å®šåŠ¨æ€é“¾æ¥åº“(.soæ–‡ä»¶)çš„è·¯å¾„ï¼Œå…¶å†…å®¹æ˜¯ä»¥å†’å·åˆ†éš”çš„è·¯å¾„åˆ—è¡¨ã€‚ C_INCLUDE_PATHï¼šCè¯­è¨€çš„å¤´æ–‡ä»¶è·¯å¾„ï¼Œå†…å®¹æ˜¯ä»¥å†’å·åˆ†éš”çš„è·¯å¾„åˆ—è¡¨ã€‚ CPLUS_INCLUDE_PATHï¼šCPPçš„å¤´æ–‡ä»¶è·¯å¾„ï¼Œå†…å®¹æ˜¯ä»¥å†’å·åˆ†éš”çš„è·¯å¾„åˆ—è¡¨ã€‚ PYTHONPATHï¼šPythonå¯¼å…¥åŒ…çš„è·¯å¾„ï¼Œå†…å®¹æ˜¯ä»¥å†’å·åˆ†éš”çš„è·¯å¾„åˆ—è¡¨ã€‚ JAVA_HOMEï¼šjdkçš„å®‰è£…ç›®å½•ã€‚ CLASSPATHï¼šå­˜æ”¾Javaå¯¼å…¥ç±»çš„è·¯å¾„ï¼Œå†…å®¹æ˜¯ä»¥å†’å·åˆ†éš”çš„è·¯å¾„åˆ—è¡¨ã€‚ ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:4:0","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"moduleå·¥å…·ç®± å¸¸ç”¨å‘½ä»¤ è¯´æ˜ module av | avail æ˜¾ç¤ºå¯ä½¿ç”¨æ¨¡å— module li | list æ˜¾ç¤ºå·²åŠ è½½æ¨¡å— module load |add [modulefile] åŠ è½½æ¨¡å— module unload |rm [modulefile] å¸è½½æ¨¡å— module purge æ¸…ç†è¯´æœ‰å·²åŠ è½½æ¨¡å— module show|display [modulefile] æŸ¥è¯¢é…ç½®ä¿¡æ¯ module use [modulefile] ä½¿ç”¨å…¶ä»–module path module switch|swap [modulefile1] [modulefile2] åˆ‡æ¢modulefile ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:4:1","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"4. å¸¸ç”¨å‘½ä»¤ linux-command Linuxå‘½ä»¤æ‰‹å†Œ ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:5:0","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"å¸¸ç”¨ç»ˆç«¯å¿«æ·é”® ctrl c: å–æ¶ˆå‘½ä»¤ï¼Œå¹¶ä¸”æ¢è¡Œ ctrl d:å…³é—­ç»ˆç«¯ crtl l: æ¸…ç©ºç»ˆç«¯ (ä¹Ÿå¯è¾“å…¥clear) ctrl u: æ“¦é™¤ä»å½“å‰å…‰æ ‡ä½ç½®åˆ°è¡Œé¦–çš„å…¨éƒ¨å†…å®¹ ctrl k: æ“¦é™¤ä»å½“å‰å…‰æ ‡ä½ç½®åˆ°è¡Œå°¾çš„å…¨éƒ¨å†…å®¹ crtl w: æ“¦é™¤å…‰æ ‡ä½ç½®å‰çš„å•è¯ crtl y: ç²˜è´´ä½¿ç”¨å‰ä¸‰ç§æŸ¥å‡ºæ–¹å¼çš„æ–‡æœ¬ã€‚ï¼ˆè¯¯åˆ çš„æ—¶å€™æ´¾ä¸Šç”¨åœºï¼‰ crtl a: ç§»åŠ¨å…‰æ ‡åˆ°è¡Œé¦– crtl e: ç§»åŠ¨å…‰æ ‡åˆ°è¡Œå°¾ tabé”®ï¼šå¯ä»¥è¡¥å…¨å‘½ä»¤å’Œæ–‡ä»¶åï¼Œå¦‚æœè¡¥å…¨ä¸äº†å¿«é€ŸæŒ‰ä¸¤ä¸‹tabé”®ï¼Œå¯ä»¥æ˜¾ç¤ºå¤‡é€‰é€‰é¡¹ ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:5:1","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"4.1 ç³»ç»ŸçŠ¶å†µ topï¼šæŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹çš„ä¿¡æ¯ï¼ˆLinuxçš„ä»»åŠ¡ç®¡ç†å™¨ï¼‰ æ‰“å¼€åï¼Œè¾“å…¥Mï¼šæŒ‰ä½¿ç”¨å†…å­˜æ’åº æ‰“å¼€åï¼Œè¾“å…¥Pï¼šæŒ‰ä½¿ç”¨CPUæ’åº æ‰“å¼€åï¼Œè¾“å…¥qï¼šé€€å‡º df -hï¼šæŸ¥çœ‹ç¡¬ç›˜ä½¿ç”¨æƒ…å†µ free -hï¼šæŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ du -shï¼šæŸ¥çœ‹å½“å‰ç›®å½•å ç”¨çš„ç¡¬ç›˜ç©ºé—´ du -shc *:æŸ¥çœ‹å½“å‰å­ç›®å½•å ç”¨çš„ç¡¬ç›˜ç©ºé—´ du -h --max-depth=1 ~/ï¼šhome ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„å¤§å°ï¼Œä½†åªæ˜¾ç¤ºä¸€å±‚ç›®å½•æ·±åº¦ du -h -d 1 /var/lib/docker/overlay2 | grep -E \"G\\b\"ï¼šåªæ˜¾ç¤ºå¤§å°ä¸­åŒ…å«ä»¥ G ç»“å°¾çš„æ•´ä¸ªå•è¯ ps auxï¼šæŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹ ps aux | grep xxxï¼šä½¿ç”¨ç®¡é“æŸ¥çœ‹å…·ä½“xxxè¿›ç¨‹ ps -ef | grep xxxï¼šæ›´è¯¦ç»† kill -9 pidï¼šæ€æ­»ç¼–å·ä¸ºpidçš„è¿›ç¨‹ ä¼ é€’æŸä¸ªå…·ä½“çš„ä¿¡å·ï¼škill -s SIGTERM pid netstat -ntï¼šæŸ¥çœ‹æ‰€æœ‰ç½‘ç»œè¿æ¥ netstat -nlp | grep 22ï¼šæŸ¥çœ‹22ç«¯å£å·æ˜¯å¦è¢«å ç”¨ æŸ¥çœ‹ç½‘ç»œè®¾ç½®ï¼šnetsh wlan show profiles å…·ä½“è®¾ç½®ï¼šwlan show profiles wifiåç§° key=clear wï¼šåˆ—å‡ºå½“å‰ç™»é™†çš„ç”¨æˆ· ping www.baidu.comï¼šæ£€æŸ¥æ˜¯å¦è¿ç½‘ ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:5:2","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"4.2 æ–‡ä»¶æƒé™ chownï¼šæ›´æ”¹æ–‡ä»¶å±æ€§ chown bin xxxï¼šå°†xxxçš„æ‹¥æœ‰è€…æ”¹ä¸ºbinè´¦å· chown root:root xxxï¼šå°†xxxæ‹¥æœ‰è€…ä¸ç¾¤ç»„æ”¹å›root chmodï¼šä¿®æ”¹æ–‡ä»¶æƒé™ drwxrwxrwx10ä½ ç¬¬ä¸€ä½dæ˜¯ä¸æ˜¯æ–‡ä»¶å¤¹ï¼Œè¶…é“¾æ¥ ç¬¬ä¸€ç»„rwxï¼šè‡ªå·±â€”â€”å¯è¯»ï¼Œå¯å†™ï¼Œå¯æ‰§è¡Œ äºŒè¿›åˆ¶ï¼ˆrwx 111å¯¹åº”7ï¼‰ ç¬¬äºŒç»„rwxï¼šåŒç»„â€”â€”å¯è¯»ï¼Œå¯å†™ï¼Œå¯æ‰§è¡Œ ç¬¬ä¸‰ç»„rwxï¼šå…¶ä»–â€”â€”å¯è¯»ï¼Œå¯å†™ï¼Œå¯æ‰§è¡Œ chmod +x xxxï¼šç»™xxxæ·»åŠ å¯æ‰§è¡Œæƒé™ chmod -x xxxï¼šå»æ‰xxxçš„å¯æ‰§è¡Œæƒé™ chmod 777 xxxï¼šå°†xxxçš„æƒé™æ”¹æˆ777 chmod 777 xxx -Rï¼šé€’å½’ä¿®æ”¹æ•´ä¸ªæ–‡ä»¶å¤¹çš„æƒé™ chgrpï¼šæ›´æ”¹æ–‡ä»¶å±ç»„ file: æŸ¥çœ‹æ–‡ä»¶ç±»å‹ statï¼šæŸ¥çœ‹æ–‡ä»¶å±æ€§ ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:5:3","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"4.3 æ–‡ä»¶æ£€ç´¢ find /path/to/directory/ -name '*.py'ï¼šæœç´¢æŸä¸ªæ–‡ä»¶è·¯å¾„ä¸‹çš„æ‰€æœ‰*.pyæ–‡ä»¶ find . -path \"./envs\" -prune -o -name \"libatomic.a\" -print:åŒæ—¶æ’é™¤ç‰¹å®šçš„ç›®å½•envs grep xxxï¼šä»stdinä¸­è¯»å…¥è‹¥å¹²è¡Œæ•°æ®ï¼Œå¦‚æœæŸè¡Œä¸­åŒ…å«xxxï¼Œåˆ™è¾“å‡ºè¯¥è¡Œï¼›å¦åˆ™å¿½ç•¥è¯¥è¡Œã€‚ find XXX/ -name '*.cpp' | xargs cat | grep xxxåœ¨XXXæ–‡ä»¶å¤¹çš„cppæ–‡ä»¶æœç´¢xxx wcï¼šç»Ÿè®¡è¡Œæ•°ã€å•è¯æ•°ã€å­—èŠ‚æ•° æ—¢å¯ä»¥ä»stdinä¸­ç›´æ¥è¯»å…¥å†…å®¹ï¼›ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œå‚æ•°ä¸­ä¼ å…¥æ–‡ä»¶ååˆ—è¡¨ï¼› wc -lï¼šç»Ÿè®¡è¡Œæ•° wc -wï¼šç»Ÿè®¡å•è¯æ•° wc -cï¼šç»Ÿè®¡å­—èŠ‚æ•° treeï¼šå±•ç¤ºå½“å‰ç›®å½•çš„æ–‡ä»¶ç»“æ„ tree /path/to/directory/ï¼šå±•ç¤ºæŸä¸ªç›®å½•çš„æ–‡ä»¶ç»“æ„ tree -aï¼šå±•ç¤ºéšè—æ–‡ä»¶ ag xxxï¼šæœç´¢å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œæ£€ç´¢xxxå­—ç¬¦ä¸² agå‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£ cutï¼šåˆ†å‰²ä¸€è¡Œå†…å®¹ ä»stdinä¸­è¯»å…¥å¤šè¡Œæ•°æ® echo $PATH | cut -d ':' -f 3,5ï¼šè¾“å‡ºPATHç”¨:åˆ†å‰²åç¬¬3ã€5åˆ—æ•°æ® echo $PATH | cut -d ':' -f 3-5ï¼šè¾“å‡ºPATHç”¨:åˆ†å‰²åç¬¬3-5åˆ—æ•°æ® echo $PATH | cut -c 3,5ï¼šè¾“å‡ºPATHçš„ç¬¬3ã€5ä¸ªå­—ç¬¦ echo $PATH | cut -c 3-5ï¼šè¾“å‡ºPATHçš„ç¬¬3-5ä¸ªå­—ç¬¦ sortï¼šå°†æ¯è¡Œå†…å®¹æŒ‰å­—å…¸åºæ’åº å¯ä»¥ä»stdinä¸­è¯»å–å¤šè¡Œæ•°æ® å¯ä»¥ä»å‘½ä»¤è¡Œå‚æ•°ä¸­è¯»å–æ–‡ä»¶ååˆ—è¡¨ xargsï¼šå°†stdinä¸­çš„æ•°æ®ç”¨ç©ºæ ¼æˆ–å›è½¦åˆ†å‰²æˆå‘½ä»¤è¡Œå‚æ•° find . -name '*.py' | xargs cat | wc -lï¼šç»Ÿè®¡å½“å‰ç›®å½•ä¸‹æ‰€æœ‰pythonæ–‡ä»¶çš„æ€»è¡Œæ•° ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:5:4","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"4.4 æŸ¥çœ‹æ–‡ä»¶å†…å®¹ moreï¼šæµè§ˆæ–‡ä»¶å†…å®¹ å›è½¦ï¼šä¸‹ä¸€è¡Œ ç©ºæ ¼ï¼šä¸‹ä¸€é¡µ bï¼šä¸Šä¸€é¡µ qï¼šé€€å‡º lessï¼šä¸moreç±»ä¼¼ï¼ŒåŠŸèƒ½æ›´å…¨ å›è½¦ï¼šä¸‹ä¸€è¡Œ yï¼šä¸Šä¸€è¡Œ Page Downï¼šä¸‹ä¸€é¡µ Page Upï¼šä¸Šä¸€é¡µ qï¼šé€€å‡º head -3 xxxï¼šå±•ç¤ºxxxçš„å‰3è¡Œå†…å®¹ åŒæ—¶æ”¯æŒä»stdinè¯»å…¥å†…å®¹ tail -3 xxxï¼šå±•ç¤ºxxxæœ«å°¾3è¡Œå†…å®¹ åŒæ—¶æ”¯æŒä»stdinè¯»å…¥å†…å®¹ tail -n 5 xxxï¼šæŸ¥çœ‹xxxå°¾éƒ¨5è¡Œå†…å®¹ (å¸¸ç”¨äºæ—¥å¿—) tail -f xxxï¼šå®æ—¶è¿½è¸ªè¯¥xxxæ–‡æ¡£çš„æ‰€æœ‰æ›´æ–° (å¸¸ç”¨äº flume é‡‡é›†æ•°æ®) ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:5:5","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"4.5 ç”¨æˆ·ç›¸å…³ historyï¼šå±•ç¤ºå½“å‰ç”¨æˆ·çš„å†å²æ“ä½œã€‚å†…å®¹å­˜æ”¾åœ¨~/.bash_historyä¸­ ç»ˆç«¯ä¸­ç²˜è´´å­—ç¬¦æ—¶å¤´å°¾å‡ºç°â€œ0~â€œå’Œâ€œ1~â€œçš„ç‰¹æ®Šå­—ç¬¦ : printf \"\\e[?2004l\" ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:5:6","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"4.6 å·¥å…· md5sumï¼šè®¡ç®—md5å“ˆå¸Œå€¼ å¯ä»¥ä»stdinè¯»å…¥å†…å®¹ ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œå‚æ•°ä¸­ä¼ å…¥æ–‡ä»¶ååˆ—è¡¨ï¼› time commandï¼šç»Ÿè®¡commandå‘½ä»¤çš„æ‰§è¡Œæ—¶é—´ ipython3ï¼šäº¤äº’å¼python3ç¯å¢ƒã€‚å¯ä»¥å½“åšè®¡ç®—å™¨ï¼Œæˆ–è€…æ‰¹é‡ç®¡ç†æ–‡ä»¶ã€‚ ! echo \"Hello World\"ï¼š!è¡¨ç¤ºæ‰§è¡Œshellè„šæœ¬ watch -n 0.1 commandï¼šæ¯0.1ç§’æ‰§è¡Œä¸€æ¬¡commandå‘½ä»¤ tarï¼šå‹ç¼©æ–‡ä»¶ tar -zcvf xxx.tar.gz /path/to/file/*ï¼šå‹ç¼© tar -zxvf xxx.tar.gzï¼šè§£å‹ç¼© tar -zxvf xxx.tar.gz -C yyyï¼šè§£å‹åˆ°æŒ‡å®šç›®å½• yyy ä¸­ diff xxx yyyï¼šæŸ¥æ‰¾æ–‡ä»¶xxxä¸yyyçš„ä¸åŒç‚¹ rpm2cpio demo.rpm | cpio -idmv ï¼šè§£å‹demo.rmpæ–‡ä»¶ ln -s /usr/home/file /usr/home/abc ï¼šè½¯è¿æ¥: åœ¨ç›®å½•/usr/homeä¸‹å»ºç«‹ä¸€ä¸ªç¬¦å·é“¾æ¥æ–‡ä»¶abcï¼Œä½¿å®ƒæŒ‡å‘ç›®å½•/usr/home/file scp source@host:filename targt@host:filenameï¼šè¿œç¨‹æ‹·è´æ–‡ä»¶ [æºæ–‡ä»¶] [ç›®æ ‡æ–‡ä»¶] sz demo:ä¸‹è½½æ–‡ä»¶ strace ./demoï¼šç”¨äºè·Ÿè¸ªè¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨ä»¥åŠæ¥æ”¶å’Œå‘é€åˆ°å†…æ ¸çš„ä¿¡å· ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:5:7","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"4.7 å®‰è£…è½¯ä»¶ sudo commandï¼šä»¥rootèº«ä»½æ‰§è¡Œcommandå‘½ä»¤ apt-get install xxxï¼šå®‰è£…è½¯ä»¶ pip install xxx --user --upgradeï¼šå®‰è£…pythonåŒ… yumå¸¸ç”¨å‘½ä»¤ åˆ—å‡ºæ‰€æœ‰å¯æ›´æ–°çš„è½¯ä»¶æ¸…å•å‘½ä»¤ï¼šyum check-update æ›´æ–°æ‰€æœ‰è½¯ä»¶å‘½ä»¤ï¼šyum update ä»…å®‰è£…æŒ‡å®šçš„è½¯ä»¶å‘½ä»¤ï¼šyum install \u003cpackage_name\u003e ä»…æ›´æ–°æŒ‡å®šçš„è½¯ä»¶å‘½ä»¤ï¼šyum update \u003cpackage_name\u003e åˆ—å‡ºæ‰€æœ‰å¯å®‰è£çš„è½¯ä»¶æ¸…å•å‘½ä»¤ï¼šyum list åˆ é™¤è½¯ä»¶åŒ…å‘½ä»¤ï¼šyum remove \u003cpackage_name\u003e æŸ¥æ‰¾è½¯ä»¶åŒ…å‘½ä»¤ï¼šyum search \u003ckeyword\u003e ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:5:8","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"5. ç®¡é“ ç®¡é“ç±»ä¼¼äºæ–‡ä»¶é‡å®šå‘ï¼Œå¯ä»¥å°†å‰ä¸€ä¸ªå‘½ä»¤çš„stdouté‡å®šå‘åˆ°ä¸‹ä¸€ä¸ªå‘½ä»¤çš„stdinã€‚ ç®¡é“å‘½ä»¤ä»…å¤„ç†stdoutï¼Œä¼šå¿½ç•¥stderrã€‚ ç®¡é“å³è¾¹çš„å‘½ä»¤å¿…é¡»èƒ½æ¥å—stdinã€‚ å¤šä¸ªç®¡é“å‘½ä»¤å¯ä»¥ä¸²è”ã€‚ ä¸æ–‡ä»¶é‡å®šå‘çš„åŒºåˆ« æ–‡ä»¶é‡å®šå‘å·¦è¾¹ä¸ºå‘½ä»¤ï¼Œå³è¾¹ä¸ºæ–‡ä»¶ã€‚ ç®¡é“å·¦å³ä¸¤è¾¹å‡ä¸ºå‘½ä»¤ï¼Œå·¦è¾¹æœ‰stdoutï¼Œå³è¾¹æœ‰stdinã€‚ |æ˜¯ç®¡é“é“¾æ¥ç¬¦ ç”¨äºä¸¤ä¸ªç®¡é“ä¹‹é—´çš„é“¾æ¥ä¸é€šä¿¡ # ç»Ÿè®¡å½“å‰ç›®å½•ä¸‹æ‰€æœ‰pythonæ–‡ä»¶çš„æ€»è¡Œæ•°ï¼Œå…¶ä¸­findã€xargsã€wcç­‰å‘½ä»¤å¯ä»¥å‚è€ƒå¸¸ç”¨å‘½ä»¤è¿™ä¸€èŠ‚å†…å®¹ã€‚ find . -name '*.py' | xargs cat | wc -l # find . -name â€œ.py | catï¼šè·å–ä¸º.pyç»“å°¾çš„æ–‡ä»¶å # find . -name â€œ.py | xargs catï¼šè·å–.pyæ–‡ä»¶çš„å†…å®¹ # wc -lï¼šç»Ÿè®¡è¡Œæ•° # xargså°†stdinçš„å†…å®¹ç”¨ç©ºè¡Œéš”å¼€ï¼Œä½œä¸ºcatçš„å‘½ä»¤è¡Œå‚æ•°ï¼Œä¼ ç»™cat ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:6:0","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"6. ç”¨æˆ·ç»„çš„ç®¡ç† æ·»åŠ æ–°çš„ç”¨æˆ·è´¦å· ï¼šuseradd é€‰é¡¹ ç”¨æˆ·å åˆ é™¤å¸å·ï¼šuserdel é€‰é¡¹ ç”¨æˆ·å ä¿®æ”¹å¸å·ï¼šusermod é€‰é¡¹ ç”¨æˆ·å å¢åŠ ä¸€ä¸ªæ–°çš„ç”¨æˆ·ç»„ï¼šgroupadd é€‰é¡¹ ç”¨æˆ·ç»„ åˆ é™¤ä¸€ä¸ªå·²æœ‰çš„ç”¨æˆ·ç»„ï¼šgroupdel ç”¨æˆ·ç»„ ä¿®æ”¹ç”¨æˆ·ç»„çš„å±æ€§ï¼šgroupmod é€‰é¡¹ ç”¨æˆ·ç»„ ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:7:0","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"7. å®šæ—¶ä»»åŠ¡ atdä¸€æ¬¡æ€§å®šæ—¶ä»»åŠ¡é…ç½® at \u003coptions\u003e \u003ctime\u003e at now +2 minutes # 2åˆ†é’Ÿæ‰§è¡Œlså‘½ä»¤å¹¶æŠŠå‘½ä»¤æ‰§è¡Œç»“æœè¾“å‡ºåˆ°/tmp/ls.txtæ–‡ä»¶ at\u003e ls -al \u003e ~/temp/ls.txt crtl + d atq # æŸ¥è¯¢ cronå‘¨æœŸæ€§å®šæ—¶ä»»åŠ¡é…ç½® crontab \u003coptions\u003e \u003cfile\u003e crontab -e ***** /test.sh crontab -l ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:8:0","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"å¸¸ç”¨æƒ…å†µ windowsæ¢è¡Œç¬¦\\rå¯¹åº”çš„æ˜¾ç¤º^Mï¼›è½¬æ¢ä¸ºunixæ ¼å¼çš„\\n æ–¹æ³•1ï¼šdos2unix filename æ–¹æ³•2ï¼švi filenameæ‰“å¼€æ–‡ä»¶ï¼Œæ‰§è¡Œ :set ff=unix è®¾ç½®æ–‡ä»¶ä¸ºunixï¼Œç„¶åæ‰§è¡Œ:wqï¼Œä¿å­˜æˆunixæ ¼å¼ã€‚ æ–¹æ³•3ï¼šä½¿ç”¨sedå‘½ä»¤sed -i \"s/\\r//\" filename æˆ– sed -i \"s/^M//\" filenameç›´æ¥æ›¿æ¢ç»“å°¾ç¬¦ ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:9:0","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Computer"],"content":"å¸¸ç”¨C++æŒ‡ä»¤ readelf readelf -d ./demoï¼šæŸ¥çœ‹åŠ¨æ€æ®µä¿¡æ¯,æ¯”å¦‚å…±äº«åº“ä¾èµ–ã€åŠ¨æ€ç¬¦å·ã€é‡å®šä½ä¿¡æ¯ã€ç¨‹åºå…¥å£ç‚¹ç­‰ readelf -a ./demo :æ˜¾ç¤º ELF æ–‡ä»¶çš„ æ‰€æœ‰ å¯ç”¨ä¿¡æ¯,ä¾æ¬¡è¾“å‡ºæ‰€æœ‰çš„ ELF æ–‡ä»¶å¤´ã€èŠ‚åŒºå¤´ã€ç¬¦å·è¡¨ã€åŠ¨æ€æ®µã€é‡å®šä½ä¿¡æ¯ç­‰å†…å®¹ã€‚ readelf â€“h ./demoï¼šæ˜¾ç¤º ELF æ–‡ä»¶çš„ æ–‡ä»¶å¤´ä¿¡æ¯ readelf --segments ./demoï¼šæ˜¾ç¤º ELF æ–‡ä»¶çš„ ç¨‹åºå¤´ä¿¡æ¯ readelf -s --wide ./demoï¼šæ˜¾ç¤º ELF æ–‡ä»¶çš„ ç¬¦å·è¡¨ä¿¡æ¯ï¼Œ--wide é€‰é¡¹ç”¨äºé¿å…è¾“å‡ºè¢«æˆªæ–­ readelf -S ./demo : æ˜¾ç¤º ELF æ–‡ä»¶çš„ èŠ‚åŒºå¤´ä¿¡æ¯ï¼ŒæŸ¥çœ‹demoæ˜¯å¦æ˜¯debugæ¨¡å¼ç¼–è¯‘æ–‡ä»¶ï¼Œçœ‹sectioné‡Œæœ‰æ²¡æœ‰.debug_info ä¹Ÿå¯ç”¨--sections c++filt è§£æC++ç¬¦å·å·¥å…· åæ±‡ç¼–æ“ä½œ llvm-objdump -d # åæ±‡ç¼–å‘½ä»¤,é»˜è®¤cpu, extractkernel -i # åæ±‡ç¼–å‘½ä»¤,dcu llvm-amdgpu-objdump --inputs= # åæ±‡ç¼–å‘½ä»¤,amdgpu ","date":"2023-06-15","objectID":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/:10:0","tags":["Computer","Linux"],"title":"Linxå¸¸ç”¨æŒ‡ä»¤","uri":"/posts/computer/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"},{"categories":["Deep Learning"],"content":"BERT","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/bert/","tags":["Deep Learning","Transformer","NLP"],"title":"BERT","uri":"/posts/deeplearning/transformer_nlp/bert/"},{"categories":["Deep Learning"],"content":"BERT æ–‡ç« æ ‡é¢˜ï¼šBERT: Pre-training of Deep Bidirectional Transformers for Language Understanding ä½œè€…ï¼šJacob Devlin, Ming-Wei Chang, Kenton Lee, Kristina Toutanova å‘è¡¨æ—¶é—´ï¼š(NAACL-HLT 2019) å®˜æ–¹ä»£ç  ==Transformerä¸€ç»ŸNLPçš„å¼€å§‹== BERT: ç”¨æ·±çš„ã€åŒå‘çš„ã€transformer æ¥åšé¢„è®­ç»ƒï¼Œç”¨æ¥åšè¯­è¨€ç†è§£çš„ä»»åŠ¡ã€‚ pre-training: åœ¨ä¸€ä¸ªå¤§çš„æ•°æ®é›†ä¸Šè®­ç»ƒå¥½ä¸€ä¸ªæ¨¡å‹ pre-trainingï¼Œæ¨¡å‹çš„ä¸»è¦ä»»åŠ¡æ˜¯ç”¨åœ¨å…¶å®ƒä»»åŠ¡ training ä¸Š deep bidirectional transformers: æ·±çš„åŒå‘ transformers language understanding: æ›´å¹¿ä¹‰ï¼Œtransformer ä¸»è¦ç”¨åœ¨æœºå™¨ç¿»è¯‘ MT ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/bert/:1:0","tags":["Deep Learning","Transformer","NLP"],"title":"BERT","uri":"/posts/deeplearning/transformer_nlp/bert/"},{"categories":["Deep Learning"],"content":"Abstract æ–°çš„è¯­è¨€è¡¨å¾æ¨¡å‹ BERT: Bidirectional Encoder Representations from Transformers Elmo_GPT_Bert ELMoï¼šä½¿ç”¨å·¦å³ä¾§çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ ï¼›åŸºäºRNNï¼Œåº”ç”¨ä¸‹æ¸¸ä»»åŠ¡éœ€è¦ä¸€ç‚¹ç‚¹è°ƒæ•´æ¶æ„ GPTï¼šä½¿ç”¨å·¦è¾¹çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œé¢„æµ‹æœªæ¥ BERTï¼šä½¿ç”¨å·¦å³ä¾§çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ ï¼›åŸºäºTransformerï¼Œåº”ç”¨ä¸‹æ¸¸ä»»åŠ¡åªéœ€è¦è°ƒæ•´æœ€ä¸Šå±‚ ä»æ— æ ‡æ³¨çš„æ–‡æœ¬ä¸­ï¼ˆjointly conditioning è”åˆå·¦å³çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼‰é¢„è®­ç»ƒå¾—åˆ°æ— æ ‡æ³¨æ–‡æœ¬çš„ deep bidirectional representations BERT = ELMo çš„ bidirectional ä¿¡æ¯ + GPT çš„æ–°æ¶æ„ transformer ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/bert/:2:0","tags":["Deep Learning","Transformer","NLP"],"title":"BERT","uri":"/posts/deeplearning/transformer_nlp/bert/"},{"categories":["Deep Learning"],"content":"Introduction NLPä»»åŠ¡åˆ†ä¸¤ç±» sentence-level tasks ï¼šå¥å­æƒ…ç»ªè¯†åˆ«ã€ä¸¤ä¸ªå¥å­çš„å…³ç³»ï¼› token-level tasks ï¼šNER (äººåã€è¡—é“å) éœ€è¦ fine-grained output BERTè®­ç»ƒæ–¹æ³• é€šè¿‡ MLM å¸¦æ©ç çš„è¯­è¨€æ¨¡å‹ä½œä¸ºé¢„è®­ç»ƒçš„ç›®æ ‡ï¼Œæ¥å‡è½»è¯­è¨€æ¨¡å‹çš„å•å‘çº¦æŸã€‚inspired by the Close task 1953 **MLM ** (masked language model)ï¼šæ¯æ¬¡éšæœºé€‰è¾“å…¥çš„è¯æº tokens, ç„¶å mask å®ƒä»¬ï¼Œç›®æ ‡å‡½æ•°æ˜¯é¢„æµ‹è¢« masked çš„è¯ï¼›15%çš„è¯æ±‡mask å‡è®¾è¾“å…¥é‡Œé¢çš„ç¬¬äºŒä¸ªè¯æ±‡æ˜¯è¢«ç›–ä½çš„ï¼ŒæŠŠå…¶å¯¹åº”çš„embeddingè¾“å…¥åˆ°ä¸€ä¸ªå¤šåˆ†ç±»æ¨¡å‹ä¸­ï¼Œæ¥é¢„æµ‹è¢«ç›–ä½çš„å•è¯ã€‚ç±»ä¼¼æŒ–ç©ºå¡«è¯ã€å®Œå½¢å¡«ç©º standard language modelï¼šåªçœ‹å·¦è¾¹çš„ä¿¡æ¯ NSP: (next sentence prediction )ï¼šé¢„æµ‹ä¸‹ä¸€ä¸ªå¥å­ï¼›åˆ¤æ–­ä¸¤ä¸ªå¥å­æ˜¯éšæœºé‡‡æ ·çš„ or åŸæ–‡ç›¸é‚»ï¼Œå­¦ä¹ sentence-level çš„ä¿¡æ¯ã€‚ æŠŠä¸¤å¥è¯è¿èµ·æ¥ï¼Œä¸­é—´åŠ ä¸€ä¸ª[SEP]ä½œä¸ºä¸¤ä¸ªå¥å­çš„åˆ†éš”ç¬¦ã€‚è€Œåœ¨ä¸¤ä¸ªå¥å­çš„å¼€å¤´ï¼Œæ”¾ä¸€ä¸ª[CLS]æ ‡å¿—ç¬¦ï¼Œå°†å…¶å¾—åˆ°çš„embeddingè¾“å…¥åˆ°äºŒåˆ†ç±»çš„æ¨¡å‹ï¼Œè¾“å‡ºä¸¤ä¸ªå¥å­æ˜¯ä¸æ˜¯æ¥åœ¨ä¸€èµ·çš„ã€‚ åœ¨è®­ç»ƒBERTçš„æ—¶å€™ï¼Œè¿™ä¸¤ä¸ªä»»åŠ¡æ˜¯åŒæ—¶è®­ç»ƒçš„ã€‚æ‰€ä»¥ï¼ŒBERTçš„æŸå¤±å‡½æ•°æ˜¯æŠŠè¿™ä¸¤ä¸ªä»»åŠ¡çš„æŸå¤±å‡½æ•°åŠ èµ·æ¥çš„ï¼Œæ˜¯ä¸€ä¸ªã€Œå¤šä»»åŠ¡ã€è®­ç»ƒ è´¡çŒ® bidirectional åŒå‘ä¿¡æ¯çš„é‡è¦æ€§ BERT é¦–ä¸ªå¾®è°ƒæ¨¡å‹ï¼Œåœ¨ sentence-level and token-level taskæ•ˆæœå¥½ å¥½çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œä¸ç”¨å¯¹ç‰¹å®šä»»åŠ¡åšä¸€äº›æ¨¡å‹æ¶æ„çš„æ”¹åŠ¨ ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/bert/:3:0","tags":["Deep Learning","Transformer","NLP"],"title":"BERT","uri":"/posts/deeplearning/transformer_nlp/bert/"},{"categories":["Deep Learning"],"content":"Related Work Unsupervised Feature-based approaches éç›‘ç£çš„åŸºäºç‰¹å¾è¡¨ç¤ºçš„å·¥ä½œï¼šè¯åµŒå…¥ã€ELMoç­‰ Unsupervised Fine-tuning approaches éç›‘ç£çš„åŸºäºå¾®è°ƒçš„å·¥ä½œï¼šGPTç­‰ Transfer Learning from Supervised Data åœ¨æœ‰æ ‡ç­¾çš„æ•°æ®ä¸Šåšè¿ç§»å­¦ä¹ ã€‚ ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/bert/:4:0","tags":["Deep Learning","Transformer","NLP"],"title":"BERT","uri":"/posts/deeplearning/transformer_nlp/bert/"},{"categories":["Deep Learning"],"content":"Bert é¢„è®­ç»ƒ + å¾®è°ƒ bert_stage pre-trainingï¼šä½¿ç”¨ unlabeled data è®­ç»ƒ fine-tuningï¼šå¾®è°ƒçš„ BERT ä½¿ç”¨é¢„è®­ç»ƒçš„å‚æ•° åˆå§‹åŒ–ï¼Œæ‰€æœ‰çš„æƒé‡å‚æ•°é€šè¿‡ä¸‹æ¸¸ä»»åŠ¡çš„ labeled data è¿›è¡Œå¾®è°ƒã€‚ æ¯ä¸€ä¸ªä¸‹æ¸¸ä»»åŠ¡ä¼šåˆ›å»ºä¸€ä¸ª æ–°çš„ BERT æ¨¡å‹ï¼Œï¼ˆç”±é¢„è®­ç»ƒå‚æ•°åˆå§‹åŒ–ï¼‰ï¼Œä½†æ¯ä¸€ä¸ªä¸‹æ¸¸ä»»åŠ¡ä¼šæ ¹æ®è‡ªå·±ä»»åŠ¡çš„labeled data æ¥å¾®è°ƒè‡ªå·±çš„ BERT æ¨¡å‹ã€‚ model name L H A Total Parameters $BERT_{base}$ 12 768 12 110M $BERT_{base}$ 24 1024 16 340M Lï¼štransform blocksçš„ä¸ªæ•° Hï¼šhidden size éšè—å±‚å¤§å° Aï¼šè‡ªæ³¨æ„åŠ›æœºåˆ¶ multi-head ä¸­ head å¤´çš„ä¸ªæ•° BERT æ¨¡å‹å¤æ‚åº¦å’Œå±‚æ•° L æ˜¯ linear, å’Œå®½åº¦ H æ˜¯ å¹³æ–¹å…³ç³»ã€‚ æ·±åº¦å˜æˆäº†ä»¥å‰çš„ä¸¤å€ï¼Œåœ¨å®½åº¦ä¸Šé¢ä¹Ÿé€‰æ‹©ä¸€ä¸ªå€¼ï¼Œä½¿å¾—è¿™ä¸ªå¢åŠ çš„å¹³æ–¹å¤§æ¦‚æ˜¯ä¹‹å‰çš„ä¸¤å€ã€‚ $H_{large}=\\sqrt {2} H_{base}=\\sqrt 2 \\times 768=1086$ H = 16ï¼Œå› ä¸ºæ¯ä¸ª head çš„ç»´åº¦éƒ½å›ºå®šåœ¨äº†64ã€‚æ‰€ä»¥å®½åº¦å¢åŠ äº†ï¼Œ head æ•°ä¹Ÿå¢åŠ äº† $H = 64 \\times A:\\ \\ 768=64\\times 12;\\ \\ 1024=64\\times 16$ åµŒå…¥å±‚ï¼šè¾“å…¥å­—å…¸å¤§å°30kï¼Œè¾“å‡ºH transformer blocks($H^2\\times 12$)ï¼šself-attention($H^2\\times 4$) + MLP ($H^2\\times 8$) Transformer block: å¤šå¤´Q,K,VæŠ•å½±çŸ©é˜µåˆå¹¶$H(64\\times A)$+è¾“å‡ºåå†H*HæŠ•å½± MLP çš„ 2ä¸ªå…¨è¿æ¥å±‚ï¼š ç¬¬ä¸€ä¸ªå…¨è¿æ¥å±‚è¾“å…¥æ˜¯ Hï¼Œè¾“å‡ºæ˜¯ 4 * Hï¼› ç¬¬äºŒä¸ªå…¨ è¿æ¥å±‚è¾“å…¥æ˜¯ 4 * Hï¼Œè¾“å‡ºæ˜¯ Hã€‚ $Total \\ Parameters = 30K\\times H + 12 \\times H^2 \\times L$ $BERT_{base} = 30000\\times 768 + 12 \\times 768^2 \\times 12 = 107.97M$ $BERT_{large} = 30000\\times 1024+ 12 \\times 1024^2\\times 24= 332.71M$ ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/bert/:5:0","tags":["Deep Learning","Transformer","NLP"],"title":"BERT","uri":"/posts/deeplearning/transformer_nlp/bert/"},{"categories":["Deep Learning"],"content":"Input/Output Representation(é¢„è®­ç»ƒ\u0026å¾®è°ƒå…±é€šéƒ¨åˆ†ï¼‰ BERT çš„è¾“å…¥å’Œ transformer åŒºåˆ« transformer é¢„è®­ç»ƒæ—¶å€™çš„è¾“å…¥æ˜¯ä¸€ä¸ªåºåˆ—å¯¹ã€‚ç¼–ç å™¨å’Œè§£ç å™¨åˆ†åˆ«ä¼šè¾“å…¥ä¸€ä¸ªåºåˆ—ã€‚ BERT åªæœ‰ä¸€ä¸ªç¼–ç å™¨ï¼Œä¸ºäº†ä½¿ BERT èƒ½å¤„ç†ä¸¤ä¸ªå¥å­çš„æƒ…å†µï¼Œéœ€è¦æŠŠä¸¤ä¸ªå¥å­å¹¶æˆä¸€ä¸ªåºåˆ—ã€‚ BERTåˆ‡è¯ WordPiece, æŠŠä¸€ä¸ªå‡ºç°æ¦‚ç‡ä½çš„è¯åˆ‡å¼€ï¼Œåªä¿ç•™ä¸€ä¸ªè¯å‡ºç°é¢‘ç‡é«˜çš„å­åºåˆ—ï¼Œ30k token ç»å¸¸å‡ºç°çš„è¯ï¼ˆå­ åºåˆ—ï¼‰çš„å­—å…¸ã€‚ å¦åˆ™ï¼Œç©ºæ ¼åˆ‡è¯ â€“\u003e ä¸€ä¸ªè¯æ˜¯ä¸€ä¸ª tokenã€‚æ•°æ®é‡æ‰“çš„æ—¶å€™ï¼Œè¯å…¸ä¼šç‰¹åˆ«å¤§ï¼Œåˆ°ç™¾ä¸‡çº§åˆ«ã€‚å¯å­¦ä¹ çš„å‚æ•°åŸº æœ¬éƒ½åœ¨åµŒå…¥å±‚äº†ã€‚ BERT çš„è¾“å…¥åºåˆ—æ„æˆ [ CLS ] + [ SEP ] è¾“å…¥åºåˆ— Token embeddings: è¯æºçš„embeddingå±‚ï¼Œæ•´æˆçš„embeddingå±‚ï¼Œ æ¯ä¸€ä¸ª token æœ‰å¯¹åº”çš„è¯å‘é‡ã€‚ Segement embeddings: è¿™ä¸ª token å±äºç¬¬ä¸€å¥è¯ Aè¿˜æ˜¯ç¬¬äºŒå¥è¯ Bã€‚ Position embedding çš„è¾“å…¥æ˜¯ token è¯æºåœ¨è¿™ä¸ªåºåˆ— sequence ä¸­çš„ä½ç½®ä¿¡æ¯ã€‚ï¼ˆå’ŒTransformerä¸ä¸€æ ·ï¼Œè¿™æ˜¯å­¦ä¹ å‡ºæ¥çš„ï¼‰ BERT çš„ segment embedding ï¼ˆå±äºå“ªä¸ªå¥å­ï¼‰å’Œ position embedding ï¼ˆä½ç½®åœ¨å“ªé‡Œï¼‰æ˜¯å­¦ä¹ å¾—æ¥çš„ï¼Œ transformer çš„ position embedding æ˜¯ç»™å®šçš„ã€‚ åºåˆ—å¼€å§‹:[CLS] è¾“å‡ºçš„æ˜¯å¥å­å±‚é¢çš„ä¿¡æ¯ sequence representation BERT ä½¿ç”¨çš„æ˜¯ transformer çš„ encoderï¼Œself-attention layer ä¼šçœ‹è¾“å…¥çš„æ¯ä¸ªè¯å’Œå…¶å®ƒæ‰€æœ‰è¯çš„å…³ç³»ã€‚ å°±ç®— [ CLS ] è¿™ä¸ªè¯æ”¾åœ¨æˆ‘çš„ç¬¬ä¸€ä¸ªçš„ä½ç½®ï¼Œä»–ä¹Ÿæ˜¯æœ‰åŠæ³•èƒ½çœ‹åˆ°ä¹‹åæ‰€æœ‰çš„è¯ã€‚æ‰€ä»¥ä»–æ”¾åœ¨ç¬¬ä¸€ä¸ªæ˜¯æ²¡å…³ ç³»çš„ï¼Œä¸ä¸€å®šè¦æ”¾åœ¨æœ€åã€‚ åŒºåˆ†ä¸¤ä¸ªåˆåœ¨ä¸€èµ·çš„å¥å­çš„æ–¹æ³•ï¼š æ¯ä¸ªå¥å­å + [ SEP ] è¡¨ç¤º seperate å­¦ä¸€ä¸ªåµŒå…¥å±‚ æ¥è¡¨ç¤ºæ•´ä¸ªå¥å­æ˜¯ç¬¬ä¸€å¥è¿˜æ˜¯ç¬¬äºŒå¥ ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/bert/:5:1","tags":["Deep Learning","Transformer","NLP"],"title":"BERT","uri":"/posts/deeplearning/transformer_nlp/bert/"},{"categories":["Deep Learning"],"content":"Pre-training BERT é¢„è®­ç»ƒçš„ key factors: ç›®æ ‡å‡½æ•°ï¼Œé¢„è®­ç»ƒçš„æ•°æ® MLM ç”± WordPiece ç”Ÿæˆçš„è¯æºåºåˆ—ä¸­çš„è¯æºï¼Œå®ƒæœ‰ 15% çš„æ¦‚ç‡ä¼šéšæœºæ›¿æ¢æˆä¸€ä¸ªæ©ç ã€‚ä½†æ˜¯å¯¹äºç‰¹æ®Šçš„è¯æºä¸ åšæ›¿æ¢ 15% è®¡åˆ’è¢« masked çš„è¯ï¼š80% çš„æ¦‚ç‡è¢«æ›¿æ¢ä¸º [MASK], 10% æ¢æˆ random token,10% ä¸æ”¹å˜åŸ tokenã€‚ ç‰¹æ®Šçš„è¯æºï¼šç¬¬ä¸€ä¸ªè¯æº [ CLS ] å’Œä¸­é—´çš„åˆ†å‰²è¯æº [SEP]ã€‚ é—®é¢˜ï¼šé¢„è®­ç»ƒå’Œå¾®è°ƒçœ‹åˆ°çš„æ•°æ®ä¸ä¸€æ · é¢„è®­ç»ƒçš„è¾“å…¥åºåˆ—æœ‰ 15% [MASK]ï¼Œå¾®è°ƒæ—¶çš„æ•°æ®æ²¡æœ‰ [MASK]. ä¸ºä»€ä¹ˆè¦Mask è¯­è¨€æ¨¡å‹ä¼šæ ¹æ®å‰é¢å•è¯æ¥é¢„æµ‹ä¸‹ä¸€ä¸ªå•è¯ï¼Œä½†æ˜¯self-attentionçš„æ³¨æ„åŠ›åªä¼šæ”¾åœ¨è‡ªå·±èº«ä¸Šï¼Œé‚£ä¹ˆè¿™æ ·100%é¢„æµ‹åˆ°è‡ªå·±ï¼Œæ¯«æ— æ„ä¹‰ï¼Œæ‰€ä»¥ç”¨Maskï¼ŒæŠŠéœ€è¦é¢„æµ‹çš„è¯ç»™æŒ¡ä½ã€‚ Maskæ–¹å¼ä¼˜ç¼ºç‚¹ï¼š 1ï¼‰è¢«éšæœºé€‰æ‹©15%çš„è¯å½“ä¸­ä»¥10%çš„æ¦‚ç‡ç”¨ä»»æ„è¯æ›¿æ¢å»é¢„æµ‹æ­£ç¡®çš„è¯ï¼Œç›¸å½“äºæ–‡æœ¬çº é”™ä»»åŠ¡ï¼Œä¸ºBERTæ¨¡å‹èµ‹äºˆäº†ä¸€å®šçš„æ–‡æœ¬çº é”™èƒ½åŠ›ï¼› 2ï¼‰è¢«éšæœºé€‰æ‹©15%çš„è¯å½“ä¸­ä»¥10%çš„æ¦‚ç‡ä¿æŒä¸å˜ï¼Œç¼“è§£äº†finetuneæ—¶å€™ä¸é¢„è®­ç»ƒæ—¶å€™è¾“å…¥ä¸åŒ¹é…çš„é—®é¢˜ï¼ˆé¢„è®­ç»ƒæ—¶å€™è¾“å…¥å¥å­å½“ä¸­æœ‰maskï¼Œè€Œfinetuneæ—¶å€™è¾“å…¥æ˜¯å®Œæ•´æ— ç¼ºçš„å¥å­ï¼Œå³ä¸ºè¾“å…¥ä¸åŒ¹é…é—®é¢˜ï¼‰ã€‚ 3ï¼‰é’ˆå¯¹æœ‰ä¸¤ä¸ªåŠä¸¤ä¸ªä»¥ä¸Šè¿ç»­å­—ç»„æˆçš„è¯ï¼Œéšæœºmaskå­—å‰²è£‚äº†è¿ç»­å­—ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œä½¿æ¨¡å‹ä¸å¤ªå®¹æ˜“å­¦ä¹ åˆ°è¯çš„è¯­ä¹‰ä¿¡æ¯ã€‚ä¸»è¦é’ˆå¯¹è¿™ä¸€çŸ­æ¿ï¼Œå› æ­¤googleæ­¤åå‘è¡¨äº†BERT-WWMï¼Œå›½å†…çš„å“ˆå·¥å¤§è”åˆè®¯é£å‘è¡¨äº†ä¸­æ–‡ç‰ˆçš„BERT-WWMã€‚ NSP è¾“å…¥åºåˆ—æœ‰ 2 ä¸ªå¥å­ A å’Œ Bï¼Œ50% æ­£ä¾‹ï¼Œ50%åä¾‹ 50% B åœ¨ A ä¹‹å,æ˜¯ä¸€å¯¹è¿ç»­å¥å­ï¼Œæ ‡è®°ä¸º IsNextï¼›50% æ˜¯è¯­æ–™åº“ä¸­ a random sentence éšæœºé‡‡æ ·çš„ï¼Œæ ‡è®°ä¸º NotNextã€‚ NSP flight ## lessï¼šflightless å‡ºç°æ¦‚ç‡ä¸é«˜ï¼ŒWordPiece åˆ†æˆäº† 2 ä¸ªå‡ºç°é¢‘ç‡é«˜çš„å­åºåˆ—ï¼Œ## è¡¨ç¤º less æ˜¯flightless çš„ä¸€éƒ¨åˆ†ã€‚ ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/bert/:5:2","tags":["Deep Learning","Transformer","NLP"],"title":"BERT","uri":"/posts/deeplearning/transformer_nlp/bert/"},{"categories":["Deep Learning"],"content":"Fine-tuning BERT BERT ç»è¿‡å¾®å°çš„æ”¹é€ ï¼ˆå¢åŠ ä¸€ä¸ªå°å°çš„å±‚ï¼‰ï¼Œå°±å¯ä»¥ç”¨äºå„ç§å„æ ·çš„è¯­è¨€ä»»åŠ¡ã€‚ ï¼ˆa,bï¼‰ä¸ Next Sentence Predictionç±»ä¼¼ï¼Œé€šè¿‡åœ¨ ã€Œ[CLS]ã€ æ ‡è®°çš„ Transformer è¾“å‡ºé¡¶éƒ¨æ·»åŠ åˆ†ç±»å±‚ï¼Œå®Œæˆè¯¸å¦‚æƒ…æ„Ÿåˆ†æä¹‹ç±»çš„**ã€Œåˆ†ç±»ã€**ä»»åŠ¡ ï¼ˆcï¼‰åœ¨é—®ç­”ä»»åŠ¡ï¼ˆä¾‹å¦‚ SQuAD v1.1ï¼‰ä¸­ï¼Œä¼šæ”¶åˆ°ä¸€ä¸ªå…³äºæ–‡æœ¬åºåˆ—çš„é—®é¢˜ï¼Œå¹¶éœ€è¦åœ¨åºåˆ—ä¸­æ ‡è®°ç­”æ¡ˆã€‚ä½¿ç”¨ BERTï¼Œå¯ä»¥é€šè¿‡å­¦ä¹ æ ‡è®°ç­”æ¡ˆå¼€å§‹å’Œç»“æŸçš„ä¸¤ä¸ªé¢å¤–å‘é‡æ¥è®­ç»ƒé—®ç­”æ¨¡å‹ã€‚ ï¼ˆdï¼‰åœ¨å‘½åå®ä½“è¯†åˆ« (NER) ä¸­ï¼Œæ¥æ”¶æ–‡æœ¬åºåˆ—ï¼Œå¹¶éœ€è¦æ ‡è®°æ–‡æœ¬ä¸­å‡ºç°çš„å„ç§ç±»å‹çš„å®ä½“ï¼ˆäººã€ç»„ç»‡ã€æ—¥æœŸç­‰ï¼‰ã€‚ä½¿ç”¨ BERTï¼Œå¯ä»¥é€šè¿‡å°†æ¯ä¸ªæ ‡è®°çš„è¾“å‡ºå‘é‡è¾“å…¥åˆ°é¢„æµ‹ NER æ ‡ç­¾çš„åˆ†ç±»å±‚æ¥è®­ç»ƒ NER æ¨¡å‹ differernt tasks ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/bert/:5:3","tags":["Deep Learning","Transformer","NLP"],"title":"BERT","uri":"/posts/deeplearning/transformer_nlp/bert/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» BERT è®ºæ–‡é€æ®µç²¾è¯»ã€è®ºæ–‡ç²¾è¯»ã€‘ æå®æ¯…ï¼šELMO, BERT, GPT The Illustrated BERT, ELMo, and co. (How NLP Cracked Transfer Learning) BERT è¯¦è§£ï¼ˆé™„å¸¦ ELMoã€GPT ä»‹ç»ï¼‰ BERT ç§‘æ™®æ–‡ ä½œè€…å¯¹åŒå‘çš„å›åº” ACL 2019ï¼šWhat does BERT learn about the structure of language?ï¼šBERTçš„ä½å±‚ç½‘ç»œå°±å­¦ä¹ åˆ°äº†çŸ­è¯­çº§åˆ«çš„ä¿¡æ¯è¡¨å¾ï¼ŒBERTçš„ä¸­å±‚ç½‘ç»œå°±å­¦ä¹ åˆ°äº†ä¸°å¯Œçš„è¯­è¨€å­¦ç‰¹å¾ï¼Œè€ŒBERTçš„é«˜å±‚ç½‘ç»œåˆ™å­¦ä¹ åˆ°äº†ä¸°å¯Œçš„è¯­ä¹‰ä¿¡æ¯ç‰¹å¾ BERT Rediscovers the Classical NLP Pipeline å…³äºBERTï¼šä½ ä¸çŸ¥é“çš„äº‹ ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/bert/:6:0","tags":["Deep Learning","Transformer","NLP"],"title":"BERT","uri":"/posts/deeplearning/transformer_nlp/bert/"},{"categories":["Deep Learning"],"content":"Transformer","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/transformer/","tags":["Deep Learning","Transformer","NLP"],"title":"Transformer","uri":"/posts/deeplearning/transformer_nlp/transformer/"},{"categories":["Deep Learning"],"content":"Transformer æ–‡ç« æ ‡é¢˜ï¼šAttention Is All You Need ä½œè€…ï¼šAshish Vaswani, Noam Shazeer, Niki Parmar, Jakob Uszkoreit, Llion Jones, Aidan N. Gomez, Lukasz Kaiser, Illia Polosukhin å‘è¡¨æ—¶é—´ï¼š(NIPS 2017) ç»§MLPã€CNNã€RNNåçš„ç¬¬å››å¤§ç±»æ¶æ„ ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/transformer/:1:0","tags":["Deep Learning","Transformer","NLP"],"title":"Transformer","uri":"/posts/deeplearning/transformer_nlp/transformer/"},{"categories":["Deep Learning"],"content":"Introduction sequence transduction: åºåˆ—è½¬å½•ï¼Œåºåˆ—åˆ°åºåˆ—çš„ç”Ÿæˆã€‚inputä¸€ä¸ªåºåˆ—ï¼Œoutputä¸€ä¸ªåºåˆ—ã€‚ æœºå™¨ç¿»è¯‘ï¼šè¾“å…¥ä¸€å¥ä¸­æ–‡ï¼Œè¾“å‡ºä¸€å¥è‹±æ–‡ã€‚ RNN ï¼šä»å·¦å¾€å³ä¸€æ­¥ä¸€æ­¥è®¡ç®—ï¼Œå¯¹ç¬¬ t ä¸ªçŠ¶æ€ $h_t$ï¼Œç”± $h_{t-1}$ï¼ˆå†å²ä¿¡æ¯ï¼‰å’Œ å½“å‰è¯ t è®¡ç®—ã€‚ éš¾ä»¥å¹¶è¡Œã€‚ é€šè¿‡ factorization åˆ†è§£ tricks å’Œ conditional computation å¹¶è¡ŒåŒ–æ¥æå‡è®¡ç®—æ•ˆç‡ è¿‡æ—©çš„å†å²ä¿¡æ¯å¯èƒ½è¢«ä¸¢æ‰ã€‚æ—¶åºä¿¡æ¯æ˜¯ä¸€æ­¥ä¸€æ­¥å¾€åä¼ é€’çš„ æ—¶åºé•¿çš„æ—¶å€™ä¸€ä¸ªå¤§çš„ $h_t$å­˜å†å²ä¿¡æ¯ã€‚æ¯ä¸€ä¸ª è®¡ç®—æ­¥éƒ½éœ€è¦å­˜å‚¨ï¼Œå†…å­˜å¼€é”€å¤§ ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/transformer/:2:0","tags":["Deep Learning","Transformer","NLP"],"title":"Transformer","uri":"/posts/deeplearning/transformer_nlp/transformer/"},{"categories":["Deep Learning"],"content":"Background CNNï¼ˆå±€éƒ¨åƒç´ â€“\u003eå…¨éƒ¨åƒç´ ï¼›å¤šé€šé“ â€“\u003e multi-headï¼‰ Transformer çš„ attention mechanism æ¯ä¸€æ¬¡çœ‹åˆ°æ‰€æœ‰çš„åƒç´ ï¼Œä¸€å±‚èƒ½å¤Ÿçœ‹åˆ°æ•´ä¸ªåºåˆ—ã€‚ Transformer çš„ multi-head self-attention æ¨¡æ‹Ÿ CNNs å¤šé€šé“è¾“å‡ºçš„æ•ˆæœã€‚ è‡ªæ³¨æ„åŠ›ï¼Œæ˜¯ä¸€ç§å°†å•ä¸ªåºåˆ—çš„ä¸åŒä½ç½®å…³è”èµ·æ¥ä»¥è®¡ç®—åºåˆ—è¡¨ç¤ºçš„æ³¨æ„åŠ›æœºåˆ¶ ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/transformer/:3:0","tags":["Deep Learning","Transformer","NLP"],"title":"Transformer","uri":"/posts/deeplearning/transformer_nlp/transformer/"},{"categories":["Deep Learning"],"content":"Model Architecture The Transformer - model architecture å…ˆå°†è¾“å…¥Inputä½¿ç”¨embedding algorithmè½¬æˆå‘é‡ã€‚ ç¼–ç å™¨çš„éƒ½ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªlistï¼ˆæ¯ä¸ªå…ƒç´ éƒ½æ˜¯512ç»´çš„è¯å‘é‡ï¼‰ã€‚listçš„å°ºå¯¸æ˜¯å¯ä»¥è®¾ç½®çš„è¶…å‚ï¼Œé€šå¸¸æ˜¯è®­ç»ƒé›†çš„æœ€é•¿å¥å­çš„é•¿åº¦ã€‚ åŠ å…¥ä½ç½®ç¼–ç Positional Encoding RNN ï¼šæŠŠä¸Šä¸€æ—¶åˆ»çš„è¾“å‡º ä½œä¸ºä¸‹ä¸€ä¸ªæ—¶åˆ»çš„è¾“å…¥ï¼Œæ¥ä¼ é€’æ—¶åºä¿¡æ¯ Attentionï¼š åœ¨è¾“å…¥é‡Œé¢åŠ å…¥æ—¶åºä¿¡æ¯ â€“\u003e positional encoding output æ˜¯ value çš„åŠ æƒå’Œï¼ˆæƒé‡æ˜¯ query å’Œ key ä¹‹é—´çš„è·ç¦»ï¼Œå’Œåºåˆ—ä¿¡æ¯æ— å…³ï¼‰ ä¸€ä¸ªè¯åœ¨åµŒå…¥å±‚è¡¨ç¤ºæˆä¸€ä¸ª 512 ç»´çš„å‘é‡ï¼Œç”¨å¦ä¸€ä¸ª 512 ç»´çš„å‘é‡æ¥è¡¨ç¤ºä¸€ä¸ªæ•°å­—ä»£è¡¨ä½ç½®ä¿¡æ¯ Transformer_positional_Encoding positional encoding æ˜¯ cos å’Œ sin çš„ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨ [-1, +1] ä¹‹é—´æŠ–åŠ¨çš„ã€‚ $PE_{(pos,2i)}=sin(pos/10000^{2i/d_{model}})$ $PE_{(pos,2i+1)}=cos(pos/10000^{2i/d_{model}})$ çŸ©é˜µç¬¬posè¡Œç¬¬2iåˆ—ï¼›è¡Œä»£è¡¨è¯å…ƒåœ¨åºåˆ—ä¸­çš„ä½ç½®ï¼Œåˆ—ä»£è¡¨ä½ç½®ç¼–ç çš„ä¸åŒç»´åº¦ ä¸ºå•¥è®¾è®¡è¿™æ ·çš„å‡½æ•°ï¼Œå‚è€ƒä½ç½®ç¼–ç  $input\\ embedding * \\sqrt{d_{model}}$ å­¦ embedding çš„æ—¶å€™ï¼Œä¼šæŠŠæ¯ä¸€ä¸ªå‘é‡çš„ L2 Norm å­¦çš„æ¯”è¾ƒå°ã€‚ ä¹˜ä¸Š$\\sqrt{d_{model}}$ä½¿å¾— embedding å’Œ positional encoding çš„ scale ä¹Ÿæ˜¯åœ¨å·®ä¸å¤šçš„ [-1, +1] æ•°å€¼åŒºé—´ï¼Œå¯ä»¥åšåŠ æ³• åŠ å…¥ä½ç½®ç¼–ç åå†è¿›è¡Œdropout=0.1ã€‚ ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/transformer/:4:0","tags":["Deep Learning","Transformer","NLP"],"title":"Transformer","uri":"/posts/deeplearning/transformer_nlp/transformer/"},{"categories":["Deep Learning"],"content":"Encoder Transformerçš„ç¼–ç å™¨æ˜¯ç”±å¤š(N=6)ä¸ªç›¸åŒçš„å±‚å åŠ è€Œæˆçš„ï¼Œæ¯ä¸ªå±‚éƒ½æœ‰ä¸¤ä¸ªå­å±‚ï¼ˆå­å±‚è¡¨ç¤ºä¸ºsublayerï¼‰ã€‚ ç¬¬ä¸€ä¸ªå­å±‚æ˜¯**[å¤šå¤´è‡ªæ³¨æ„åŠ›](#####Multi-Head Attention)ï¼ˆmulti-head self-attentionï¼‰**ï¼› è¾“å…¥keyã€value å’Œ query å…¶å®å°±æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯è‡ªå·±æœ¬èº« ç¬¬äºŒä¸ªå­å±‚æ˜¯åŸºäºä½ç½®çš„å‰é¦ˆç½‘ç»œï¼ˆposition-wise feed-forward networkï¼‰ã€‚ ä½œç”¨åœ¨æœ€åä¸€ä¸ªç»´åº¦çš„ MLP Point-wise: æŠŠä¸€ä¸ª MLP å¯¹æ¯ä¸€ä¸ªè¯ ï¼ˆpositionï¼‰ä½œç”¨ä¸€æ¬¡ï¼Œå¯¹æ¯ä¸ªè¯ä½œç”¨çš„æ˜¯æ˜¯åŒä¸€ä¸ªå¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰ $FFN(x)=max(0,xW_1+b_1)W_2+b_2$ï¼š512â€“\u003e2048â€“\u003e512 æ¯ä¸ªå­å±‚éƒ½é‡‡ç”¨äº†æ®‹å·®è¿æ¥ï¼ˆresidual connectionï¼‰å’Œå±‚è§„èŒƒåŒ–ï¼ˆlayer normalizationï¼‰ $LayerNorm(x+Sublayer(x))$ Transformer_LayerNor residual connections éœ€è¦è¾“å…¥è¾“å‡ºç»´åº¦ä¸€è‡´ï¼Œä¸ä¸€è‡´éœ€è¦åšæŠ•å½±ã€‚ç®€å•èµ·è§ï¼Œå›ºå®šæ¯ä¸€å±‚çš„è¾“å‡ºç»´åº¦$d_{model }$= 512 ç®€å•è®¾è®¡ï¼šåªéœ€è°ƒ 2 ä¸ªå‚æ•°: $d_{model }$ æ¯å±‚ç»´åº¦æœ‰å¤šå¤§ å’Œ N å¤šå°‘å±‚ï¼Œå½±å“åç»­ä¸€ç³»åˆ—ç½‘ç»œçš„è®¾è®¡ï¼ŒBERTã€GPTã€‚ å±‚è§„èŒƒåŒ–ï¼ˆlayer normalizationï¼‰ Hï¼šå¥é•¿ï¼ŒWï¼šè¯å‘é‡é•¿ Nï¼šBatch Layer Normalizationï¼šæ˜¯åœ¨ä¸€ä¸ªå¥ä¸Šçš„è¿›è¡Œå½’ä¸€åŒ–ã€‚ Batch Normalizationï¼šæ˜¯æŠŠæ¯ä¸ªBatchä¸­æ¯å¥è¯çš„ç¬¬ä¸€ä¸ªå­—çš„åŒä¸€ç»´åº¦çœ‹æˆä¸€ç»„åšå½’ä¸€åŒ–ã€‚ LayerNorm æ¯ä¸ªæ ·æœ¬è‡ªå·±ç®—å‡å€¼å’Œæ–¹å·®ï¼Œä¸éœ€è¦å­˜å…¨å±€çš„å‡å€¼å’Œæ–¹å·®ã€‚ LayerNorm æ›´ç¨³å®šï¼Œä¸ç®¡æ ·æœ¬é•¿è¿˜æ˜¯çŸ­ï¼Œå‡å€¼å’Œæ–¹å·®æ˜¯åœ¨æ¯ä¸ªæ ·æœ¬å†…è®¡ç®—ã€‚ Attention æ³¨æ„åŠ›å‡½æ•°æ˜¯ ä¸€ä¸ªå°†ä¸€ä¸ª query å’Œä¸€äº› key - value å¯¹ æ˜ å°„æˆä¸€ä¸ªè¾“å‡ºçš„å‡½æ•°ï¼Œå…¶ä¸­æ‰€æœ‰çš„ queryã€keyã€value å’Œ output éƒ½æ˜¯ä¸€äº›å‘é‡ã€‚ output æ˜¯ value çš„ä¸€ä¸ªåŠ æƒå’Œ â€“\u003e è¾“å‡ºçš„ç»´åº¦ == value çš„ç»´åº¦ã€‚ queryæ”¹å˜ï¼Œæƒå€¼åˆ†é…ä¸ä¸€æ ·ï¼Œè¾“å‡ºä¸ä¸€æ · query å’Œ key çš„é•¿åº¦æ˜¯ç­‰é•¿çš„ï¼Œéƒ½ç­‰äº dkã€‚value çš„ç»´åº¦æ˜¯ dvï¼Œè¾“å‡ºä¹Ÿæ˜¯ dvã€‚ query å’Œ key å¯ä»¥ä¸ç­‰é•¿ï¼Œå¯ç”¨åŠ æ€§çš„æ³¨æ„åŠ›æœºåˆ¶å¤„ç†ã€‚ Transformer_attention Scaled Dot-product Attention Transformer_attention æ³¨æ„åŠ›çš„å…·ä½“è®¡ç®—æ˜¯ï¼šå¯¹æ¯ä¸€ä¸ª query å’Œ key åšå†…ç§¯ï¼Œç„¶åæŠŠå®ƒä½œä¸ºç›¸ä¼¼åº¦ã€‚ ä¸¤ä¸ªå‘é‡åšå†…ç§¯ï¼šç”¨æ¥è¡¡é‡ä¸¤å‘é‡çš„ç›¸ä¼¼åº¦ã€‚å†…ç§¯çš„å€¼è¶Šå¤§ï¼Œå®ƒçš„ä½™å¼¦å€¼è¶Šå¤§ï¼Œè¿™ä¸¤ä¸ªå‘é‡çš„ç›¸ä¼¼åº¦å°±è¶Šé«˜ã€‚å¦‚æœä½ çš„å†…ç§¯çš„å€¼ä¸º 0 ï¼Œè¿™ä¸¤ä¸ªå‘é‡æ­£äº¤äº†ï¼Œæ²¡æœ‰ç›¸ä¼¼åº¦ã€‚ $$ Attention(Q,K,V)=softmax(\\frac{QK^T}{\\sqrt {d_k}})V $$ä¸€ä¸ª query å¯¹æ‰€æœ‰ key çš„å†…ç§¯å€¼ï¼Œç„¶åå†é™¤ä»¥$\\sqrt{d_k}$ï¼Œ å†åš softmaxã€‚ softmax æ˜¯å¯¹æ¯ä¸€è¡Œçš„å€¼åš softmaxï¼Œç„¶åæ¯ä¸€è¡Œä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œä¼šå¾—åˆ°æƒé‡ã€‚ é™¤ä»¥$\\sqrt{d_k}$ï¼šé˜²æ­¢softmaxå‡½æ•°çš„æ¢¯åº¦æ¶ˆå¤±ã€‚ 2 ä¸ªå‘é‡çš„é•¿åº¦æ¯”è¾ƒé•¿çš„æ—¶å€™ï¼Œç‚¹ç§¯çš„å€¼å¯èƒ½ä¼šæ¯”è¾ƒå¤§ï¼Œç›¸å¯¹çš„å·®è·ä¼šå˜å¤§ï¼Œå¯¼è‡´æœ€å¤§å€¼ softmaxä¼šæ›´åŠ é è¿‘äº1ï¼Œå‰©ä¸‹é‚£äº›å€¼å°±ä¼šæ›´åŠ é è¿‘äº0ã€‚å€¼å°±ä¼šæ›´åŠ å‘ä¸¤ç«¯é æ‹¢ï¼Œç®—æ¢¯åº¦çš„æ—¶å€™ï¼Œæ¢¯åº¦æ¯”è¾ƒå°ã€‚ Maskæœºåˆ¶ padding maskï¼šå¯¹è¾“å…¥åºåˆ—è¿›è¡Œå¯¹é½ã€‚ å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯ç»™åœ¨è¾ƒçŸ­çš„åºåˆ—åé¢å¡«å…… 0ã€‚ä½†æ˜¯å¦‚æœè¾“å…¥çš„åºåˆ—å¤ªé•¿ï¼Œåˆ™æ˜¯æˆªå–å·¦è¾¹çš„å†…å®¹ï¼ŒæŠŠå¤šä½™çš„ç›´æ¥èˆå¼ƒã€‚ æ“ä½œå’ŒSequence maskä¸€è‡´ã€‚ Sequence maskï¼šé¿å…åœ¨ t æ—¶åˆ»ï¼Œçœ‹åˆ° t æ—¶åˆ»ä»¥åçš„ä¸œè¥¿ã€‚(é€‰æ‹©ä½¿ç”¨ï¼Œåœ¨decoderæ—¶ä½¿ç”¨) æ“ä½œå®ç°ï¼šæŠŠ$ Q_t $å’Œ $K_t $å’Œä»–ä»¬ä¹‹åçš„å€¼æ¢æˆä¸€ä¸ªå¾ˆå¤§çš„è´Ÿæ•°ï¼Œè¿›å…¥ softmax åï¼Œæƒé‡ä¸º0ã€‚ å’Œ V çŸ©é˜µåšçŸ©é˜µä¹˜æ³•æ—¶ï¼Œæ²¡çœ‹åˆ° t æ—¶åˆ»ä»¥åçš„å†…å®¹ï¼Œåªçœ‹ t æ—¶åˆ»ä¹‹å‰çš„ key - value pairã€‚ maskæ˜¯ä¸ª 0 1çŸ©é˜µï¼Œå’Œattentionï¼ˆscale QKï¼‰sizeä¸€æ ·ï¼Œt æ—¶åˆ»ä»¥å mask ä¸º 0ã€‚ Multi-Head Attention å¤šå¤´æœºåˆ¶æ‰©å¤§äº†æ¨¡å‹å¯¹ä¸åŒä½ç½®çš„å…³æ³¨èƒ½åŠ› å¤šå¤´æœºåˆ¶èµ‹äºˆattentionå¤šç§å­è¡¨è¾¾æ–¹å¼ å…ˆæŠ•å½±åˆ°ä½ç»´ï¼ŒæŠ•å½±çš„ w æ˜¯å¯ä»¥å­¦ä¹ çš„ï¼›multi-head attention ç»™ h æ¬¡æœºä¼šå»å­¦ä¹  ä¸ä¸€æ ·çš„æŠ•å½±çš„æ–¹æ³•ï¼Œä½¿å¾—åœ¨æŠ•å½±è¿›å»çš„åº¦é‡ç©ºé—´é‡Œé¢èƒ½å¤Ÿå»åŒ¹é…ä¸åŒæ¨¡å¼éœ€è¦çš„ä¸€äº›ç›¸ä¼¼å‡½æ•°ï¼Œç„¶åæŠŠ h ä¸ª heads æ‹¼æ¥èµ·æ¥ï¼Œæœ€åå†åšä¸€æ¬¡æŠ•å½±ã€‚ è¾“å…¥ï¼šåŸå§‹çš„ valueã€keyã€query è¿›å…¥ä¸€ä¸ªLinearå±‚ï¼ŒæŠŠ valueã€keyã€query æŠ•å½±åˆ°æ¯”è¾ƒä½çš„ç»´åº¦ã€‚ç„¶åå†åšä¸€ä¸ª scaled dot product ã€‚æ‰§è¡Œ h æ¬¡ä¼šå¾—åˆ° h ä¸ªè¾“å‡ºï¼Œå†æŠŠ h ä¸ª è¾“å‡ºå‘é‡å…¨éƒ¨åˆå¹¶ concat åœ¨ä¸€èµ·ï¼Œæœ€ååšä¸€æ¬¡çº¿æ€§çš„æŠ•å½± Linearã€‚ æŠ•å½±ç»´åº¦ $d_v = d_{model} / h = 512 / 8 = 64$ï¼Œæ¯ä¸ª head å¾—åˆ° 64 ç»´åº¦ï¼Œconcatï¼Œå†æŠ•å½±å› $d_{model}$ã€‚ concatè¿‡ç¨‹ ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/transformer/:4:1","tags":["Deep Learning","Transformer","NLP"],"title":"Transformer","uri":"/posts/deeplearning/transformer_nlp/transformer/"},{"categories":["Deep Learning"],"content":"Decoder Decoder æ˜¯ auto-regressive è‡ªå›å½’ã€‚å½“å‰æ—¶åˆ»çš„è¾“å…¥æ˜¯ä¹‹å‰ä¸€äº›æ—¶åˆ»çš„è¾“å‡ºã€‚åšé¢„æµ‹æ—¶ï¼Œdecoder ä¸èƒ½çœ‹åˆ°ä¹‹åæ—¶åˆ»çš„è¾“å‡ºã€‚ Transformerè§£ç å™¨ä¹Ÿæ˜¯ç”±å¤š(N=6)ä¸ªç›¸åŒçš„å±‚å åŠ è€Œæˆçš„ï¼Œæ¯ä¸ªå±‚éƒ½æœ‰ä¸‰ä¸ªå­å±‚ï¼ˆå­å±‚è¡¨ç¤ºä¸ºsublayerï¼‰ã€‚ attention mechanism æ¯ä¸€æ¬¡èƒ½çœ‹å®Œå®Œæ•´çš„è¾“å…¥ï¼Œè¦é¿å…è¿™ä¸ªæƒ…å†µçš„å‘ç”Ÿã€‚ ç¬¬ä¸€ä¸ªå­å±‚æ˜¯å¸¦æ©ç çš„å¤šå¤´è‡ªæ³¨æ„åŠ›ï¼ˆMasked multi-head self-attentionï¼‰ï¼› è¾“å…¥qkvå¤åˆ¶ 3 ä»½ masked ä½“ç°åœ¨ï¼Œåœ¨é¢„æµ‹ç¬¬ t ä¸ªæ—¶åˆ»çš„è¾“å‡ºçš„æ—¶å€™ï¼Œçœ‹ä¸åˆ° t æ—¶åˆ»ä»¥åçš„è¾“å…¥,å…·ä½“æ“ä½œçœ‹Maskæœºåˆ¶ï¼Œä¸¤ä¸ªMaskç›¸åŠ ã€‚ ä¿ç•™äº†è‡ªå›å½’ï¼ˆauto-regressiveï¼‰å±æ€§ï¼Œç¡®ä¿é¢„æµ‹ä»…ä¾èµ–äºå·²ç”Ÿæˆçš„è¾“å‡ºè¯å…ƒã€‚ ç¬¬äºŒä¸ªå­å±‚æ˜¯**[å¤šå¤´è‡ªæ³¨æ„åŠ›](#####Multi-Head Attention)ï¼ˆmulti-head self-attentionï¼‰**ï¼› ä¸å†æ˜¯ self-attentionã€‚ key - value æ¥è‡ª encoder çš„è¾“å‡ºã€‚ query æ˜¯æ¥è‡ª decoder é‡Œ masked multi-head attention çš„è¾“å‡ºã€‚ attentionï¼šquery æ³¨æ„åˆ°å½“å‰çš„ query æ„Ÿå…´è¶£çš„ä¸œè¥¿ï¼Œå¯¹å½“å‰çš„ queryçš„ä¸æ„Ÿå…´è¶£çš„å†…å®¹ï¼Œå¯ä»¥å¿½ç•¥æ‰ã€‚ åœ¨ encoder å’Œ decoder ä¹‹é—´ä¼ é€’ä¿¡æ¯ ç¬¬ä¸‰ä¸ªå­å±‚æ˜¯åŸºäºä½ç½®çš„å‰é¦ˆç½‘ç»œï¼ˆposition-wise feed-forward networkï¼‰ã€‚ æ¯ä¸ªå­å±‚éƒ½é‡‡ç”¨äº†æ®‹å·®è¿æ¥ï¼ˆresidual connectionï¼‰å’Œå±‚è§„èŒƒåŒ–ï¼ˆlayer normalizationï¼‰ å…³äºåºåˆ—åˆ°åºåˆ—æ¨¡å‹ï¼ˆsequence-to-sequence modelï¼‰ï¼Œåœ¨è®­ç»ƒé˜¶æ®µï¼Œå…¶è¾“å‡ºåºåˆ—çš„æ‰€æœ‰ä½ç½®çš„è¯å…ƒéƒ½æ˜¯å·²çŸ¥çš„ï¼›ç„¶è€Œï¼Œåœ¨é¢„æµ‹é˜¶æ®µï¼Œå…¶è¾“å‡ºåºåˆ—çš„è¯å…ƒæ˜¯é€ä¸ªç”Ÿæˆçš„ã€‚å› æ­¤ï¼Œåªæœ‰ç”Ÿæˆçš„è¯å…ƒæ‰èƒ½ç”¨äºè§£ç å™¨çš„è‡ªæ³¨æ„åŠ›è®¡ç®—ä¸­ã€‚æµç¨‹å¦‚ä¸‹ï¼ˆåŒ…å«è§£ç å™¨Decoderçš„shifted right è¾“å…¥çŠ¶å†µï¼‰ï¼š decoder_step1 Decoder_step_end ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/transformer/:4:2","tags":["Deep Learning","Transformer","NLP"],"title":"Transformer","uri":"/posts/deeplearning/transformer_nlp/transformer/"},{"categories":["Deep Learning"],"content":"The Final Linear and Softmax Layer çº¿æ€§å±‚æ˜¯ä¸ªç®€å•çš„å…¨è¿æ¥å±‚ï¼Œå°†è§£ç å™¨çš„æœ€åè¾“å‡ºæ˜ å°„åˆ°ä¸€ä¸ªéå¸¸å¤§çš„logitså‘é‡ä¸Šã€‚ å‡è®¾æ¨¡å‹å·²çŸ¥æœ‰1ä¸‡ä¸ªå•è¯ï¼ˆè¾“å‡ºçš„è¯è¡¨ï¼‰ä»è®­ç»ƒé›†ä¸­å­¦ä¹ å¾—åˆ°ã€‚é‚£ä¹ˆï¼Œlogitså‘é‡å°±æœ‰1ä¸‡ç»´ï¼Œæ¯ä¸ªå€¼è¡¨ç¤ºæ˜¯æŸä¸ªè¯çš„å¯èƒ½å€¾å‘å€¼ã€‚ softmaxå±‚å°†è¿™äº›åˆ†æ•°è½¬æ¢æˆæ¦‚ç‡å€¼ï¼ˆéƒ½æ˜¯æ­£å€¼ï¼Œä¸”åŠ å’Œä¸º1ï¼‰ï¼Œæœ€é«˜å€¼å¯¹åº”çš„ç»´ä¸Šçš„è¯å°±æ˜¯è¿™ä¸€æ­¥çš„è¾“å‡ºå•è¯ã€‚ ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/transformer/:4:3","tags":["Deep Learning","Transformer","NLP"],"title":"Transformer","uri":"/posts/deeplearning/transformer_nlp/transformer/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» å“ˆä½›æ³¨é‡Šç‰ˆï¼šThe Annotated Transformer æ–¯å¦ç¦100+ä½œè€…çš„200+é¡µç»¼è¿° å¯¹LayerNormçš„æ–°ç ”ç©¶ å¯¹Attentionåœ¨Transformeré‡Œé¢ä½œç”¨çš„ç ”ç©¶ Bç«™ï¼šTransformerè®ºæ–‡é€æ®µç²¾è¯»ã€è®ºæ–‡ç²¾è¯»ã€‘ Bç«™ï¼šTransformerä¸­Self-Attentionä»¥åŠMulti-Head Attentionè¯¦è§£ Bç«™ï¼šTransformeræ¨¡å‹(1/2): å‰¥ç¦»RNNï¼Œä¿ç•™Attention The Illustrated Transformer Transformer è®ºæ–‡è¯¦ç»†è§£è¯»:å¤šé…å›¾ è¯¦è§£Transformerä¸­Self-Attentionä»¥åŠMulti-Head Attention çŸ¥ä¹ï¼šã€Transformerã€‘10åˆ†é’Ÿå­¦ä¼šTransformer | Pytorchä»£ç è®²è§£ | ä»£ç å¯è¿è¡Œ çŸ¥ä¹ï¼šæ·±åº¦å­¦ä¹ attentionæœºåˆ¶ä¸­çš„Q,K,Våˆ†åˆ«æ˜¯ä»å“ªæ¥çš„ï¼Ÿ èŠ¦è‹‡çš„æœºå™¨å­¦ä¹ ç¬”è®°ï¼šSelf-Attentionå’ŒTransformer ææ²ï¼šåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ â€”â€”10.7. Transformer ","date":"2023-06-10","objectID":"/posts/deeplearning/transformer_nlp/transformer/:5:0","tags":["Deep Learning","Transformer","NLP"],"title":"Transformer","uri":"/posts/deeplearning/transformer_nlp/transformer/"},{"categories":["Deep Learning"],"content":"MAE","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/mae/","tags":["Deep Learning","Transformer","CV"],"title":"MAE","uri":"/posts/deeplearning/transformer_cv/mae/"},{"categories":["Deep Learning"],"content":"MAE æ–‡ç« æ ‡é¢˜ï¼šMasked Autoencoders Are Scalable Vision Learners ä½œè€…ï¼šKaiming He, Xinlei Chen, Saining Xie, Yanghao Li, Piotr DollÃ¡r, Ross Girshick å‘è¡¨æ—¶é—´ï¼š2021 å®˜æ–¹ä»£ç  BERTçš„CVç‰ˆ Masked Autoencoders are scalable vision learners å¸¦æ©ç çš„è‡ªç¼–ç å™¨ æ˜¯å¯æ‰©å±•çš„è§†è§‰å­¦ä¹ å™¨ ä¸¤ä¸ªè¯çš„ç”¨æ³• scalableï¼šå¯æ‰©å±•çš„ï¼Œæ¨¡å‹æ¯”è¾ƒå¤§ efficientï¼šç®—æ³•ç‰¹åˆ«å¿« vision learnersï¼šä¸€ä¸ª backbone çš„æ¨¡å‹ maskedï¼šæ¥æºäº BERTï¼š æ¯æ¬¡æŒ–æ‰ä¸€äº›ä¸œè¥¿ï¼Œç„¶åå»é¢„æµ‹æŒ–æ‰çš„ä¸œè¥¿ Auto-encoderï¼š auto â€œè‡ªâ€ï¼ŒMLæ¨¡å‹ auto è‡ªæ¨¡å‹ï¼› æ ·æœ¬ x å’Œ æ ‡å· y æ¥è‡ªäºåŒæ ·çš„å¥å­é‡Œé¢çš„è¯ â€“\u003e auto åŠ  auto åœ¨ encoderä¹‹å‰ï¼ŒMAE çš„å›¾ç‰‡æ ‡å·æ˜¯å›¾ç‰‡æœ¬èº«ï¼ŒåŒºåˆ†äºå…¶å®ƒå·¥ä½œ ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/mae/:1:0","tags":["Deep Learning","Transformer","CV"],"title":"MAE","uri":"/posts/deeplearning/transformer_cv/mae/"},{"categories":["Deep Learning"],"content":"What makes masked autoencoding different between vision and languageï¼Ÿ ä»€ä¹ˆä½¿å¾— å¸¦æ©ç çš„è‡ªç¼–ç å™¨æ¨¡å‹åœ¨ CV å’Œ NLP å¤„ç†ä¸Šçš„ä¸ä¸€æ ·å‘¢ï¼Ÿ CV ä½¿ç”¨ CNNï¼Œå·ç§¯çª—å£ä¸å¥½å°† mask æ”¾è¿›å» CNN åœ¨ä¸€å¼ å›¾ç‰‡ä¸Šï¼Œä½¿ç”¨ä¸€ä¸ªå·ç§¯çª—å£ã€ä¸æ–­åœ°å¹³æ»‘ï¼Œæ¥æ±‡èšä¸€äº›åƒç´ ä¸Šé¢çš„ä¿¡æ¯ + æ¨¡å¼è¯†åˆ« Transformer çš„ä¸€ä¸ª mask å¯¹åº”çš„æ˜¯ä¸€ä¸ªç‰¹å®šçš„è¯ï¼Œä¼šä¸€ç›´ä¿ç•™ï¼Œå’Œåˆ«çš„è¯åŒºåˆ†å¼€æ¥ å·ç§¯ä¸Šä¸å¥½åšæ©ç ï¼šå›¾ç‰‡çš„ä¸€å—ç›–ä½ by åƒç´ æ›¿æ¢æˆä¸€ä¸ªç‰¹å®šçš„å€¼ï¼Œå·ç§¯çª—å£æ‰«è¿‡æ¥ã€æ‰«è¿‡å»æ—¶ï¼Œæ— æ³•åŒºåˆ†è¾¹ç•Œï¼Œæ— æ³•ä¿æŒ mask çš„ç‰¹æ®Šæ€§ï¼Œæ— æ³•æ‹å‡ºæ¥ maskï¼›æœ€åä»æ©ç ä¿¡æ¯å¾ˆéš¾è¿˜åŸå‡ºæ¥ å·ç§¯ä¸å¥½åŠ å…¥ä½ç½®ç¼–ç ï¼Ÿ ä¸é‚£ä¹ˆå……åˆ† Transformer éœ€è¦ä½ç½®ç¼–ç ï¼šattention æœºåˆ¶æ²¡æœ‰ä½ç½®ä¿¡æ¯ å·ç§¯è‡ªå¸¦ä½ç½®ä¿¡æ¯ï¼Œä¸æ–­å¹³ç§»æ—¶ï¼Œä¸éœ€è¦åŠ å…¥ä½ç½®ä¿¡æ¯ è¯­è¨€å’Œå›¾ç‰‡çš„ä¿¡æ¯å¯†åº¦ä¸åŒ NLP çš„ä¸€ä¸ªè¯æ˜¯ä¸€ä¸ªè¯­ä¹‰çš„å®ä½“ï¼Œä¸€ä¸ªè¯åœ¨å­—å…¸é‡Œæœ‰å¾ˆé•¿çš„è§£é‡Šï¼›ä¸€å¥è¯å»æ‰å‡ ä¸ªè¯ï¼Œä»»åŠ¡å¾ˆéš¾ï¼Œi.e., å®Œå½¢å¡«ç©º â€“\u003e BERT çš„ mask æ¯”ä¾‹ä¸èƒ½è¿‡é«˜ CV çš„å›¾ç‰‡çš„Mask Maskå—å¤ªå°‘ï¼Œç›´æ¥é€šè¿‡å¯¹é‚»å±…çš„åƒç´ å€¼è¿›è¡Œæ’å€¼è¿˜åŸï¼Œå¤ªç®€å• éšæœºå»æ‰å¾ˆé«˜æ¯”ä¾‹çš„å—ï¼Œæå¤§é™ä½å›¾ç‰‡çš„å†—ä½™æ€§ï¼Œè¿«ä½¿æ¨¡å‹å­¦ä¹ æ›´å¥½çš„è¡¨å¾ï¼šnontrivial ä»»åŠ¡ï¼Œä½¿æ¨¡å‹å»çœ‹ ä¸€å¼ å›¾ç‰‡çš„ holistic å…¨å±€ä¿¡æ¯ï¼Œè€Œä¸ä»…å…³æ³¨å±€éƒ¨ The autoencoderâ€˜s decoder CV è¿˜åŸå›¾ç‰‡çš„åŸå§‹åƒç´ ï¼šä½å±‚æ¬¡çš„è¡¨ç¤º NLP è¿˜åŸå¥å­é‡Œçš„è¯ï¼šè¯­ä¹‰å±‚æ¬¡æ›´é«˜ï¼Œi.e., BERT çš„ä¸€ä¸ªå…¨è¿æ¥å±‚è¿˜åŸè¯ å›¾ç‰‡åˆ†ç±»ã€ç›®æ ‡æ£€æµ‹çš„ decoderï¼šä¸€ä¸ªå…¨è¿æ¥å±‚ è¯­ä¹‰åˆ†å‰²ï¼ˆåƒç´ çº§åˆ«çš„è¾“å‡ºï¼‰ï¼šä¸€ä¸ªå…¨è¿æ¥å±‚ä¸å¤Ÿï¼Œå¾ˆæœ‰å¯èƒ½ä½¿ç”¨ä¸€ä¸ªè½¬ç½®çš„å·ç§¯ç¥ç»ç½‘ç»œã€æ¥åšä¸€ä¸ªæ¯”è¾ƒå¤§è§£ç å™¨ã€‚ ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/mae/:2:0","tags":["Deep Learning","Transformer","CV"],"title":"MAE","uri":"/posts/deeplearning/transformer_cv/mae/"},{"categories":["Deep Learning"],"content":"Approach éšæœºç›–ä½å›¾ç‰‡é‡Œçš„ä¸€äº›å—(patch, image çš„ä¸€ä¸ªå—)ï¼Œå†é‡æ„ç¼ºå¤±çš„åƒç´ ã€‚ MAE é¢„è®­ç»ƒæµç¨‹ï¼šinput â€“\u003e patches â€“\u003e masked â€“\u003e unmasked patches in encoder â€“\u003e unmasked + masked æŒ‰ä½ç½®æ’åˆ—è¿› decoder â€“\u003e decoder é‡æ„ masked patches çš„åƒç´  patches + maskedï¼šä¸€å¼ çº¢è‰²é¸Ÿå›¾ç‰‡è¿›æ¥ï¼Œåˆ‡æˆ patchesï¼Œmasked å— (3/4) æ˜¯ ç°è‰²çš„ã€‚ unmasked patchesï¼Œencoderï¼šæ²¡æœ‰ masked (1 / 4) çš„å— è¿›å…¥ encoder (ViT)ï¼Œå¾—åˆ°æ¯ä¸€å—çš„ç‰¹å¾ï¼ˆè“è‰²ï¼‰ã€‚ encoder çš„è¾“å‡º å’Œ masked tokens æŒ‰ç…§åœ¨å›¾ç‰‡ä¸­çš„åŸå§‹ä½ç½®æ’åˆ—æˆä¸€é•¿æ¡å‘é‡ ï¼ˆåŒ…å«ä½ç½®ä¿¡æ¯ï¼‰ã€‚ é•¿æ¡å‘é‡ è¿›å…¥ decoderï¼Œè§£ç å™¨å°è¯•é‡æ„ç¼ºå¤±çš„åƒç´ ä¿¡æ¯ï¼Œè¿˜åŸåŸå§‹å›¾ç‰‡ è§£ç å™¨çš„æœ€åä¸€å±‚ï¼š a linear projection ä¸€ä¸ª patch æ˜¯ 16 * 16 åƒç´ çš„è¯ï¼Œçº¿æ€§å±‚ä¼šæŠ•å½±åˆ°é•¿ä¸º 256 çš„ç»´åº¦ï¼Œå† reshape(16, 16), è¿˜åŸåŸå§‹åƒç´ ä¿¡æ¯ æŸå¤±å‡½æ•°ï¼š MSEï¼Œåƒç´ å€¼ç›¸å‡ï¼Œå†å¹³æ–¹å’Œï¼ˆåªä½œç”¨äºéå¯è§å—çš„æŸå¤±ï¼Œå’Œ BERT ä¸€æ ·ï¼‰ encoder æ¯” decoder é«˜ï¼šè®¡ç®—é‡ä¸»è¦æ¥è‡ªäº encoderï¼Œå¯¹å›¾ç‰‡çš„åƒç´ è¿›è¡Œç¼–ç  ç”¨ MAE åšä¸€ä¸ª CV çš„ä»»åŠ¡ï¼Œåªéœ€è¦ç”¨ç¼–ç å™¨ã€‚ä¸€å¼ å›¾ç‰‡è¿›æ¥ï¼Œä¸éœ€è¦åšæ©ç ï¼Œç›´æ¥åˆ‡æˆ patches æ ¼å­å—ï¼Œç„¶åå¾—åˆ°æ‰€æœ‰ patches çš„ç‰¹å¾è¡¨ç¤ºï¼Œå½“æˆæ˜¯è¿™å¼ å›¾ç‰‡çš„ç‰¹å¾è¡¨è¾¾ï¼Œç”¨æ¥åš CV çš„ä»»åŠ¡ ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/mae/:3:0","tags":["Deep Learning","Transformer","CV"],"title":"MAE","uri":"/posts/deeplearning/transformer_cv/mae/"},{"categories":["Deep Learning"],"content":"Simple implementation å¯¹æ¯ä¸€ä¸ªè¾“å…¥ patch ç”Ÿæˆ a tokenï¼šä¸€ä¸ªä¸€ä¸ª patch çš„çº¿æ€§æŠ•å½± + ä½ç½®ä¿¡æ¯ éšæœºé‡‡æ ·ï¼šrandomly shuffle éšæœºæ‰“æ–­åºåˆ—ï¼ŒæŠŠæœ€åä¸€å—æ‹¿æ‰ã€‚ ä»å¤´éƒ¨å‡åŒ€çš„ã€æ²¡æœ‰é‡ç½®çš„æ ·æœ¬é‡‡æ · 25% æ„å‘³ç€ éšæœº shuffleï¼Œ åªä¿ç•™å‰ 25% after encoding è§£ç æ—¶ï¼šappend è·Ÿä»¥å‰é•¿åº¦ä¸€æ ·çš„è¿™äº›æ©ç çš„ä¸€äº›è¯æº mask tokens ï¼ˆä¸€ä¸ªå¯ä»¥å­¦ä¹ çš„å‘é‡ + ä½ç½®ä¿¡æ¯ï¼‰ï¼Œé‡æ–° unshuffle è¿˜åŸåˆ°åŸæ¥çš„é¡ºåº MSE ç®—è¯¯å·®æ—¶ï¼Œè·ŸåŸå§‹å›¾çš„ patches å¯¹åº” ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/mae/:4:0","tags":["Deep Learning","Transformer","CV"],"title":"MAE","uri":"/posts/deeplearning/transformer_cv/mae/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» MAE è®ºæ–‡é€æ®µç²¾è¯»ã€è®ºæ–‡ç²¾è¯»ã€‘ ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/mae/:5:0","tags":["Deep Learning","Transformer","CV"],"title":"MAE","uri":"/posts/deeplearning/transformer_cv/mae/"},{"categories":["Deep Learning"],"content":"VIT","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/vit/","tags":["Deep Learning","Transformer","CV"],"title":"VIT","uri":"/posts/deeplearning/transformer_cv/vit/"},{"categories":["Deep Learning"],"content":"[toc] ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/vit/:0:0","tags":["Deep Learning","Transformer","CV"],"title":"VIT","uri":"/posts/deeplearning/transformer_cv/vit/"},{"categories":["Deep Learning"],"content":"Vision Transformer (VIT) æ–‡ç« æ ‡é¢˜ï¼šAn Image is Worth 16x16 Words: Transformers for Image Recognition at Scale ä½œè€…ï¼šAlexey Dosovitskiy; Lucas Beyer, Alexander Kolesnikov, Dirk Weissenborn,Xiaohua Zhai å‘è¡¨æ—¶é—´ï¼š(ICLR 2021) Transformeræ€å…¥CVç•Œ å®˜æ–¹ä»£ç  æ¯ä¸€ä¸ªæ–¹æ ¼éƒ½æ˜¯ 16 * 16 å¤§å°ï¼Œå›¾ç‰‡æœ‰å¾ˆå¤š 16 * 16 æ–¹æ ¼ patches â€“\u003e an image is worth 16 * 16 words ä¸€ä¸ª 224 * 224 å›¾ç‰‡ å˜æˆä¸€ä¸ª 196 ä¸ªçš„ 16 * 16 å›¾ç‰‡å—ï¼ˆwords in NLPï¼‰ã€‚ vit ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/vit/:1:0","tags":["Deep Learning","Transformer","CV"],"title":"VIT","uri":"/posts/deeplearning/transformer_cv/vit/"},{"categories":["Deep Learning"],"content":"Introdouction Transformer åº”ç”¨åœ¨ CV çš„éš¾ç‚¹ è®¡ç®—åƒç´ çš„ self-attentionï¼Œåºåˆ—é•¿ï¼Œç»´åº¦çˆ†ç‚¸ Trnasformer çš„è®¡ç®—å¤æ‚åº¦æ˜¯åºåˆ—é•¿åº¦ n çš„ å¹³æ–¹å³ $Oï¼ˆn^2ï¼‰$ 224 åˆ†è¾¨ç‡çš„å›¾ç‰‡ï¼Œæœ‰ 50176 ä¸ªåƒç´ ç‚¹ï¼Œï¼ˆ2d å›¾ç‰‡ flattenï¼‰åºåˆ—é•¿åº¦æ˜¯ BERT(512) çš„è¿‘ 100 å€ã€‚ CV å¦‚ä½•ç”¨attention( é™ä½åºåˆ—é•¿åº¦) CNN ç»“æ„ + self-attention Non-Local Network, ç½‘ç»œä¸­çš„ç‰¹å¾å›¾å½“ä½œè¾“å…¥ Transformer DETR attention æ›¿ä»£å·ç§¯ stand-alone attention å­¤ç«‹è‡ªæ³¨æ„åŠ› ç”¨ local window å±€éƒ¨å°çª—å£æ§åˆ¶ transformer çš„è®¡ç®—å¤æ‚åº¦ axial attention è½´æ³¨æ„åŠ› 2då˜æˆ2ä¸ª1d é¡ºåºæ“ä½œï¼Œé™ä½è®¡ç®—å¤æ‚åº¦ Transformer æ¯” CNN å°‘ inductive biases å½’çº³åç½®(å…ˆéªŒçŸ¥è¯† or æå‰çš„å‡è®¾) CNN çš„ inductive biases æ˜¯ locality å’Œ å¹³ç§»ç­‰å˜æ€§ translation equaivarianceï¼ˆå¹³ç§»ä¸å˜æ€§ spatial invarianceï¼‰ locality: CNNç”¨æ»‘åŠ¨çª—å£åœ¨å›¾ç‰‡ä¸Šåšå·ç§¯ã€‚å‡è®¾æ˜¯å›¾ç‰‡ç›¸é‚»çš„åŒºåŸŸæœ‰ç›¸ä¼¼çš„ç‰¹å¾ã€‚ translation equaivarianceï¼šf (g(x)) = g( f(x) );f å’Œ g å‡½æ•°çš„é¡ºåºä¸å½±å“ç»“æœã€‚ CNN çš„å·ç§¯æ ¸ åƒä¸€ä¸ª template æ¨¡æ¿ï¼ŒåŒæ ·çš„ç‰©ä½“æ— è®ºç§»åŠ¨åˆ°å“ªé‡Œï¼Œé‡åˆ°äº†ç›¸åŒçš„å·ç§¯æ ¸ï¼Œå®ƒçš„è¾“å‡ºä¸€è‡´ Transformer æ²¡æœ‰è¿™äº›å…ˆéªŒä¿¡æ¯ï¼Œåªèƒ½ä»å›¾ç‰‡æ•°æ®é‡Œï¼Œè‡ªå·±å­¦ä¹ å¯¹è§†è§‰ä¸–ç•Œçš„æ„ŸçŸ¥ã€‚ ViT ç”¨äº†å›¾ç‰‡ 2d ç»“æ„ çš„ inductive bias åœ°æ–¹ï¼šresolution adjustment å°ºå¯¸æ”¹å˜ å’Œ patch extraction æŠ½patches ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/vit/:2:0","tags":["Deep Learning","Transformer","CV"],"title":"VIT","uri":"/posts/deeplearning/transformer_cv/vit/"},{"categories":["Deep Learning"],"content":"Related work ICLR 2020 ä»è¾“å…¥å›¾ç‰‡é‡ŒæŠ½å– 2 * 2 patchesã€‚ CIFAR-10 32 * 32 å›¾ç‰‡ï¼Œ2 * 2è¶³å¤Ÿï¼Œ16 * 16 ä¼šè¿‡å¤§ã€‚ æŠ½å¥½ patch ä¹‹åï¼Œåœ¨ patches ä¸Š åš self-attentionã€‚ ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/vit/:3:0","tags":["Deep Learning","Transformer","CV"],"title":"VIT","uri":"/posts/deeplearning/transformer_cv/vit/"},{"categories":["Deep Learning"],"content":"VIT Model ViT-B/16ä¸ºä¾‹ Model Patch_size Layers Hidden_size D MLP_size 4D Heads Params $Vit_{base}$ $16\\times16$ 12 768 3071 12 86M $Vit_{large}$ $16\\times16$ 24 1024 4096 16 307M $Vit_{huge}$ $14\\times14$ 32 1280 5120 16 632M åˆ’åˆ† patchesï¼Œflatten patches çš„çº¿æ€§æŠ•å½± + patches çš„ä½ç½®ä¿¡æ¯ï¼Œå¾—åˆ°è¾“å…¥transformer çš„ tokens å°†å›¾åƒ$224Ã—224Ã—3$åˆ’åˆ†æˆå¤§å°$16Ã—16$çš„patch(å°æ–¹å—)ï¼Œæ¯ä¸ªpatchå—å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªtoken(è¯å‘é‡)ï¼Œå…±æœ‰$(224/16)^2=196$ä¸ªtokenï¼Œæ¯ä¸ªtokençš„é•¿åº¦ä¸º$16Ã—16Ã—3=768$ã€‚[16, 16, 3] -\u003e [768] åœ¨ä»£ç å®ç°ä¸­ï¼Œç›´æ¥ä½¿ç”¨ä¸€ä¸ªå·ç§¯æ ¸å¤§å°ä¸º16x16ï¼Œæ­¥è·ä¸º16ï¼Œå·ç§¯æ ¸ä¸ªæ•°ä¸º768çš„å·ç§¯æ¥å®ç°ã€‚é€šè¿‡å·ç§¯[224, 224, 3] -\u003e [14, 14, 768]ï¼Œç„¶åæŠŠHä»¥åŠWä¸¤ä¸ªç»´åº¦å±•å¹³å³å¯[14, 14, 768] -\u003e [196, 768] å¦‚æœæ”¹å˜å›¾åƒçš„è¾“å…¥å¤§å°ï¼ŒViTä¸ä¼šæ”¹å˜patchsçš„å¤§å°ï¼Œé‚£ä¹ˆpatchsçš„æ•°é‡ä¼šå‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆä¹‹å‰å­¦ä¹ çš„pos_embedå°±ç»´åº¦å¯¹ä¸ä¸Šäº†ï¼ŒViTé‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯é€šè¿‡æ’å€¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ [class] tokenï¼šå¯è®­ç»ƒçš„å‚æ•°ï¼Œé•¿åº¦ä¸º768çš„å‘é‡ï¼ŒConcat([1, 768], [196, 768]) -\u003e [197, 768] æ‰€æœ‰çš„ tokens åœ¨åšä¸¤ä¸¤çš„äº¤äº’ä¿¡æ¯ã€‚å› æ­¤ï¼Œ[CLS] ä¹Ÿä¼šå’Œæ‰€æœ‰çš„å›¾ç‰‡patches çš„token äº¤äº’ï¼Œä»è€Œ [CLS] ä»å›¾ç‰‡ patches + position çš„ embedding å­¦åˆ°æœ‰ç”¨ä¿¡æ¯ï¼Œæœ€åç”¨**[CLS]** åšåˆ†ç±»åˆ¤æ–­ã€‚ CV é€šå¸¸çš„å…¨å±€ç‰¹å¾ï¼šfeature map (14 * 14) â€“\u003e GAP globally average-pooling å…¨å±€å¹³å‡æ± åŒ– â€“\u003e a flatten vector å…¨å±€çš„å›¾ç‰‡ç‰¹å¾å‘é‡ â€“\u003e MLP åˆ†ç±» åŒæ ·çš„ï¼ŒTransformer çš„è¾“å‡ºå…ƒç´  + GAPä¹Ÿå¯ä»¥ç”¨åšå…¨å±€ä¿¡æ¯ + åˆ†ç±»ï¼Œæ•ˆæœå·®å¼‚ä¸å¤§ï¼› ViT å¯¹é½ æ ‡å‡†çš„ transformerï¼Œé€‰ç”¨ NLP é‡Œå¸¸ç”¨çš„ CLS å’Œ 1d position embedding Position Embeddingï¼šé‡‡ç”¨çš„æ˜¯ä¸€ä¸ªå¯è®­ç»ƒçš„å‚æ•°ï¼ˆ1D Pos. Emb.ï¼‰ Add([197, 768], [197, 768]) -\u003e [197, 768] é€‰æ‹©ä¸åŒä½ç½®ç¼–ç å‡ ä¹æ²¡æœ‰å·®å¼‚ï¼ŒåŸå› æ˜¯Transformeræ˜¯ç›´æ¥åœ¨patchä¸Šæ“ä½œè€Œä¸æ˜¯åŸºäºåƒç´ çº§ï¼Œè¾ƒå°‘æ•°é‡çš„ patches ä¹‹é—´çš„ç›¸å¯¹ä½ç½®ä¿¡æ¯ï¼Œå®¹æ˜“å­¦åˆ°ï¼Œå› æ­¤ï¼Œç©ºé—´ä¿¡æ¯ç¼–ç æ–¹å¼å·®å¼‚æ²¡é‚£ä¹ˆé‡è¦ vit_Position_Embedding ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/vit/:4:0","tags":["Deep Learning","Transformer","CV"],"title":"VIT","uri":"/posts/deeplearning/transformer_cv/vit/"},{"categories":["Deep Learning"],"content":"Vit Architecture vit_Architecture MLP Head æ•´ä¸ªEncoderçš„è¾“å‡ºä¸º[197, 768]æˆ‘ä»¬ä»…ä»…ä¿ç•™æœ€å‰é¢çš„CLS tokenä½œä¸ºå…¨è¿æ¥çš„è¾“å…¥[1, 768]ï¼Œç„¶åæ¥ä¸Šå…¨è¿æ¥å±‚åŠåˆ†ç±»æ•°n_classï¼Œä½¿ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°è®¡ç®—æŸå¤±ï¼Œåå‘ä¼ æ’­æ›´æ–°ç½‘ç»œçš„æƒé‡å’Œå‚æ•°ã€‚ åœ¨è®­ç»ƒImageNet21Kæ—¶æ˜¯ç”±Linear+tanhæ¿€æ´»å‡½æ•°+Linearç»„æˆã€‚ä½†æ˜¯è¿ç§»åˆ°ImageNet1Kä¸Šæˆ–è€…ä½ è‡ªå·±çš„æ•°æ®ä¸Šæ—¶ï¼Œåªç”¨ä¸€ä¸ªLinearå³å¯ ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/vit/:4:1","tags":["Deep Learning","Transformer","CV"],"title":"VIT","uri":"/posts/deeplearning/transformer_cv/vit/"},{"categories":["Deep Learning"],"content":"Hybrid Architecture å‰ CNN + å Transformer R50ä¸åŒä¹‹å¤„ R50çš„å·ç§¯å±‚é‡‡ç”¨çš„StdConv2dä¸æ˜¯ä¼ ç»Ÿçš„Conv2d æ‰€æœ‰çš„BatchNormå±‚æ›¿æ¢æˆGroupNormå±‚ã€‚ åœ¨åŸResnet50ç½‘ç»œä¸­ï¼Œstageå †å æ¬¡æ•° [3,4,6,3]ã€‚R50ä¸­ï¼ŒæŠŠstage4ä¸­çš„3ä¸ªBlockç§»è‡³stage3ä¸­ï¼Œå˜æˆ [3,4,9]ã€‚ é€šè¿‡R50 Backboneè¿›è¡Œç‰¹å¾æå–åï¼Œå¾—åˆ°çš„ç‰¹å¾çŸ©é˜µshapeæ˜¯[14, 14, 1024]ï¼Œæ¥ç€å†è¾“å…¥Patch Embeddingå±‚ï¼Œæ³¨æ„Patch Embeddingä¸­å·ç§¯å±‚Conv2dçš„kernel_sizeå’Œstrideéƒ½å˜æˆäº†1ï¼Œåªæ˜¯ç”¨æ¥è°ƒæ•´channelã€‚ Hybrid_Architecture ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/vit/:4:2","tags":["Deep Learning","Transformer","CV"],"title":"VIT","uri":"/posts/deeplearning/transformer_cv/vit/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» ä»£ç  State-of-the-art Machine Learning for JAX, PyTorch and TensorFlow timmç‰ˆvit lucidrains/vit-pytorchå«åŠ¨å›¾ Bç«™ï¼šViTè®ºæ–‡é€æ®µç²¾è¯»ã€è®ºæ–‡ç²¾è¯»ã€‘ Bç«™ï¼šVision Transformerè¯¦è§£ è§†è§‰Transformer(ViT)æ¨¡å‹åˆ›æ–°æ€è·¯æ€»ç»“ ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/vit/:5:0","tags":["Deep Learning","Transformer","CV"],"title":"VIT","uri":"/posts/deeplearning/transformer_cv/vit/"},{"categories":["Deep Learning"],"content":"Swin Transformer æ–‡ç« æ ‡é¢˜ï¼šSwin Transformer: Hierarchical Vision Transformer using Shifted Windows ä½œè€…ï¼šZe Liu, Yutong Lin, Yue Cao, Han Hu, Yixuan Wei, Zheng Zhang, Stephen Lin, Baining Guo å‘è¡¨æ—¶é—´ï¼š(ICCV 2021) å®˜æ–¹ä»£ç  å¤šå±‚æ¬¡çš„Vision Transformer Swin Transformeræ˜¯ä¸€ä¸ªç”¨äº†ç§»åŠ¨çª—å£çš„å±‚çº§å¼çš„Vision Transformer Swinï¼šæ¥è‡ªäº Shifted Windows æ›´å¤§çš„æ•ˆç‡ é€šè¿‡ shifting ç§»åŠ¨çš„è¿™ä¸ªæ“ä½œï¼Œèƒ½å¤Ÿè®©ç›¸é‚»çš„ä¸¤ä¸ªçª—å£ä¹‹é—´æœ‰äº†äº¤äº’ï¼Œæ‰€ä»¥ä¸Šä¸‹å±‚ä¹‹é—´å°±å¯ä»¥æœ‰ cross-window connectionï¼Œä»è€Œå˜ç›¸çš„è¾¾åˆ°äº†ä¸€ç§å…¨å±€å»ºæ¨¡çš„èƒ½åŠ› å±‚çº§å¼ Hierarchical å‡å°‘åºåˆ—é•¿åº¦æ–¹å¼ ç”¨åç»­çš„ç‰¹å¾å›¾æ¥å½“åšTransformerçš„è¾“å…¥ï¼Œ æŠŠå›¾ç‰‡æ‰“æˆ patch æŠŠå›¾ç‰‡ç”»æˆä¸€ä¸ªä¸€ä¸ªçš„å°çª—å£ï¼Œç„¶ååœ¨çª—å£é‡Œé¢å»åšè‡ªæ³¨æ„åŠ› å€Ÿé‰´äº†å¾ˆå¤šå·ç§¯ç¥ç»ç½‘ç»œçš„è®¾è®¡ç†å¿µä»¥åŠå…ˆéªŒçŸ¥è¯† é‡‡å–äº†åœ¨å°çª—å£ä¹‹å†…ç®—è‡ªæ³¨æ„åŠ› åˆ©ç”¨äº†å·ç§¯ç¥ç»ç½‘ç»œé‡Œçš„ Locality çš„ Inductive biasï¼Œå°±æ˜¯åˆ©ç”¨äº†å±€éƒ¨æ€§çš„å…ˆéªŒçŸ¥è¯†ï¼ŒåŒä¸€ä¸ªç‰©ä½“çš„ä¸åŒéƒ¨ä½æˆ–è€…è¯­ä¹‰ç›¸è¿‘çš„ä¸åŒç‰©ä½“è¿˜æ˜¯å¤§æ¦‚ç‡ä¼šå‡ºç°åœ¨ç›¸è¿çš„åœ°æ–¹ æå‡ºæ¥äº†ä¸€ä¸ªç±»ä¼¼äºæ± åŒ–çš„æ“ä½œå«åš patch merging æŠŠç›¸é‚»çš„å° patch åˆæˆä¸€ä¸ªå¤§ patchï¼Œè¿™æ ·åˆå¹¶å‡ºæ¥çš„è¿™ä¸€ä¸ªå¤§patchå…¶å®å°±èƒ½çœ‹åˆ°ä¹‹å‰å››ä¸ªå°patchçœ‹åˆ°çš„å†…å®¹ï¼Œå®ƒçš„æ„Ÿå—é‡å°±å¢å¤§äº†ï¼ŒåŒæ—¶ä¹Ÿèƒ½æŠ“ä½å¤šå°ºå¯¸çš„ç‰¹å¾ ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/vit/:6:0","tags":["Deep Learning","Transformer","CV"],"title":"VIT","uri":"/posts/deeplearning/transformer_cv/vit/"},{"categories":["Deep Learning"],"content":"Overall Architecture swin_vit swin win. sz. 7x7è¡¨ç¤ºä½¿ç”¨çš„çª—å£ï¼ˆWindowsï¼‰çš„å¤§å° dimè¡¨ç¤ºfeature mapçš„channelæ·±åº¦ï¼ˆæˆ–è€…è¯´tokençš„å‘é‡é•¿åº¦ï¼‰ headè¡¨ç¤ºå¤šå¤´æ³¨æ„åŠ›æ¨¡å—ä¸­headçš„ä¸ªæ•° swin_Architecture patch partitionï¼šå°†å›¾åƒ$224Ã—224Ã—3$åˆ’åˆ†æˆå¤§å°$4Ã—4$çš„patch(å°æ–¹å—)ï¼Œå¾—åˆ°$56\\times56\\times48$å¤§å°ã€‚ ï¼ˆ$224/4=56,\\ 4\\times4\\times3=48$ï¼‰ [224, 224, 3] -\u003e [56, 56, 48] Linear Embeddingï¼šè¦æŠŠå‘é‡çš„ç»´åº¦å˜æˆä¸€ä¸ªé¢„å…ˆè®¾ç½®å¥½çš„å€¼Cï¼Œå¯¹äº Swin tinyæ¥è¯´$C=96$ [56, 56, 48] -\u003e[56, 56, 96] Patch Partition å’Œ Linear Embedding å°±ç›¸å½“äºæ˜¯ ViT é‡Œçš„Patch Projection æ“ä½œï¼Œè€Œåœ¨ä»£ç é‡Œä¹Ÿæ˜¯ç”¨ä¸€æ¬¡å·ç§¯æ“ä½œå°±å®Œæˆ $56\\times56=3136$å¤ªé•¿ï¼Œå¼•å…¥äº†åŸºäºçª—å£çš„è‡ªæ³¨æ„åŠ›è®¡ç®—ï¼Œæ¯ä¸ªçª—å£æŒ‰ç…§é»˜è®¤æ¥è¯´ï¼Œéƒ½åªæœ‰$M^2=7^2=49$ä¸ª patchï¼Œæ‰€ä»¥è¯´åºåˆ—é•¿åº¦å°±åªæœ‰49å°±ç›¸å½“å°äº† å…±æœ‰$ (56/7)\\times(56/7)=8\\times8=64 $ä¸ªçª—å£ã€‚ Stage 1 ç»è¿‡ 2 ä¸ª Swin Transformer Blockï¼Œåšäº†çª—å£æ»‘åŠ¨åè¾“å‡ºçš„å°ºå¯¸ä¾ç„¶ä¸º $56\\times56\\times96$ã€‚ Stage 2 ç»è¿‡ Patch Mergingåï¼Œå°ºå¯¸å‡åŠï¼Œé€šé“æ•°ç¿»å€ï¼Œå˜æˆäº†$ 28\\times28\\times192$ï¼Œå†ç»è¿‡ 2 ä¸ª Swin Transformer Blockï¼Œè¾“å‡º$ 28\\times28\\times192$ã€‚ Stage 3 ç»è¿‡Patch Mergingåï¼Œå°ºå¯¸å‡åŠï¼Œé€šé“æ•°ç¿»å€ï¼Œå˜æˆäº†$ 14\\times14\\times384$ï¼Œå†ç»è¿‡ 6 ä¸ª Swin Transformer Blockï¼Œä¹Ÿå°±æ˜¯çª—å£æ»‘åŠ¨äº† 3 æ¬¡ï¼Œè¾“å‡º $ 14\\times14\\times384$ã€‚ Stage 4 ç»è¿‡Patch Mergingåï¼Œå°ºå¯¸å‡åŠï¼Œé€šé“æ•°ç¿»å€ï¼Œå˜æˆäº†$ 7\\times7\\times768$ï¼Œå†ç»è¿‡ 2 ä¸ª Swin Transformer Blockï¼Œè¾“å‡º$ 7\\times7\\times768$ã€‚ ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/vit/:7:0","tags":["Deep Learning","Transformer","CV"],"title":"VIT","uri":"/posts/deeplearning/transformer_cv/vit/"},{"categories":["Deep Learning"],"content":"Path Merging $H\\times W \\times C -\u003e \\ \\frac{H}{2}\\times \\frac{W}{2} \\times 4C-\u003e \\ \\frac{H}{2}\\times \\frac{W}{2} \\times 2C$ swin_Path_Merging ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/vit/:7:1","tags":["Deep Learning","Transformer","CV"],"title":"VIT","uri":"/posts/deeplearning/transformer_cv/vit/"},{"categories":["Deep Learning"],"content":"Swin Transformer Block W-MSA MSA W_MSA æ‹¿stage1ä¸¾ä¾‹ï¼šå°ºå¯¸ä¸º$56\\times56\\times96$ï¼›æ¯ä¸ªçª—å£æŒ‰ç…§é»˜è®¤æ¥è¯´ï¼Œéƒ½åªæœ‰$M^2=7^2=49$ä¸ª patchï¼›å…±æœ‰$ (56/7)\\times(56/7)=8\\times8=64 $ä¸ªçª—å£ã€‚è¿™64ä¸ªçª—å£é‡Œåˆ†åˆ«å»ç®—å®ƒä»¬çš„è‡ªæ³¨æ„åŠ›ã€‚ SW-MSA SW_MSA SW_MSA ç§»åŠ¨çª—å£å°±æ˜¯æŠŠåŸæ¥çš„çª—å£å¾€å³ä¸‹è§’ç§»åŠ¨ä¸€åŠçª—å£(M/2)çš„è·ç¦» å¦‚æœTransformeræ˜¯ä¸Šä¸‹ä¸¤å±‚è¿ç€åšè¿™ç§æ“ä½œï¼Œå…ˆæ˜¯ windowå†æ˜¯ shifted window çš„è¯ï¼Œå°±èƒ½èµ·åˆ°çª—å£å’Œçª—å£ä¹‹é—´äº’ç›¸é€šä¿¡çš„ç›®çš„ã€‚ ä¸¤ä¸ªç»“æ„æ˜¯æˆå¯¹ä½¿ç”¨çš„ï¼Œå…ˆä½¿ç”¨ä¸€ä¸ªW-MSAç»“æ„å†ä½¿ç”¨ä¸€ä¸ªSW-MSAç»“æ„ã€‚æ‰€ä»¥å †å Swin Transformer Blockçš„æ¬¡æ•°éƒ½æ˜¯å¶æ•°ã€‚ $$ Attention(Q,K,V)=softmax(\\frac{Q\\dot K^T}{\\sqrt d}V) $$SAæ¨¡å— $X^{hw\\times C} \\cdot W^{C\\times C}_q = Q^{hw\\times C}$ çŸ©é˜µè¿ç®—é‡è®¡ç®—ï¼š$hw\\times C \\times C$ $X^{hw\\times C} $ï¼šå°†æ‰€æœ‰åƒç´ ï¼ˆtokenï¼‰æ‹¼æ¥åœ¨ä¸€èµ·å¾—åˆ°çš„çŸ©é˜µï¼ˆä¸€å…±æœ‰hwä¸ªåƒç´ ï¼Œæ¯ä¸ªåƒç´ çš„æ·±åº¦ä¸ºCï¼‰ $W^{C\\times C}_q$ï¼šç”Ÿæˆqueryçš„å˜æ¢çŸ©é˜µ åŒç†Kï¼ŒVçš„ç”Ÿæˆä¹Ÿæ˜¯$hw\\times C \\times C$ï¼Œå…±$3hwC^2$ $Q\\cdot K^T$ï¼š$(hw \\times C )\\cdot(C \\times hw)-\u003e(hw)^2C$ $\\frac{Q\\dot K^T}{\\sqrt d}V$ï¼š$(hw \\times hw )\\cdot(hw \\times C)-\u003e(hw)^2C$ ä¸€å…±$3hwC^2+2(hw)^2C$ MSAæ¨¡å— å¤šå¤´æ³¨æ„åŠ›æ¨¡å—ç›¸æ¯”å•å¤´æ³¨æ„åŠ›æ¨¡å—çš„è®¡ç®—é‡å¤šæœ€åä¸€ä¸ªçº¿æ€§æŠ•å½±å±‚$(hw \\times C )\\cdot(C \\times C)-\u003ehwC^2$ ä¸€å…±$4hwC^2+2(hw)^2C$ W_MSAæ¨¡å— å¯¹æ¯ä¸ªçª—å£å†…ä½¿ç”¨å¤šå¤´æ³¨æ„åŠ›æ¨¡å—,ä¸€å…±æœ‰$\\frac{h}{M}\\times \\frac{w}{M}$ä¸ªçª—å£ï¼Œçª—å£é«˜å®½M è®¡ç®—é‡ï¼š$\\frac{h}{M}\\times \\frac{w}{M} \\times(4hwC^2+2(hw)^2C)=4hwC^2+2M^2hwC$ ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/vit/:7:2","tags":["Deep Learning","Transformer","CV"],"title":"VIT","uri":"/posts/deeplearning/transformer_cv/vit/"},{"categories":["Deep Learning"],"content":"Shifted Window Attention é€šè¿‡å¯¹ç‰¹å¾å›¾ç§»ä½ï¼Œå¹¶ç»™Attentionè®¾ç½®maskæ¥é—´æ¥å®ç°çš„ swin_shift_mask ç‰¹å¾å›¾ç§»ä½ï¼šä½¿ç”¨torch.roll (x, shifts=-1, dims=0)å°†ç¬¬ä¸€æ’æ•°å€¼ç§»åŠ¨åˆ°æœ€ä¸‹é¢ï¼Œå†ä½¿ç”¨torch.roll (x, shifts=-1, dims=1)å°†å˜æ¢åçš„ç¬¬äºŒå¼ å›¾ä¸­çš„ç¬¬ä¸€åˆ—ç§»åŠ¨åˆ°æœ€å³è¾¹ swin_shift swin_mask Mask_1 Mask_2 Mask_3 ä¸Šå›¾é»‘è‰²åŒºåŸŸæ˜¯éœ€è¦çš„ï¼Œç™½è‰²éœ€è¦Maskï¼ŒåŠ ä¸Šè¾ƒå¤§è´Ÿæ•°å¦‚-100å³å¯ã€‚ æœ€åè¿˜è¦æ¢å¤ä½ç½®reverse cyclic shift ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/vit/:8:0","tags":["Deep Learning","Transformer","CV"],"title":"VIT","uri":"/posts/deeplearning/transformer_cv/vit/"},{"categories":["Deep Learning"],"content":"Relative position bias $$ Attention(Q,K,V)=softmax((\\frac{Q\\dot K^T}{\\sqrt d}+B)V) $$ Relative position bias ä¸Šå›¾ä¸­çš„çª—å£ä¸­æœ‰ 2*2 ä¸ª patchï¼Œåˆ†åˆ«ç»™è¿™å››ä¸ªä½ç½®æ ‡ä¸Šç»å¯¹ä½ç½®ç´¢å¼•ï¼Œåˆ†åˆ«ä¸º (0,0)ã€(0,1)ã€(1,0)ã€(1,1)ï¼Œç¬¬ä¸€ä¸ªåºå·ä»£è¡¨è¡Œï¼Œç¬¬äºŒä¸ªåºå·ä»£è¡¨åˆ—ã€‚ä»¥è“è‰²åƒç´ ä¸ºå‚è€ƒç‚¹ã€‚ç”¨è“è‰²åƒç´ çš„ç»å¯¹ä½ç½®ç´¢å¼•ä¸å…¶ä»–ä½ç½®ç´¢å¼•è¿›è¡Œç›¸å‡ï¼Œå°±å¾—åˆ°å…¶ä»–ä½ç½®ç›¸å¯¹è“è‰²åƒç´ çš„ç›¸å¯¹ä½ç½®ç´¢å¼•ã€‚æˆ‘ä»¬å°†å„ä¸ªç›¸å¯¹ä½ç½®ç´¢å¼•å±•å¼€æˆä¸€ä¸ªè¡Œå‘é‡ï¼Œå†è¿›è¡Œæ‹¼æ¥å¾—åˆ°äº†ä¸‹é¢çš„çŸ©é˜µã€‚ Relative position bias å°†è¯¥çŸ©é˜µåŠ ä¸Šä¸€ä¸ª M-1ï¼ŒM ä¸ºçª—å£çš„å¤§å°ï¼Œåœ¨ Swin Transformer ä¸­ä¸º 7ï¼Œè¿™é‡Œä¸º 2ã€‚å†å°†æ¯ä¸€ä¸ªè¡Œæ ‡éƒ½ä¹˜ä»¥ 2M-1ï¼Œæœ€åå°†è¡Œæ ‡å’Œåˆ—æ ‡æ±‚å’Œï¼Œå°±å¾—åˆ°æœ€åä¸€ä¸ªçŸ©é˜µçš„å€¼ï¼Œè¿™ä¸ªçŸ©é˜µä¸­çš„å€¼å°±æ˜¯ç›¸å¯¹ä½ç½®ç´¢å¼• Relative position bias è¿™ä¸ªç›¸å¯¹ä½ç½®ç´¢å¼•éœ€è¦å»ç´¢å¼•çš„å€¼ä¼šæœ‰ä¸€ä¸ªç›¸å¯¹ä½ç½®åç½®è¡¨ (relative position bias table)ï¼›è¿™ä¸ªè¡¨çš„å…ƒç´ çš„ä¸ªæ•°ä¸º (2M-1)*(2M-1)ã€‚ Relative position bias ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/vit/:9:0","tags":["Deep Learning","Transformer","CV"],"title":"VIT","uri":"/posts/deeplearning/transformer_cv/vit/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» Pytorchå®ç°ä»£ç  Bç«™ï¼šSwin Transformerè®ºæ–‡ç²¾è¯»ã€è®ºæ–‡ç²¾è¯»ã€‘ Bç«™ï¼šSwin-Transformerç½‘ç»œç»“æ„è¯¦è§£ ä»é›¶å¼€å§‹å­¦è§†è§‰Transformer Swin Transformer ä»‹ç» ä½¿ç”¨åŠ¨å›¾æ·±å…¥è§£é‡Šå¾®è½¯çš„Swin Transformer çŸ¥ä¹ï¼šå›¾è§£Swin Transformer ","date":"2023-06-09","objectID":"/posts/deeplearning/transformer_cv/vit/:10:0","tags":["Deep Learning","Transformer","CV"],"title":"VIT","uri":"/posts/deeplearning/transformer_cv/vit/"},{"categories":["Deep Learning"],"content":"ALBEF","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/albef/","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"ALBEF","uri":"/posts/deeplearning/multimodal-learning/albef/"},{"categories":["Deep Learning"],"content":"ALBEF æ–‡ç« æ ‡é¢˜ï¼šAlign before Fuse: Vision and Language Representation Learning with Momentum Distillation ä½œè€…ï¼šJunnan Li, Ramprasaath R. Selvaraju, Akhilesh Deepak Gotmare, Shafiq Joty, Caiming Xiong, Steven Hoi å‘è¡¨æ—¶é—´ï¼š(NIPS 2021) offical code ALBEF ALBEF åŒ…å«ä¸€ä¸ªå›¾åƒç¼–ç å™¨ (ViT-B/16)ã€ä¸€ä¸ªæ–‡æœ¬ç¼–ç å™¨ï¼ˆå‰ 6 å±‚ BERTï¼‰å’Œä¸€ä¸ªå¤šæ¨¡æ€ç¼–ç å™¨ï¼ˆå 6 å±‚ BERTï¼Œå¸¦æœ‰é¢å¤–çš„äº¤å‰æ³¨æ„å±‚ï¼‰ã€‚ image inputæ‰“æˆpatchï¼Œé€šè¿‡patch embedding layerï¼Œåœ¨é€šè¿‡12å±‚ Vision Transformer $224\\times224-$-\u003e $(196+1)\\times 768=197\\times768$ BERTå‰å…­å±‚å»åšæ–‡æœ¬ç¼–ç ï¼Œå‰©ä¸‹çš„å…­å±‚transformer encoderç›´æ¥å½“æˆmulti-model fusionçš„è¿‡ç¨‹ Loss Image-Text Contrastive Learning (ITC)ã€‚ç±»ä¼¼äºCLIPï¼Œå¢å¤§åŒï¼ˆæ­£ï¼‰æ ·æœ¬å¯¹çš„similarityï¼Œå‡å°è´Ÿæ ·æœ¬å¯¹çš„similarityã€‚ CLS Tokenå½“åšå…¨å±€ç‰¹å¾ï¼Œå›¾åƒå’Œæ–‡æœ¬å„ä¸€ä¸ª$768\\times1$çš„ä¸€ä¸ªå‘é‡;é€šè¿‡downsampleå’Œnormalizationå˜æˆ$256\\times 1$ ï¼ˆMoCoå®ç°ï¼‰ Masked Language Modeling (MLMï¼Œgenerative)ã€‚ç±»ä¼¼äºBERTï¼Œé®ç›–ä½ä¸€äº›å•è¯ï¼Œç„¶åé¢„æµ‹å‡ºæ¥ã€‚ Image-Text Matching (ITMï¼Œcontrastive)ã€‚äºŒåˆ†ç±»ä»»åŠ¡ï¼Œåˆ¤æ–­å›¾-æ–‡å¯¹æ˜¯å¦åŒ¹é…ã€‚ åŠ¨é‡è’¸é¦ momentum distillation ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/albef/:1:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"ALBEF","uri":"/posts/deeplearning/multimodal-learning/albef/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» ALBEF offical blog ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/albef/:2:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"ALBEF","uri":"/posts/deeplearning/multimodal-learning/albef/"},{"categories":["Deep Learning"],"content":"VLMo æ–‡ç« æ ‡é¢˜ï¼šVLMo: Unified Vision-Language Pre-Training with Mixture-of-Modality-Experts ä½œè€…ï¼šHangbo Bao, Wenhui Wang, Li Dong, Qiang Liu, Owais Khan Mohammed, Kriti Aggarwal, Subhojit Som, Furu Wei å‘è¡¨æ—¶é—´ï¼š(NIPS 2022) offical code VLMo ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/albef/:3:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"ALBEF","uri":"/posts/deeplearning/multimodal-learning/albef/"},{"categories":["Deep Learning"],"content":"CLIP","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"CLIP æ–‡ç« æ ‡é¢˜ï¼šLearning Transferable Visual Models From Natural Language Supervision ä½œè€…ï¼šAlec Radford, Jong Wook Kim, Chris Hallacy, Aditya Ramesh, Gabriel Goh, Sandhini Agarwal, Girish Sastry, Amanda Askell, Pamela Mishkin, Jack Clark, Gretchen Krueger, Ilya Sutskever å‘è¡¨æ—¶é—´ï¼š(ICML 2021) offical code ä»£ç åªæ˜¯å¯ä»¥ç”¨æ¥åšæ¨ç†å¹¶æ²¡æœ‰å¼€æº å›¾ç‰‡å’Œæ–‡æœ¬ä¹‹é—´çš„å¯¹æ¯”å­¦ä¹  CLIPï¼šCon-trastive Language-Image Pre-training åˆ©ç”¨è‡ªç„¶è¯­è¨€çš„è¿™ç§ç›‘ç£ä¿¡å·å»å­¦ä¹ ä¸€ä¸ªè¿ç§»æ€§èƒ½å¥½çš„è§†è§‰ç½‘ç»œ ä¼˜ç‚¹ ä¸éœ€è¦å†å»æ ‡æ³¨æ•°æ® å›¾ç‰‡-æ–‡æœ¬å¯¹è¿™ç§å¤šæ¨¡æ€ç‰¹å¾é€‚åˆzero-shotè¿ç§»å­¦ä¹  å•æ¨¡æ€çš„å¯¹æ¯”å­¦ä¹ ï¼šMoCoï¼›å•æ¨¡æ€çš„æ©ç å­¦ä¹ ï¼šMAEï¼›åªèƒ½å­¦åˆ°è§†è§‰ç‰¹å¾ï¼Œå¾ˆéš¾zero-shotè¿ç§»å­¦ä¹  å±€é™æ€§ï¼š ResNet50æ‰“å¹³æ‰‹ä½†æ˜¯ç¦»SOTAè¿˜å¾ˆè¿œï¼Œæ‰©å¤§æ¨¡å‹å’Œæ•°æ®é›†èƒ½æé«˜é¢„è®¡èµ„æº$\\times 1000$ï¼Œä»£ä»·å¤ªå¤§ åœ¨æœ‰äº›æ•°æ®é›†ä¸Šçš„zero-shotæ•ˆæœä¹Ÿä¸å¥½ï¼šç»†åˆ†ç±»æ•°æ®é›†ï¼ŒæŠ½è±¡æ¦‚å¿µ æ¨ç†æ—¶ï¼Œç›®æ ‡æ•°æ®é›†out-of-distribution,CLIPæ³›åŒ–ç…§æ ·å·® ä¸èƒ½åšæˆç”Ÿæˆå¼æ¨¡å‹ï¼ˆGPTï¼‰ï¼ˆå¯¹æ¯”å­¦ä¹ çš„ç›®æ ‡å‡½æ•°å’Œç”Ÿæˆå¼çš„ç›®æ ‡å‡½æ•°ç»“åˆï¼‰ æ•°æ®åˆ©ç”¨ä¸é«˜æ•ˆï¼ˆæ•°æ®å¤§ï¼‰å‡å°‘æ•°æ®ç”¨é‡ï¼šæ•°æ®å¢å¼ºï¼›è‡ªç›‘ç£ï¼›ä¼ªæ ‡ç­¾ ä¸‹æ¸¸ä»»åŠ¡æ•°æ®é›†æµ‹è¯•è°ƒå‚å¸¦å…¥åè§ï¼šåˆ›å»ºä¸€ä¸ªç”¨æ¥æµ‹è¯•å„ç§å„æ ·çš„zero-shotçš„è¿ç§»èƒ½åŠ›çš„æ•°æ®é›† ç½‘ä¸Šçˆ¬çš„æœªæ¸…æ´—ï¼Œå¯èƒ½å¸¦æœ‰ç¤¾ä¼šåè§ æä¾›ä¸€äº›è®­ç»ƒæ ·æœ¬åè€Œæ•ˆæœå˜å·®ï¼ˆFew Shotæ•ˆæœä¸å¥½ï¼‰ ä¸ä½¿ç”¨ImageNetçš„è®­ç»ƒé›†çš„æƒ…å†µä¸‹ç›´æ¥Zero-shot åšæ¨ç†å°±è·å¾—å’Œä¹‹å‰ç›‘ç£è®­ç»ƒå¥½ResNet50åŒæ ·çš„æ•ˆæœ ä½¿ç”¨è¶…å¤§è§„æ¨¡ web Image Text æ•°æ®é›† ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:1:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"Related work Learning visual n-grams from web dataï¼šå’ŒCLIPç›¸ä¼¼ï¼Œæ²¡æœ‰transformerå’Œå¤§è§„æ¨¡æ•°æ®é›†ï¼Œæ•ˆæœå¾ˆå·® VirTex (CVPR 2021) è‡ªå›å½’çš„é¢„æµ‹æ–¹å¼å»åšæ¨¡å‹çš„é¢„è®­ç»ƒ ICMLM (ECCV 2020) ç”¨è¿™ç§å®Œå½¢å¡«ç©ºçš„æ–¹å¼å»åšé¢„è®­ç»ƒ ConVIRT (MLHC 2022) å’ŒCLIPç±»ä¼¼ï¼Œåªåœ¨åŒ»ç–—å›¾åƒä¸Šåšäº†å®éªŒ ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:2:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"Methods CLIP æ¨¡å‹æ€»è§ˆå›¾ (1) æ¨¡å‹çš„è¾“å…¥æ˜¯ä¸€ä¸ªå›¾ç‰‡å’Œæ–‡å­—çš„é…å¯¹ï¼›å›¾ç‰‡é€šè¿‡äº†ä¸€ä¸ªå›¾ç‰‡ç¼–ç å™¨ Image Encoder å¾—åˆ°äº†ä¸€äº›ç‰¹å¾ $I_1,I_2,â€¦,I_N$ï¼›å¥å­é€šè¿‡ä¸€ä¸ªæ–‡æœ¬ç¼–ç å™¨ Text Encoder å¾—åˆ°ä¸€äº›æ–‡æœ¬çš„ç‰¹å¾ $T_1,T_2,â€¦,T_N$ã€‚ æ­£æ ·æœ¬ï¼šå¯¹è§’çº¿ä¸Šæ–‡æœ¬å’Œå›¾ç‰‡é…å¯¹çš„å…ƒç´  $N$ è´Ÿæ ·æœ¬ï¼šå…¶ä»– $N^2-N$ (2) prompt template æç¤ºæ¨¡æ¿ æŠŠImage Net é‡Œçš„1,000ä¸ªç±»å˜æˆ1000ä¸ªå¥å­ï¼›å¥å­é€šè¿‡é¢„è®­ç»ƒå¥½çš„æ–‡æœ¬ç¼–ç å™¨å¾—åˆ°1,000ä¸ªæ–‡æœ¬çš„ç‰¹å¾ å¦‚ä½•å˜æˆå¥å­ï¼Ÿç”¨ç‰©ä½“ç±»åˆ«å»æ›¿ä»£å›¾é‡Œçš„ object å˜æˆ A photo of a (object). ä¸ºä»€ä¹ˆè¦prompt template ï¼Ÿåªç”¨ä¸€ä¸ªå•è¯å»åš prompt ç»å¸¸å‡ºç°æ­§å¼‚æ€§ï¼ˆä¸åŒè¯­å¢ƒä¸‹æ„æ€ä¸åŒï¼‰ã€‚ç”±äºæ¨¡å‹é¢„è®­ç»ƒæ—¶ï¼Œå›¾ç‰‡å’Œå¥å­æˆå¯¹ä½¿ç”¨ï¼Œæ¨ç†æ—¶ç›´æ¥ç”¨ç±»åˆ«å•è¯å¾—åˆ°çš„æ–‡æœ¬ç‰¹å¾(distribution gap)ï¼Œæ•ˆæœå°±ä¼šç¨æœ‰ä¸‹é™ã€‚ prompt engineering ï¼šä¸ºæ¯ä¸ªä»»åŠ¡å®šåˆ¶æç¤ºæ–‡æœ¬å¯ä»¥æ˜¾ç€æé«˜é›¶æ ·æœ¬æ€§èƒ½ï¼ˆç¼©å°è§£ç©ºé—´ï¼‰ prompt ensembleï¼š80ä¸ªæ¨¡æ¿ç»“æœç»¼åˆ (3) Zero-shot æ¨ç†æ—¶ï¼Œè¾“å…¥ä¸€å¼ å›¾ç‰‡é€šè¿‡é¢„è®­ç»ƒå¥½çš„å›¾ç‰‡ç¼–ç å™¨å¾—åˆ°å›¾ç‰‡çš„ç‰¹å¾ $I_1$ï¼Œ$I_1 $ å’Œæ‰€æœ‰çš„æ–‡æœ¬ç‰¹å¾åšcosine similarity (ç›¸ä¼¼æ€§æ¯”è¾ƒ)ï¼Œå¾—åˆ°æ–‡æœ¬ç‰¹å¾æœ€ç›¸ä¼¼çš„å¥å­$I_1T_3$ã€‚ æ‘†è„±äº†categorical label çš„é™åˆ¶ ä¸è®ºæ˜¯è®­ç»ƒè¿˜æ˜¯æ¨ç†ï¼Œéƒ½ä¸éœ€è¦æå‰å®šå¥½ä¸€ä¸ªæ ‡ç­¾åˆ—è¡¨ã€‚ ä»»æ„ä¸€å¼ ç…§ç‰‡å¯ä»¥é€šè¿‡ç»™æ¨¡å‹è¾“å…¥ä¸åŒçš„æ–‡æœ¬å¥å­ä»è€ŒçŸ¥é“è¿™å¼ å›¾ç‰‡é‡Œåˆ°åº•æœ‰æ²¡æœ‰æ„Ÿå…´è¶£çš„ç‰©ä½“ Numpy-like pseudocode for the core of an implementation of CLIP. ä¸¤ä¸ªè¾“å…¥ï¼šä¸€ä¸ªæ˜¯å›¾ç‰‡çš„è¾“å…¥ï¼›ä¸€ä¸ªæ˜¯æ–‡æœ¬çš„è¾“å…¥ã€‚é€šè¿‡ç¼–ç å™¨è¾“å‡ºå›¾åƒç‰¹å¾å’Œæ–‡æœ¬ç‰¹å¾ çº¿æ€§æŠ•å°„å±‚ W å­¦ä¹ ä¸€ä¸‹å¦‚ä½•ä»å•æ¨¡æ€è½¬å˜ä¸ºå¤šæ¨¡æ€ï¼Œå†åšä¸€æ¬¡ L2 å½’ä¸€åŒ– æŠ•å°„å±‚ çº¿æ€§è¿˜æ˜¯éçº¿æ€§ æ²¡å¤ªå¤§å…³ç³»ï¼ˆæ•°æ®é›†å¤§ï¼Œå¤šæ¨¡æ€ï¼‰ æ•°æ®å¢å¼ºåªä½¿ç”¨éšæœºè£å‰ª è®¡ç®—consine similarity äº¤å‰ç†µç›®æ ‡å‡½æ•° ä¸€ä¸ªæ˜¯ Image lossï¼›ä¸€ä¸ªæ˜¯ text lossï¼› æŠŠä¸¤ä¸ª loss åŠ èµ·æ¥å–å¹³å‡ ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:3:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"æ¨èé˜…è¯» å®˜æ–¹åšå®¢ CLIP è®ºæ–‡ç²¾è¯» style CLIP (ICCV 2021)ï¼š CLIP + style GAN æƒ³é€šè¿‡æ–‡å­—ä¸Šçš„æ”¹å˜ä»è€Œå»å¼•å¯¼å›¾åƒç”Ÿæˆ CLIP draw ä¸éœ€è¦ä»»ä½•è®­ç»ƒï¼ŒCLIPDrawåœ¨çŸ¢é‡ç¬”ç”»ä¸Šæ“ä½œï¼Œè€Œä¸æ˜¯åœ¨åƒç´ å›¾åƒä¸Šæ“ä½œï¼Œä½¿ç»˜ç”»åå‘äºæ›´ç®€å•çš„äººç±»å¯è¯†åˆ«çš„å½¢çŠ¶ã€‚ è§†é¢‘æ£€ç´¢ï¼šCLIPæ¨¡å‹æŠŠæ£€ç´¢å¯¹è±¡(ä¸€å¥è¯è¡¨ç¤º)å˜æˆæ–‡æœ¬ç‰¹å¾ï¼ŒæŠŠè§†é¢‘é‡Œçš„æ¯ä¸€å¸§éƒ½å˜æˆè§†è§‰ä¸Šçš„ç‰¹å¾ï¼Œç„¶åä¸€å¸§ä¸€å¸§çš„å»è·Ÿæ–‡æœ¬ç‰¹å¾åšå¯¹æ¯”ç„¶åæŒ‘å‡ºç›¸ä¼¼æ€§æœ€é«˜çš„é‚£ä¸€å¸§å±•ç°å‡ºæ¥ How to Train Really Large Models on Many GPUs? ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:4:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"LSeg æ–‡ç« æ ‡é¢˜ï¼šLanguage-driven Semantic Segmentation ä½œè€…ï¼šBoyi Li, Kilian Q. Weinberger, Serge Belongie, Vladlen Koltun, RenÃ© Ranftl å‘è¡¨æ—¶é—´ï¼š(ICLR 2022) offical code CLIPåšå›¾åƒåˆ†å‰²ï¼šåƒç´ çº§åˆ«çš„åˆ†ç±» Lseg overview æ¨¡å‹çš„è¾“å…¥æ˜¯ä¸€ä¸ªå›¾ç‰‡å’Œæ–‡å­—çš„é…å¯¹ï¼›å›¾ç‰‡é€šè¿‡äº†ä¸€ä¸ªå›¾ç‰‡ç¼–ç å™¨ Image Encoder å¾—åˆ°äº†ä¸€äº›å¯†é›†ç‰¹å¾$C\\times \\tilde H \\times \\tilde W$çŸ©é˜µ ï¼Œå„å…ƒç´ ä¸º$I_{11},I_{12},â€¦,I_{\\tilde H \\tilde W}$ï¼›æ–‡æœ¬é€šè¿‡ä¸€ä¸ªæ–‡æœ¬ç¼–ç å™¨ Text Encoder å¾—åˆ°ä¸€äº›æ–‡æœ¬çš„ç‰¹å¾$N\\times C$çŸ©é˜µï¼Œå„å…ƒç´ ä¸º $T_1,T_2,â€¦,T_N$ã€‚ å›¾ç‰‡ç¼–ç å™¨ï¼šdptçš„ç»“æ„-vision Transformer + decoder decoderç›®çš„ï¼šæŠŠbottleneck featureæ…¢æ…¢upscaleï¼›ç‰¹å¾ç»´åº¦$C$ä¸€èˆ¬æ˜¯512æˆ–è€…768 ä½¿ç”¨åŸå§‹çš„ViTæˆ–è€…ditçš„é¢„è®­ç»ƒå‚æ•° æ–‡æœ¬ç¼–ç å™¨ï¼šCLIPé‡Œçš„æ–‡æœ¬ç¼–ç å™¨ å›¾ç‰‡ç‰¹å¾å’Œæ–‡æœ¬ç‰¹å¾åšç‚¹ç§¯å¾—åˆ°$N\\times \\tilde H \\times \\tilde W$çŸ©é˜µï¼Œå„å…ƒç´ ä¸º$F_{11},F_{12},â€¦,F_{\\tilde H \\tilde W}$ï¼›æ‹¿è¾“å‡ºç‰¹å¾å’Œæœ€åçš„ground truthå»åšcross entropy loss spetial regularization block æ–‡æœ¬å’Œè§†è§‰ç‰¹å¾äº¤äº’ï¼ŒåŠ ä¸¤ä¸ªè¿™ç§blockæ•ˆæœæœ€å¥½ å±€é™æ€§ ç›®æ ‡å‡½æ•°ä¸æ˜¯å¯¹æ¯”å­¦ä¹ ï¼›ä¹Ÿä¸æ˜¯æ— ç›‘ç£å­¦ä¹ çš„æ¡†æ¶ï¼›ä¾èµ–äºæ‰‹å·¥æ ‡æ³¨çš„segametation mask ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:5:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"GroupViT æ–‡ç« æ ‡é¢˜ï¼šGroupViT: Semantic Segmentation Emerges from Text Supervision ä½œè€…ï¼šJiarui Xu, Shalini De Mello, Sifei Liu, Wonmin Byeon, Thomas Breuel, Jan Kautz, Xiaolong Wang å‘è¡¨æ—¶é—´ï¼š(CVPR 2022) offical code CLIPåšå›¾åƒåˆ†å‰²ï¼šç›‘ç£ä¿¡å·æ¥è‡ªäºæ–‡æœ¬ ä¸ºä»€ä¹ˆå«group? è§†è§‰åšæ— ç›‘ç£åˆ†å‰²ç»å¸¸å°±æ˜¯ç”¨ä¸€ç±»æ–¹æ³•å«åšgroupingï¼ˆä¸€ç§è‡ªä¸‹è€Œä¸Šçš„æ–¹å¼ï¼‰ ç±»ä¼¼äºæœ‰ä¸€äº›èšç±»ä¸­å¿ƒç‚¹ï¼Œä»è¿™ä¸ªç‚¹å¼€å§‹å‘æ•£ï¼ŒæŠŠé™„è¿‘å‘¨å›´ç›¸ä¼¼çš„ç‚¹é€æ¸æ‰©å……æˆä¸€ä¸ªgroupï¼Œé‚£è¿™ä¸ªgroupç›¸å½“æ˜¯ä¸€ä¸ªsegametation maskã€‚ ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:6:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"Methods ViT + grouping block + å¯å­¦ä¹ çš„group tokens The Architecture and Training Pipeline of GroupViT å›¾åƒç¼–ç å™¨ï¼šVision Transformer(12å±‚Transformer layers) ä¸¤éƒ¨åˆ†è¾“å…¥ åŸå§‹å›¾åƒçš„patch embedding å¤§å°$224\\times224$çš„å›¾ç‰‡ï¼Œpatch sizeé€‰æ‹©$16\\times16$ï¼›å°±æœ‰ä¸€ä¸ª$14\\times14=196$åºåˆ—é•¿åº¦çš„ä¸€ä¸ªåºåˆ— ç„¶åç»è¿‡è¿™ä¸ªlinear projectionå°±å¾—åˆ°äº†patch embeddingï¼Œç»´åº¦ä¸º$196\\times384$(ViT small) å¯å­¦ä¹ çš„group tokens å¼€å§‹è®¾çš„æ˜¯$64\\times384$ï¼š64ä¸ªèšç±»ä¸­å¿ƒï¼›384ä¸ºäº†ä¿æŒç»´åº¦å’Œpatch embeddingè¿›è¡Œæ‹¼æ¥ grouping block (6å±‚Transfor Layerä¹‹ååŠ äº†ä¸€ä¸ªgrouping block) ç±»ä¼¼äºè‡ªæ³¨æ„åŠ›çš„æ–¹å¼å…ˆç®—ä¸€ä¸ªç›¸ä¼¼åº¦çŸ©é˜µï¼Œç”¨è¿™ä¸ªç›¸ä¼¼çš„çŸ©é˜µå»å¸®åŠ©åŸæ¥çš„è¿™ä¸ªimage token åšèšç±»ä¸­å¿ƒçš„åˆ†é…ï¼Œä»è€Œå®Œæˆäº†è¾“å…¥$(196+64)\\times384$é™åˆ°è¿™ä¸ª$64\\times 384$ åˆå¹¶æˆä¸ºæ›´å¤§çš„groupï¼Œåšä¸€æ¬¡èšç±»çš„åˆ†é… é™ä½åºåˆ—é•¿åº¦ï¼Œæ¨¡å‹çš„è®¡ç®—å¤æ‚åº¦ï¼Œè®­ç»ƒæ—¶é—´ç›¸åº”çš„éƒ½å‡å°‘äº† ç¬¬9å±‚Transformer Layer ä¹‹ååˆåŠ äº†ä¸€æ¬¡grouping blockï¼š$64\\times 384$é™åˆ°è¿™ä¸ª$8\\times 384$ æ–‡æœ¬ç¼–ç å™¨å¾—åˆ°æ–‡æœ¬ç‰¹åœ¨$z^T$ï¼›å›¾åƒç¼–ç å™¨è¾“å‡º$8\\times 384$è¿›è¡Œaverage poolingå¾—åˆ°$1\\times384$ï¼Œåœ¨é€šè¿‡MLPå¾—åˆ°å›¾ç‰‡ç‰¹å¾$z^I$ åç»­å’ŒCLIPä¸€æ ·å¯¹æ¯”å­¦ä¹  zero shotæ¨ç† ç»™å®šä¸€ä¸ªå›¾ç‰‡é¦–å…ˆç»è¿‡group ViT å¾—åˆ°æœ€å8ä¸ªgroup Embedding å†æŠŠæœ‰å¯èƒ½è¿™äº›æ ‡ç­¾é€šè¿‡è¿™ä¸ªæ–‡æœ¬ç¼–ç å™¨å¾—åˆ°ä¸€ç³»åˆ—çš„è¿™ä¸ªæ–‡æœ¬ç‰¹å¾ è®¡ç®—è¿™äº›å›¾åƒçš„Group Embeddingå’Œè¿™äº›æ–‡æœ¬çš„ç‰¹å¾ä¹‹é—´çš„ç›¸ä¼¼åº¦ å±€é™æ€§ï¼šæœ€å¤šåªèƒ½æ£€æµ‹åˆ°8ç±»ï¼›æ²¡æœ‰å¾ˆå¥½çš„åˆ©ç”¨dense predictionçš„ç‰¹æ€§ï¼›CLIP è¿™ç§è®­ç»ƒæ–¹å¼ æ²¡æœ‰åŠæ³•å­¦åˆ°è¿™äº›èƒŒæ™¯ç±»ï¼ˆè¯­ä¹‰å¤ªæ¨¡ç³Šï¼‰ ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:7:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"VILD æ–‡ç« æ ‡é¢˜ï¼šOpen-vocabulary Object Detection via Vision and Language Knowledge Distillation ä½œè€…ï¼šXiuye Gu, Tsung-Yi Lin, Weicheng Kuo, Yin Cui å‘è¡¨æ—¶é—´ï¼š(ICLR 2022) offical code ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:8:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"Methods VILD (a) baseline å°±æ˜¯ä¸€ä¸ªmaskRCNN(å®šä½+åˆ†ç±») ä¸¤é˜¶æ®µçš„åˆ†ç±»å™¨ï¼šç¬¬ä¸€é˜¶æ®µRPNæŠ½å– $N$ä¸ªregion Proposal ï¼›ç¬¬äºŒé˜¶æ®µå°±æ˜¯æ ¹æ®ç€$N$ä¸ª Proposal é€šè¿‡detection headå¾—åˆ°ä¸€äº›region embedding ï¼Œæœ€åå†é€šè¿‡ä¸€äº›åˆ†ç±»å¤´åˆ¤æ–­ç±»åˆ« (b) ViLD-textï¼šå’Œaç±»ä¼¼å¾—åˆ°Nä¸ªregion embeddingä¹‹åï¼Œå’Œbase categoryåŸºç±»+èƒŒæ™¯ç±»çš„text embeddingå»åšç‚¹ä¹˜è®¡ç®—ç›¸ä¼¼åº¦ï¼Œå¾—åˆ°ä¸€ä¸ª81ç»´çš„å‘é‡ï¼Œå°†è¿™ä¸ªå‘é‡åšsoftmaxï¼Œå†å»å’Œground truthåšäº¤å‰ç†µï¼Œå¾—åˆ°çš„ç»“æœå³ä¸ºViLDçš„æŸå¤±å‡½æ•° text embeddingï¼šç»è¿‡CLIPçš„æ–‡æœ¬ç¼–ç å™¨å¾—åˆ°çš„ï¼Œä¸å‚ä¸è®­ç»ƒçš„ã€‚ï¼ˆç±»åˆ«é€šè¿‡promptç”Ÿæˆä¸€ä¸ªå¥å­è¿›å…¥ç¼–ç å™¨è¾“å‡ºï¼‰ åœ¨bä¸­éœ€è¦æ”¹åŠ¨çš„å‚æ•°æœ‰ä¸¤å¤„ï¼Œä¸€æ˜¯å›¾åƒå¤„ç†æ¨¡å—ï¼Œä¹Ÿå³æŠ½å–å›¾åƒç‰¹å¾çš„backboneéœ€è¦è®­ç»ƒï¼›äºŒæ˜¯èƒŒæ™¯ç±»çš„embeddingã€‚ èƒŒæ™¯ç±»ï¼šä¸åœ¨åŸºç¡€ç±»é‡Œçš„æ‰€æœ‰åˆ«çš„ç±»åˆ« (c) ViLD-imageï¼šåˆ©ç”¨CLIPçš„å›¾åƒç¼–ç å™¨å¯¹è‡ªå·±çš„è§†è§‰backboneè¿›è¡ŒçŸ¥è¯†è’¸é¦ï¼Œè®©backboneè¾“å‡ºçš„region embedding å°½å¯èƒ½åœ°é è¿‘CLIPçš„image embedding ä¸€äº›æŠ½å¥½çš„Proposal åšä¸€äº›resizeçš„æ“ä½œ c ä¸­è¾“å…¥çš„æ˜¯Mä¸ªpre-computed proposalï¼Œå’Œaã€bä¸åŒï¼ˆåŠ å¿«è®­ç»ƒï¼‰ é¢„å…ˆæŠŠæ‰€æœ‰å›¾åƒçš„proposalç®—å‡ºæ¥ï¼Œç„¶åä¸€æ¬¡æ€§æ‰”åˆ°CLIPå›¾åƒç¼–ç å™¨ä¸­å…ˆæŠ½å¥½å­˜åˆ°ç¡¬ç›˜ä¸­ï¼Œè¿™æ ·åœ¨è®­ç»ƒçš„æ—¶å€™å°±ç›´æ¥æŠŠè¿™äº›å­˜å¥½çš„embeddingå–å‡ºæ¥å°±å¯ä»¥äº†ã€‚ æŸå¤±å‡½æ•°ï¼šå¸¸ç”¨çš„L1 Lossã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½œè€…åœ¨æŠŠä¸€ä¸ªproposalé€å…¥CLIPçš„å›¾åƒç¼–ç å™¨æ—¶ï¼Œæ˜¯å°†å…¶1xå’Œ1.5xåˆ†åˆ«é€å…¥è¿›è¡Œç¼–ç ï¼Œæœ€åå†æŠŠè¿™ä¸¤ä¸ªembeddingåŠ èµ·æ¥ã€‚ æŸå¤±å‡½æ•°ï¼šå¸¸ç”¨çš„L1 Loss (d) ViLDï¼šViLD-imageå’ŒViLD-textä¸¤ä¸ªçš„åˆä½“ å·¦ä¾§å°†N+Mä¸ªproposalåŒæ—¶è¾“å…¥è¿›ç›®æ ‡æ£€æµ‹æ¡†æ¶ï¼Œç„¶ååˆ†å¼€ï¼Œnä¸ªEmbeddingå»ç®—cross entropy loss ç„¶åm ä¸ª precomputer embeddingå»ç®—è¿™ä¸ªè’¸é¦çš„L_1 lossã€‚ å³ä¾§ä¸ºteacherç½‘ç»œï¼Œåªæœ‰è®­ç»ƒçš„æ—¶å€™ç”¨ï¼Œæµ‹è¯•çš„æ—¶å€™ç”¨ä¸åˆ°ã€‚ VILD_ensemble VILD è®­ç»ƒé˜¶æ®µ å›¾ç‰‡å…ˆé€šè¿‡ä¸€ä¸ªRPNå¾—åˆ°ä¸€äº›region Proposal ç„¶åé€šè¿‡RoI Align å’Œä¸€äº›Convå±‚å¾—åˆ°ä¸€äº›region embedding $R_1,R_2$ï¼› ç»¿è‰²çš„åŸºç¡€ç±»å…ˆé€šè¿‡ä¸€ä¸ªpromptç„¶åé€šè¿‡æ–‡æœ¬ç¼–ç å™¨å¾—åˆ°ç»¿è‰²çš„æ–‡æœ¬ç¼–ç å’Œ$R_1,R_2$åšç‚¹ä¹˜ï¼Œå†å’Œground truthåšcross entropy lossï¼› æŠŠå·²ç»æŠ½å–å¥½çš„region Proposal é€šè¿‡CLIP modelå¾—åˆ°ä¸€äº›CLIPçš„iamge embedding $ I_1, I_2$ï¼›ä½¿ç”¨è’¸é¦è®¡ç®—$L_1$ loss å¸Œæœ›$R_1, R_2$å‘¢å°½å¯èƒ½çš„è·Ÿ$I_1, I_2 $å»æ¥è¿‘ æ¨ç†é˜¶æ®µ ä¸è®ºæ˜¯åŸºç¡€ç±»è¿˜æ˜¯æ–°ç±»éƒ½é€šè¿‡promptå†é€šè¿‡è¿™ä¸ªæ–‡æœ¬ç¼–ç å™¨å¾—åˆ°æ‰€æœ‰çš„è¿™äº›text embeddingï¼›ç„¶åè®©Mask RCNNæŠ½å–çš„region embeddingå»å’Œtext embeddingåšç›¸ä¼¼åº¦è®¡ç®—ï¼Œè®¡ç®—ç»“æœæœ€å¤§çš„é‚£ä¸ªï¼Œå°±æ˜¯æ¨¡å‹è¾“å‡ºçš„æ£€æµ‹åˆ°çš„ç±»å‹ã€‚ ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:9:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» åˆ©ç”¨å›¾åƒæ–‡æœ¬çš„çŸ¥è¯†è’¸é¦æ¥è¿›è¡Œå¼€æ”¾è¯è¡¨ç›®æ ‡æ£€æµ‹ ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:10:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"GLIP æ–‡ç« æ ‡é¢˜ï¼šGrounded Language-Image Pre-training ä½œè€…ï¼šLiunian Harold Li, Pengchuan Zhang, Haotian Zhang, Jianwei Yang, Chunyuan Li, Yiwu Zhong å‘è¡¨æ—¶é—´ï¼š(CVPR 2022) offical code object detection ç›®æ ‡æ£€æµ‹ï¼šç»™å®šå›¾ç‰‡ï¼ŒæŠŠbounding box ç»™æ‰¾å‡ºæ¥ phrase groundingï¼šç»™å®šå›¾ç‰‡å’Œæ–‡æœ¬ï¼Œæ ¹æ®æ–‡æœ¬æŠŠç‰©ä½“æ‰¾å‡ºæ¥ å®šä½ loss éƒ¨åˆ†å·®ä¸å¤š åˆ†ç±» loss éƒ¨åˆ† detectionï¼šå®ƒçš„æ ‡ç­¾æ˜¯ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªå•è¯æ˜¯one-hotçš„è¿™ç§æ ‡ç­¾ ç»™å®šå›¾ç‰‡é€šè¿‡backboneå¾—åˆ°$N\\times D$çš„region embedding (nä¸ªbounding boxï¼Œæ¯ä¸ªbounding box Embeddingçš„ç»´åº¦æ˜¯d)ï¼›é€šè¿‡$C\\times D$çŸ©é˜µçš„åˆ†ç±»å¤´ï¼›MNSæŠŠbounding boxç­›é€‰ä¸€ä¸‹ï¼Œç„¶åå†å»è·Ÿground Truth å»ç®—cross entropy loss Vision groundingï¼šæ ‡ç­¾æ˜¯ä¸€ä¸ªå¥å­ã€‚ ç»™å®šå›¾ç‰‡é€šè¿‡backboneå¾—åˆ°äº†ä¸€äº›region featureï¼›ä¸€ä¸ªå¥å­prompté€šè¿‡æ–‡æœ¬ç¼–ç å™¨å¾—åˆ°æ–‡æœ¬çš„embeddingï¼Œè¿›è¡Œç›¸ä¼¼åº¦è®¡ç®—ã€‚ï¼ˆç±»ä¼¼ViLD-textï¼‰ ç›®æ ‡æ£€æµ‹å’ŒVision grounding ç»“åˆ åˆ¤æ–­ä¸€ä¸‹ä»€ä¹ˆæ—¶å€™ç®—æ˜¯ä¸€ä¸ªpositive matchï¼›ä»€ä¹ˆæ—¶å€™ç®—æ˜¯ä¸€ä¸ªnegative match GLIP å›¾ç‰‡é€šè¿‡å›¾åƒç¼–ç å™¨å¾—åˆ°ä¸€äº›region embeddingï¼›æ–‡æœ¬é€šè¿‡æ–‡æœ¬ç¼–ç å™¨å¾—åˆ°ä¸€äº›text embedding ç”¨Cross Attentionå•ŠæŠŠè¿™ä¸ªæ–‡æœ¬å’Œå›¾åƒçš„ç‰¹å¾äº¤äº’ä¸€ä¸‹ ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:11:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:12:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"CLIPasso æ–‡ç« æ ‡é¢˜ï¼šCLIPasso: Semantically-Aware Object Sketching ä½œè€…ï¼šYael Vinker, Ehsan Pajouheshgar, Jessica Y. Bo, Roman Bachmann, Amit Haim Bermano, Daniel Cohen-Or, Amir Zamir, Ariel Shamir å‘è¡¨æ—¶é—´ï¼š(SIGGRAPH 2022) (Best Paper Award) ä¸»é¡µä»‹ç» + code CLIPasso è´å…¹æ›²çº¿ é€šè¿‡ä¸€ç³»åˆ—çš„2ç»´çš„ç‚¹æ§åˆ¶çš„ä¸€ä¸ªæ›²çº¿ åŸºäºsaliencyçš„ä¸€ä¸ªåˆå§‹åŒ–çš„æ–¹å¼ æŠŠå›¾ç‰‡æ‰”ç»™å·²ç»è®­ç»ƒå¥½çš„Vision Transformerï¼Œç„¶åæŠŠæœ€åä¸€å±‚çš„å¤šå¤´è‡ªæ³¨æ„åŠ›å–åŠ æƒå¹³å‡åšæˆäº†ä¸€ä¸ªsiliancy mapï¼›åœ¨è¿™ä¸ªsiliancy mapä¸Šå»çœ‹å“ªäº›åŒºåŸŸæ›´æ˜¾è‘—ï¼Œè¿™äº›æ˜¾è‘—çš„åŒºåŸŸä¸Šå»é‡‡ç‚¹ã€‚ å®šä¹‰äº†è¿™å‡ ä¸ªæ›²çº¿ï¼Œä¹Ÿå°±è¿™é‡Œè¯´çš„$S_1$åˆ°$S_N$å°±æ˜¯nä¸ªç¬”ç”»ï¼Œé€šè¿‡å…‰æ …åŒ–å™¨Rasterizerå¾—åˆ°ç®€ç¬”ç”»ã€‚ Loss é€‰æ‹© $L_s$ åŸºäºè¯­ä¹‰æ€§çš„ç›®æ ‡å‡½æ•°ï¼šç®€ç¬”ç”»ç”Ÿæˆçš„ç‰¹å¾å’ŒåŸå§‹å›¾åƒç”Ÿæˆçš„ç‰¹å¾å°½å¯èƒ½çš„æ¥è¿‘ $L_g$ åŸºäºgeometricçš„ç›®æ ‡å‡½æ•°ï¼šresnetçš„ 2 3 4å„é˜¶æ®µç‰¹å¾æ‹¿å‡ºæ¥ç®—lossï¼Œè€Œä¸æ˜¯ç”¨æœ€åçš„é‚£ä¸ª2048ç»´çš„ç‰¹å¾ã€‚ ä¿è¯æœ€åç”Ÿæˆçš„ç®€ç¬”ç”»æ— è®ºæ˜¯åœ¨å‡ ä½•å½¢çŠ¶ä¸Šï¼Œä½ç½®ä¸Šè·ŸåŸæœ‰çš„å›¾åƒå°½å¯èƒ½çš„ä¸€è‡´ï¼›è€Œä¸”åœ¨è¯­ä¹‰ä¿¡æ¯ä¸Šä¹Ÿèƒ½å°½å¯èƒ½çš„ä¿æŒä¸€è‡´ å±€é™æ€§ å›¾åƒæœ‰èƒŒæ™¯ï¼Œæ•ˆæœå°±ä¼šå¤§æ‰“æŠ˜æ‰£ã€‚å¿…é¡»æ˜¯ä¸€ä¸ªç‰©ä½“ç„¶åå¤„åœ¨ä¸€ä¸ªçº¯ç™½è‰²çš„èƒŒæ™¯ä¸Š å…ˆæŠŠä¸€å¼ å¸¦èƒŒæ™¯çš„å›¾ç‰‡ï¼ŒæŠŠè¿™ä¸ªç‰©ä½“æŠ å‡ºæ¥ï¼ŒèƒŒæ™¯æ˜¯ä¸€ä¸ªç™½è‰²å¹•å¸ƒçš„å›¾ç‰‡ï¼Œæ‰”ç»™CLIPassoå»ç”Ÿæˆç®€ç¬”ç”»(ä¸¤é˜¶æ®µ) åˆå§‹åŒ–çš„ç¬”ç”»éƒ½æ˜¯åŒæ—¶ç”Ÿæˆçš„è€Œä¸æ˜¯åºåˆ—ç”Ÿæˆçš„ï¼ˆæ€æ ·æ‰èƒ½ä¸€ç¬”ä¸€ç”»ï¼‰ é€šè¿‡æ§åˆ¶ç¬”ç”»æ•°å»æ§åˆ¶å›¾ç‰‡çš„æŠ½è±¡ç¨‹åº¦ ï¼ˆæ‰‹åŠ¨â€“ä¼˜åŒ–å‚æ•°ï¼‰ ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:13:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» Multimodal Neurons in Artificial Neural Networks å¯è§†åŒ–åˆ†æ CLIP ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:14:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"CLIP4Clip æ–‡ç« æ ‡é¢˜ï¼šCLIP4Clip: An Empirical Study of CLIP for End to End Video Clip Retrieval ä½œè€…ï¼šHuaishao Luo, Lei Ji, Ming Zhong, Yang Chen, Wen Lei, Nan Duan, Tianrui Li å‘è¡¨æ—¶é—´ï¼š( 2021) offical code è§†é¢‘é¢†åŸŸ CLIP4Clip å¯¹å«æœ‰æ—¶åºçš„è§†é¢‘ç‰¹å¾å¤„ç†ï¼Œå‡è®¾10å¸§ 10ä¸ªå›¾åƒçš„ç‰¹å¾ç›´æ¥å–å¹³å‡ ï¼ˆæ²¡æœ‰è€ƒè™‘åˆ°è¿™ä¸ªæ—¶åºçš„ç‰¹æ€§ï¼‰ ä¸€ä¸ªæ˜¯ä¸€ä¸ªäººé€æ¸çš„åœ¨åä¸‹ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯ä¸€ä¸ªäººé€æ¸çš„ç«™èµ·æ¥ï¼›åªæ˜¯å–ä¸€ä¸ªè¿™ä¸ªå¹³å‡çš„è¯ï¼Œè¿™ä¸¤ä¸ªåŠ¨ä½œæ— æ³•åŒºåˆ† late fusionï¼š æœ€åŸå§‹çš„lstmæŠŠè¿™10ä¸ªç‰¹å¾æ‰”ç»™ä¸€ä¸ªlstmï¼ŒæŠŠæœ€åçš„è¾“å‡ºæ‹¿å‡ºæ¥ ï¼ˆæ—¶åºå»ºæ¨¡ï¼šTransformeræ›¿ä»£ï¼‰ early fusionï¼šæŠŠæ–‡æœ¬å’Œè¿™ä¸ªå›¾åƒå¸§çš„ç‰¹å¾ä¸€èµ·åœ¨å­¦ä¹  ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:15:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"ActionCLIP æ–‡ç« æ ‡é¢˜ï¼šActionCLIP: A New Paradigm for Video Action Recognition ä½œè€…ï¼šMengmeng Wang, Jiazheng Xing, Yong Liu å‘è¡¨æ—¶é—´ï¼š( 2021) offical code åŠ¨ä½œè¯†åˆ« ActionCLIP è§†é¢‘çš„è¾“å…¥é€šè¿‡ä¸€ä¸ªè§†é¢‘ç¼–ç å™¨å¾—åˆ°ä¸€äº›ç‰¹å¾ï¼ŒæŠŠæ ‡ç­¾å½“åšæ–‡æœ¬ç»™ä¸€ä¸ªæ–‡æœ¬ç¼–ç å™¨å¾—åˆ°ä¸€äº›æ–‡æœ¬çš„ç‰¹å¾ï¼›å»è®¡ç®—æ–‡æœ¬å’Œå›¾åƒä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼›ç›¸ä¼¼åº¦çŸ©é˜µå’Œæå‰å®šä¹‰å¥½çš„ground truthç®—ä¸€ä¸ªlossã€‚ æŠŠcross entropy lossæ¢æˆKL divergence Overview of ActionCLIP ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:16:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"PointCLIP æ–‡ç« æ ‡é¢˜ï¼šPointCLIP: Point Cloud Understanding by CLIP ä½œè€…ï¼šRenrui Zhang, Ziyu Guo, Wei Zhang, Kunchang Li å‘è¡¨æ—¶é—´ï¼š(CVPR 2022) offical code 3Dç‚¹äº‘ PointCLIP æŠŠ3Dç‚¹äº‘æŠ•å°„åˆ°2Då¹³é¢ä¸Šå˜æˆäº†2Dçš„æ·±åº¦å›¾ï¼Œæ‰”ç»™clipçš„è§†è§‰ç¼–ç å™¨å¾—åˆ°è§†è§‰è¡¨å¾ã€‚ æ–‡æœ¬ç«¯é€šè¿‡promptå˜æˆäº†å¥å­point cloud depth Map of a ã€CLASSã€ ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:17:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"DepthCLIP æ–‡ç« æ ‡é¢˜ï¼šCan Language Understand Depth? ä½œè€…ï¼šRenrui Zhang, Ziyao Zeng, Ziyu Guo, Yafeng Li å‘è¡¨æ—¶é—´ï¼š(CVPR 2022) offical code ç”¨æ–‡æœ¬è·¨ç•Œä¼°è®¡æ·±åº¦ DepthCLIP æŠŠæ·±åº¦ä¼°è®¡çœ‹æˆäº†ä¸€ä¸ªåˆ†ç±»é—®é¢˜ï¼Œå¼ºåˆ¶æ€§çš„æŠŠæ·±åº¦è·ç¦»åˆ†æˆäº†7å¤§ç±» ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/clip/:18:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"CLIP","uri":"/posts/deeplearning/multimodal-learning/clip/"},{"categories":["Deep Learning"],"content":"VILT","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/vilt/","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"VILT","uri":"/posts/deeplearning/multimodal-learning/vilt/"},{"categories":["Deep Learning"],"content":"VILT æ–‡ç« æ ‡é¢˜ï¼šViLT: Vision-and-Language Transformer Without Convolution or Region Supervision ä½œè€…ï¼šWonjae Kim, Bokyung Son, Ildoo Kim å‘è¡¨æ—¶é—´ï¼š(ICML 2021) offical code ç¬¬ä¸€ä¸ªæ‘†è„±äº†ç›®æ ‡æ£€æµ‹çš„è§†è§‰æ–‡æœ¬æ¨¡å‹ ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/vilt/:1:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"VILT","uri":"/posts/deeplearning/multimodal-learning/vilt/"},{"categories":["Deep Learning"],"content":"Abstract Vision and Language Pre-training(VLP) å½“å‰çš„å·¥ä½œä¸»è¦é›†ä¸­åœ¨å›¾åƒç‰¹å¾æŠ½å–ä¸Šï¼Œä¸€èˆ¬æ¥è®²ï¼Œå›¾åƒç‰¹å¾æŠ½å–çš„è¶Šå¥½ï¼Œä¸‹æ¸¸ä»»åŠ¡ä¸­çš„è¡¨ç°å°±è¶Šå¥½ã€‚ æ•ˆç‡å¤ªä½ï¼Œé€Ÿåº¦å¤ªæ…¢ï¼ŒæŠ½å–å›¾åƒç‰¹å¾èŠ±è´¹å¤§é‡æ—¶é—´ï¼Œæ¯”å¤šæ¨¡æ€èåˆéƒ½å¤šã€‚ ç”¨ä¸€ä¸ªé¢„è®­ç»ƒå¥½çš„æ¨¡å‹å»æŠ½å–ç‰¹å¾ï¼Œè¡¨è¾¾èƒ½åŠ›å—é™ã€‚ ç›®æ ‡æ£€æµ‹æ•°æ®é›†ä¸å¤Ÿå¤§ï¼Œè§„æ¨¡ä¸å¤Ÿå¤§ã€‚å¦‚æœæ¨¡å‹ä¸æ˜¯ç«¯åˆ°ç«¯å­¦ä¹ ï¼Œåªæ˜¯ä»é¢„è®­ç»ƒæ¨¡å‹æŠ½å–ç‰¹å¾ï¼Œå¤§æ¦‚ç‡æ¥è¯´ä¸æ˜¯æœ€ä¼˜è§£ã€‚ ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/vilt/:2:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"VILT","uri":"/posts/deeplearning/multimodal-learning/vilt/"},{"categories":["Deep Learning"],"content":"Relate work Four categories of vision-and-language models ç¬¬ä¸€ç±»ï¼Œä»£è¡¨ä½œVSEï¼Œæ–‡æœ¬ç«¯è¾ƒä¸ºç®€å•ï¼Œå›¾åƒæ¯”è¾ƒè´µï¼Œèåˆç«¯ä¹Ÿæ˜¯ç®€å•çš„ç¥ç»ç½‘ç»œã€‚ ç¬¬äºŒç±»ï¼Œä»£è¡¨ä½œCLIPï¼Œå›¾åƒå’Œæ–‡æœ¬çš„è®¡ç®—åŠ›åº¦ç­‰ä»·ï¼Œèåˆçš„æ—¶å€™å°†ä¸¤ç§ç‰¹å¾ç›´æ¥ç‚¹ä¹˜ï¼Œéå¸¸è½»é‡ã€‚ ç¬¬ä¸‰ç±»ï¼Œä»£è¡¨ä½œViLBERTã€UNITERå æ®äº†å¤§éƒ¨åˆ†å·¥ä½œï¼Œæ–‡æœ¬ç«¯éå¸¸è½»é‡ã€‚å›¾åƒç«¯ä½¿ç”¨ç›®æ ‡æ£€æµ‹çš„ç³»ç»Ÿï¼Œéå¸¸è´µã€‚èåˆç«¯ä¹Ÿä½¿ç”¨äº†Transformerï¼Œç›¸å½“äºä¸¤ä¸ªå¤§æ¨¡å‹ã€‚ ç¬¬å››ç±»ï¼Œä»£è¡¨ä½œViLTï¼ŒåŸºäºViTå¯¹å›¾åƒä½¿ç”¨patch embeddingï¼Œæ¨¡æ€èåˆéƒ¨åˆ†åšå¾—æ¯”è¾ƒå¤§ã€‚ Visual comparison of conventional VLP architectures and ViLT æ¨¡æ€èåˆæ–¹æ³• signal-stream approachï¼šå°†ä¸¤ç§ç‰¹å¾æ‹¼æ¥èµ·æ¥ï¼Œç”¨ä¸€ä¸ªæ¨¡å‹å¤„ç†ä¸¤ä¸ªè¾“å…¥ã€‚ dual-stream approachï¼šä¸¤ä¸ªæ¨¡å‹åˆ†åˆ«å¯¹ä¸¤ç§æ¨¡æ€ä¿¡æ¯è¿›è¡Œå¤„ç†ï¼Œå……åˆ†æŒ–æ˜æ¯ç§æ¨¡æ€åŒ…å«çš„ä¿¡æ¯ï¼Œç„¶åå†èåˆã€‚ ä¸¤ç§æ¨¡å‹è¡¨ç°å·®ä¸å¤šï¼Œä½†æ˜¯dual-stream approachå‚æ•°å¤šä¸€äº›ï¼ŒVILT é‡‡ç”¨signal-stream approachesã€‚ æ–‡æœ¬ç¼–ç ç«¯éƒ½æ˜¯ç”¨é¢„è®­ç»ƒçš„BERTé‡Œçš„tokenizer è§†è§‰ç¼–ç ç«¯ Region Featureï¼šç»è¿‡ä¸€ä¸ªBackboneæŠ½å–ç‰¹å¾ï¼Œç„¶åç»è¿‡RPNç½‘ç»œç”Ÿæˆproposalï¼Œç»è¿‡éæå¤§å€¼æŠ‘åˆ¶ NMS ç­›é€‰è¾¹ç•Œæ¡†ï¼Œæœ€åç»è¿‡ROI headå¾—åˆ°å›¾åƒåºåˆ—ã€‚æŠŠä¸€å¼ å›¾åƒå˜æˆäº†ç¦»æ•£çš„bound-boxï¼Œæ¯ä¸ªè¾¹ç•Œæ¡†å†…éƒ½å«æœ‰æ˜ç¡®çš„ç±»åˆ«è¯­ä¹‰ä¿¡æ¯ã€‚(ç›®æ ‡æ£€æµ‹) Grid Featureï¼šä»…åŸºäºBackbone Patch Projectionï¼šåŸºäº ViT ç›´æ¥å°†å›¾åƒæ‰“æˆpatchï¼Œï¼Œå¾—åˆ°ä¸€ä¸ªæœ‰è¯­ä¹‰ä¿¡æ¯çš„ç¦»æ•£çš„åºåˆ—ã€‚ VILT æŠŠæ¨¡æ€çš„ç‰¹å¾æŠ½å–åšåˆ°äº†æå°åŒ–ï¼Œä¸»è¦è®¡ç®—é‡åœ¨æ¨¡æ€èåˆéƒ¨åˆ†ï¼Œæé«˜æ¨¡å‹æ¨ç†é€Ÿåº¦ã€‚ç§»é™¤äº†Region feature ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/vilt/:3:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"VILT","uri":"/posts/deeplearning/multimodal-learning/vilt/"},{"categories":["Deep Learning"],"content":"Methods Four categories of vision-and-language models æ–‡æœ¬ç«¯æœ‰$L$ä¸ªé•¿ä¸º$H$ çš„åºåˆ—ï¼Œ$L$ä¸ºä¸€ä¸ªå¥å­ä¸­å•è¯æ•°é‡ï¼Œ$H$ä¸ºåºåˆ—é•¿åº¦ã€‚ å›¾åƒç«¯å›¾åƒè¢«æ‰“æˆ $N $ä¸ªpatchï¼Œæ¯ä¸ªpatchä¹Ÿå¯¹åº”é•¿ä¸º$H$çš„åºåˆ—ã€‚ Modal-type embedding æ¨¡æ€ä¿¡æ¯ï¼ˆæ–‡æœ¬ä¸º0ï¼Œå›¾åƒä¸º1ï¼‰ï¼ŒToken position embedding æ–‡æœ¬ä½ç½®ä¿¡æ¯ï¼ŒPatch position embedding å›¾åƒä½ç½®ä¿¡æ¯ã€‚ Modal-type embedding + position embedding + word embedding ä¸æ˜¯æ‹¼æ¥ï¼Œæ˜¯åŠ åœ¨ä¸€èµ· Transformer Encoderçš„è¾“å…¥ä¸º$ï¼ˆN+L+2)\\times H$çš„çŸ©é˜µã€‚* ä»£è¡¨ [CLS] tokenï¼Œ$ï¼ˆN+L+2)\\times H$ä¸­2ä»£è¡¨ä¸¤ç§æ¨¡æ€çš„[CLS]ã€‚ ä½¿ç”¨äº†ä¸¤ä¸ªlossï¼Œåˆ†åˆ«æ˜¯Image Text Matchingå’ŒMask Laguage Modelingã€‚åŠ ä¸ªå°loss ï¼šWord Patch Alignment Image Text Matchingï¼šæ–‡å­—ï¼Œå›¾ç‰‡é…å¯¹ ï¼ˆæ–‡æœ¬ä¸å›¾åƒæ˜¯å¦åŒ¹é…ï¼‰ Mask Laguage Modelingï¼šNLPçš„å®Œå½¢å¡«ç©º Word Patch Alignment ï¼šåˆ©ç”¨æœ€ä¼˜è¿è¾“ç†è®ºè®¡ç®—ç›¸ä¼¼åº¦ï¼ˆåˆ†å¸ƒè·ç¦»ï¼‰ Transformer çš„è¾“å‡ºä¸º$1\\times H$çš„çŸ©é˜µï¼Œç»è¿‡$H\\times H$çš„pooler(æƒé‡çŸ©é˜µ)å¾—åˆ°ä»æ˜¯$1\\times H$çš„çŸ©é˜µï¼Œæœ€åç»è¿‡ä¸€ä¸ªFCå±‚è¿›è¡ŒäºŒåˆ†ç±»ä»»åŠ¡ã€‚ ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/vilt/:4:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"VILT","uri":"/posts/deeplearning/multimodal-learning/vilt/"},{"categories":["Deep Learning"],"content":"Whole word masking ä¾‹å¦‚giraffeé•¿é¢ˆé¹¿è¿™ä¸ªå•è¯ï¼Œç”±ä¸‰ä¸ªè¯æ ¹ç»„æˆï¼Œåˆ†åˆ«æ˜¯giï¼Œrafï¼Œfeï¼Œå¦‚æœmask çš„æ—¶å€™mask â€œrafâ€è¿™ä¸ªtokenã€‚ç”±äºå¼€å¤´ä¸ºgiç»“å°¾ä¸ºfeçš„å•è¯ä¸å¤šï¼Œæ¨¡å‹å°±è®°ä½äº†ä¸­é—´ä¸€å®šæ˜¯rafï¼Œå°±ç›¸å½“äºæ¨¡å‹å­¦åˆ°äº†shortcutï¼Œè¿™æ ·æ³›åŒ–æ€§å°±ä¸å¥½ã€‚ ç›´æ¥mask â€œgiraffeâ€ æ•´ä¸ªå•è¯ã€‚è¿™æ ·å°±éœ€è¦å€ŸåŠ©å›¾åƒä¿¡æ¯ï¼Œå› æ­¤å°±åŠ å¼ºäº†å›¾åƒæ–‡æœ¬çš„è”ç³»ã€‚ ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/vilt/:4:1","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"VILT","uri":"/posts/deeplearning/multimodal-learning/vilt/"},{"categories":["Deep Learning"],"content":"Image Augmentation ä¸ºä»€ä¹ˆå‰è¾¹çš„ç ”ç©¶æ²¡æœ‰ä½¿ç”¨æ•°æ®å¢å¼ºï¼Ÿ å¤šæ¨¡æ€å­¦ä¹ è¦è€ƒè™‘å›¾åƒæ–‡æœ¬åŒ¹é…çš„é—®é¢˜ï¼Œæ•°æ®å¢å¼ºå¯èƒ½ä¼šæ”¹å˜å›¾åƒè¯­ä¹‰ ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹ï¼Œæ— æ³•è¿›è¡Œæ•°æ®å¢å¼º ä¸é€‚ç”¨color inversionå’Œcutouté¿å…ä¸æ–‡æœ¬ä¿¡æ¯ä¸åŒ¹é…ã€‚ ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/vilt/:4:2","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"VILT","uri":"/posts/deeplearning/multimodal-learning/vilt/"},{"categories":["Deep Learning"],"content":"Experiments é¢„è®­ç»ƒæ‰€ç”¨çš„æ•°æ®é›†å«4million(4ä¸ªæ•°æ®é›†å›¾ç‰‡åŠ èµ·æ¥è¿™ä¸ªæ•°) MSCOCOï¼š113Kå›¾ç‰‡ 567K é•¿æ ‡é¢˜ VGï¼š 108Kå›¾ç‰‡ 5.41M çŸ­æ ‡é¢˜ GCCï¼š3.01Må›¾ç‰‡å¯¹ SBUï¼š867Kå›¾ç‰‡å¯¹ ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/vilt/:5:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"VILT","uri":"/posts/deeplearning/multimodal-learning/vilt/"},{"categories":["Deep Learning"],"content":"Future work scalabilityï¼štransformeréƒ½æ˜¯è¶Šå¤§è¶Šå¥½ï¼Œæ•°æ®é›†è¶Šå¤§è¶Šå¥½ï¼ˆåšçš„æ›´å¤§ï¼‰ Align before Fuse: Vision and Language Representation Learning with Momentum Distillation ç”¨14million Masked Modeling for Visual Inputsï¼šå›¾åƒé‡å»º (NLPé‡Œè¿›è¡ŒMaské‡å»ºï¼Œå›¾åƒè‚¯å®šä¹Ÿæœ‰ç”¨) Augmentation Strategiesï¼šæ•°æ®å¢å¼º MixGen: A New Multi-Modal Data Augmentation ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/vilt/:6:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"VILT","uri":"/posts/deeplearning/multimodal-learning/vilt/"},{"categories":["Deep Learning"],"content":"æ¨èé˜…è¯» ViLT è®ºæ–‡ç²¾è¯» åç»­æ”¹è¿›ï¼Œæ—¶é—´æå‡ï¼Œæ›´å°‘æ—¶é—´è®­ç»ƒ Align before Fuse: Vision and Language Representation Learning with Momentum Distillation å•æœº8å¡è®­ç»ƒ2-3å¤© BLIP: Bootstrapping Language-Image Pre-training for Unified Vision-Language Understanding and Generation Masked Unsupervised Self-training for Zero-shot Image Classification ","date":"2023-06-08","objectID":"/posts/deeplearning/multimodal-learning/vilt/:7:0","tags":["Deep Learning","å¤šæ¨¡æ€å­¦ä¹ "],"title":"VILT","uri":"/posts/deeplearning/multimodal-learning/vilt/"},{"categories":["Deep Learning"],"content":"BYOL","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/byol/","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"BYOL","uri":"/posts/deeplearning/contrastive-learning/byol/"},{"categories":["Deep Learning"],"content":"SwAV æ–‡ç« æ ‡é¢˜ï¼šUnsupervised Learning of Visual Features by Contrasting Cluster Assignments ä½œè€…ï¼šMathilde Caron, Ishan Misra, Julien Mairal, Priya Goyal, Piotr Bojanowski, Armand Joulin å‘è¡¨æ—¶é—´ï¼š(NIPS 2020) å¯¹æ¯”å­¦ä¹ å’Œèšç±»ç»“åˆ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/byol/:1:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"BYOL","uri":"/posts/deeplearning/contrastive-learning/byol/"},{"categories":["Deep Learning"],"content":"methods ç»™å®šåŒæ ·ä¸€å¼ å›¾ç‰‡ï¼Œå¦‚æœç”Ÿæˆä¸åŒçš„è§†è§’ï¼Œä¸åŒçš„ views çš„è¯ï¼Œå¸Œæœ›å¯ä»¥ç”¨ä¸€ä¸ªè§†è§’å¾—åˆ°çš„ç‰¹å¾å»é¢„æµ‹å¦å¤–ä¸€ä¸ªè§†è§’å¾—åˆ°çš„ç‰¹å¾ SwAV ç½‘è·¯ å·¦è¾¹ï¼šä¸€ä¸ªå›¾ç‰‡ $ X$ï¼Œåšä¸¤æ¬¡æ•°æ®å¢å¼ºå¾—åˆ°äº†$X_1ã€X_2$ï¼Œç„¶åæ‰€æœ‰çš„æ ·æœ¬é€šè¿‡ä¸€ä¸ªç¼–ç å™¨ $f_{\\theta}$ï¼Œè¾“å‡ºä¸€ä¸ªç‰¹å¾$Z_1ã€Z_2$ï¼Œç”¨è¿™äº›ç‰¹å¾åšä¸€ä¸ªå¯¹æ¯”å­¦ä¹ çš„ loss MoCoä»memory bankå–è´Ÿæ ·æœ¬6ä¸‡ä¸ªï¼šè¿™æ˜¯ä¸€ç§è¿‘ä¼¼åšæ³• ç›´æ¥æ‹¿æ‰€æœ‰å›¾ç‰‡çš„ç‰¹å¾è·Ÿç‰¹å¾åšå¯¹æ¯”æœ‰ç‚¹åŸå§‹è€Œä¸”æœ‰ç‚¹è´¹èµ„æº SwAVï¼šè·Ÿèšç±»çš„ä¸­å¿ƒ $C$ (prototype) æ¯” C çš„ç»´åº¦æ˜¯$d\\times k$ï¼Œdæ˜¯ç‰¹å¾çš„ç»´åº¦ï¼Œkæ˜¯èšç±»ä¸­å¿ƒä¸ªæ•°3,000 ä¸€ä¸ªå›¾ç‰‡ $ X$ï¼Œåšä¸¤æ¬¡æ•°æ®å¢å¼ºå¾—åˆ°äº†$X_1ã€X_2$ï¼Œç„¶åæ‰€æœ‰çš„æ ·æœ¬é€šè¿‡ä¸€ä¸ªç¼–ç å™¨ $f_{\\theta}$ï¼Œè¾“å‡ºä¸€ä¸ªç‰¹å¾$Z_1ã€Z_2$ï¼Œå…ˆé€šè¿‡clusteringè®©ç‰¹å¾ $Z$ å’Œprototype $C$ ç”Ÿæˆç›®æ ‡$Q_1ã€Q_2$ï¼›Cç‚¹ä¹˜$Z_1$å»é¢„æµ‹$Q_2$ï¼Œæ¢ä½é¢„æµ‹ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/byol/:2:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"BYOL","uri":"/posts/deeplearning/contrastive-learning/byol/"},{"categories":["Deep Learning"],"content":"multi crop æ€æƒ³ï¼šå…¨å±€çš„å’Œè¿™ä¸ªå±€éƒ¨çš„ç‰¹å¾éƒ½è¦å…³æ³¨ è¿‡å»çš„æ–¹æ³•ï¼šç”¨çš„ä¸¤ä¸ªcropï¼Œä¸€ä¸ªæ­£æ ·æœ¬å¯¹$X_1ã€X_2$ä¸¤ä¸ªå›¾ç‰‡ ä¸€ä¸ªå›¾ç‰‡$X$ï¼Œå…ˆæŠŠå®ƒresize åˆ°$256\\times 256$ï¼Œç„¶åéšæœºcropä¸¤ä¸ª$224\\times 224$çš„å›¾ç‰‡å½“æˆ $X_1ã€X_2$ SwAVï¼šå¤§çš„cropæŠ“ä½çš„æ˜¯æ•´ä¸ªåœºæ™¯çš„ç‰¹å¾ï¼Œå¦‚æœæ›´æƒ³å­¦ä¹ è¿™äº›å±€éƒ¨ç‰©ä½“çš„ç‰¹å¾ï¼Œæœ€å¥½èƒ½å¤šä¸ª cropï¼Œå»å›¾ç‰‡é‡Œcropä¸€äº›åŒºåŸŸï¼Œè¿™æ ·å°±èƒ½å…³æ³¨åˆ°ä¸€äº›å±€éƒ¨çš„ç‰©ä½“ ä½†æ˜¯å¢åŠ cropï¼Œä¼šå¢åŠ æ¨¡å‹çš„è®¡ç®—å¤æ‚åº¦ï¼Œå› ä¸ºç›¸å½“äºä½¿ç”¨äº†æ›´å¤šçš„æ­£æ ·æœ¬ è¿›è¡Œå–èˆï¼šæŠŠè¿™ä¸ªcropå˜å¾—å°ä¸€ç‚¹ï¼Œå˜æˆ160 ï¼Œå–2ä¸ª160çš„cropå»å­¦å…¨å±€çš„ç‰¹å¾ï¼›ç„¶åä¸ºäº†å¢åŠ æ­£æ ·æœ¬çš„æ•°é‡ï¼Œä¸ºäº†å­¦ä¸€äº›å±€éƒ¨çš„ç‰¹å¾ï¼Œå†å»éšæœºé€‰4ä¸ªå°ä¸€ç‚¹cropï¼Œå¤§å°ä¸º$96\\times96$ SwAV_multi_crop å®éªŒ åŸºçº¿æ¨¡å‹ 2 ä¸ª$224\\times224$ï¼Œmulti crop 2ä¸ª$160\\times160$+4ä¸ª$96\\times96$ SimCLR+ multi crop æ¶¨äº†2.4ä¸ªç‚¹ï¼Œå¦‚æœæŠŠ multi cropè¿™ä¸ªæŠ€æœ¯ç”¨åˆ° BYOL ä¸Šæœ‰å¯èƒ½BYOLä¼šæ¯”SwAVçš„æ•ˆæœé«˜ å¦‚æœæ²¡æœ‰è¿™ä¸ªmulti cropçš„è¿™ä¸ªæŠ€æœ¯å…¶å®SwAVçš„æ€§èƒ½ä¹Ÿå°±è·ŸMoCo v2æ˜¯å·®ä¸å¤šçš„ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/byol/:3:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"BYOL","uri":"/posts/deeplearning/contrastive-learning/byol/"},{"categories":["Deep Learning"],"content":"BYOL æ–‡ç« æ ‡é¢˜ï¼šBootstrap your own latent: A new approach to self-supervised Learning ä½œè€…ï¼šJean-Bastien Grill, Florian Strub, Florent AltchÃ©, Corentin Tallec å‘è¡¨æ—¶é—´ï¼š(2020) æ²¡æœ‰è´Ÿæ ·æœ¬ openmmlab ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/byol/:4:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"BYOL","uri":"/posts/deeplearning/contrastive-learning/byol/"},{"categories":["Deep Learning"],"content":"æ ‡é¢˜ Bootstrap your own latent: A new approach to self-supervised Learning Bootstrap: If you bootstrap an organization or an activity, you set it up or achieve it alone, using very few resources. latent: ç‰¹å¾ hiddenã€featureã€embedding åªæœ‰æ­£æ ·æœ¬ï¼›ç›®çš„ï¼šè®©æ‰€æœ‰ç›¸ä¼¼çš„ç‰©ä½“ï¼Œç‰¹å¾ä¹Ÿå°½å¯èƒ½çš„ç›¸ä¼¼ ç¼ºé™·ï¼šæœ‰ä¸€ä¸ªèººå¹³è§£ å¦‚æœä¸€ä¸ªæ¨¡å‹ä¸è®ºä»€ä¹ˆè¾“å…¥ï¼Œéƒ½è¿”å›åŒæ ·çš„è¾“å‡ºï¼Œé‚£æ‰€æœ‰çš„ç‰¹å¾éƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œlosså°±éƒ½æ˜¯ 0 è€Œåªæœ‰åŠ ä¸Šè´Ÿæ ·æœ¬çš„çº¦æŸï¼Œä¸å…‰ç›¸ä¼¼çš„ç‰©ä½“è¦æœ‰ç›¸ä¼¼çš„ç‰¹å¾ï¼›ä¸ç›¸ä¼¼çš„ç‰©ä½“ä¹Ÿè¦æœ‰ä¸ç›¸ä¼¼çš„ç‰¹å¾ï¼›æ¨¡å‹æ‰æœ‰åŠ¨åŠ›å»ç»§ç»­å­¦ï¼ˆé˜²æ­¢æ¨¡å‹å­¦åˆ°è¿™ä¸ªèººå¹³è§£ï¼‰ å¦‚æœè¾“å‡ºçš„æ‰€æœ‰ç‰¹å¾éƒ½ä¸€æ ·ï¼Œé‚£åœ¨è´Ÿæ ·æœ¬çš„ loss æ— ç©·å¤§ï¼›æ¨¡å‹æ›´æ–°è®©æ­£æ ·æœ¬å’Œè´Ÿæ ·æœ¬çš„ loss éƒ½å¾€ä¸‹é™ï¼Œè¾¾åˆ°ä¸€ä¸ªæœ€ä¼˜è§£ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/byol/:5:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"BYOL","uri":"/posts/deeplearning/contrastive-learning/byol/"},{"categories":["Deep Learning"],"content":"methods BYOL ç½‘ç»œæµç¨‹ å‰å‘è¿‡ç¨‹ ä¸€ä¸ªmini-batch å¼çš„å›¾ç‰‡ $x$ï¼Œåšä¸¤æ¬¡æ•°æ®å¢å¼ºå¾—åˆ°äº†$vã€vâ€™$; $v$ é€šè¿‡ç¼–ç å™¨ $f_\\theta$ å¾—åˆ°ç‰¹å¾$y_\\theta$ï¼›$vâ€™$ é€šè¿‡ç¼–ç å™¨ $f_\\xi$ å¾—åˆ°ç‰¹å¾$yâ€™_\\xi$ï¼›è¾“å‡º2048ç»´(ResNet50) $f_\\theta$ å’Œ $f_\\xi$ ä½¿ç”¨åŒæ ·çš„ç½‘ç»œæ¶æ„(ResNet50)ï¼›å‚æ•°ä¸åŒã€‚$f_\\theta$ éšç€æ¢¯åº¦æ›´æ–°è€Œæ›´æ–°ï¼›$f_\\xi$ è·Ÿ MoCo ä¸€æ ·ï¼Œä½¿ç”¨åŠ¨é‡ç¼–ç å™¨ï¼Œä»¥ moving average å½¢å¼æ›´æ–° $y_\\theta$é€šè¿‡ $g_\\theta$ å¾—åˆ°ç‰¹å¾$z_\\theta$ï¼› $yâ€™\\xi$ é€šè¿‡ $g\\xi$ å¾—åˆ°ç‰¹å¾$zâ€™_\\xi$ï¼›è¾“å‡º256ç»´ $g_\\theta$ å’Œ $g_\\xi$ ä½¿ç”¨åŒæ ·çš„ç½‘ç»œæ¶æ„ (fc + BN+ ReLU + fc )ï¼›å‚æ•°ä¸åŒ SimCLR ä½¿ç”¨projection head è¾“å‡ºæ˜¯128ç»´ BYOLä½¿ç”¨projector è¾“å‡ºæ˜¯256ç»´ ï¼ˆä¸¤è€…éƒ½æ˜¯MLPå±‚ï¼‰ $z_\\theta$ é€šè¿‡ $q_\\theta$ å¾—åˆ°æ–°çš„ç‰¹å¾ $q_\\theta (z_\\theta)$ï¼› $q_\\theta (z_\\theta)$ å’Œ $sg(zâ€™_\\xi)$ å°½å¯èƒ½ä¸€è‡´ sgï¼šstop gradient $g_\\theta$ å’Œ $q_\\theta$ ä½¿ç”¨åŒæ ·çš„ç½‘ç»œæ¶æ„ ç”¨è‡ªå·±ä¸€ä¸ªè§†è§’çš„ç‰¹å¾å»é¢„æµ‹å¦å¤–ä¸€ä¸ªè§†è§’çš„ç‰¹å¾ 2048ç»´çš„ $y_\\theta$â€‹ åšä¸‹æ¸¸ä»»åŠ¡ï¼›æŸå¤±å‡½æ•°ï¼šmean square error loss BYOLè‰å›¾ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/byol/:6:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"BYOL","uri":"/posts/deeplearning/contrastive-learning/byol/"},{"categories":["Deep Learning"],"content":"æ¨èé˜…è¯» Understanding self-supervised and contrastive learning with â€œBootstrap Your Own Latentâ€(BYOL) è·ŸBNåçš„å¹³å‡å›¾ç‰‡mode åšå¯¹æ¯” ä½¿ç”¨ BN ä¼šäº§ç”Ÿæ ·æœ¬ä¿¡æ¯æ³„æ¼ åŸä½œè§£é‡Šï¼šBYOL works even without batch statistics BYOL ä¸éœ€è¦ batch norm æä¾›çš„é‚£äº› batch çš„è¿™ä¸ªç»Ÿè®¡é‡ç…§æ ·èƒ½å·¥ä½œï¼Œå›åº”ä¹‹å‰åšå®¢é‡Œæå‡ºæ¥å‡è®¾ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/byol/:7:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"BYOL","uri":"/posts/deeplearning/contrastive-learning/byol/"},{"categories":["Deep Learning"],"content":"SimSiam æ–‡ç« æ ‡é¢˜ï¼šExploring Simple Siamese Representation Learning ä½œè€…ï¼š Xinlei Chen, Kaiming He å‘è¡¨æ—¶é—´ï¼š(2020) offical code æ²¡æœ‰è´Ÿæ ·æœ¬ï¼Œä¸éœ€è¦å¤§çš„batch size, ä¸éœ€è¦åŠ¨é‡ç¼–ç å™¨ å¯ä»¥çœ‹æˆæ˜¯ä¸€ç§ EM ç®—æ³•ï¼Œé€šè¿‡è¿™ç§é€æ­¥æ›´æ–°çš„æ–¹å¼é¿å…æ¨¡å‹åå¡Œ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/byol/:8:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"BYOL","uri":"/posts/deeplearning/contrastive-learning/byol/"},{"categories":["Deep Learning"],"content":"methods simsiam ç½‘ç»œ ç®—æ³• å‰å‘è¿‡ç¨‹ ä¸€ä¸ªmini-batch å¼çš„å›¾ç‰‡ $x$ï¼Œåšä¸¤æ¬¡æ•°æ®å¢å¼ºå¾—åˆ°äº†$x_1ã€x_2â€™$; $x_1, x_2$ é€šè¿‡ç¼–ç å™¨ $f$ å¾—åˆ°ç‰¹å¾ $z_1, z_2$ ; $z_1,z_2$ é€šè¿‡predictor $h$ å¾—åˆ° $p_1,p_2$; ä¸åŒçš„å¯¹æ¯”å­¦ä¹ æ¨¡å‹ SimCLR ï¼šä¸¤ç¼–ç å™¨éƒ½æœ‰æ¢¯åº¦å›ä¼ ï¼›å¯¹æ¯”ä»»åŠ¡ SwAV ï¼šæ²¡æœ‰è·Ÿè´Ÿæ ·æœ¬ï¼›è·Ÿèšç±»ä¸­å¿ƒå»æ¯”ï¼›å¯¹æ¯”ä»»åŠ¡ BYOL ï¼šç”¨å·¦è¾¹å‘¢å»é¢„æµ‹å³è¾¹ï¼›åŒæ—¶ä½¿ç”¨äº†åŠ¨é‡ç¼–ç å™¨ï¼›é¢„æµ‹ä»»åŠ¡ SimSiam ï¼šæ²¡æœ‰è´Ÿæ ·æœ¬ï¼Œä¸éœ€è¦å¤§çš„batch size, ä¸éœ€è¦åŠ¨é‡ç¼–ç å™¨ï¼›é¢„æµ‹ä»»åŠ¡ ä¸åŒçš„å¯¹æ¯”å­¦ä¹ æ¨¡å‹ImageNetå®éªŒ batch size åªæœ‰ MoCo v2 å’Œ SimSiam æ˜¯å¯ä»¥ç”¨256çš„ï¼›å…¶å®ƒå·¥ä½œéƒ½æ˜¯è¦ç”¨æ›´å¤§çš„ batch size è´Ÿæ ·æœ¬ SimCLR å’Œ MoCo v2 è¦ç”¨è´Ÿæ ·æœ¬ åŠ¨é‡ç¼–ç å™¨ SimCLR æ²¡æœ‰ç”¨ï¼›SimCLR v2ç”¨äº† SwAV æ²¡æœ‰ç”¨ epochè¶Šå¤§ï¼ŒSimsiamå°±ä¸è¡Œäº†ã€‚ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/byol/:9:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"BYOL","uri":"/posts/deeplearning/contrastive-learning/byol/"},{"categories":["Deep Learning"],"content":"Barlow Twins æ–‡ç« æ ‡é¢˜ï¼š Barlow Twins: Self-Supervised Learning via Redundancy Reduction ä½œè€…: Jure Zbontar, Li Jing, Ishan Misra, Yann LeCun, StÃ©phane Deny å‘è¡¨æ—¶é—´: (ICML 2021) ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/byol/:10:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"BYOL","uri":"/posts/deeplearning/contrastive-learning/byol/"},{"categories":["Deep Learning"],"content":"methods Barlow Twins ç½‘ç»œ ç®—æ³• æŸå¤±å‡½æ•° ç”Ÿæˆäº†ä¸€ä¸ªå…³è”çŸ©é˜µcross correlation matrixï¼›å¸Œæœ›è¿™ä¸ªçŸ©é˜µèƒ½è·Ÿä¸€ä¸ªå•ä½çŸ©é˜µ identity matrixå°½é‡çš„ç›¸ä¼¼ å¸Œæœ›æ­£æ ·æœ¬çš„ç›¸ä¼¼æ€§å°½é‡éƒ½é€¼è¿‘äº1ï¼›è·Ÿåˆ«çš„æ ·æœ¬ç›¸ä¼¼æ€§å°½å¯èƒ½æ˜¯0 ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/byol/:11:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"BYOL","uri":"/posts/deeplearning/contrastive-learning/byol/"},{"categories":["Deep Learning"],"content":"DINO æ–‡ç« æ ‡é¢˜ï¼šEmerging Properties in Self-Supervised Vision Transformers ä½œè€…: Mathilde Caron, Hugo Touvron, Ishan Misra, HervÃ© JÃ©gou, Julien Mairal, Piotr Bojanowski, Armand Joulin å‘è¡¨æ—¶é—´: (2021) offical code transformeråŠ è‡ªç›‘ç£ ä¸€ä¸ªå®Œå…¨ä¸ç”¨ä»»ä½•æ ‡ç­¾ä¿¡æ¯è®­ç»ƒå‡ºçš„ Vision Transformer ï¼›å¦‚æœæŠŠå®ƒçš„è‡ªæ³¨æ„åŠ›å›¾è¿›è¡Œå¯è§†åŒ–ï¼›å‘ç°å®ƒèƒ½éå¸¸å‡†ç¡®çš„æŠ“ä½æ¯ä¸ªç‰©ä½“çš„è½®å»“ (åª²ç¾å›¾åƒåˆ†å‰²) ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/byol/:12:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"BYOL","uri":"/posts/deeplearning/contrastive-learning/byol/"},{"categories":["Deep Learning"],"content":"methods MoCoï¼šå·¦è¾¹çš„ç½‘ç»œå«åš query ç¼–ç å™¨ï¼›å³è¾¹å«åš key ç¼–ç å™¨ BYOL ï¼šå·¦è¾¹çš„ç½‘ç»œå«åš online networkï¼›å³è¾¹å«åš target network DINO ï¼šå·¦è¾¹çš„ç½‘ç»œå«åš student networkï¼›å³è¾¹å«åš teacher network DINO ç½‘ç»œ ç®—æ³• é¿å…æ¨¡å‹åå¡Œï¼šcentering æ“ä½œ æŠŠæ•´ä¸ª batch é‡Œçš„æ ·æœ¬éƒ½ç®—ä¸€ä¸ªå‡å€¼ç„¶åå‡æ‰è¿™ä¸ªå‡å€¼ MoCoV3ï¼šéšæœºåˆå§‹åŒ–äº†ä¸€ä¸ª patch projection å±‚ï¼›ç„¶åå†»ç»“ä½¿å¾—æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ä¸­éƒ½ä¸å˜ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/byol/:13:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"BYOL","uri":"/posts/deeplearning/contrastive-learning/byol/"},{"categories":["Deep Learning"],"content":"InstDisc","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/instdisc/","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"InstDisc","uri":"/posts/deeplearning/contrastive-learning/instdisc/"},{"categories":["Deep Learning"],"content":"InstDisc æ–‡ç« æ ‡é¢˜ï¼šUnsupervised Feature Learning via Non-Parametric Instance-level Discrimination ä½œè€…ï¼šZhirong Wu, Yuanjun Xiong, Stella Yu, Dahua Lin å‘è¡¨æ—¶é—´ï¼š(CVPR 2018) è¿™ç¯‡è®ºæ–‡æå‡ºäº†ä¸ªä½“åˆ¤åˆ«ä»»åŠ¡ä»¥åŠmemory bank æŠŠæ¯ä¸€ä¸ª instanceéƒ½çœ‹æˆæ˜¯ä¸€ä¸ªç±»åˆ«ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€å¼ å›¾ç‰‡éƒ½çœ‹ä½œæ˜¯ä¸€ä¸ªç±»åˆ«ï¼Œç›®æ ‡æ˜¯èƒ½å­¦ä¸€ç§ç‰¹å¾èƒ½æŠŠæ¯ä¸€ä¸ªå›¾ç‰‡éƒ½åŒºåˆ†å¼€æ¥ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/instdisc/:1:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"InstDisc","uri":"/posts/deeplearning/contrastive-learning/instdisc/"},{"categories":["Deep Learning"],"content":"Approach InstDisc ç½‘ç»œ é€šè¿‡ä¸€ä¸ªå·ç§¯ç¥ç»ç½‘ç»œæŠŠæ‰€æœ‰çš„å›¾ç‰‡éƒ½ç¼–ç æˆä¸€ä¸ªç‰¹å¾ï¼Œè¿™äº›ç‰¹å¾åœ¨æœ€åçš„ç‰¹å¾ç©ºé—´é‡Œèƒ½å¤Ÿå°½å¯èƒ½çš„åˆ†å¼€ è®­ç»ƒè¿™ä¸ªå·ç§¯ç¥ç»ç½‘ç»œä½¿ç”¨çš„æ˜¯å¯¹æ¯”å­¦ä¹  éœ€è¦æœ‰æ­£æ ·æœ¬å’Œè´Ÿæ ·æœ¬ï¼Œæ ¹æ®ä¸ªä½“åˆ¤åˆ«è¿™ä¸ªä»»åŠ¡ï¼Œæ­£æ ·æœ¬å°±æ˜¯è¿™ä¸ªå›¾ç‰‡æœ¬èº«ï¼ˆå¯èƒ½ç»è¿‡ä¸€äº›æ•°æ®å¢å¼ºï¼‰ï¼Œè´Ÿæ ·æœ¬å°±æ˜¯æ•°æ®é›†é‡Œæ‰€æœ‰å…¶å®ƒçš„å›¾ç‰‡ æŠŠæ‰€æœ‰å›¾ç‰‡çš„ç‰¹å¾å…¨éƒ½å­˜åˆ°memory bank é‡Œï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå­—å…¸ï¼ˆImageNetæ•°æ®é›†æœ‰128ä¸‡çš„å›¾ç‰‡ï¼Œmemory banké‡Œè¦å­˜128ä¸‡è¡Œï¼Œä¹Ÿå°±æ„å‘³ç€æ¯ä¸ªç‰¹å¾çš„ç»´åº¦ä¸èƒ½å¤ªé«˜ï¼Œå¦åˆ™å­˜å‚¨ä»£ä»·å¤ªå¤§äº†ï¼Œæœ¬æ–‡ç”¨çš„æ˜¯128ç»´ï¼‰ å‰å‘è¿‡ç¨‹ï¼š å‡å¦‚batch sizeæ˜¯256ï¼Œæœ‰256ä¸ªå›¾ç‰‡è¿›å…¥åˆ°ç¼–ç å™¨ä¸­ï¼Œé€šè¿‡ä¸€ä¸ª ResNet50ï¼Œæœ€åçš„ç‰¹å¾ç»´åº¦æ˜¯2048ç»´ï¼Œç„¶åæŠŠå®ƒé™ç»´é™åˆ°128ç»´ï¼Œè¿™å°±æ˜¯æ¯ä¸ªå›¾ç‰‡çš„ç‰¹å¾å¤§å° batch size æ˜¯ 256 çš„è¯æ„å‘³ç€æœ‰256ä¸ªæ­£æ ·æœ¬ï¼Œè´Ÿæ ·æœ¬ä» memory bank é‡Œéšæœºåœ°æŠ½ä¸€äº›è´Ÿæ ·æœ¬å‡ºæ¥ã€‚æœ¬æ–‡è´Ÿæ ·æœ¬ä¸ªæ•°4096 ç”¨NCE loss è®¡ç®—å¯¹æ¯”å­¦ä¹ çš„ç›®æ ‡å‡½æ•° æ›´æ–°ç½‘ç»œåï¼ŒæŠŠ mini batché‡Œçš„æ•°æ®æ ·æœ¬æ‰€å¯¹åº”çš„é‚£äº›ç‰¹å¾ï¼Œåœ¨ memory bank é‡Œè¿›è¡Œæ›´æ–°ï¼›ä¸åœæ›´æ–°ï¼Œæœ€åå­¦åˆ°è¿™ä¸ªç‰¹å¾å°½å¯èƒ½çš„æœ‰åŒºåˆ†æ€§ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/instdisc/:2:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"InstDisc","uri":"/posts/deeplearning/contrastive-learning/instdisc/"},{"categories":["Deep Learning"],"content":"CPC æ–‡ç« æ ‡é¢˜ï¼šRepresentation Learning with Contrastive Predictive Coding) ä½œè€…ï¼šAaron van den Oord, Yazhe Li, Oriol Vinyals å‘è¡¨æ—¶é—´ï¼š(2018) CPC ç½‘ç»œ CPCä¸ä»…å¯ä»¥å¤„ç†éŸ³é¢‘ï¼Œè¿˜å¯ä»¥å¤„ç†å›¾ç‰‡ã€æ–‡å­—ä»¥åŠåœ¨å¼ºåŒ–å­¦ä¹ é‡Œä½¿ç”¨ è¾“å…¥ $x$ï¼ˆä¸€ä¸ªæŒç»­çš„åºåˆ—ï¼‰ï¼Œ$t$ è¡¨ç¤ºå½“å‰æ—¶åˆ»ï¼Œ$t-i$ è¡¨ç¤ºè¿‡å»çš„æ—¶åˆ»ï¼Œ$t+i$ è¡¨ç¤ºæœªæ¥çš„æ—¶åˆ» æŠŠä¹‹å‰æ—¶åˆ»çš„è¾“å…¥é€šè¿‡ç¼–ç å™¨$g_{enc}$ï¼Œè¿™ä¸ªç¼–ç å™¨è¿”å›ä¸€äº›ç‰¹å¾ï¼Œç„¶åæŠŠè¿™äº›ç‰¹å¾æ”¾è¿›ä¸€ä¸ªè‡ªå›å½’çš„æ¨¡å‹$g_{ar}$ï¼Œæ¯ä¸€æ­¥æœ€åçš„è¾“å‡ºï¼Œå°±ä¼šå¾—åˆ°å›¾ä¸­çº¢è‰²çš„æ–¹å—$c_t$ï¼ˆcontext representationï¼Œä»£è¡¨ä¸Šä¸‹æ–‡çš„ä¸€ä¸ªç‰¹å¾è¡¨ç¤ºï¼‰ï¼Œå¦‚æœè¿™ä¸ªä¸Šä¸‹æ–‡çš„ç‰¹å¾è¡¨ç¤ºè¶³å¤Ÿå¥½ï¼ˆå®ƒçœŸçš„åŒ…å«äº†å½“å‰å’Œä¹‹å‰æ‰€æœ‰çš„è¿™äº›ä¿¡æ¯ï¼‰ï¼Œé‚£å®ƒåº”è¯¥å¯ä»¥åšå‡ºä¸€äº›åˆç†çš„é¢„æµ‹ï¼Œæ‰€ä»¥å°±å¯ä»¥ç”¨$c_t$é¢„æµ‹æœªæ¥æ—¶åˆ»çš„è¿™ä¸ª$z_{t +1}ã€z_{t + 2}$ï¼ˆæœªæ¥æ—¶åˆ»çš„ç‰¹å¾è¾“å‡ºï¼‰ ä¸€èˆ¬å¸¸è§çš„è‡ªå›å½’æ¨¡å‹ï¼Œå°±æ˜¯ RNN æˆ–è€… LSTMçš„æ¨¡å‹ å¯¹æ¯”å­¦ä¹ çš„ä½“ç° æ­£æ ·æœ¬ï¼šæœªæ¥çš„è¾“å…¥é€šè¿‡ç¼–ç å™¨ä»¥åå¾—åˆ°çš„æœªæ¥æ—¶åˆ»çš„ç‰¹å¾è¾“å‡ºï¼Œè¿™ç›¸å½“äºåšçš„é¢„æµ‹æ˜¯ queryï¼Œè€ŒçœŸæ­£æœªæ¥æ—¶åˆ»çš„è¾“å‡ºæ˜¯ç”±è¾“å…¥å†³å®šçš„ï¼Œç›¸å¯¹äºé¢„æµ‹æ¥è¯´æ˜¯æ­£æ ·æœ¬ï¼› è´Ÿæ ·æœ¬ï¼šæ¯”è¾ƒå¹¿æ³›ï¼Œæ¯”å¦‚å¯ä»¥ä»»æ„é€‰å–è¾“å…¥é€šè¿‡è¿™ä¸ªç¼–ç å™¨å¾—åˆ°è¾“å‡ºï¼Œå®ƒéƒ½åº”è¯¥è·Ÿé¢„æµ‹æ˜¯ä¸ç›¸ä¼¼çš„ã€‚ CPC V2ç”¨äº†æ›´å¤§çš„æ¨¡å‹ã€ç”¨äº†æ›´å¤§çš„å›¾åƒå—ã€åšäº†æ›´å¤šæ–¹å‘ä¸Šçš„é¢„æµ‹ä»»åŠ¡ï¼ŒæŠŠbatch norm æ¢æˆäº† layer normï¼Œè€Œä½¿ç”¨äº†æ›´å¤šçš„æ•°æ®å¢å¼ºã€‚ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/instdisc/:3:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"InstDisc","uri":"/posts/deeplearning/contrastive-learning/instdisc/"},{"categories":["Deep Learning"],"content":"InvaSpread æ–‡ç« æ ‡é¢˜ï¼šUnsupervised Embedding Learning via Invariant and Spreading Instance Feature ä½œè€…ï¼šMang Ye, Xu Zhang, Pong C. Yuen, Shih-Fu Chang å‘è¡¨æ—¶é—´ï¼š(CVPR 2019) ä¸€ä¸ªç¼–ç å™¨çš„ç«¯åˆ°ç«¯å¯¹æ¯”å­¦ä¹  å¯ä»¥è¢«ç†è§£æˆæ˜¯ SimCLR çš„ä¸€ä¸ªå‰èº«ï¼Œå®ƒæ²¡æœ‰ä½¿ç”¨é¢å¤–çš„æ•°æ®ç»“æ„å»å­˜å‚¨å¤§é‡çš„è´Ÿæ ·æœ¬ï¼Œå®ƒçš„æ­£è´Ÿæ ·æœ¬å°±æ˜¯æ¥è‡ªäºåŒä¸€ä¸ª mini bachï¼Œåªç”¨ä¸€ä¸ªç¼–ç å™¨è¿›è¡Œç«¯åˆ°ç«¯çš„å­¦ä¹ ã€‚ ä¸ºä»€ä¹ˆå®ƒæ²¡æœ‰å–å¾— SimCLR é‚£ä¹ˆå¥½çš„ç»“æœå‘¢ï¼Ÿå­—å…¸å¿…é¡»è¶³å¤Ÿå¤§ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨åšå¯¹æ¯”å­¦ä¹ çš„æ—¶å€™ï¼Œè´Ÿæ ·æœ¬æœ€å¥½æ˜¯è¶³å¤Ÿå¤šï¼Œè€Œæœ¬æ–‡çš„çš„ batch size å°±æ˜¯256ï¼Œä¹Ÿå°±æ„å‘³ç€å®ƒçš„è´Ÿæ ·æœ¬åªæœ‰500å¤šä¸ªï¼Œå†åŠ ä¸Šå®ƒè¿˜ç¼ºå°‘åƒ SimCLR é‚£æ ·é‚£ä¹ˆå¼ºå¤§çš„æ•°æ®å¢å¹¿ä»¥åŠæœ€åæå‡ºçš„é‚£ä¸ª mlp projectorã€‚ InvaSpread æ€æƒ³ åŒæ ·çš„å›¾ç‰‡é€šè¿‡ç¼–ç å™¨ä»¥åï¼Œå®ƒçš„ç‰¹å¾åº”è¯¥å¾ˆç±»ä¼¼ï¼Œä¸åŒçš„å›¾ç‰‡ï¼Œå®ƒçš„ç‰¹å¾å‡ºæ¥å°±åº”è¯¥ä¸ç±»ä¼¼ï¼Œè¿™å°±æ˜¯é¢˜ç›®ä¸­è¯´çš„invariantå’Œ spreading å¯¹äºç›¸ä¼¼çš„å›¾ç‰‡ã€ç›¸ä¼¼çš„ç‰©ä½“ï¼Œç‰¹å¾åº”è¯¥ä¿æŒä¸å˜æ€§ï¼Œä½†æ˜¯å¯¹äºä¸ç›¸ä¼¼çš„ç‰©ä½“æˆ–è€…å®Œå…¨ä¸æ²¾è¾¹çš„ç‰©ä½“ï¼Œç‰¹å¾åº”è¯¥å°½å¯èƒ½çš„åˆ†æ•£å¼€ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/instdisc/:4:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"InstDisc","uri":"/posts/deeplearning/contrastive-learning/instdisc/"},{"categories":["Deep Learning"],"content":"Method InvaSpread ç½‘ç»œ å‰å‘è¿‡ç¨‹ï¼š å¦‚æœ batch size æ˜¯256ï¼Œä¸€å…±æœ‰256ä¸ªå›¾ç‰‡ï¼Œç»è¿‡æ•°æ®å¢å¼ºï¼Œåˆå¾—åˆ°äº†256å¼ å›¾ç‰‡ å¯¹äº $x_1 $è¿™å¼ å›¾ç‰‡æ¥è¯´ï¼Œ $\\hat x_1$å°±æ˜¯å®ƒçš„æ­£æ ·æœ¬ï¼Œå®ƒçš„è´Ÿæ ·æœ¬æ˜¯æ‰€æœ‰å‰©ä¸‹çš„è¿™äº›å›¾ç‰‡ï¼ˆåŒ…æ‹¬åŸå§‹çš„å›¾ç‰‡ä»¥åŠç»è¿‡æ•°æ®å¢å¼ºåçš„å›¾ç‰‡ï¼‰ï¼Œ æ­£æ ·æœ¬æ˜¯256ï¼Œè´Ÿæ ·æœ¬æ˜¯$(256 - 1) \\times 2$ï¼Œå°±æ˜¯é™¤å»æ ·æœ¬æœ¬èº«ä¹‹å¤– mini-batch å‰©ä¸‹çš„æ‰€æœ‰æ ·æœ¬ä»¥åŠå®ƒç»è¿‡æ•°æ®å¢å¼ºåçš„æ ·æœ¬ã€‚ å’Œ InstDisc çš„åŒºåˆ«ï¼šInstDiscä¸­ï¼Œæ­£æ ·æœ¬è™½ç„¶æ˜¯256ï¼Œè´Ÿæ ·æœ¬å´æ˜¯ä»ä¸€ä¸ª memory bank é‡ŒæŠ½å‡ºæ¥çš„ï¼Œç”¨çš„è´Ÿæ ·æœ¬æ˜¯4096ç”šè‡³è¿˜å¯ä»¥æ›´å¤§ é€šè¿‡ç¼–ç å™¨ä»¥åï¼Œå†è¿‡ä¸€å±‚å…¨è¿æ¥å±‚è¿›è¡Œé™ç»´è‡³128ç»´ï¼›å›¾ä¸­ç»¿è‰²çš„çƒåœ¨æœ€åçš„ç‰¹å¾ç©ºé—´ä¸Šåº”è¯¥å°½å¯èƒ½çš„æ¥è¿‘ï¼Œä½†æ˜¯è¿™ä¸ªç»¿è‰²çš„çƒè·Ÿåˆ«çš„é¢œè‰²çš„ç‰¹å¾åº”è¯¥å°½å¯èƒ½çš„æ‹‰è¿œ æ‰€ç”¨çš„ç›®æ ‡å‡½æ•°ä¹Ÿæ˜¯ NCE loss çš„ä¸€ä¸ªå˜ä½“ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/instdisc/:5:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"InstDisc","uri":"/posts/deeplearning/contrastive-learning/instdisc/"},{"categories":["Deep Learning"],"content":"CMC æ–‡ç« æ ‡é¢˜ï¼šContrastive Multiview Coding ä½œè€…ï¼šYonglong Tian, Dilip Krishnan, Phillip Isola å‘è¡¨æ—¶é—´ï¼š(2019) å¤šè§†è§’ä¸‹çš„å¯¹æ¯”å­¦ä¹  CMCæ­£æ ·æœ¬ï¼šä¸€ä¸ªç‰©ä½“çš„å¾ˆå¤šä¸ªè§†è§’ å·¥ä½œç›®çš„å°±æ˜¯å»å¢å¤§äº’ä¿¡æ¯ï¼ˆæ‰€æœ‰çš„è§†è§’ä¹‹é—´çš„äº’ä¿¡æ¯ï¼‰ CMC å››ä¸ªè§†è§’æ­£æ ·æœ¬å’Œè´Ÿæ ·æœ¬ é€‰å–çš„æ˜¯ NYU RGBD è¿™ä¸ªæ•°æ®é›†ï¼ˆè¿™ä¸ªæ•°æ®é›†æœ‰åŒæ—¶4ä¸ªviewï¼Œä¹Ÿå°±æ˜¯æœ‰å››ä¸ªè§†è§’ï¼šåŸå§‹çš„å›¾åƒ$V_1$ã€è¿™ä¸ªå›¾åƒå¯¹åº”çš„æ·±åº¦ä¿¡æ¯$V_2$ï¼ˆæ¯ä¸ªç‰©ä½“ç¦»è§‚å¯Ÿè€…åˆ°åº•æœ‰å¤šè¿œï¼‰ã€SwAV ace normal $V_3$ã€è¿™ä¸ªç‰©ä½“çš„åˆ†å‰²å›¾åƒ$V_4$ï¼‰ CMCæ˜¯ç¬¬ä¸€ä¸ªæˆ–è€…è¯´æ¯”è¾ƒæ—©çš„å·¥ä½œå»åšè¿™ç§å¤šè§†è§’çš„å¯¹æ¯”å­¦ä¹ ï¼Œå®ƒä¸ä»…è¯æ˜äº†å¯¹æ¯”å­¦ä¹ çš„çµæ´»æ€§ï¼Œè€Œä¸”è¯æ˜äº†è¿™ç§å¤šè§†è§’ã€å¤šæ¨¡æ€çš„è¿™ç§å¯è¡Œæ€§ã€‚ open AIçš„clipæ¨¡å‹ï¼šæœ‰ä¸€ä¸ªå›¾ç‰‡ï¼Œè¿˜æœ‰ä¸€ä¸ªæè¿°è¿™ä¸ªå›¾ç‰‡çš„æ–‡æœ¬ï¼Œé‚£è¿™ä¸ªå›¾åƒå’Œæ–‡æœ¬å°±å¯ä»¥å½“æˆæ˜¯ä¸€ä¸ªæ­£æ ·æœ¬å¯¹ï¼Œå°±å¯ä»¥æ‹¿æ¥åšå¤šæ¨¡æ€çš„å¯¹æ¯”å­¦ä¹  å±€é™æ€§ï¼šå½“å¤„ç†ä¸åŒçš„è§†è§’æˆ–è€…è¯´ä¸åŒçš„æ¨¡æ€æ—¶å€™ï¼Œå¯èƒ½éœ€è¦ä¸åŒçš„ç¼–ç å™¨ï¼Œå› ä¸ºä¸åŒçš„è¾“å…¥å¯èƒ½é•¿å¾—å¾ˆä¸ä¸€æ ·ï¼Œè¿™å°±æœ‰å¯èƒ½ä¼šå¯¼è‡´ä½¿ç”¨å‡ ä¸ªè§†è§’ï¼Œæœ‰å¯èƒ½å°±å¾—é…å‡ ä¸ªç¼–ç å™¨ï¼Œåœ¨è®­ç»ƒçš„æ—¶å€™è¿™ä¸ªè®¡ç®—ä»£ä»·å°±æœ‰ç‚¹é«˜ Transformeræœ‰å¯èƒ½èƒ½åŒæ—¶å¤„ç†ä¸åŒæ¨¡æ€çš„æ•°æ® ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/instdisc/:6:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"InstDisc","uri":"/posts/deeplearning/contrastive-learning/instdisc/"},{"categories":["Deep Learning"],"content":"Moco","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/moco/","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"Moco","uri":"/posts/deeplearning/contrastive-learning/moco/"},{"categories":["Deep Learning"],"content":"MoCo æ–‡ç« æ ‡é¢˜ï¼šMomentum Contrast for Unsupervised Visual Representation Learning ä½œè€…ï¼šKaiming He, Haoqi Fan, Yuxin Wu, Saining Xie, Ross Girshick å‘è¡¨æ—¶é—´ï¼š(CVPR 2020) offical code è§†è§‰ + å¯¹æ¯”å­¦ä¹ çš„é‡Œç¨‹ç¢‘å¼çš„å·¥ä½œ æ— ç›‘ç£å­¦ä¹ çš„ç›®çš„ï¼šåœ¨ä¸€ä¸ªå¾ˆå¤§çš„æ— æ ‡æ³¨çš„æ•°æ®é›†ä¸Šè®­ç»ƒï¼Œæ¨¡å‹å­¦åˆ°çš„ç‰¹å¾å¯ä»¥å¾ˆå¥½çš„è¿ç§»åˆ°ä¸‹æ¸¸ä»»åŠ¡ã€‚ å¯¹æ¯”å­¦ä¹ ï¼šé€šè¿‡å¯¹æ¯”å»å­¦ä¹ æ¨¡å‹ï¼Œåªéœ€è¦çŸ¥é“å›¾ Aå’Œ å›¾ Bç›¸ä¼¼ï¼Œå›¾ Aã€å›¾ Bå’Œ å›¾ Cä¸ç›¸ä¼¼ï¼›è€Œä¸éœ€è¦çœŸçš„çŸ¥é“å„ä¸ªå›¾ç‰‡çš„å…·ä½“ç±»åˆ«ã€‚ 3 å¼ å›¾è¿›å…¥ä¸€ä¸ªç½‘ç»œ M å¾—åˆ°ç‰¹å¾ f1ã€f2ã€f3ï¼Œåœ¨ä¸€ä¸ªå­¦ä¹ å¥½çš„ç‰¹å¾ç©ºé—´ embedding space ä¸­ï¼Œf1ã€f2 çš„ç‰¹å¾å°½é‡è¿‘ï¼Œå’Œ f3 çš„ç‰¹å¾å°½é‡è¿œç¦»ã€‚ å¯¹æ¯”å­¦ä¹ å­¦åˆ°çš„å¾ˆå¥½çš„ç‰¹å¾ï¼šç±»ä¼¼ç‰©ä½“åœ¨è¿™ä¸ªç‰¹å¾ç©ºé—´ ç›¸é‚»ï¼Œä¸ç±»ä¼¼çš„ç‰©ä½“åœ¨ç‰¹å¾ç©ºé—´ è¿œç¦» Q: å›¾ 1 å’Œ å›¾ 2 ç›¸ä¼¼ï¼Œå’Œå›¾ 3 éƒ½ä¸ç›¸ä¼¼ï¼Œéš¾é“ä¸æ˜¯æœ‰ç›‘ç£å­¦ä¹ å—ï¼ŸWhy å¯¹æ¯”å­¦ä¹ åœ¨ CV é¢†åŸŸè¢«è®¤ä¸ºæ˜¯æ— ç›‘ç£è®­ç»ƒå‘¢ï¼Ÿ CV é¢†åŸŸ è®¾è®¡å·§å¦™çš„ä»£ç†ä»»åŠ¡ pre-text taskï¼Œäººä¸ºè®¾ç«‹ä¸€äº›è§„åˆ™ â€”â€” å®šä¹‰å“ªäº›å›¾ç‰‡ç›¸ä¼¼ã€å“ªäº›å›¾ç‰‡ä¸ç›¸ä¼¼ï¼Œä¸ºè‡ªç›‘ç£å­¦ä¹ æä¾›ç›‘ç£ä¿¡å·ï¼Œä»è€Œè‡ªç›‘ç£è®­ç»ƒ ä¸€ä¸ªæ— æ ‡æ³¨çš„æ•°æ®é›†ï¼Œn å¼ å›¾ç‰‡ï¼Œ$x_1, x_2, â€¦, x_n$ï¼Œ éšæœºé€‰å–ä¸€å¼ å›¾ç‰‡ï¼Œåš transformationã€‚ ä»¥ $x_1 $å›¾ç‰‡ä¸ºä¾‹ï¼Œ$x_1 $éšæœºè£å‰ª + æ•°æ®å¢å¹¿ å¾—åˆ° $x_i^1$, $x_i^2 $ï¼ˆçœ‹èµ·æ¥å’Œ $x_1$ æœ‰åŒºåˆ«çš„ 2 å¼ ç…§ç‰‡ï¼Œ $x_1$ çš„æ­£æ ·æœ¬ï¼‰ï¼Œæ•°æ®é›†ä¸­çš„å…¶å®ƒå›¾ç‰‡ $x_j$, $j â‰  i $æ˜¯ $x_1$ çš„è´Ÿæ ·æœ¬ åŸºäºå›¾ç‰‡å’Œå›¾ç‰‡æœ¬èº«çš„å˜æ¢æ˜¯æ­£æ ·æœ¬ï¼Œå’Œå…¶å®ƒå›¾ç‰‡æ˜¯è´Ÿæ ·æœ¬ ImageNet-1K æ­¤æ—¶ä¸æ˜¯ 1000 ä¸ªç±»åˆ«ï¼Œè€Œæ˜¯ 100w ä¸ªç±»åˆ«ã€‚æ¯ä¸ªå›¾ç‰‡éƒ½æ˜¯å®ƒè‡ªå·±çš„æ­£æ ·æœ¬ï¼Œå…¶ä½™éƒ½æ˜¯è´Ÿæ ·æœ¬ã€‚ å¯¹æ¯”å­¦ä¹ çš„æ¡†æ¶ï¼šçµæ´»æ€§â€“å®šä¹‰æ­£è´Ÿæ ·æœ¬çš„è§„åˆ™ åŒä¸€ä¸ªè§†é¢‘é‡Œçš„ä»»æ„ä¸¤å¸§æ˜¯æ­£æ ·æœ¬ï¼Œå’Œå…¶å®ƒè§†é¢‘çš„æ‰€æœ‰å¸§æ˜¯è´Ÿæ ·æœ¬ NLP, simCSE æŠŠåŒæ ·çš„å¥å­æ‰”ç»™æ¨¡å‹ï¼Œä½†æ˜¯åš 2 æ¬¡ forwardï¼Œé€šè¿‡ä¸åŒçš„ dropout å¾—åˆ°ä¸€ä¸ªå¥å­çš„ 2 ä¸ªç‰¹å¾ï¼›å’Œå…¶å®ƒæ‰€æœ‰å¥å­çš„ç‰¹å¾éƒ½æ˜¯è´Ÿæ ·æœ¬ã€‚ CMC è®ºæ–‡ï¼šä¸€ä¸ªç‰©ä½“çš„ä¸åŒè§†è§’ viewï¼ˆæ­£é¢ã€èƒŒé¢ï¼›RGB å›¾åƒã€æ·±åº¦å›¾åƒï¼‰ä½œä¸ºä¸åŒå½¢å¼çš„æ­£æ ·æœ¬ã€‚ å¤šæ¨¡æ€é¢†åŸŸï¼šOpen AI çš„ CLIP æ¨¡å‹ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/moco/:1:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"Moco","uri":"/posts/deeplearning/contrastive-learning/moco/"},{"categories":["Deep Learning"],"content":"MoCoæ ‡é¢˜ Momentum Contrast for Unsupervised Visual Representation Learning åŠ¨é‡å¯¹æ¯”å­¦ä¹ çš„æ–¹æ³•åšæ— ç›‘ç£è§†è§‰ç‰¹å¾å­¦ä¹  Momentum Contrast: åŠ¨é‡å¯¹æ¯”å­¦ä¹  åŠ¨é‡ï¼š(æŒ‡æ•°)åŠ æƒç§»åŠ¨å¹³å‡å€¼ $y_t = m * y_{t-1} + (1 - m) * x_t$ m: åŠ¨é‡çš„è¶…å‚æ•° $y_{t-1}$: ä¸Šä¸€ä¸ªæ—¶åˆ»çš„è¾“å‡º $x_t$: å½“å‰æ—¶åˆ»çš„è¾“å…¥ m è¶‹è¿‘äº 1ï¼Œ$y_t $æ”¹å˜ç¼“æ…¢ï¼Œå½“å‰æ—¶åˆ»çš„è¾“å…¥ $x_t $æ²¡ä»€ä¹ˆå½±å“ m è¶‹è¿‘äº 0, $y_t $æ›´å¤šä¾èµ–äºå½“å‰æ—¶åˆ»çš„è¾“å…¥ã€‚ MoCo åˆ©ç”¨åŠ¨é‡çš„ç‰¹æ€§ï¼Œç¼“æ…¢çš„æ›´æ–°ä¸€ä¸ªç¼–ç å™¨ï¼Œä»è€Œè®©ä¸­é—´å­¦ä¹ åˆ°çš„å­—å…¸ä¸­çš„ç‰¹å¾å°½å¯èƒ½ä¿æŒä¸€è‡´ã€‚ MoCo ä»ä»€ä¹ˆè§’åº¦åšå¯¹æ¯”å­¦ä¹ å‘¢ï¼Ÿ dictionary look-up, å­—å…¸æŸ¥è¯¢ä»»åŠ¡, a dynamic dictionary with a queue and a moving-averaged encoder åŠ¨æ€å­—å…¸ ä¸€ä¸ªé˜Ÿåˆ—ï¼šé˜Ÿåˆ—ä¸­çš„æ ·æœ¬æ— éœ€æ¢¯åº¦å›ä¼ ï¼Œå¯ä»¥æ”¾å¾ˆå¤šè´Ÿæ ·æœ¬ï¼Œè®©å­—å…¸å˜å¾—å¾ˆå¤§ ä¸€ä¸ªç§»åŠ¨å¹³å‡çš„ç¼–ç å™¨ï¼šè®©å­—å…¸çš„ç‰¹å¾å°½å¯èƒ½çš„ä¿æŒä¸€è‡´ ä¸€ä¸ªå¤§çš„ã€ä¸€è‡´çš„å­—å…¸ï¼Œæœ‰åˆ©äºæ— ç›‘ç£çš„å¯¹æ¯”å­¦ä¹ è®­ç»ƒã€‚ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/moco/:2:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"Moco","uri":"/posts/deeplearning/contrastive-learning/moco/"},{"categories":["Deep Learning"],"content":"Introduction NLP çš„ç¦»æ•£å•è¯æ›´å…·è¯­ä¹‰æ€§ï¼ŒCVçš„è¿ç»­ã€é«˜ç»´ä¿¡å·ä¸å¥½æ„å»ºå­—å…¸ æ— ç›‘ç£åœ¨ CV ä¸æˆåŠŸçš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ åŸå§‹ä¿¡å·ç©ºé—´çš„ä¸åŒ NLP åŸå§‹ä¿¡å·æ˜¯ç¦»æ•£çš„ï¼Œè¯ã€è¯æ ¹ã€è¯ç¼€ï¼Œå®¹æ˜“æ„å»º tokenized dictionaries åšæ— ç›‘ç£å­¦ä¹  tokenized: æŠŠä¸€ä¸ªè¯å¯¹åº”æˆæŸä¸€ä¸ªç‰¹å¾ Why tokenized dictionaries æœ‰åŠ©äºæ— ç›‘ç£å­¦ä¹ ï¼Ÿ æŠŠå­—å…¸çš„ key è®¤ä¸ºæ˜¯ä¸€ä¸ªç±»åˆ«ï¼Œæœ‰ç±»ä¼¼æ ‡ç­¾çš„ä¿¡æ¯å¸®åŠ©å­¦ä¹  NLP æ— ç›‘ç£å­¦ä¹ å¾ˆå®¹æ˜“å»ºæ¨¡ï¼Œå»ºå¥½çš„æ¨¡å‹ä¹Ÿå¥½ä¼˜åŒ– CV åŸå§‹ä¿¡å·æ˜¯è¿ç»­çš„ã€é«˜ç»´çš„ï¼Œä¸åƒå•è¯å…·æœ‰æµ“ç¼©å¥½çš„ã€ç®€æ´çš„è¯­ä¹‰ä¿¡æ¯ï¼Œä¸é€‚åˆæ„å»ºä¸€ä¸ªå­—å…¸ å¦‚æœæ²¡æœ‰å­—å…¸ï¼Œæ— ç›‘ç£å­¦ä¹ å¾ˆéš¾å»ºæ¨¡ ç»™CV æ— ç›‘ç£å¯¹æ¯”å­¦ä¹  æ„å»ºä¸€ä¸ª ==å¤§ (by queue)==+ ==ä¸€è‡´ (momentum encoder)==çš„å­—å…¸ $f_{11} $å½“æˆ query åœ¨ $f_{12}, f_2, f_3, â€¦, f_n$ ç»„æˆçš„å­—å…¸çš„ key ç‰¹å¾æ¡ç›® $k_1, k_2, â€¦$ é‡Œé¢æŸ¥æ‰¾ï¼Œdictionary look-up é è¿‘ $f_{12}$, è¿œç¦» $f_2, f_3, â€¦$ ä»åŠ¨æ€å­—å…¸çš„è§’åº¦çœ‹å¯¹æ¯”å­¦ä¹ ï¼Œä»€ä¹ˆæ ·çš„å­—å…¸æ‰é€‚åˆå‘¢ï¼Ÿ å¤§ + ä¸€è‡´æ€§ large ä»è¿ç»­é«˜ç»´ç©ºé—´åšæ›´å¤šçš„é‡‡æ ·ã€‚å­—å…¸ key è¶Šå¤šï¼Œè¡¨ç¤ºçš„è§†è§‰ä¿¡æ¯è¶Šä¸°å¯Œï¼ŒåŒ¹é…æ—¶æ›´å®¹æ˜“æ‰¾åˆ°å…·æœ‰åŒºåˆ†æ€§çš„æœ¬è´¨ç‰¹å¾ã€‚ å¦‚æœ å­—å…¸å°ã€key å°‘ï¼Œæ¨¡å‹å¯èƒ½å­¦åˆ° shortcut æ·å¾„ï¼Œä¸èƒ½æ³›åŒ– consistent å­—å…¸é‡Œçš„ key ($k_0, k_1, k_2, â€¦, k_N$) åº”è¯¥ç”±ç›¸åŒçš„ or ç›¸ä¼¼çš„ç¼–ç å™¨ç”Ÿæˆ å¦‚æœå­—å…¸çš„ key æ˜¯ç”±ä¸åŒçš„ç¼–ç å™¨å¾—åˆ°çš„ï¼Œquery q åšå­—å…¸æŸ¥è¯¢æ—¶ï¼Œå¾ˆæœ‰å¯èƒ½ æ‰¾åˆ°å’Œ query ä½¿ç”¨åŒä¸€ä¸ª or ç›¸ä¼¼ç¼–ç å™¨ç”Ÿæˆçš„ keyï¼Œè€Œä¸æ˜¯è¯­ä¹‰ç›¸ä¼¼çš„ keyã€‚å¦ä¸€ç§å½¢å¼çš„ shortcut solution ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/moco/:3:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"Moco","uri":"/posts/deeplearning/contrastive-learning/moco/"},{"categories":["Deep Learning"],"content":"Related work ä¸¤ä¸ªå¯ä»¥åšçš„ç‚¹ï¼špretext tasks and loss functions ä»£ç†ä»»åŠ¡ï¼šä¸ºäº†å­¦ä¹ ä¸€ä¸ªå¥½çš„æ•°æ®ç‰¹å¾è¡¨ç¤º æŸå¤±å‡½æ•°ï¼šå’Œä»£ç†ä»»åŠ¡å¯ä»¥åˆ†å¼€ç ”ç©¶ã€‚ MoCo çš„åˆ›æ–°ç‚¹åœ¨æŸå¤±å‡½æ•°ï¼Œåˆå¤§åˆä¸€è‡´çš„å­—å…¸ å½±å“ infoNCE ç›®æ ‡å‡½æ•°çš„è®¡ç®— æŸå¤±å‡½æ•°ï¼šåˆ¤åˆ«å¼ã€ç”Ÿæˆå¼ã€å¯¹æ¯”å­¦ä¹ ã€å¯¹æŠ—å­¦ä¹  å¯¹æ¯”å­¦ä¹ çš„æŸå¤±ï¼šç›®æ ‡ä¸å›ºå®šï¼Œè®­ç»ƒè¿‡ç¨‹ä¸­ä¸æ–­æ”¹å˜ã€‚ç›®æ ‡æœ‰ç¼–ç å™¨æŠ½å‡ºæ¥çš„ç‰¹å¾ï¼ˆMoCo çš„å­—å…¸ï¼‰è€Œå†³å®š åˆ¤åˆ«å¼ï¼šé¢„æµ‹ 8 ä¸ªä½ç½®ä¸­çš„å“ªä¸€ä¸ªæ–¹ä½ï¼ˆä¹å®«æ ¼ï¼‰ ç”Ÿæˆå¼ï¼šé‡å»ºæ•´å¼ å›¾ å¯¹æ¯”å­¦ä¹ çš„ç›®æ ‡ï¼šæµ‹é‡æ ·æœ¬å¯¹ åœ¨ç‰¹å¾ç©ºé—´çš„ç›¸ä¼¼æ€§ã€‚ç›¸ä¼¼æ ·æœ¬ç¦»å¾—è¿‘ï¼Œä¸ç›¸ä¼¼æ ·æœ¬ç¦»å¾—è¿œ å¯¹æŠ—å­¦ä¹ çš„ç›®æ ‡ï¼šè¡¡é‡ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒä¹‹é—´çš„å·®å¼‚ å¯¹æ¯”å­¦ä¹ å’Œä»£ç†ä»»åŠ¡çš„å…³ç³»ï¼š ä¸åŒçš„ä»£ç†ä»»åŠ¡ å¯ä»¥å’Œ æŸç§å½¢å¼çš„å¯¹æ¯”å­¦ä¹ çš„ç›®æ ‡å‡½æ•° é…å¯¹ä½¿ç”¨ Instance discrimination ä¸ªä½“åˆ¤åˆ«æ–¹æ³• â€”â€“ examplar based ä»£ç†ä»»åŠ¡å¾ˆç›¸å…³ CPC contrastive predictive coding ç”¨ä¸Šä¸‹æ–‡ä¿¡æ¯é¢„æµ‹æœªæ¥ â€”â€“ context auto-encoding ä¸Šä¸‹æ–‡è‡ªç¼–ç  CMC contrastive multiview coding åˆ©ç”¨ä¸€ä¸ªç‰©ä½“çš„ä¸åŒè§†è§’åšå¯¹æ¯” â€”â€“ olorization å›¾ç‰‡ä¸Šè‰²ï¼ˆåŒä¸€ä¸ªå›¾ç‰‡çš„ 2 ä¸ªè§†è§’ï¼šé»‘ç™½ å’Œ å½©è‰²ï¼‰ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/moco/:4:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"Moco","uri":"/posts/deeplearning/contrastive-learning/moco/"},{"categories":["Deep Learning"],"content":"Methods å¯¹æ¯”å­¦ä¹ å’Œæœ€è¿‘çš„å‘å±•ï¼Œéƒ½å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªè®­ç»ƒä¸€ä¸ª encoder æ¥åš å­—å…¸æŸ¥è¯¢ çš„ä»»åŠ¡ $$ L_q=-log\\ \\frac{exp(q\\cdot k_+ / \\tau)}{\\sum_{i=0}^K exp(q\\cdot k_i / \\tau)} $$ q : ç¼–ç æŸ¥è¯¢,;${k_0, k_1, k_2, â€¦}$: ä¸€ç»„é”® key ç¼–ç æ ·æœ¬ ã€‚å‡è®¾å­—å…¸ä¸­åªæœ‰ä¸€ä¸ªé”®$ï¼ˆk_+ï¼‰$ä¸ q åŒ¹é…ã€‚ $\\tau$: æ¸©åº¦è¶…å‚æ•°ï¼› K : è´Ÿæ ·æœ¬ä¸ªæ•°ã€‚ è¯•å›¾å°† q åˆ†ç±»ä¸º k+ çš„ (K+1)-way softmax-based åˆ†ç±»å™¨çš„å¯¹æ•°æŸå¤±ã€‚ MoCo æ¡†æ¶å›¾ end to end: ç¼–ç å™¨éƒ½èƒ½é€šè¿‡åå‘ä¼ æ’­å®æ—¶æ›´æ–°å­¦ä¹ ã€‚ï¼ˆç‰¹å¾é«˜åº¦ä¸€è‡´ï¼‰ å±€é™æ€§ï¼šå­—å…¸å¤§å° == mini-batch size ç¡¬ä»¶é™åˆ¶ï¼›å¤§ batch size ä¼˜åŒ–éš¾ï¼Œéš¾æ”¶æ•› memory bank: åªæœ‰query ç¼–ç å™¨å¯ä»¥è¿›è¡Œæ¢¯åº¦å›ä¼ æ›´æ–°ã€‚ æŠŠæ‰€æœ‰ç‰¹å¾å­˜åœ¨memory banké‡Œï¼Œ ä»memory bankä¸­éšæœºæŠ½å– key å½“ä½œå­—å…¸ï¼›æ²¡æœ‰åå‘ä¼ æ’­ï¼Œæ‰€ä»¥å®ƒå¯ä»¥æ”¯æŒå¤§çš„å­—å…¸å¤§å°ã€‚ å±€é™æ€§ï¼šä¸åŒæ—¶åˆ»ç¼–ç å™¨(æ¢¯åº¦å›ä¼ æ›´æ–°)å¾—åˆ°çš„ç‰¹å¾ç¼ºä¹ä¸€è‡´æ€§ MoCo: é‡‡ç”¨é˜Ÿåˆ—å½¢å¼å®ç°ä¸€ä¸ªå­—å…¸ï¼ˆ ä¸å—batch sizeé™åˆ¶ ï¼‰ï¼Œä½¿ç”¨åŠ¨é‡ç¼–ç å™¨ï¼ˆæé«˜ä¸€è‡´æ€§ï¼‰ queue æ•°æ®ç»“æ„: å‰¥ç¦»å­—å…¸çš„å¤§å° å’Œ æ˜¾å¡å†…å­˜çš„é™åˆ¶ï¼Œè®©å­—å…¸çš„å¤§å°å’Œæ¨¡å‹æ¯æ¬¡åšå‰å‘ä¼ æ’­çš„ batch size çš„å¤§å°åˆ†å¼€ å½“å‰ mini-batch å…¥é˜Ÿï¼Œæœ€æ—©è¿›å…¥é˜Ÿåˆ—çš„ mini-batch å‡ºé˜Ÿ é˜Ÿåˆ—çš„å¤§å° == å­—å…¸çš„å¤§å°ï¼Œä½†æ˜¯æ¯æ¬¡åš iteration æ›´æ–°ï¼Œå¹¶ä¸éœ€è¦æ›´æ–°å­—å…¸ä¸­æ‰€æœ‰ key å…ƒç´ çš„å€¼ã€‚ momentum encoderï¼šä½¿ç”¨ queueï¼Œåªæœ‰å½“å‰ mini-batch çš„ç‰¹å¾æ˜¯ç”±å½“å‰çš„ç¼–ç å™¨å¾—åˆ°çš„ï¼›ä¹‹å‰çš„ key æ˜¯ç”±ä¸åŒæ—¶åˆ»çš„ç¼–ç å™¨æŠ½å–çš„ç‰¹å¾ï¼Œå¦‚ä½•ä¿æŒ consistent å‘¢ï¼Ÿ momentum encoder ç”±å½“å‰æ—¶åˆ»çš„ encoder åˆå§‹åŒ–è€Œæ¥ $\\theta_k = m * \\theta_{k-1}+ (1-m) * \\theta_q$ åŠ¨é‡ç³»æ•°: $m\\in[0,1)$ã€‚åªæœ‰å‚æ•° Î¸q é€šè¿‡åå‘ä¼ æ’­æ›´æ–°ã€‚ åŠ¨é‡å‚æ•° m è¾ƒå¤§æ—¶ï¼Œ$\\theta_k $çš„æ›´æ–°ç¼“æ…¢ï¼Œä¸è¿‡å¤šçš„ä¾èµ–äº $\\theta_q $å½“å‰æ—¶åˆ»çš„ç¼–ç å™¨ï¼Œå³ä¸éšç€å½“å‰æ—¶åˆ»çš„ç¼–ç å™¨å¿«é€Ÿæ”¹å˜ï¼Œå°½å¯èƒ½ä¿è¯ å­—å…¸é‡Œçš„ key éƒ½æ˜¯ç”±ç›¸ä¼¼çš„ç¼–ç å™¨ç”Ÿæˆçš„ç‰¹å¾ï¼Œä¿è¯ç‰¹å¾çš„ consistent MoCo pytorch ç®—æ³• Shuffling BN å° trick ,åç»­æ²¡å†ç”¨ BNä¼šé˜»æ­¢æ¨¡å‹å­¦ä¹ å¥½çš„è¡¨å¾ï¼Œå¯èƒ½æ˜¯ç”±äºæ ·æœ¬ä¸­é—´çš„ä¿¡æ¯ï¼ˆç”±BNå¼•èµ·ï¼‰æ³„éœ²ã€‚ æ“ä½œï¼šé…ç»™GPUä¹‹å‰æ‰“ä¹±æ ·æœ¬é¡ºåºï¼Œç”¨å¤šä¸ªGPUè¿›è¡Œè®­ç»ƒï¼Œå¹¶å¯¹æ¯ä¸ªGPUçš„æ ·æœ¬ç‹¬ç«‹è¿›è¡ŒBNã€‚å†æŠŠé¡ºåºæ¢å¤åç®—lossã€‚ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/moco/:5:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"Moco","uri":"/posts/deeplearning/contrastive-learning/moco/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» MoCo è®ºæ–‡é€æ®µç²¾è¯»ã€è®ºæ–‡ç²¾è¯»ã€‘ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/moco/:6:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"Moco","uri":"/posts/deeplearning/contrastive-learning/moco/"},{"categories":["Deep Learning"],"content":"MoCo-V2 æ–‡ç« æ ‡é¢˜ï¼šImproved Baselines with Momentum Contrastive Learning ä½œè€…: Xinlei Chen, Haoqi Fan, Ross Girshick, Kaiming He å‘è¡¨æ—¶é—´: (Arxiv 2021) æŠ€æœ¯æŠ¥å‘Š (2é¡µ) MoCo v2å‘ç°SimCLRé‡Œçš„é‚£äº›æŠ€æœ¯éƒ½æ˜¯å³æ’å³ç”¨å‹çš„ï¼Œå¼•å…¥äº†mlp projection headä»¥åŠä½¿ç”¨æ›´å¤šçš„æ•°æ®å¢å¼ºï¼Œå°±åˆåˆ·æ–°ImageNet ä¸Šçš„æœ€å¥½æˆç»©ã€‚ åŠ äº†ä¸€ä¸ª mlp å±‚ æ²¡æœ‰ batch norm ï¼›ç›´æ¥ fc + Relu + fc + Relu åŠ äº†æ›´å¤šçš„æ•°æ®å¢å¼º è®­ç»ƒçš„æ—¶å€™ç”¨äº†cosineçš„ learning rate schedule è®­ç»ƒæ›´é•¿çš„ epochï¼Œä»200å˜åˆ°äº†800 ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/moco/:7:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"Moco","uri":"/posts/deeplearning/contrastive-learning/moco/"},{"categories":["Deep Learning"],"content":"MoCo-V3 æ–‡ç« æ ‡é¢˜ï¼šAn Empirical Study of Training Self-Supervised Vision Transformers ä½œè€…: Xinlei Chen, Saining Xie, Kaiming He å‘è¡¨æ—¶é—´: (ICCV 2021) MoCo v2 + SimSiam offical code MoCoV3 pytorch ç®—æ³• æ®‹å·®ç½‘ç»œæ¢æˆ ViT å½“è¿™ä¸ª batch size å˜å¤§äº†ä»¥åæ›²çº¿ä¼šæŠ–åŠ¨ï¼Œæ•ˆæœå˜å·® æ–¹æ³•ï¼šè§‚å¯Ÿäº†ä¸€ä¸‹è®­ç»ƒæ—¶ï¼Œæ¯ä¸€å±‚è¿™ä¸ªå›ä¼ æ¢¯åº¦çš„æƒ…å†µï¼›å‘ç°æ¯æ¬¡ loss æœ‰å¤§å¹…éœ‡åŠ¨ å¯¼è‡´è¿™ä¸ªå‡†ç¡®åº¦å¤§å¹…ä¸‹é™çš„æ—¶å€™ï¼Œæ¢¯åº¦ä¹Ÿä¼šæœ‰ä¸€ä¸ªæ³¢å³°ï¼ˆå‘ç”Ÿåœ¨ç¬¬ä¸€å±‚ï¼‰ ç¬¬ä¸€å±‚ï¼špatch projection è§£å†³ï¼šéšæœºåˆå§‹åŒ–äº†ä¸€ä¸ª patch projection å±‚ï¼›ç„¶åå†»ç»“ä½¿å¾—æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ä¸­éƒ½ä¸å˜ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/moco/:8:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"Moco","uri":"/posts/deeplearning/contrastive-learning/moco/"},{"categories":["Deep Learning"],"content":"SimCLR","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/simclr/","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"SimCLR","uri":"/posts/deeplearning/contrastive-learning/simclr/"},{"categories":["Deep Learning"],"content":"SimCLR-V1 æ–‡ç« æ ‡é¢˜ï¼šA Simple Framework for Contrastive Learning of Visual Representations ä½œè€…ï¼šTing Chen, Simon Kornblith, Mohammad Norouzi, Geoffrey Hinton å‘è¡¨æ—¶é—´ï¼š(ICML 2020) offical code SimCLR V1 å¦‚æœæœ‰ä¸€ä¸ªmini-batchçš„å›¾ç‰‡ xï¼Œå¯¹ x åšä¸åŒçš„æ•°æ®å¢å¼ºå°±ä¼šå¾—åˆ° $\\hat x_i$ å’Œ $\\hat x_j$ ä¸€ä¸ªå›¾ç‰‡å»¶ä¼¸å¾—åˆ°çš„ä¸¤ä¸ªå›¾ç‰‡å°±æ˜¯æ­£æ ·æœ¬ï¼Œå¦‚æœbatch sizeæ˜¯Nçš„è¯ï¼Œæ­£æ ·æœ¬ä¸ªæ•°å°±æ˜¯Nï¼Œè´Ÿæ ·æœ¬çš„ä¸ªæ•°å°±æ˜¯è¿™ä¸ª batch size å‰©ä¸‹æ‰€æœ‰çš„æ ·æœ¬ä»¥åŠå®ƒä»¬æ•°æ®å¢å¼ºè¿‡åçš„æ ·æœ¬æ˜¯ $2\\times (N - 1)$ (å’ŒInvaSpreadä¸€æ ·) é€šè¿‡ç¼–ç å™¨ $f$ è¿›è¡Œç¼–ç (å…±äº«æƒé‡)ï¼Œå¾—åˆ°çš„ $h$ (ç‰¹å¾è¡¨ç¤ºï¼‰æ˜¯2048ç»´ SimCLRçš„é‡å¤§åˆ›æ–°ç‚¹ åœ¨ç‰¹å¾ä¹‹ååˆåŠ äº†ä¸€ä¸ªprojectorï¼Œä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸­çš„ $g$ å‡½æ•°ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªmlpå±‚ï¼ˆfc å±‚+ Reluï¼‰ï¼Œå˜æˆ128ç»´ è®©æœ€åå­¦åˆ°çš„ç‰¹å¾åœ¨ImageNet è¿™ä¸ªåˆ†ç±»ä»»åŠ¡ä¸Šç›´æ¥æç‚¹å°†è¿‘10ä¸ªç‚¹ ä¸è®ºæ˜¯32ã€64è¿˜æ˜¯2048å…¶å®éƒ½æ²¡å¤ªå¤§åŒºåˆ« è¡¡é‡ä¸€ä¸‹æ­£æ ·æœ¬ä¹‹é—´æ˜¯ä¸æ˜¯èƒ½è¾¾åˆ°æœ€å¤§çš„ä¸€è‡´æ€§ï¼Œé‡‡ç”¨çš„æ˜¯normalized temperature-scaledçš„äº¤å‰ç†µå‡½æ•°ã€‚ normalizedï¼šç‰¹å¾åé¢è¿›è¡Œäº† L2 å½’ä¸€åŒ–ï¼Œtemperature-scaled ï¼šæ¸©åº¦è¶…å‚æ•° $g$ å‡½æ•°åªæœ‰åœ¨è®­ç»ƒçš„æ—¶å€™æ‰ç”¨ï¼Œåªç”¨$h$è¿™ä¸ªç‰¹å¾å»åšä¸‹æ¸¸ä»»åŠ¡ SimCLRå’ŒInvaSpreadåŒºåˆ« ç”¨äº†æ›´å¤šçš„æ•°æ®å¢å¼º ä»æœ€å¼€å§‹çš„åŸå§‹å›¾ç‰‡ï¼Œåˆ°è£å‰ªï¼Œåˆ°æ”¹å˜è‰²å½©ï¼Œåˆ°æ—‹è½¬ï¼Œä½¿ç”¨ cutoutï¼Œä½¿ç”¨é«˜æ–¯çš„å™ªå£°å’Œé«˜æ–¯ blurï¼Œä»¥åŠæœ€åä½¿ç”¨sobelæ»¤æ³¢å™¨ è¿›è¡Œäº†æ¶ˆèå®éªŒå‘ç°æœ€æœ‰æ•ˆçš„ä¸¤ä¸ªæ•°æ®å¢å¼ºå°±æ˜¯éšæœºè£å‰ªå’Œéšæœºè‰²å½©å˜æ¢ åŠ äº†ä¸€ä¸ª$g$å‡½æ•°ï¼ˆä¸€ä¸ªå¯ä»¥å­¦ä¹ çš„åˆ†çº¿æ€§çš„å˜æ¢ï¼Œå°±æ˜¯ä¸€ä¸ª mlpå±‚ï¼‰ ç”¨äº†æ›´å¤§çš„batch size ï¼Œè€Œä¸”è®­ç»ƒçš„æ—¶é—´æ›´ä¹… ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/simclr/:1:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"SimCLR","uri":"/posts/deeplearning/contrastive-learning/simclr/"},{"categories":["Deep Learning"],"content":"SimCLR-V2 æ–‡ç« æ ‡é¢˜ï¼šBig Self-Supervised Models are Strong Semi-Supervised Learners ä½œè€…ï¼šTing Chen, Simon Kornblith, Kevin Swersky, Mohammad Norouzi, Geoffrey Hinton å‘è¡¨æ—¶é—´ï¼š(NIPS 2020) æ¨¡å‹æ€»è§ˆå›¾ ä½¿ç”¨äº†æ›´å¤§çš„æ¨¡å‹ï¼Œæ¢äº†ä¸€ä¸ª152å±‚çš„æ®‹å·®ç½‘ç»œï¼ŒåŒæ—¶ç”¨äº†è¿™ä¸ªselective kernelsï¼Œä¹Ÿå°±æ˜¯SKNet åŠ æ·±äº†V1é‡Œçš„projection headï¼šï¼ŒåŸæ¥æ˜¯ fc + reluï¼Œç°åœ¨æ˜¯ fc + relu + fc + relu å¼•å…¥äº†MoCoçš„åŠ¨é‡ç¼–ç å™¨ ","date":"2023-06-07","objectID":"/posts/deeplearning/contrastive-learning/simclr/:2:0","tags":["Deep Learning","å¯¹æ¯”å­¦ä¹ "],"title":"SimCLR","uri":"/posts/deeplearning/contrastive-learning/simclr/"},{"categories":["Deep Learning"],"content":"åˆ†æ”¯é€šé“æ³¨æ„åŠ›","date":"2023-06-06","objectID":"/posts/deeplearning/attention/branch_channel-attention/","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Branch Channel Attention","uri":"/posts/deeplearning/attention/branch_channel-attention/"},{"categories":["Deep Learning"],"content":"different branches ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/branch_channel-attention/:1:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Branch Channel Attention","uri":"/posts/deeplearning/attention/branch_channel-attention/"},{"categories":["Deep Learning"],"content":"SKNet æ–‡ç« æ ‡é¢˜ï¼šSelective Kernel Networks ä½œè€…ï¼šXiang Li, Wenhai Wang, Xiaolin Hu, Jian Yang å‘è¡¨æ—¶é—´ï¼š(CVPR 2019) Official Code SK_module ç”¨multiple scale featureæ±‡æ€»çš„informationæ¥channel-wiseåœ°æŒ‡å¯¼å¦‚ä½•åˆ†é…ä¾§é‡ä½¿ç”¨å“ªä¸ªkernelçš„è¡¨å¾ ä¸€ç§éçº¿æ€§æ–¹æ³•æ¥èšåˆæ¥è‡ªå¤šä¸ªå†…æ ¸çš„ä¿¡æ¯ï¼Œä»¥å®ç°ç¥ç»å…ƒçš„è‡ªé€‚åº”æ„Ÿå—é‡å¤§å° Splitï¼šç”Ÿæˆå…·æœ‰ä¸åŒå†…æ ¸å¤§å°çš„å¤šæ¡è·¯å¾„ï¼Œè¿™äº›è·¯å¾„å¯¹åº”äºä¸åŒæ„Ÿå—é‡(RFï¼Œreceptive field) å¤§å°çš„ç¥ç»å…ƒ $X\\in R^{Hâ€™\\times Wâ€™\\times Câ€™} $ $\\tilde F:X\\to \\tilde U \\in R^{H\\times W\\times C} $ kernel size $3\\times3$ $\\hat F:X\\to \\hat U \\in R^{H\\times W\\times C}$ kernel size $5\\times5$ï¼šä½¿ç”¨ç©ºæ´å·ç§¯$3\\times3$,ç©ºæ´ç³»æ•°ä¸º2ã€‚ Fuseï¼šèšåˆæ¥è‡ªå¤šä¸ªè·¯å¾„çš„ä¿¡æ¯ï¼Œä»¥è·å¾—é€‰æ‹©æƒé‡çš„å…¨å±€å’Œç»¼åˆè¡¨ç¤ºã€‚ $$ U=\\tilde U+\\hat U\\\\ s_c=F_{gp}(U_c)=\\frac{1}{H\\times W}\\sum_{i=1}^H\\sum_{j=1}^WU_c(i,j)\\\\ z=F_{fc}(s)=\\delta(B(Ws)) é™ç»´å¤„ç†\\\\ $$ $s\\in R^c$ï¼›$\\delta$ï¼šReLUï¼›$z\\in R^{d\\times1}$ï¼›$W\\in R^{d\\times C}$ï¼šæ‰¹é‡å½’ä¸€åŒ–ï¼› $d=max(C/r,L)$ Lï¼šdçš„æœ€å°å€¼ï¼Œæœ¬æ–‡è®¾ç½®32 Selectï¼šæ ¹æ®é€‰æ‹©æƒé‡èšåˆä¸åŒå¤§å°å†…æ ¸çš„ç‰¹å¾å›¾ $$ a_c=\\frac{e^{A_cz}}{e^{A_cz}+e^{B_cz}}\\\\ b_c=\\frac{e^{B_cz}}{e^{A_cz}+e^{B_cz}}\\\\ $$ $ A,B âˆˆR^{C\\times d}$ ,$ a,b$ åˆ†åˆ«è¡¨ç¤º $\\tilde U,\\hat U$çš„è½¯æ³¨æ„åŠ›å‘é‡ã€‚$A_c âˆˆ R^{1\\times d }$æ˜¯ A çš„ç¬¬$ c $è¡Œï¼Œ$a_c$ æ˜¯ a çš„ç¬¬ $c $ä¸ªå…ƒç´ ï¼ŒåŒç†$B_c,b_c$ã€‚ $$ V_c=a_c\\cdot\\tilde U_c + b_c\\cdot \\hat U_c\\\\\\ a_c+b_c=1\\\\ V_c\\in R^{H\\times W} $$ Selective Kernel Convolutionä¸‰åˆ†æ”¯ $SK[M,G,r]\\to SK[2,32,16]$ Mï¼šç¡®å®šè¦èšåˆçš„ä¸åŒå†…æ ¸çš„é€‰æ‹©æ•°é‡ Gï¼šæ§åˆ¶æ¯æ¡è·¯å¾„çš„åŸºæ•°çš„ç»„å· rï¼šreduction ratio $$ U_k=F_k(X) \\\\ U = \\sum_{k=1}^K U_k \\\\ z = \\delta(BN(WGAP(U))) \\\\ s_k^{(c)} = \\frac{e^{W_k^{(c)}z}}{\\sum_{k=1}^K e^{W_k^{(c)}z}} \\\\ Y=\\sum_{k=1}^K s_kU_k \\\\ global\\ average\\ pooling\\rightarrow MLP\\rightarrow softmax $$ class SKAttention(nn.Module): def __init__(self, channel=512,kernels=[1,3,5,7],reduction=16,group=1,L=32): super().__init__() self.d=max(L,channel//reduction) self.convs=nn.ModuleList([]) for k in kernels: self.convs.append( nn.Sequential(OrderedDict([ ('conv',nn.Conv2d(channel,channel,kernel_size=k,padding=k//2,groups=group)), ('bn',nn.BatchNorm2d(channel)), ('relu',nn.ReLU()) ])) ) self.fc=nn.Linear(channel,self.d) self.fcs=nn.ModuleList([]) for i in range(len(kernels)): self.fcs.append(nn.Linear(self.d,channel)) self.softmax=nn.Softmax(dim=0) def forward(self, x): bs, c, _, _ = x.size() conv_outs=[] ### split for conv in self.convs: conv_outs.append(conv(x)) feats=torch.stack(conv_outs,0)#k,bs,channel,h,w ### fuse U=sum(conv_outs) #bs,c,h,w ### reduction channel S=U.mean(-1).mean(-1) #bs,c Z=self.fc(S) #bs,d ### calculate attention weight weights=[] for fc in self.fcs: weight=fc(Z) weights.append(weight.view(bs,c,1,1)) #bs,channel attention_weughts=torch.stack(weights,0)#k,bs,channel,1,1 attention_weughts=self.softmax(attention_weughts)#k,bs,channel,1,1 ### fuse V=(attention_weughts*feats).sum(0) return V ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/branch_channel-attention/:2:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Branch Channel Attention","uri":"/posts/deeplearning/attention/branch_channel-attention/"},{"categories":["Deep Learning"],"content":"different conv kernels ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/branch_channel-attention/:3:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Branch Channel Attention","uri":"/posts/deeplearning/attention/branch_channel-attention/"},{"categories":["Deep Learning"],"content":"CondConv æ–‡ç« æ ‡é¢˜ï¼šCondConv: Conditionally Parameterized Convolutions for Efficient Inference ä½œè€…ï¼šBrandon Yang, Gabriel Bender, Quoc V. Le, Jiquan Ngiam å‘è¡¨æ—¶é—´ï¼š(NIPS 2019) official code pytorchç‰ˆ Condconv $$ \\alpha = \\sigma(W_r(GAP(X))) \\\\ Y = (\\alpha _1W_1+\\dots +\\alpha_nW_n) *X \\\\ global\\ average\\ pooling\\rightarrow linear \\ layer\\rightarrow sigmoid $$","date":"2023-06-06","objectID":"/posts/deeplearning/attention/branch_channel-attention/:4:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Branch Channel Attention","uri":"/posts/deeplearning/attention/branch_channel-attention/"},{"categories":["Deep Learning"],"content":"DynamicConv æ–‡ç« æ ‡é¢˜ï¼šDynamic Convolution: Attention over Convolution Kernels ä½œè€…ï¼šYinpeng Chen, Xiyang Dai, Mengchen Liu, Dongdong Chen, Lu Yuan, Zicheng Liu å‘è¡¨æ—¶é—´ï¼š(CVPR 2020) pytorchç‰ˆ DynamicConv $$ s = softmax(W_2\\delta(W_1GAP(X))) \\\\ DyConv = \\sum_{i=1}^K s_kConv_k \\\\Y = DyConv(X) $$","date":"2023-06-06","objectID":"/posts/deeplearning/attention/branch_channel-attention/:5:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Branch Channel Attention","uri":"/posts/deeplearning/attention/branch_channel-attention/"},{"categories":["Deep Learning"],"content":"é€šé“,ç©ºé—´æ³¨æ„åŠ›","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"Directly estimate 3D attention map ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:1:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"Residual Attention æ–‡ç« æ ‡é¢˜ï¼šResidual Attention Network for Image Classification ä½œè€…ï¼šFei Wang, Mengqing Jiang, Chen Qian, Shuo Yang, Cheng Li, Honggang Zhang, Xiaogang Wang, Xiaoou Tang å‘è¡¨æ—¶é—´ï¼š(CVPR 2017) pytorch code ICCV2021-Residual Attentionå¦ä¸€ç¯‡ä¸åŒçš„è®°å¾—çœ‹ Residual_Attention æ¯ä¸ªæ³¨æ„åŠ›æ¨¡å—å¯ä»¥åˆ†ä¸ºæ©ç åˆ†æ”¯å’Œä¸»å¹²åˆ†æ”¯ã€‚ ä¸»å¹²åˆ†æ”¯å¤„ç†ç‰¹å¾ï¼Œå¯ä»¥æ¢å…¶ä»–å…ˆè¿›æ¨¡å—ç”¨fè¡¨ç¤ºã€‚ æ©ç åˆ†æ”¯ä½¿ç”¨bottom-up top-downçš„ç»“æ„æ¥å­¦ä¹ ç›¸åŒå¤§å°çš„æ©ç ï¼Œè¯¥æ©ç å¯¹æ¥è‡ªä¸»å¹²åˆ†æ”¯çš„è¾“å‡ºç‰¹å¾è¿›è¡Œè½¯åŠ æƒã€‚ bottom-upç»“æ„ï¼Œåœ¨æ®‹å·®å•å…ƒä¹‹åä½¿ç”¨å‡ æ¬¡ maxpooling æ¥å¢åŠ æ„Ÿå—é‡ï¼Œ top-downéƒ¨åˆ†ï¼Œä½¿ç”¨çº¿æ€§æ’å€¼æ¥ä¿æŒè¾“å‡ºå¤§å°ä¸è¾“å…¥ç‰¹å¾å›¾ç›¸åŒã€‚ä¸¤éƒ¨åˆ†ä¹‹é—´ä¹Ÿæœ‰è·³è·ƒè¿æ¥ åœ¨ä¸¤ä¸ª 1 Ã— 1 å·ç§¯å±‚ä¹‹åï¼Œä¸€ä¸ª sigmoid å±‚å°†è¾“å‡ºå½’ä¸€åŒ–ä¸º [0, 1]ã€‚ é‡‡ç”¨ç”±å¤šä¸ªå·ç§¯ç»„æˆçš„bottom-up top-downçš„ç»“æ„æ¥ç”Ÿæˆ 3Dï¼ˆé«˜åº¦ã€å®½åº¦ã€é€šé“ï¼‰æ³¨æ„åŠ›å›¾ã€‚ $$ s = \\sigma(Conv_2^{1\\times1}(Conv_1^{1\\times1}(h_{up}(h_{down}(X))))) \\\\ X_{out} = sf(X)+f(X) \\\\ top\\_down\\ network\\rightarrow bottom\\_down\\ network\\rightarrow 1\\times1Conv\\rightarrow Sigmoid $$","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:2:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"SimAM æ–‡ç« æ ‡é¢˜ï¼šSimam: A simple, parameter-free attention module for convolutional neural networks ä½œè€…ï¼šLingxiao Yang, Ru-Yuan Zhang, Lida Li, Xiaohua Xie , å‘è¡¨æ—¶é—´ï¼š(ICML 2021) pytorch code simam æ— å‚æ¨¡å‹ï¼ŒåŸºäºæ•°å­¦ä¸ç¥ç»ç§‘å­¦ class simam_module(torch.nn.Module): def __init__(self, channels = None, e_lambda = 1e-4): super(simam_module, self).__init__() self.activaton = nn.Sigmoid() self.e_lambda = e_lambda def forward(self, x): b, c, h, w = x.size() n = w * h - 1 x_minus_mu_square = (x - x.mean(dim=[2,3], keepdim=True)).pow(2) y = x_minus_mu_square / (4 * (x_minus_mu_square.sum(dim=[2,3], keepdim=True) / n + self.e_lambda)) + 0.5 return x * self.activaton(y) ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:3:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"Strip Pooling æ–‡ç« æ ‡é¢˜ï¼šStrip Pooling: Rethinking spatial pooling for scene parsing ä½œè€…ï¼šQibin Hou, Li Zhang, Ming-Ming Cheng, Jiashi Feng (ä¸€ä½œCoordinate Attention) å‘è¡¨æ—¶é—´ï¼š(CVPR 2020) official code Strip_Pooling #å³å¯¹åº”æ–‡ä¸­çš„MPMæ¨¡å— class StripPooling(nn.Module): \"\"\" Reference: \"\"\" def __init__(self, in_channels, pool_size, norm_layer, up_kwargs): super(StripPooling, self).__init__() #ç©ºé—´æ± åŒ– self.pool1 = nn.AdaptiveAvgPool2d(pool_size[0]) self.pool2 = nn.AdaptiveAvgPool2d(pool_size[1]) #strip pooling self.pool3 = nn.AdaptiveAvgPool2d((1, None)) self.pool4 = nn.AdaptiveAvgPool2d((None, 1)) inter_channels = int(in_channels/4) self.conv1_1 = nn.Sequential(nn.Conv2d(in_channels, inter_channels, 1, bias=False), norm_layer(inter_channels), nn.ReLU(True)) self.conv1_2 = nn.Sequential(nn.Conv2d(in_channels, inter_channels, 1, bias=False), norm_layer(inter_channels), nn.ReLU(True)) self.conv2_0 = nn.Sequential(nn.Conv2d(inter_channels, inter_channels, 3, 1, 1, bias=False), norm_layer(inter_channels)) self.conv2_1 = nn.Sequential(nn.Conv2d(inter_channels, inter_channels, 3, 1, 1, bias=False), norm_layer(inter_channels)) self.conv2_2 = nn.Sequential(nn.Conv2d(inter_channels, inter_channels, 3, 1, 1, bias=False), norm_layer(inter_channels)) self.conv2_3 = nn.Sequential(nn.Conv2d(inter_channels, inter_channels, (1, 3), 1, (0, 1), bias=False), norm_layer(inter_channels)) self.conv2_4 = nn.Sequential(nn.Conv2d(inter_channels, inter_channels, (3, 1), 1, (1, 0), bias=False), norm_layer(inter_channels)) self.conv2_5 = nn.Sequential(nn.Conv2d(inter_channels, inter_channels, 3, 1, 1, bias=False), norm_layer(inter_channels), nn.ReLU(True)) self.conv2_6 = nn.Sequential(nn.Conv2d(inter_channels, inter_channels, 3, 1, 1, bias=False), norm_layer(inter_channels), nn.ReLU(True)) self.conv3 = nn.Sequential(nn.Conv2d(inter_channels*2, in_channels, 1, bias=False), norm_layer(in_channels)) # bilinear interpolate options self._up_kwargs = up_kwargs def forward(self, x): _, _, h, w = x.size() x1 = self.conv1_1(x) x2 = self.conv1_2(x) x2_1 = self.conv2_0(x1) x2_2 = F.interpolate(self.conv2_1(self.pool1(x1)), (h, w), **self._up_kwargs) x2_3 = F.interpolate(self.conv2_2(self.pool2(x1)), (h, w), **self._up_kwargs) x2_4 = F.interpolate(self.conv2_3(self.pool3(x2)), (h, w), **self._up_kwargs) x2_5 = F.interpolate(self.conv2_4(self.pool4(x2)), (h, w), **self._up_kwargs) #PPMåˆ†æ”¯çš„è¾“å‡ºç»“æœ x1 = self.conv2_5(F.relu_(x2_1 + x2_2 + x2_3)) #strip poolingçš„è¾“å‡ºç»“æœ x2 = self.conv2_6(F.relu_(x2_5 + x2_4)) #æ‹¼æ¥+1x1å·ç§¯ out = self.conv3(torch.cat([x1, x2], dim=1)) return F.relu_(x + out) ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:4:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"SCNet æ–‡ç« æ ‡é¢˜ï¼šImproving convolutional networks with self-calibrated convolutions ä½œè€…ï¼šJiang-Jiang Liu, Qibin Hou, Ming-Ming Cheng, Changhu Wang, Jiashi Feng å‘è¡¨æ—¶é—´ï¼š(CVPR 2020) official code SC_conv class SCConv(nn.Module): def __init__(self, inplanes, planes, stride, padding, dilation, groups, pooling_r, norm_layer): super(SCConv, self).__init__() self.k2 = nn.Sequential( nn.AvgPool2d(kernel_size=pooling_r, stride=pooling_r), nn.Conv2d(inplanes, planes, kernel_size=3, stride=1, padding=padding, dilation=dilation, groups=groups, bias=False), norm_layer(planes), ) self.k3 = nn.Sequential( nn.Conv2d(inplanes, planes, kernel_size=3, stride=1, padding=padding, dilation=dilation, groups=groups, bias=False), norm_layer(planes), ) self.k4 = nn.Sequential( nn.Conv2d(inplanes, planes, kernel_size=3, stride=stride, padding=padding, dilation=dilation, groups=groups, bias=False), norm_layer(planes), ) def forward(self, x): identity = x out = torch.sigmoid(torch.add(identity, F.interpolate(self.k2(x), identity.size()[2:]))) # sigmoid(identity + k2) out = torch.mul(self.k3(x), out) # k3 * sigmoid(identity + k2) out = self.k4(out) # k4 return out ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:5:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"VAN æ–‡ç« æ ‡é¢˜ï¼šVisual Attention Network ä½œè€…ï¼šMeng-Hao Guo, Cheng-Ze Lu, Zheng-Ning Liu, Ming-Ming Cheng, Shi-Min Hu å‘è¡¨æ—¶é—´ï¼š2022 official code LKA VAN_stage class LKA(nn.Module): def __init__(self, dim): super().__init__() self.conv0 = nn.Conv2d(dim, dim, 5, padding=2, groups=dim) self.conv_spatial = nn.Conv2d(dim, dim, 7, stride=1, padding=9, groups=dim, dilation=3) self.conv1 = nn.Conv2d(dim, dim, 1) def forward(self, x): u = x.clone() attn = self.conv0(x) attn = self.conv_spatial(attn) attn = self.conv1(attn) return u * attn class Attention(nn.Module): def __init__(self, d_model): super().__init__() self.proj_1 = nn.Conv2d(d_model, d_model, 1) self.activation = nn.GELU() self.spatial_gating_unit = LKA(d_model) self.proj_2 = nn.Conv2d(d_model, d_model, 1) def forward(self, x): shorcut = x.clone() x = self.proj_1(x) x = self.activation(x) x = self.spatial_gating_unit(x) x = self.proj_2(x) x = x + shorcut return ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:6:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"split channel and spitial attention ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:7:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"CBAM æ–‡ç« æ ‡é¢˜ï¼šCBAM: Convolutional Block Attention Modul ä½œè€…ï¼šSanghyun Woo, Jongchan Park, Joon-Young Lee, In So Kweon å‘è¡¨æ—¶é—´ï¼š(ECCV 2018) pytorch code CBAM ç©ºé—´åŸŸä¸­çš„æ± åŒ–æ“ä½œ $$ F_{avg}^c=GAP^s(F) \\\\ F_{max}^c=GMP^s(F)\\\\ s_c(X)=\\sigma(W_1\\delta(W_0(F_{avg}^c))+W_1\\delta(W_0(F_{max}^c)))\\\\ M_c(F)=s_cF $$ é€šé“åŸŸä¸­çš„æ± åŒ–æ“ä½œ $$ F_{avg}^s=GAP^c(F)\\\\ F_{max}^s=GMP^c(F)\\\\ s_s =\\sigma(f^{7\\times7}([F_{avg}^s;F_{max}^s]))\\\\ M_s(F)=s_sF $$$$ F' = M_c(F)\\\\ Y=M_s(F') $$ å®ƒå°†é€šé“æ³¨æ„åŠ›å›¾å’Œç©ºé—´æ³¨æ„åŠ›å›¾è§£è€¦ä»¥æé«˜è®¡ç®—æ•ˆç‡ï¼Œå¹¶é€šè¿‡å¼•å…¥å…¨å±€æ± åŒ–æ¥åˆ©ç”¨ç©ºé—´å…¨å±€ä¿¡æ¯ ç¼ºç‚¹ï¼šCBAM é‡‡ç”¨å·ç§¯æ¥ç”Ÿæˆç©ºé—´æ³¨æ„åŠ›å›¾ï¼Œå› æ­¤ç©ºé—´å­æ¨¡å—å¯èƒ½ä¼šå—åˆ°æœ‰é™çš„æ„Ÿå—é‡çš„å½±å“ ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:8:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"BAM æ–‡ç« æ ‡é¢˜ï¼šBAM: Bottleneck Attention Module ä½œè€…ï¼šJongchan Park, Sanghyun Woo, Joon-Young Lee, In So Kweon (åŒCBAMä½œè€…) å‘è¡¨æ—¶é—´ï¼š(BMCV 2018) pytorch code BAM $$ M_c(F)=BN(W_1(W_0AvgPool(F)+b_0)+b_1)\\\\ M_s(F)=BN(f_3^{1\\times1}(f_2^{3\\times3}(f_1^{3\\times3}(f_0^{1\\times1}(F)))))\\\\ M(F)=\\sigma(M_c(F)+M_s(F)) $$å®ƒä½¿ç”¨æ‰©å¼ å·ç§¯æ¥æ‰©å¤§ç©ºé—´æ³¨æ„åŠ›å­æ¨¡å—çš„æ„Ÿå—é‡ï¼Œå¹¶æŒ‰ç…§ ResNet çš„å»ºè®®æ„å»ºç“¶é¢ˆç»“æ„ä»¥èŠ‚çœè®¡ç®—æˆæœ¬ ä¸ºäº†æœ‰æ•ˆåœ°åˆ©ç”¨ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œç©ºé—´æ³¨æ„åŠ›åˆ†æ”¯ç»“åˆäº†ç“¶é¢ˆç»“æ„å’Œæ‰©å¼ å·ç§¯ ç¼ºç‚¹ï¼šå°½ç®¡æ‰©å¼ å·ç§¯æœ‰æ•ˆåœ°æ‰©å¤§äº†æ„Ÿå—é‡ï¼Œä½†å®ƒä»ç„¶æ— æ³•æ•è·è¿œç¨‹ä¸Šä¸‹æ–‡ä¿¡æ¯ä»¥åŠç¼–ç è·¨åŸŸå…³ç³» ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:9:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"scSE æ–‡ç« æ ‡é¢˜ï¼šRecalibrating Fully Convolutional Networks with Spatial and Channel â€˜Squeeze \u0026 Excitationâ€™ Blocks Concurrent Spatial and Channel Squeeze \u0026 Excitation in Fully Convolutional Networks (MICCAI 2018) ä½œè€…ï¼šAbhijit Guha Roy, Nassir Navab, Christian Wachinger å‘è¡¨æ—¶é—´ï¼š(TMI 2018) pytorch code scSE $$ \\hat U_{cSE} = U *\\sigma((W_s\\delta(W_1GAP(U)))) \\\\ \\hat U_{sSE} = U *\\sigma((Conv^{1\\times1}(U)) \\\\ \\hat U_{scSE} = f(\\hat U_{cSE},\\hat U_{sSE}) $$f è¡¨ç¤ºèåˆå‡½æ•°ï¼Œå¯ä»¥æ˜¯æœ€å¤§å€¼ã€åŠ æ³•ã€ä¹˜æ³•æˆ–ä¸²è” ''' https://github.com/qubvel/segmentation_models.pytorch/blob/a6e1123983548be55d4d1320e0a2f5fd9174d4ac/segmentation_models_pytorch/base/modules.py ''' class SCSEModule(nn.Module): def __init__(self, in_channels, reduction=16): super().__init__() self.cSE = nn.Sequential( nn.AdaptiveAvgPool2d(1), nn.Conv2d(in_channels, in_channels // reduction, 1), nn.ReLU(inplace=True), nn.Conv2d(in_channels // reduction, in_channels, 1), nn.Sigmoid(), ) self.sSE = nn.Sequential(nn.Conv2d(in_channels, 1, 1), nn.Sigmoid()) def forward(self, x): return x * self.cSE(x) + x * self.sSE(x) ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:10:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"PSA Polarized Self-Attention: Towards High-quality Pixel-wise Regression ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:11:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"Cross-dimension interaction ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:12:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"Triplet Attention æ–‡ç« æ ‡é¢˜ï¼šRotate to attend: Convolutional triplet attention module ä½œè€…ï¼šDiganta Misra, Trikay Nalamada, Ajay Uppili Arasanipalai, Qibin Hou å‘è¡¨æ—¶é—´ï¼š (WACV 2021) official code Structural Design of Triplet Attention Module. (a). Squeeze Excitation Block. (b). Convolution Block Attention Module (CBAM) . (c). Global Context (GC) block. (d). Triplet Attention ä½¿ç”¨ä¸‰ä¸ªåˆ†æ”¯ï¼Œæ¯ä¸ªåˆ†æ”¯éƒ½åœ¨æ•è·æ¥è‡ª Hã€W å’Œ C çš„ä»»æ„ä¸¤ä¸ªåŸŸä¹‹é—´çš„è·¨åŸŸäº¤äº’ã€‚ åœ¨æ¯ä¸ªåˆ†æ”¯ä¸­ï¼Œæ²¿ä¸åŒè½´çš„æ—‹è½¬æ“ä½œåº”ç”¨äºè¾“å…¥ï¼Œç„¶åä¸€ä¸ª Z-pool å±‚è´Ÿè´£èšåˆç¬¬é›¶ç»´çš„ä¿¡æ¯ã€‚ æœ€åï¼Œå†…æ ¸å¤§å°ä¸º k Ã— k çš„æ ‡å‡†å·ç§¯å±‚å¯¹æœ€åä¸¤ä¸ªåŸŸä¹‹é—´çš„å…³ç³»è¿›è¡Œå»ºæ¨¡ã€‚ $$ X_1=Pm_1(X) \\\\X_2=Pm_2(X) \\\\s_0=\\sigma(Conv_0(ZPool(X))) \\\\s_1=\\sigma(Conv_1(ZPool(X_1))) \\\\s_2=\\sigma(Conv_2(ZPool(X_2))) \\\\ Y=\\frac{1}{3}(s_0X+Pm_1^{-1}(s_1X_1)+Pm_2^{-1}(s_2X_2)) $$å…¶ä¸­ $P_{m1},P_{m2}$ åˆ†åˆ«è¡¨ç¤ºç»• H è½´å’Œ W è½´é€†æ—¶é’ˆæ—‹è½¬ 90Â°ï¼Œè€Œ$P_{mi}^{-1}$ è¡¨ç¤ºé€†æ—¶é’ˆæ—‹è½¬ã€‚ Z-Pool æ²¿ç¬¬é›¶ç»´è¿æ¥æœ€å¤§æ± åŒ–å’Œå¹³å‡æ± åŒ– triplet attention å¼ºè°ƒæ•è·è·¨åŸŸäº¤äº’çš„é‡è¦æ€§ï¼Œè€Œä¸æ˜¯ç‹¬ç«‹è®¡ç®—ç©ºé—´æ³¨æ„åŠ›å’Œé€šé“æ³¨æ„åŠ›ã€‚è¿™æœ‰åŠ©äºæ•è·ä¸°å¯Œçš„åˆ¤åˆ«ç‰¹å¾è¡¨ç¤ºã€‚ GCBlock = SEBlock + Simplified selfattention ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:12:1","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"Long-range dependencies ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:13:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"Coordinate Attention æ–‡ç« æ ‡é¢˜ï¼šCoordinate attention for efficient mobile network design ä½œè€…ï¼šQibin Hou, Daquan Zhou, Jiashi Feng å‘è¡¨æ—¶é—´ï¼š (CVPR 2021) official code (a) Squeeze-and-Excitation block (b) CBAM (C) Coordinate attention block å°†ä½ç½®ä¿¡æ¯åµŒå…¥åˆ°é€šé“æ³¨æ„ä¸­ï¼Œä½¿ç½‘ç»œä»¥å¾ˆå°‘çš„è®¡ç®—æˆæœ¬å…³æ³¨é‡è¦åŒºåŸŸ coordinate information embedding æ± åŒ–å†…æ ¸çš„ä¸¤ä¸ªç©ºé—´èŒƒå›´$(H,1),(1,W)$å¯¹æ¯ä¸ªé€šé“è¿›è¡Œæ°´å¹³å’Œå‚ç›´ç¼–ç ã€‚ $z_c^h = GAP^h(X)=\\frac{1}{W}\\sum_{0\\leq i\u003cW}x_c(h,i)$ $z_c^w = GAP^w(X)=\\frac{1}{H}\\sum_{0\\leq j\u003cH}x_c(j,w)$ coordinate attention generation $$ f=\\sigma(BN(Conv_1^{1\\times1}([z_c^h;z_c^w]))) \\\\ f^h,f^w=Split(f) \\\\s^h=\\sigma(Conv_h^{1\\times1}(f^h)) \\\\s^w=\\sigma(Conv_w^{1\\times1}(f^w)) \\\\Y=Xs^hs^w $$ class CoordAtt(nn.Module): def __init__(self, inp, oup, reduction=32): super(CoordAtt, self).__init__() self.pool_h = nn.AdaptiveAvgPool2d((None, 1)) self.pool_w = nn.AdaptiveAvgPool2d((1, None)) mip = max(8, inp // reduction) self.conv1 = nn.Conv2d(inp, mip, kernel_size=1, stride=1, padding=0) self.bn1 = nn.BatchNorm2d(mip) self.act = h_swish() self.conv_h = nn.Conv2d(mip, oup, kernel_size=1, stride=1, padding=0) self.conv_w = nn.Conv2d(mip, oup, kernel_size=1, stride=1, padding=0) def forward(self, x): identity = x n,c,h,w = x.size() x_h = self.pool_h(x) x_w = self.pool_w(x).permute(0, 1, 3, 2) y = torch.cat([x_h, x_w], dim=2) y = self.conv1(y) y = self.bn1(y) y = self.act(y) x_h, x_w = torch.split(y, [h, w], dim=2) x_w = x_w.permute(0, 1, 3, 2) a_h = self.conv_h(x_h).sigmoid() a_w = self.conv_w(x_w).sigmoid() out = identity * a_w * a_h return out ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:13:1","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"DANet æ–‡ç« æ ‡é¢˜ï¼šDual Attention Network for Scene Segmentation ä½œè€…ï¼šJun Fu, Jing Liu, Haijie Tian, Yong Li, Yongjun Bao, Zhiwei Fang,and Hanqing Lu å‘è¡¨æ—¶é—´ï¼š (CVPR 2019) official code danet danet Position attentionâ€“\u003e selfattention $$ Q,K,V=W_qX,W_kX,W_vX \\\\Y^{pos} = X+V*Softmax(Q^TK) \\\\ Y^{chn} = X + X * Softmax(X^TX) \\\\ Y = Y^{pos}+Y^{chn} $$","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:13:2","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"Relation-aware attention ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:14:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"RGA æ–‡ç« æ ‡é¢˜ï¼šRelation-Aware Global Attention for Person Re-identification ä½œè€…ï¼šZhizheng Zhang, Cuiling Lan, Wenjun Zeng, Xin Jin, Zhibo Chen å‘è¡¨æ—¶é—´ï¼š (CVPR 2020) official code RGA $$ Q =\\delta(W^Q X)\\\\ K =\\delta(W^K X)\\\\ R=Q^TK\\\\ r_i=[R(i,:);R(:,i)]\\\\ Y_i=[g_{avg}^c(\\delta(W^{\\varphi}x_i));\\delta(W^{\\phi}r_i)]\\\\ a_i=\\sigma(W_2\\delta(W_1y_i)) $$channelå’Œspitalå½¢å¼ä¸€æ ·ã€‚ä½ç½®ä¸Šçš„ç©ºé—´æ³¨æ„åŠ›å¾—åˆ†$a_i$ å»ºè®®æŒ‰é¡ºåºè”åˆä½¿ç”¨å®ƒä»¬ä»¥æ›´å¥½åœ°æ•æ‰ç©ºé—´å’Œè·¨é€šé“å…³ç³»ã€‚ ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channlespatial-attention/:14:1","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel \u0026\u0026 Spatial Attention","uri":"/posts/deeplearning/attention/channlespatial-attention/"},{"categories":["Deep Learning"],"content":"é€šé“æ³¨æ„åŠ›","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channel-attention/","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel Attention","uri":"/posts/deeplearning/attention/channel-attention/"},{"categories":["Deep Learning"],"content":"SENet æ–‡ç« æ ‡é¢˜ï¼šSqueeze-and-Excitation Networks ä½œè€…ï¼šJie Hu, Li Shen, Samuel Albanie, Gang Sun, Enhua Wu å‘è¡¨æ—¶é—´ï¼š(CVPR 2018) Official Code External-Attention-pytorch senet.pytorch Diagram of a Squeeze-and-Excitation building block. $$ u_c=v_c*X=\\sum_{s=1}^{C'}v_c^s*x^s $$ è¾“å…¥ï¼š$X=[x^1,x^2,â€¦,x^{Câ€™}]$ è¾“å‡ºï¼š$U=[u_1,u_2,â€¦,u_C]$ $v_c=[v_c^1,v_c^2,â€¦,v_c^{Câ€™}] $ï¼›$v_c^s$æ˜¯ä¸€ä¸ªäºŒç»´ç©ºé—´å†…æ ¸ï¼Œè¡¨ç¤ºä½œç”¨äº $X $çš„ç›¸åº”é€šé“çš„ $v_c$çš„å•ä¸ªé€šé“ã€‚ å·ç§¯æ ¸çš„é›†åˆï¼š$V=[v_1,v_2,â€¦,v_C]$ å‹ç¼©ï¼ˆSqueezeï¼‰ï¼šç»è¿‡ï¼ˆå…¨å±€å¹³å‡æ± åŒ–ï¼‰å‹ç¼©æ“ä½œåç‰¹å¾å›¾è¢«å‹ç¼©ä¸º1Ã—1Ã—Cå‘é‡ï¼›ä¹Ÿå¯ä»¥é‡‡ç”¨æ›´å¤æ‚çš„ç­–ç•¥**ï¼ˆæ”¶é›†å…¨å±€ç©ºé—´ä¿¡æ¯ï¼‰** ä¸ºä»€ä¹ˆç”¨å¹³å‡æ± åŒ–ï¼šå·ç§¯è®¡ç®—ï¼šå‚æ•°é‡æ¯”è¾ƒå¤§ï¼›æœ€å¤§æ± åŒ–ï¼šå¯èƒ½ç”¨äºæ£€æµ‹ç­‰å…¶ä»–ä»»åŠ¡ï¼Œè¾“å…¥çš„ç‰¹å¾å›¾æ˜¯å˜åŒ–çš„ï¼Œèƒ½é‡æ— æ³•ä¿æŒ $$ z_c=F_{sq}(u_c)=\\frac{1}{H\\times W}\\sum_{i=1}^H\\sum_{j=1}^Wu_c(i,j) $$ æ¿€åŠ±ï¼ˆExcitationï¼‰ï¼šå°†ç‰¹å¾ç»´åº¦é™ä½åˆ°è¾“å…¥çš„ 1/16$(r)$ï¼Œç„¶åç»è¿‡ ReLu æ¿€æ´»åå†é€šè¿‡ä¸€ä¸ª Fully Connected å±‚å‡å›åˆ°åŸæ¥çš„ç»´åº¦ï¼Œç„¶åé€šè¿‡ä¸€ä¸ª Sigmoid çš„é—¨è·å¾— 0~1 ä¹‹é—´å½’ä¸€åŒ–çš„æƒé‡ï¼ˆæ•è·é€šé“çº§å…³ç³»å¹¶è¾“å‡ºæ³¨æ„å‘é‡ï¼‰ $$ s=F_{ex}(z,W)=\\sigma(g(z,W)) =\\sigma(W_2\\delta(W_1z)) $$ $\\delta$ï¼šReLUï¼›$\\sigma$ï¼šsigmoidæ¿€æ´»ï¼Œ$W_1\\in R^{\\frac{C}{r}\\times C}$ï¼šé™ç»´å±‚ï¼›$W_2\\in R^{C \\times\\frac{C}{r}}$ï¼šå‡ç»´å±‚ æ¯”ç›´æ¥ç”¨ä¸€ä¸ª Fully Connected å±‚çš„å¥½å¤„åœ¨äº 1ï¼‰å…·æœ‰æ›´å¤šçš„éçº¿æ€§ï¼Œå¯ä»¥æ›´å¥½åœ°æ‹Ÿåˆé€šé“é—´å¤æ‚çš„ç›¸å…³æ€§ï¼› 2ï¼‰æå¤§åœ°å‡å°‘äº†å‚æ•°é‡å’Œè®¡ç®—é‡ cå¯èƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥éœ€è¦é™ç»´ scaleæ“ä½œï¼šæœ€åé€šè¿‡ä¸€ä¸ª Scale çš„æ“ä½œæ¥å°†å½’ä¸€åŒ–åçš„æƒé‡åŠ æƒåˆ°æ¯ä¸ªé€šé“çš„ç‰¹å¾ä¸Š $$ \\tilde x_c = F_{scale}(u_c,s_c)=s_cu_c $$$$ s = F_{se}(X,\\theta) = \\sigma(W_2\\delta(W_1 GAP(X))) \\\\ Y = sX \\\\ global\\ average\\ pooling\\rightarrow MLP\\rightarrow sigmoid $$ ç¼ºç‚¹ï¼šåœ¨æŒ¤å‹æ¨¡å—ä¸­ï¼Œå…¨å±€å¹³å‡æ± (ä¸€é˜¶ç»Ÿè®¡ä¿¡æ¯)å¤ªè¿‡ç®€å•ï¼Œæ— æ³•æ•è·å¤æ‚çš„å…¨å±€ä¿¡æ¯ã€‚åœ¨æ¿€åŠ±æ¨¡å—ä¸­ï¼Œå…¨è¿æ¥å±‚å¢åŠ äº†æ¨¡å‹çš„å¤æ‚æ€§ã€‚ GAPï¼ˆå…¨å±€å¹³å‡æ± åŒ–ï¼‰åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆï¼Œå¦‚å°†SEæ¨¡å—éƒ¨ç½²åœ¨LNå±‚ä¹‹åï¼Œå› ä¸ºLNå›ºå®šäº†æ¯ä¸ªé€šé“çš„å¹³å‡æ•°ï¼Œå¯¹äºä»»æ„è¾“å…¥ï¼ŒGAPçš„è¾“å‡ºéƒ½æ˜¯æ’å®šçš„ã€‚ import torch from torch import nn class SEAttention(nn.Module): def __init__(self, channel=512,reduction=16): super().__init__() self.avg_pool = nn.AdaptiveAvgPool2d(1) self.fc = nn.Sequential( nn.Linear(channel, channel // reduction, bias=False), nn.ReLU(inplace=True), nn.Linear(channel // reduction, channel, bias=False), nn.Sigmoid() ) def forward(self, x): b, c, _, _ = x.size() y = self.avg_pool(x).view(b, c) y = self.fc(y).view(b, c, 1, 1) return x * y.expand_as(x) CV27 Momentaç ”å‘æ€»ç›‘ å­™åˆš Squeeze and Excitation Networksä¸Š CV27 Momentaç ”å‘æ€»ç›‘ å­™åˆš Squeeze and Excitation Networksä¸‹ ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channel-attention/:1:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel Attention","uri":"/posts/deeplearning/attention/channel-attention/"},{"categories":["Deep Learning"],"content":"æ”¹è¿›æŒ¤å‹æ¨¡å— ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channel-attention/:2:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel Attention","uri":"/posts/deeplearning/attention/channel-attention/"},{"categories":["Deep Learning"],"content":"EncNet æ–‡ç« æ ‡é¢˜ï¼šContext Encoding for Semantic Segmentation ä½œè€…ï¼šHang Zhang, Kristin Dana, Jianping Shi, Zhongyue Zhang, Xiaogang Wang, Ambrish Tyagi, Amit Agrawal å‘è¡¨æ—¶é—´ï¼š(CVPR 2018) Official Code (çœ‹ä¸æ‡‚) EncModule $$ e_k = \\frac{\\sum_{i=1}^N e^{-s_k||X_i-d_k||^2}(X_i-d_k)}{\\sum_{i=1}^K e^{-s_j||X_i-d_j||^2}} \\\\ e = \\sum_{k=1}^K \\phi(e_k) \\\\ s = \\sigma(We) \\\\ Y = sX \\\\ encoder\\rightarrow MLP\\rightarrow sigmoid $$ class EncModule(nn.Module): def __init__(self, in_channels, nclass, ncodes=32, se_loss=True, norm_layer=None): super(EncModule, self).__init__() self.se_loss = se_loss self.encoding = nn.Sequential( nn.Conv2d(in_channels, in_channels, 1, bias=False), norm_layer(in_channels), nn.ReLU(inplace=True), Encoding(D=in_channels, K=ncodes), norm_layer(ncodes), nn.ReLU(inplace=True), Mean(dim=1)) self.fc = nn.Sequential( nn.Linear(in_channels, in_channels), nn.Sigmoid()) if self.se_loss: self.selayer = nn.Linear(in_channels, nclass) def forward(self, x): en = self.encoding(x) b, c, _, _ = x.size() gamma = self.fc(en) y = gamma.view(b, c, 1, 1) outputs = [F.relu_(x + x * y)] if self.se_loss: outputs.append(self.selayer(en)) return tuple(outputs) ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channel-attention/:3:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel Attention","uri":"/posts/deeplearning/attention/channel-attention/"},{"categories":["Deep Learning"],"content":"GSoP-Net æ–‡ç« æ ‡é¢˜ï¼šGlobal Second-order Pooling Convolutional Networks ä½œè€…ï¼šZilin Gao, Jiangtao Xie, Qilong Wang, Peihua Li å‘è¡¨æ—¶é—´ï¼š(CVPR 2019) Official Code GSoP-block å‹ç¼©ï¼ˆSqueezeï¼‰ ä½¿ç”¨ 1x1 å·ç§¯å°†è¾“å…¥ç‰¹å¾é€šé“é™ç»´ï¼ˆcâ€™-\u003ecï¼‰ è®¡ç®—é€šé“é—´çš„åæ–¹å·®çŸ©é˜µ($c\\times c$) ç”±äºäºŒæ¬¡è¿ç®—æ¶‰åŠåˆ°æ”¹å˜æ•°æ®çš„é¡ºåºï¼Œå› æ­¤å¯¹åæ–¹å·®çŸ©é˜µæ‰§è¡Œé€è¡Œå½’ä¸€åŒ–ï¼Œä¿ç•™å›ºæœ‰çš„ç»“æ„ä¿¡æ¯ æ¿€åŠ±ï¼ˆExcitationï¼‰ å¯¹åæ–¹å·®ç‰¹å¾å›¾è¿›è¡Œéçº¿æ€§é€è¡Œå·ç§¯å¾—åˆ°4cçš„ç»“æ„ä¿¡æ¯ ç”¨ä¸€ä¸ªå…¨è¿æ¥å±‚è°ƒæ•´åˆ°è¾“å…¥çš„é€šé“æ•°c â€²ç»´åº¦ï¼Œ é€šè¿‡sigmoid å‡½æ•°å¾—åˆ°æ³¨æ„åŠ›å‘é‡ä¸è¾“å…¥è¿›è¡Œé€é€šé“ç›¸ä¹˜ï¼Œå¾—åˆ°è¾“å‡ºç‰¹å¾ $$ s = F_{gsop}(X,\\theta) = \\sigma(WRC(Cov(Conv(X)))) \\\\ Y=sX \\\\ 2nd\\ order\\ pooling\\rightarrow convolution\\\u0026MLP\\rightarrow sigmoid $$åœ¨æ”¶é›†å…¨å±€ä¿¡æ¯çš„åŒæ—¶ï¼Œä½¿ç”¨å…¨å±€äºŒé˜¶æ± åŒ–(GSoP)å—å¯¹é«˜é˜¶ç»Ÿè®¡æ•°æ®å»ºæ¨¡ self.isqrt_dim = 256 self.layer_reduce = nn.Conv2d(512 * block.expansion, self.isqrt_dim, kernel_size=1, stride=1, padding=0, bias=False) self.layer_reduce_bn = nn.BatchNorm2d(self.isqrt_dim) self.layer_reduce_relu = nn.ReLU(inplace=True) self.fc = nn.Linear(int(self.isqrt_dim * (self.isqrt_dim + 1) / 2), num_classes) # forward x = self.layer_reduce(x) x = self.layer_reduce_bn(x) x = self.layer_reduce_relu(x) x = MPNCOV.CovpoolLayer(x) x = MPNCOV.SqrtmLayer(x, 3) x = MPNCOV.TriuvecLayer(x) ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channel-attention/:4:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel Attention","uri":"/posts/deeplearning/attention/channel-attention/"},{"categories":["Deep Learning"],"content":"FcaNet æ–‡ç« æ ‡é¢˜ï¼šFcaNet: Frequency Channel Attention Networks ä½œè€…ï¼šZequn Qin, Pengyi Zhang, Fei Wu, Xi Li å‘è¡¨æ—¶é—´ï¼š(ICCV 2021) official code fca_module GAPæ˜¯DCTï¼ˆäºŒç»´ç¦»æ•£ä½™å¼¦å˜æ¢ï¼‰çš„ç‰¹ä¾‹ å°†å›¾åƒç‰¹å¾åˆ†è§£ä¸ºä¸åŒé¢‘ç‡åˆ†é‡çš„ç»„åˆã€‚GAPæ“ä½œä»…åˆ©ç”¨åˆ°äº†å…¶ä¸­çš„ä¸€ä¸ªé¢‘ç‡åˆ†é‡ã€‚ é¦–å…ˆï¼Œå°†è¾“å…¥ X æŒ‰é€šé“ç»´åº¦åˆ’åˆ†ä¸ºnéƒ¨åˆ†ï¼Œå…¶ä¸­nå¿…é¡»èƒ½è¢«é€šé“æ•°æ•´é™¤ã€‚ å¯¹äºæ¯ä¸ªéƒ¨åˆ†ï¼Œåˆ†é…ç›¸åº”çš„äºŒç»´DCTé¢‘ç‡åˆ†é‡ï¼Œå…¶ç»“æœå¯ä½œä¸ºé€šé“æ³¨æ„åŠ›çš„é¢„å¤„ç†ç»“æœï¼ˆç±»ä¼¼äºGAPï¼‰ 2D DCTå¯ä»¥ä½¿ç”¨é¢„å¤„ç†ç»“æœæ¥å‡å°‘è®¡ç®— $$ s = F_{fca}(X,\\theta) = \\sigma(W_2\\delta(W_1[(DCT(Group(X)))])) \\\\ Y=sX \\\\ discrete\\ cosine\\ transform\\rightarrow MLP\\rightarrow sigmoid $$ # https://github.com/cfzd/FcaNet/blob/aa5fb63505575bb4e4e094613565379c3f6ada33/model/layer.py#L29 class MultiSpectralAttentionLayer(torch.nn.Module): def __init__(self, channel, dct_h, dct_w, reduction = 16, freq_sel_method = 'top16'): super(MultiSpectralAttentionLayer, self).__init__() self.reduction = reduction self.dct_h = dct_h self.dct_w = dct_w mapper_x, mapper_y = get_freq_indices(freq_sel_method) self.num_split = len(mapper_x) mapper_x = [temp_x * (dct_h // 7) for temp_x in mapper_x] mapper_y = [temp_y * (dct_w // 7) for temp_y in mapper_y] # make the frequencies in different sizes are identical to a 7x7 frequency space # eg, (2,2) in 14x14 is identical to (1,1) in 7x7 self.dct_layer = MultiSpectralDCTLayer(dct_h, dct_w, mapper_x, mapper_y, channel) self.fc = nn.Sequential( nn.Linear(channel, channel // reduction, bias=False), nn.ReLU(inplace=True), nn.Linear(channel // reduction, channel, bias=False), nn.Sigmoid() ) def forward(self, x): n,c,h,w = x.shape x_pooled = x if h != self.dct_h or w != self.dct_w: x_pooled = torch.nn.functional.adaptive_avg_pool2d(x, (self.dct_h, self.dct_w)) # If you have concerns about one-line-change, don't worry. :) # In the ImageNet models, this line will never be triggered. # This is for compatibility in instance segmentation and object detection. y = self.dct_layer(x_pooled) y = self.fc(y).view(n, c, 1, 1) return x * y.expand_as(x) ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channel-attention/:5:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel Attention","uri":"/posts/deeplearning/attention/channel-attention/"},{"categories":["Deep Learning"],"content":"Billinear attention æ–‡ç« æ ‡é¢˜ï¼šBilinear Attention Networks for Person Retrieval ä½œè€…ï¼šPengfei Fang , Jieming Zhou , Soumava Kumar Roy , Lars Petersson , Mehrtash Harandi, å‘è¡¨æ—¶é—´ï¼š(ICCV 2019) Billinear_attention çº¿æ€§æ³¨æ„å—ï¼ˆåŒæ³¨æ„ï¼‰ï¼Œä»¥æ•è·æ¯ä¸ªé€šé“å†…çš„å±€éƒ¨æˆå¯¹ç‰¹å¾äº¤äº’ï¼ŒåŒæ—¶ä¿ç•™ç©ºé—´ä¿¡æ¯ã€‚ åŒæ³¨æ„é‡‡ç”¨æ³¨æ„ä¸­æ³¨æ„ï¼ˆAiAï¼‰æœºåˆ¶æ¥æ•è·äºŒé˜¶ç»Ÿè®¡ä¿¡æ¯ï¼šä»å†…éƒ¨é€šé“æ³¨æ„çš„è¾“å‡ºè®¡ç®—å¤–éƒ¨é€ç‚¹é€šé“æ³¨æ„å‘é‡ã€‚å½¢å¼ä¸Šï¼Œç»™å®šè¾“å…¥ç‰¹å¾æ˜ å°„Xï¼Œbiæ³¨æ„é¦–å…ˆä½¿ç”¨åŒçº¿æ€§æ± æ¥æ•è·äºŒé˜¶ä¿¡æ¯ $$ \\widetilde x = Bi(\\phi(X))=Vec(Utri(\\phi(X)\\phi(X)^T)) \\\\ \\hat x = \\omega (GAP(\\widetilde x))\\varphi(\\widetilde x) \\\\ s = \\sigma(\\hat x) \\\\ Y =sX $$","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channel-attention/:6:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel Attention","uri":"/posts/deeplearning/attention/channel-attention/"},{"categories":["Deep Learning"],"content":"æ”¹è¿›æ¿€åŠ±æ¨¡å— ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channel-attention/:7:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel Attention","uri":"/posts/deeplearning/attention/channel-attention/"},{"categories":["Deep Learning"],"content":"ECANet æ–‡ç« æ ‡é¢˜ï¼šECA-Net: Efficient Channel Attention for Deep Convolutional Neural Networks ä½œè€…ï¼šQilong Wang, Banggu Wu, Pengfei Zhu, Peihua Li, Wangmeng Zuo, Qinghua Hu å‘è¡¨æ—¶é—´ï¼š(CVPR 2020) official code eca_module $$ s=F_{eca}(X,\\theta) = \\sigma(Conv1D(GAP(X))) \\\\ Y = sX \\\\ global\\ average\\ pooling\\rightarrow conv1d\\rightarrow sigmoid $$ä½¿ç”¨1Då·ç§¯æ¥ç¡®å®šé€šé“ä¹‹é—´çš„ç›¸äº’ä½œç”¨ï¼Œè€Œä¸æ˜¯å…¨è¿æ¥é™ç»´ã€‚ åªè€ƒè™‘æ¯ä¸ªé€šé“ä¸å…¶kè¿‘é‚»ä¹‹é—´çš„ç›´æ¥äº¤äº’ï¼Œè€Œä¸æ˜¯é—´æ¥å¯¹åº”ï¼Œä»¥æ§åˆ¶æ¨¡å‹å¤æ‚åº¦ ä½¿ç”¨äº¤å‰éªŒè¯ä»é€šé“ç»´åº¦Cè‡ªé€‚åº”ç¡®å®šå†…æ ¸å¤§å°kï¼Œè€Œä¸æ˜¯é€šè¿‡æ‰‹åŠ¨è°ƒæ•´ $k = \\psi(C)=|\\frac{log_{2}(C)}{\\gamma}+\\frac{b}{\\gamma}|_{odd}$ $\\gamma, b$è¶…å‚æ•°ï¼›$|x|_{odd}$ï¼šæœ€è¿‘çš„å¥‡æ•° kernel_size = int(abs((math.log(channel, 2) + b) / gamma)) kernel_size = kernel_size if kernel_size % 2 else kernel_size + 1 # ä¸ºå•¥æºç ResNetå›ºå®škernel_size: https://github.com/BangguWu/ECANet/issues/24 import torch from torch import nn from torch.nn.parameter import Parameter class eca_layer(nn.Module): \"\"\"Constructs a ECA module. Args: channel: Number of channels of the input feature map k_size: Adaptive selection of kernel size \"\"\" def __init__(self, channel, k_size=3): super(eca_layer, self).__init__() self.avg_pool = nn.AdaptiveAvgPool2d(1) self.conv = nn.Conv1d(1, 1, kernel_size=k_size, padding=(k_size - 1) // 2, bias=False) self.sigmoid = nn.Sigmoid() def forward(self, x): # feature descriptor on the global spatial information y = self.avg_pool(x) # Two different branches of ECA module y = self.conv(y.squeeze(-1).transpose(-1, -2)).transpose(-1, -2).unsqueeze(-1) # Multi-scale information fusion y = self.sigmoid(y) return x * y.expand_as(x) ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channel-attention/:8:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel Attention","uri":"/posts/deeplearning/attention/channel-attention/"},{"categories":["Deep Learning"],"content":"RCAN æ–‡ç« æ ‡é¢˜ï¼šImage Super-Resolution Using Very Deep Residual Channel Attention Networks ä½œè€…ï¼šYulun Zhang, Kunpeng Li å‘è¡¨æ—¶é—´ï¼š(ECCV 2018) official Code CA $$ s=F_{rca}(X,\\theta) = \\sigma(Conv_U(\\delta(Conv_D(GAP(X)))) \\\\ Y = sX \\\\ global\\ average\\ pooling\\rightarrow conv2d\\rightarrow Relu \\rightarrow conv2d\\rightarrow sigmoid $$ class CALayer(nn.Module): def __init__(self, channel, reduction=16): super(CALayer, self).__init__() # global average pooling: feature --\u003e point self.avg_pool = nn.AdaptiveAvgPool2d(1) # feature channel downscale and upscale --\u003e channel weight self.conv_du = nn.Sequential( nn.Conv2d(channel, channel // reduction, 1, padding=0, bias=True), nn.ReLU(inplace=True), nn.Conv2d(channel // reduction, channel, 1, padding=0, bias=True), nn.Sigmoid() ) def forward(self, x): y = self.avg_pool(x) y = self.conv_du(y) return x * y ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channel-attention/:9:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel Attention","uri":"/posts/deeplearning/attention/channel-attention/"},{"categories":["Deep Learning"],"content":"DIANet æ–‡ç« æ ‡é¢˜ï¼šDIANet: Dense-and-Implicit Attention Network ä½œè€…ï¼šZhongzhan Huang, Senwei Liang, Mingfu Liang, Haizhao Yang å‘è¡¨æ—¶é—´ï¼š(AAAI 2020) official Code DIA_module $$ s = F_{dia}(X,\\theta) = \\delta (LSTM(GAP(X))) \\\\ Y = sX + X \\\\ global\\ average\\ pooling\\rightarrow LSTM\\rightarrow Relu $$ class DIA_Attention(nn.Module): def __init__(self, ModuleList, block_idx): super(DIA_Attention, self).__init__() self.ModuleList = ModuleList if block_idx == 1: self.lstm = LSTMCell(64, 64, 1) elif block_idx == 2: self.lstm = LSTMCell(128, 128, 1) elif block_idx == 3: self.lstm = LSTMCell(256, 256, 1) self.GlobalAvg = nn.AdaptiveAvgPool2d((1, 1)) self.relu = nn.ReLU(inplace=True) self.block_idx = block_idx def forward(self, x): for idx, layer in enumerate(self.ModuleList): x, org = layer(x) # 64 128 256 BatchSize * NumberOfChannels * 1 * 1 # BatchSize * NumberOfChannels if idx == 0: seq = self.GlobalAvg(x) # list = seq.view(seq.size(0), 1, seq.size(1)) seq = seq.view(seq.size(0), seq.size(1)) ht = torch.zeros(1, seq.size(0), seq.size(1)).cuda() # 1 mean number of layers ct = torch.zeros(1, seq.size(0), seq.size(1)).cuda() ht, ct = self.lstm(seq, (ht, ct)) # 1 * batch size * length # ht = self.sigmoid(ht) x = x * (ht[-1].view(ht.size(1), ht.size(2), 1, 1)) x += org # x = selrelu(x) else: seq = self.GlobalAvg(x) # list = torch.cat((list, seq.view(seq.size(0), 1, seq.size(1))), 1) seq = seq.view(seq.size(0), seq.size(1)) ht, ct = self.lstm(seq, (ht, ct)) # ht = self.sigmoid(ht) x = x * (ht[-1].view(ht.size(1), ht.size(2), 1, 1)) x += org # x = self.relu(x) # print(self.block_idx, idx, ht) return x #, list ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channel-attention/:10:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel Attention","uri":"/posts/deeplearning/attention/channel-attention/"},{"categories":["Deep Learning"],"content":"åŒæ—¶æ”¹è¿›æŒ¤å‹ã€æ¿€åŠ±æ¨¡å— ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channel-attention/:11:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel Attention","uri":"/posts/deeplearning/attention/channel-attention/"},{"categories":["Deep Learning"],"content":"SRM æ–‡ç« æ ‡é¢˜ï¼šSRM : A Style-based Recalibration Module for Convolutional Neural Networks ä½œè€…ï¼šHyunJae Lee, Hyo-Eun Kim, Hyeonseob Nam å‘è¡¨æ—¶é—´ï¼š(ICCV 2019) Code SRM $$ s = F_{srm}(X,\\theta) = \\sigma(BN(CFC(SP(X)))) \\\\ Y = sX \\\\ style\\ pooling\\rightarrow convolution\\\u0026 MLP\\rightarrow sigmoid $$åˆ©ç”¨è¾“å…¥ç‰¹å¾çš„å¹³å‡å€¼å’Œæ ‡å‡†åå·®æ¥æé«˜æ•è·å…¨å±€ä¿¡æ¯çš„èƒ½åŠ› class SRMLayer(nn.Module): def __init__(self, channel, reduction=None): # Reduction for compatibility with layer_block interface super(SRMLayer, self).__init__() # CFC: channel-wise fully connected layer self.cfc = nn.Conv1d(channel, channel, kernel_size=2, bias=False, groups=channel) self.bn = nn.BatchNorm1d(channel) def forward(self, x): b, c, _, _ = x.size() # Style pooling mean = x.view(b, c, -1).mean(-1).unsqueeze(-1) std = x.view(b, c, -1).std(-1).unsqueeze(-1) u = torch.cat((mean, std), -1) # (b, c, 2) # Style integration z = self.cfc(u) # (b, c, 1) z = self.bn(z) g = torch.sigmoid(z) g = g.view(b, c, 1, 1) return x * g.expand_as(x) ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channel-attention/:12:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel Attention","uri":"/posts/deeplearning/attention/channel-attention/"},{"categories":["Deep Learning"],"content":"GCT æ–‡ç« æ ‡é¢˜ï¼šGated Channel Transformation for Visual Recognition ä½œè€…ï¼šZongxin Yang, Linchao Zhu, Yu Wu, Yi Yang å‘è¡¨æ—¶é—´ï¼š(CVPR 2020) official Code GCT GCTæ¨¡å—å¯ä»¥ä¿ƒè¿› shallow layer ç‰¹å¾é—´çš„åˆä½œï¼ŒåŒæ—¶ï¼Œä¿ƒè¿› deep layer ç‰¹å¾é—´çš„ç«äº‰ã€‚è¿™æ ·ï¼Œæµ…å±‚ç‰¹å¾å¯ä»¥æ›´å¥½çš„è·å–é€šç”¨çš„å±æ€§ï¼Œæ·±å±‚ç‰¹å¾å¯ä»¥æ›´å¥½çš„è·å–ä¸ä»»åŠ¡ç›¸å…³çš„ discriminative ç‰¹å¾ é€šè¿‡è®¡ç®—æ¯ä¸ªé€šé“çš„l2èŒƒæ•°æ¥æ”¶é›†å…¨å±€ä¿¡æ¯ã€‚ åˆ©ç”¨å¯å­¦ä¹ å‘é‡$\\alpha$å¯¹ç‰¹å¾è¿›è¡Œç¼©æ”¾ã€‚ç„¶åé€šè¿‡é€šé“å½’ä¸€åŒ–ï¼Œé‡‡ç”¨ç«äº‰æœºåˆ¶æ¥å®ç°ä¿¡é“é—´çš„äº¤äº’ã€‚ $$ s = F_{gct}(X,\\theta)=tanh(\\gamma CN(\\alpha Norm(X))+\\beta) \\\\ Y = sX+X \\\\ computer\\ L2norm\\ on \\ spatial\\rightarrow channel\\ normalization\\rightarrow tanh $$ class GCT(nn.Module): def __init__(self, num_channels, epsilon=1e-5, mode='l2', after_relu=False): super(GCT, self).__init__() self.alpha = nn.Parameter(torch.ones(1, num_channels, 1, 1)) self.gamma = nn.Parameter(torch.zeros(1, num_channels, 1, 1)) self.beta = nn.Parameter(torch.zeros(1, num_channels, 1, 1)) self.epsilon = epsilon self.mode = mode self.after_relu = after_relu def forward(self, x): if self.mode == 'l2': embedding = (x.pow(2).sum((2,3), keepdim=True) + self.epsilon).pow(0.5) * self.alpha norm = self.gamma / (embedding.pow(2).mean(dim=1, keepdim=True) + self.epsilon).pow(0.5) elif self.mode == 'l1': if not self.after_relu: _x = torch.abs(x) else: _x = x embedding = _x.sum((2,3), keepdim=True) * self.alpha norm = self.gamma / (torch.abs(embedding).mean(dim=1, keepdim=True) + self.epsilon) else: print('Unknown mode!') sys.exit() gate = 1. + torch.tanh(embedding * norm + self.beta) return x * gate ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channel-attention/:13:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel Attention","uri":"/posts/deeplearning/attention/channel-attention/"},{"categories":["Deep Learning"],"content":"SoCA æ–‡ç« æ ‡é¢˜ï¼šSecond-order Attention Network for Single Image Super-Resolution ä½œè€…ï¼šTao Dai1,2, Jianrui Cai , Yongbing Zhang å‘è¡¨æ—¶é—´ï¼š(CVPR 2019) åŸºäºRCAN official code SoCA $$ s=F_{soca}(X,\\theta) = \\sigma(Conv_U(\\delta(Conv_D(GCP(X)))) \\\\ Y = sX \\\\ global\\ covariance\\ pooling\\rightarrow conv2d\\rightarrow Relu \\rightarrow conv2d\\rightarrow sigmoid $$ class SOCA(nn.Module): def __init__(self, channel, reduction=8): super(SOCA, self).__init__() # global average pooling: feature --\u003e point # self.avg_pool = nn.AdaptiveAvgPool2d(1) # self.max_pool = nn.AdaptiveMaxPool2d(1) self.max_pool = nn.MaxPool2d(kernel_size=2) # feature channel downscale and upscale --\u003e channel weight self.conv_du = nn.Sequential( nn.Conv2d(channel, channel // reduction, 1, padding=0, bias=True), nn.ReLU(inplace=True), nn.Conv2d(channel // reduction, channel, 1, padding=0, bias=True), nn.Sigmoid() ) def forward(self, x): batch_size, C, h, w = x.shape # x: NxCxHxW N = int(h * w) min_h = min(h, w) h1 = 1000 w1 = 1000 if h \u003c h1 and w \u003c w1: x_sub = x elif h \u003c h1 and w \u003e w1: # H = (h - h1) // 2 W = (w - w1) // 2 x_sub = x[:, :, :, W:(W + w1)] elif w \u003c w1 and h \u003e h1: H = (h - h1) // 2 # W = (w - w1) // 2 x_sub = x[:, :, H:H + h1, :] else: H = (h - h1) // 2 W = (w - w1) // 2 x_sub = x[:, :, H:(H + h1), W:(W + w1)] ## MPN-COV cov_mat = MPNCOV.CovpoolLayer(x_sub) cov_mat_sqrt = MPNCOV.SqrtmLayer(cov_mat,5) ## cov_mat_sum = torch.mean(cov_mat_sqrt,1) cov_mat_sum = cov_mat_sum.view(batch_size,C,1,1) y_cov = self.conv_du(cov_mat_sum) return y_cov*x ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/channel-attention/:14:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Channel Attention","uri":"/posts/deeplearning/attention/channel-attention/"},{"categories":["Deep Learning"],"content":"ç©ºé—´æ³¨æ„åŠ›","date":"2023-06-06","objectID":"/posts/deeplearning/attention/spatial-attention/","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Spatial Attention","uri":"/posts/deeplearning/attention/spatial-attention/"},{"categories":["Deep Learning"],"content":"åŸºäº RNN çš„æ–¹æ³• ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/spatial-attention/:1:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Spatial Attention","uri":"/posts/deeplearning/attention/spatial-attention/"},{"categories":["Deep Learning"],"content":"RAM æ–‡ç« æ ‡é¢˜ï¼š ä½œè€…ï¼š å‘è¡¨æ—¶é—´ï¼š() ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/spatial-attention/:2:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Spatial Attention","uri":"/posts/deeplearning/attention/spatial-attention/"},{"categories":["Deep Learning"],"content":"ä½¿ç”¨å­ç½‘ç»œæ¥æ˜¾å¼é¢„æµ‹ç›¸å…³åŒºåŸŸ ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/spatial-attention/:3:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Spatial Attention","uri":"/posts/deeplearning/attention/spatial-attention/"},{"categories":["Deep Learning"],"content":"STN ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/spatial-attention/:4:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Spatial Attention","uri":"/posts/deeplearning/attention/spatial-attention/"},{"categories":["Deep Learning"],"content":"ä½¿ç”¨å­ç½‘ç»œæ¥éšå¼é¢„æµ‹è½¯æ©ç ä»¥é€‰æ‹©é‡è¦åŒºåŸŸ ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/spatial-attention/:5:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Spatial Attention","uri":"/posts/deeplearning/attention/spatial-attention/"},{"categories":["Deep Learning"],"content":"GENet ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/spatial-attention/:6:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Spatial Attention","uri":"/posts/deeplearning/attention/spatial-attention/"},{"categories":["Deep Learning"],"content":"è‡ªæ³¨æ„åŠ›ç›¸å…³ ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/spatial-attention/:7:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Spatial Attention","uri":"/posts/deeplearning/attention/spatial-attention/"},{"categories":["Deep Learning"],"content":"Non-local æ–‡ç« æ ‡é¢˜ï¼šNon-local Neural Networks ä½œè€…ï¼šXiaolong Wang, Ross Girshick, Abhinav Gupta, Kaiming He å‘è¡¨æ—¶é—´ï¼š(CVPR 2018) official code Non-local_pytorch Non-Local-NN-Pytorch Non-Local $$ y = softmax(x^TW_\\theta^T W_\\phi x)g(x) \\\\ y_i=\\frac{1}{C(x)}\\sum_{\\forall j}f(x_i,x_j)g(x_j) \\\\ z_i= W_zy_i+x_i \\\\ Q,K \\ dot\\ product\\rightarrow softmax $$ f å‡½æ•°å¼è®¡ç®—iå’Œjçš„ç›¸ä¼¼åº¦ï¼›g å‡½æ•°è®¡ç®—feature mapåœ¨jä½ç½®çš„è¡¨ç¤ºï¼›æœ€ç»ˆçš„yæ˜¯é€šè¿‡å“åº”å› å­C(x) è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ä»¥åå¾—åˆ°çš„ Non-Local neural networksçš„ç†è§£ä¸å®ç° ","date":"2023-06-06","objectID":"/posts/deeplearning/attention/spatial-attention/:8:0","tags":["Deep Learning","æ³¨æ„åŠ›æœºåˆ¶"],"title":"Spatial Attention","uri":"/posts/deeplearning/attention/spatial-attention/"},{"categories":["Deep Learning"],"content":"CycleGAN","date":"2023-06-05","objectID":"/posts/deeplearning/generative-model/cyclegan/","tags":["Deep Learning","ç”Ÿæˆæ¨¡å‹"],"title":"CycleGAN","uri":"/posts/deeplearning/generative-model/cyclegan/"},{"categories":["Deep Learning"],"content":"CycleGAN æ–‡ç« æ ‡é¢˜ï¼šUnpaired Image-to-Image Translation using Cycle-Consistent Adversarial Networks ä½œè€…ï¼šJun-Yan Zhu, Taesung Park, Phillip Isola Alexei A. Efros å‘è¡¨æ—¶é—´ï¼š(ICCV 2017ï¼‰ è®ºæ–‡ä¸»é¡µ ","date":"2023-06-05","objectID":"/posts/deeplearning/generative-model/cyclegan/:1:0","tags":["Deep Learning","ç”Ÿæˆæ¨¡å‹"],"title":"CycleGAN","uri":"/posts/deeplearning/generative-model/cyclegan/"},{"categories":["Deep Learning"],"content":"pix2pix æ–‡ç« æ ‡é¢˜ï¼šImage-to-Image Translation with Conditional Adversarial Nets ä½œè€…ï¼šPhillip Isola, Jun-Yan Zhu, Tinghui Zhou, Alexei A. Efros å‘è¡¨æ—¶é—´ï¼š(CVPR 2017ï¼‰ è®ºæ–‡ä¸»é¡µ å®˜æ–¹ä»£ç  Image-to-Image Demo åºŠå•å……ç”µçº¿ä½œç”»Gommy Sundayï¼šhttps://vimeo.com/260612034 è°ƒè‰²æ¿ç”Ÿæˆï¼šhttp://colormind.io/blog/ äººè„¸ç®€ç¬”ç”»è½¬è‚–åƒç”»ï¼šhttps://twitter.com/quasimondo/status/826065030944870400 ","date":"2023-06-05","objectID":"/posts/deeplearning/generative-model/cyclegan/:2:0","tags":["Deep Learning","ç”Ÿæˆæ¨¡å‹"],"title":"CycleGAN","uri":"/posts/deeplearning/generative-model/cyclegan/"},{"categories":["Deep Learning"],"content":"ä»£ç  https://colab.research.google.com/github/tensorflow/docs/blob/master/site/en/tutorials/generative/pix2pix.ipynb https://github.com/TommyZihao/MMGeneration_Tutorials/blob/main/%E3%80%90E%E3%80%91%E5%9B%BE%E5%83%8F%E8%BD%AC%E8%AF%91-pix2pix.ipynb ","date":"2023-06-05","objectID":"/posts/deeplearning/generative-model/cyclegan/:3:0","tags":["Deep Learning","ç”Ÿæˆæ¨¡å‹"],"title":"CycleGAN","uri":"/posts/deeplearning/generative-model/cyclegan/"},{"categories":["Deep Learning"],"content":"DALLÂ·EÂ·2","date":"2023-06-05","objectID":"/posts/deeplearning/generative-model/dall_e2/","tags":["Deep Learning","ç”Ÿæˆæ¨¡å‹"],"title":"DALLÂ·EÂ·2","uri":"/posts/deeplearning/generative-model/dall_e2/"},{"categories":["Deep Learning"],"content":"DALLÂ·EÂ·2 æ–‡ç« æ ‡é¢˜ï¼šHierarchical Text-Conditional Image Generation with CLIP Latents | ä½œè€…ï¼šAditya Ramesh, Prafulla Dhariwal, Alex Nichol, Casey Chu, Mark Chen å‘è¡¨æ—¶é—´ï¼š(2022ï¼‰ dalle-mini pyorch code CLIP + Diffusion models ","date":"2023-06-05","objectID":"/posts/deeplearning/generative-model/dall_e2/:1:0","tags":["Deep Learning","ç”Ÿæˆæ¨¡å‹"],"title":"DALLÂ·EÂ·2","uri":"/posts/deeplearning/generative-model/dall_e2/"},{"categories":["Deep Learning"],"content":"title ä½¿ç”¨CLIPè®­ç»ƒå¥½çš„ç‰¹å¾åšå±‚çº§å¼çš„ä¾æ‰˜äºæ–‡æœ¬çš„å›¾åƒç”Ÿæˆ å±‚çº§å¼ï¼šå…ˆç”Ÿæˆä¸€ä¸ªå°åˆ†è¾¨ç‡çš„å›¾ç‰‡å†å¤šæ¬¡ä¸Šé‡‡æ ·æˆé«˜æ¸…å¤§å›¾ ","date":"2023-06-05","objectID":"/posts/deeplearning/generative-model/dall_e2/:2:0","tags":["Deep Learning","ç”Ÿæˆæ¨¡å‹"],"title":"DALLÂ·EÂ·2","uri":"/posts/deeplearning/generative-model/dall_e2/"},{"categories":["Deep Learning"],"content":"Methods DALL_E2 or unclip å…ˆè®­ç»ƒå¥½ä¸€ä¸ªCLIPæ¨¡å‹ï¼Œç„¶åæ‰¾åˆ°å›¾ç‰‡å’Œæ–‡æœ¬å¯¹$(x,y)$ä¹‹é—´çš„å…³ç³»ä¹‹åï¼›ç»™å®šä¸€ä¸ªæ–‡æœ¬ï¼ŒCLIPçš„æ–‡æœ¬ç¼–ç å™¨å°±å¯ä»¥æŠŠè¿™ä¸ªæ–‡æœ¬å˜æˆä¸€ä¸ªæ–‡æœ¬ç‰¹å¾$z_t$ï¼› è®­ç»ƒä¸€ä¸ªprioræ¨¡å‹$ P(z_i|y)$ï¼Œè¾“å…¥æ–‡æœ¬ç‰¹å¾ï¼Œè¾“å‡ºç±»ä¼¼äºCLIPçš„å›¾åƒç‰¹å¾ CLIPç”Ÿæˆçš„å¯¹åº”çš„å›¾åƒç‰¹å¾$z_i$æ˜¯ç”¨æ¥è®­ç»ƒprioråšground truthç”¨çš„ æ–¹æ³•ï¼šauto regressiveè‡ªå›å½’æ¨¡å‹å’Œæ‰©æ•£æ¨¡å‹ï¼ˆé€‰æ‹©äº†æ‰©æ•£æ¨¡å‹ï¼‰ decoderè§£ç å™¨ $P(x|z_i,y)$ è¾“å…¥å›¾åƒç‰¹å¾ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„å›¾åƒ æ‰©æ•£æ¨¡å‹ç”Ÿæˆå›¾åƒï¼›æ‰©æ•£æ¨¡å‹å¤§éƒ¨åˆ†æ—¶å€™æ˜¯U-Net é€šè¿‡å°† CLIP è¾“å‡ºç¼–ç å’Œæ·»åŠ  timestep embeddingï¼Œå¹¶å°† CLIPç¼–ç æŠ•å½±åˆ°å››ä¸ªé¢å¤–çš„æ–‡æœ¬tokenä¸­ï¼Œtokenè¿æ¥åˆ° GLIDE æ–‡æœ¬ç¼–ç å™¨çš„è¾“å‡ºåºåˆ— ä½¿ç”¨classifier-free guidance guidanceä¿¡å·æœ‰10%çš„æ—¶é—´å†…æŠŠè¿™ä¸ªCLIPçš„ç‰¹å¾å‘¢è®¾æˆ0ï¼Œåœ¨è®­ç»ƒçš„æ—¶å€™æœ‰50%çš„æ—¶é—´å†…éšæœºåˆ é™¤æ–‡æœ¬ç‰¹å¾ã€‚ $$ P(x|y)=P(x,z_i|y)=P(x|z_i,y)P(z_i|y) $$","date":"2023-06-05","objectID":"/posts/deeplearning/generative-model/dall_e2/:3:0","tags":["Deep Learning","ç”Ÿæˆæ¨¡å‹"],"title":"DALLÂ·EÂ·2","uri":"/posts/deeplearning/generative-model/dall_e2/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» DALLÂ·E 2ã€è®ºæ–‡ç²¾è¯»ã€‘ ","date":"2023-06-05","objectID":"/posts/deeplearning/generative-model/dall_e2/:4:0","tags":["Deep Learning","ç”Ÿæˆæ¨¡å‹"],"title":"DALLÂ·EÂ·2","uri":"/posts/deeplearning/generative-model/dall_e2/"},{"categories":["Deep Learning"],"content":"GAN","date":"2023-06-05","objectID":"/posts/deeplearning/generative-model/gan/","tags":["Deep Learning","ç”Ÿæˆæ¨¡å‹"],"title":"GAN","uri":"/posts/deeplearning/generative-model/gan/"},{"categories":["Deep Learning"],"content":"GAN æ–‡ç« æ ‡é¢˜ï¼šGenerative Adversarial Networks ä½œè€…ï¼šIan J. Goodfellow, Jean Pouget-Abadie, Mehdi Mirza, Bing Xu, David Warde-Farley, Sherjil Ozair, Aaron Courville, Yoshua Bengio å‘è¡¨æ—¶é—´ï¼š(NIPS 2014) å®˜æ–¹ä»£ç  â€”â€”Learnable cost functionæŸå¤±å‡½æ•°æ—¶ä»æ•°æ®å­¦ä¹ å¾—åˆ°çš„ â€”â€”Mini-Max game based on Nash Equilibrium åšå¼ˆè®º â€”â€”Hard to training -no guarantee to equilibrium GAN GANç†è®º å™ªéŸ³ z ä¸€ç»´æ ‡é‡ ï¼ˆå‡åŒ€åˆ†å¸ƒé‡‡æ ·å¾—æ¥ï¼‰ï¼Œæ•°æ® x ä¹Ÿæ˜¯ ä¸€ç»´æ ‡é‡ï¼ˆå›¾ä¸­é»‘ç‚¹ï¼Œé«˜æ–¯åˆ†å¸ƒï¼‰ã€‚ Gå¯¹å™ªå£°zçš„æ˜ å°„ Då¯¹å™ªå£°zçš„æ˜ å°„åˆ°æ•°æ®ç©ºé—´çš„åˆ¤æ–­çº¿ ï¼ˆaï¼‰ï¼šG æŠŠ å‡åŒ€åˆ†å¸ƒé‡‡æ ·å¾—åˆ°çš„å™ªå£° z æ˜ å°„åˆ° ç»¿è‰²é«˜æ–¯åˆ†å¸ƒ ï¼ˆbï¼‰ï¼šD å°½å¯èƒ½åœ°å»å­¦ä¹ å¦‚ä½•åˆ¤æ–­ çœŸå®æ•°æ®å‡å€¼æ›´é å·¦ï¼Œå°†å·¦ä¾§çš„æ•°æ®åˆ¤æ–­ä¸ºçœŸ 1ï¼Œ å°†å³ä¾§æ•°æ®åˆ¤æ–­ä¸ºå‡ 0 ï¼ˆcï¼‰ï¼šG å°½å¯èƒ½åœ°å»ç³Šå¼„ Dï¼ŒæŠŠé«˜æ–¯åˆ†å¸ƒçš„å‡å€¼ä¸­å¿ƒå¾€å·¦æŒªåŠ¨ ï¼ˆdï¼‰ï¼šG æŠŠ æ¥è‡ªå‡åŒ€åˆ†å¸ƒçš„å™ªå£°ï¼Œæ˜ å°„æˆå’ŒçœŸå® data x ç›¸ä¼¼çš„é«˜æ–¯åˆ†å¸ƒã€‚D å¯¹æ¥è‡ªçœŸå®é‡‡æ ·çš„æ•°æ® or G ç”Ÿæˆçš„æ•°æ®æ— æ³•åˆ¤æ–­æ¥æºï¼Œæ¦‚ç‡éƒ½æ˜¯ 0.5 Step1ï¼šFix generator G , and update discriminator D. â€‹ è®­ç»ƒDï¼šD learns to assign high scores to real objects and low scores to generated objects.ï¼ˆæé«˜åˆ¤æ–­åŠ›ï¼Œåˆ†è¾¨çœŸå‡ï¼Œç”Ÿæˆæ•°æ®ä¸ºå‡ï¼‰ Step2ï¼šFix discriminator D, and update generator G . â€‹ è®­ç»ƒGï¼šG learns toâ€œfoolâ€the discriminator.ï¼ˆæé«˜é€ å‡èƒ½åŠ›ï¼Œæ”¹è¿›ç”Ÿæˆæ•°æ®ï¼Œä½¿å…¶æ¥è¿‘çœŸå®æ•°æ®ï¼‰ GAN_Alogorithm æµç¨‹ k ä¸èƒ½å¤ªå° â€“\u003e ä¿è¯ åˆ¤åˆ«å™¨ D æœ‰è¶³å¤Ÿçš„æ›´æ–° k ä¸èƒ½å¤ªå¤§ â€“\u003e D è¿‡äºå®Œç¾ï¼Œ$D(G(z^{x(i)}) = 0$ï¼Œå¯¹å€¼ä¸º 0 æ±‚å¯¼ï¼ŒG æ¢¯åº¦æ›´æ–°æœ‰å›°éš¾ k çš„è®¾è®¡ç›®æ ‡ï¼šä½¿å¾— D å’Œ G çš„æ›´æ–°è¿›åº¦å·®ä¸å¤š ","date":"2023-06-05","objectID":"/posts/deeplearning/generative-model/gan/:1:0","tags":["Deep Learning","ç”Ÿæˆæ¨¡å‹"],"title":"GAN","uri":"/posts/deeplearning/generative-model/gan/"},{"categories":["Deep Learning"],"content":"å…¨å±€æœ€ä¼˜è§£è¯æ˜ GAN $P_{data}$ï¼š${x_i}_{i=1}^N$ $P_g(x;\\theta_g)$ï¼šgeneratorï¼Œ$G(z;\\theta_g)$ $y|x$ï¼šdiscriminaterï¼Œ$P(y=1|x)=D(x)$ï¼Œ$P(y=0|x)=1-D(x)$ $$ \\begin{equation} â€‹ V(D,G) = \\mathbb{E}_{x\\sim P_{data}}[\\log D(x)] + \\mathbb{E}_{x\\sim P_{z}}[\\log (1-D(G(z)))] \\end{equation} $$$$ \\begin{equation} â€‹ \\theta_g = \\arg\\max_{\\theta_g} \\sum_{i=1}^N \\log P_g(x_i) \\end{equation} $$$$ \\arg\\min_{\\theta_g} \\text{KL}(P_{data}\\|P_g) $$$$ \\begin{equation} â€‹ \\begin{split} â€‹ \\max_D V(D,G) = \u0026 \\int P_{\\text{data}} \\log D dx + \\int P_g \\log(1-D) dx \\\\ â€‹ =\u0026 \\int (P_{\\text{data}} \\log D + P_g \\log(1-D)) dx â€‹ \\end{split} \\end{equation} $$$$ \\begin{equation} â€‹ \\begin{split} â€‹ \\frac{\\partial \\max_D V(D,G)}{\\partial D} = \u0026 \\frac{\\partial}{\\partial D} \\int \\left[ P_{\\text{data}} \\log D + P_g \\log(1-D) \\right]dx \\\\ â€‹ = \u0026 \\int \\frac{\\partial}{\\partial D} \\left[ P_{\\text{data}} \\log D + P_g \\log(1-D) \\right]dx \\\\ = \u0026 \\int P_{\\text{data} }\\cdot \\frac{1}{D} + P_g \\frac{-1}{1-D} dx \\\\ â€‹ = \u0026 0 \\\\ â€‹ \\end{split} \\end{equation} $$$$ \\begin{equation} â€‹ D_G^\\ast = \\frac{P_{\\text{data}}}{P_{\\text{data}} + P_{g}} \\end{equation} $$$$ \\begin{equation} â€‹ \\begin{split} â€‹ \\min_G \\max_D V(D,G) = \u0026 \\min_G V(D_G^\\ast,G) \\\\ â€‹ = \u0026 \\min_G \\mathbb{E}_{x\\sim P_{\\text{data}}} \\left[ \\log \\frac{P_{\\text{data}}}{P_{\\text{data}} + P_{g}}\\right] + \\mathbb{E}_{x\\sim P_{g}} \\left[ \\log \\frac{P_g}{P_{\\text{data}} + P_{g}}\\right] \\\\ = \u0026 \\min_G \\mathbb{E}_{x\\sim P_{\\text{data}}} \\left[ \\log \\frac{P_{\\text{data}}}{\\frac{P_{\\text{data}} + P_{g}}{2}} \\cdot \\frac{1}{2}\\right] + \\mathbb{E}_{x\\sim P_{g}} \\left[ \\log \\frac{P_g}{\\frac{P_{\\text{data}} + P_{g}}{2}} \\cdot \\frac{1}{2}\\right] \\\\ â€‹ = \u0026 \\min_G \\text{KL}\\left[ P_{\\text{data}} \\| \\frac{P_{\\text{data}} + P_{g}}{2} \\right] + log\\frac{1}{2} +\\text{KL}\\left[ P_{g} \\| \\frac{P_{\\text{data}} + P_{g}}{2} \\right]+ log\\frac{1}{2} \\\\ = \u0026 \\min_G (-log 4+2\\cdot JS(P_{data}||P_g))\\\\ â€‹ \\geq \u0026 - \\log 4 â€‹ \\end{split} \\end{equation} $$å½“ä¸”ä»…å½“$P_{\\text{data}} = P_{g} = \\frac{P_{\\text{data}} + P_{g}}{2}$æ—¶ï¼Œç­‰å·æˆç«‹ã€‚æ­¤æ—¶ï¼Œ$P^\\ast_g = P_d,P^\\ast_d = \\frac{1}{2}$ã€‚ KLæ•£åº¦ï¼š $$ KL(P||Q)=\\sum P(x) log\\frac{P(x)}{Q(x)} or \\int P(x) log\\frac{P(x)}{Q(x)} dx $$JSæ•£åº¦ï¼š $$ JS(P_1 || P_2)=\\frac{1}{2}KL(P_1||\\frac{P_1+P_2}{2})+\\frac{1}{2}KL(P_2||\\frac{P_1+P_2}{2}) $$","date":"2023-06-05","objectID":"/posts/deeplearning/generative-model/gan/:2:0","tags":["Deep Learning","ç”Ÿæˆæ¨¡å‹"],"title":"GAN","uri":"/posts/deeplearning/generative-model/gan/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» è¶£å‘³demo äº¤äº’å¼å¯è§†åŒ–GAN Labï¼šhttps://poloclub.github.io/ganlab äº¤äº’å¼å¯è§†åŒ–GAN Labè§†é¢‘è®²è§£ï¼šhttps://www.bilibili.com/video/BV1R44y1377T ç…§ç‰‡è½¬åŠ¨æ¼«AnimeGANï¼šhttps://github.com/TachibanaYoshino/AnimeGAN è‹±ä¼Ÿè¾¾GauGAN2ç¥ç¬”é©¬è‰¯ï¼šhttp://gaugan.org/gaugan2/ ä¸å­˜åœ¨çš„äººè„¸ï¼šhttps://thispersondoesnotexist.com/ ä¸å­˜åœ¨çš„èŠ±ç“¶ï¼šhttps://thisvesseldoesnotexist.com ä¸å­˜åœ¨çš„æ¢—å›¾ï¼šhttps://imgflip.com/ai-meme é»‘ç™½è€ç…§ç‰‡ä¸Šè‰²ï¼šhttps://deepai.org/machine-learning-model/colorizer é»‘ç™½è€ç…§ç‰‡ä¸Šè‰²ï¼šhttps://github.com/jantic/DeOldify é»‘ç™½è€ç…§ç‰‡ä¸Šè‰²ï¼šhttps://www.myheritage.com/incolor OpenAI DALLE-2ï¼šhttps://openai.com/dall-e-2 Bç«™ï¼šGANè®ºæ–‡é€æ®µç²¾è¯»ã€è®ºæ–‡ç²¾è¯»ã€‘ Bç«™ï¼šæå®æ¯…ç”Ÿæˆå¯¹æŠ—ç½‘ç»œå…¬å¼€è¯¾ Bç«™ï¼šã€æœºå™¨å­¦ä¹ ã€‘ç™½æ¿æ¨å¯¼ç³»åˆ—(ä¸‰åä¸€) ï½ ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ(GAN) ç™½æ¿æ¨å¯¼ç³»åˆ—ç¬”è®° GANåŠ¨ç‰©å›­ OpenMMLabå¼€æºå›¾åƒç”Ÿæˆç®—æ³•åº“MMGeneration å„ç§GANçš„Keraså®ç° An Annotated Proof of Generative Adversarial Networks with Implementation Notes Understanding Generative Adversarial Networks ","date":"2023-06-05","objectID":"/posts/deeplearning/generative-model/gan/:3:0","tags":["Deep Learning","ç”Ÿæˆæ¨¡å‹"],"title":"GAN","uri":"/posts/deeplearning/generative-model/gan/"},{"categories":["Deep Learning"],"content":"SSD","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/ssd/","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"SSD","uri":"/posts/deeplearning/object-detection/ssd/"},{"categories":["Deep Learning"],"content":"SSD æ–‡ç« æ ‡é¢˜ï¼šSSD: Single Shot MultiBox Detector ä½œè€…ï¼šWei Liu, Dragomir Anguelov, Dumitru Erhan, Christian Szegedy å‘è¡¨æ—¶é—´ï¼š(ECCV 2016) ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/ssd/:1:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"SSD","uri":"/posts/deeplearning/object-detection/ssd/"},{"categories":["Deep Learning"],"content":"è®ºæ–‡ç»“æ„ Abstractï¼š æå‡ºäº†SSDç›®æ ‡æ£€æµ‹ç®—æ³•ï¼š åŸºäºç«¯å¯¹ç«¯å­¦ä¹ çš„ç›®æ ‡æ£€æµ‹ å°†è¾¹ç•Œæ¡†çš„è¾“å‡ºç©ºé—´ç¦»æ•£åŒ–ä¸ºä¸€ç»„é»˜è®¤æ¡† é¢„æµ‹ç»“æœæ¥è‡ªäºä¸åŒå±‚æ¬¡çš„ç‰¹å¾å›¾ ä»‹ç»äº†SSDçš„æ€§èƒ½ï¼š 300*300åˆ†è¾¨ç‡çš„è¾“å…¥ï¼ŒVOC2007æµ‹è¯•é›†ä¸Šè·å¾—74.3%mAPå’Œ59FPS 512*512åˆ†è¾¨ç‡çš„è¾“å…¥ï¼Œè·å¾—76.9%mAPï¼Œè¶…è¿‡äº†æœ€å…ˆè¿›çš„Faster Rcnn Introductionï¼šä»‹ç»äº†å½“å‰ç›®æ ‡æ£€æµ‹çš„å¸¸ç”¨æ–¹æ³•;ä»‹ç»äº†å½“å‰ç›®æ ‡æ£€æµ‹æ–¹æ³•çš„ç¼ºç‚¹;.ç®€å•ä»‹ç»äº†SSDçš„æ”¹è¿›,æˆæœå’Œè´¡çŒ®ã€‚ Our improvements include using a small convolutional filter to predict object categories and offsets in bounding box locations, using separate predictors (filters) for different aspect ratio detections, and applying these filters to multiple feature maps from the later stages of a network in order to perform detection at multiple scales. SSDçš„æ”¹è¿›ï¼š ä¸éœ€è¦é¢„å…ˆæå‡ºå€™é€‰æ¡† ä¸éœ€è¦åƒç´ æˆ–è€…ç‰¹å¾çš„é‡é‡‡æ · é‡‡ç”¨äº†å¤šå°ºåº¦çš„fliters åœ¨å¤šä¸ªç‰¹å¾å›¾ä¸Šé¢„æµ‹ SSDçš„è´¡çŒ®ï¼š SSD æ–¹æ³•çš„æ ¸å¿ƒæ˜¯ä½¿ç”¨å°å·ç§¯æ»¤æ³¢å™¨æ¥é¢„æµ‹ç‰¹å¾å›¾ä¸Šå›ºå®šçš„ä¸€ç»„é»˜è®¤è¾¹ç•Œæ¡†çš„ç±»åˆ«åˆ†æ•°å’Œä½ç½®åç§»ã€‚ ä¸ºäº†å®ç°é«˜æ£€æµ‹ç²¾åº¦ï¼Œæˆ‘ä»¬ä»ä¸åŒå°ºåº¦çš„ç‰¹å¾å›¾äº§ç”Ÿä¸åŒå°ºåº¦çš„é¢„æµ‹ï¼Œå¹¶ä¸”é€šè¿‡å®½é«˜æ¯”æ¥æ˜ç¡®åœ°åˆ†ç¦»é¢„æµ‹ã€‚ æ€»ä¹‹ï¼Œè¿™äº›è®¾è®¡ç‰¹æ€§å¾—åˆ°äº†ç®€å•çš„ç«¯åˆ°ç«¯è®­ç»ƒå’Œé«˜ç²¾åº¦ï¼Œè¿›ä¸€æ­¥æé«˜é€Ÿåº¦å’Œç²¾åº¦çš„æƒè¡¡ï¼Œå³ä½¿è¾“å…¥ç›¸å¯¹ä½åˆ†è¾¨ç‡å›¾åƒã€‚ The Single Shot Detector (SSD)ï¼š Model: ç®—æ³•æµç¨‹ï¼š è¾“å…¥ä¸€å¼ å›¾ç‰‡ï¼Œç»è¿‡CNNæå–ç‰¹å¾ï¼Œå¹¶ç”Ÿæˆfeautre map; æŠ½å–å…¶ä¸­å…­å±‚feautre map,ç„¶ååœ¨feautre mapçš„æ¯ä¸ªç‚¹ç”Ÿæˆdefault box; å°†ç”Ÿæˆçš„default boxæ‰€æœ‰é›†åˆï¼Œä¸¢åˆ°NMS(éæå¤§å€¼æŠ‘åˆ¶)ä¸­ï¼Œè¾“å‡ºç­›é€‰åçš„default boxã€‚ SSDç½‘ç»œ â€‹ è¯´æ˜ï¼šClassifierï¼šConvï¼š3Ã—3Ã—4Ã—(Classes+4)ï¼š3Ã—3å·ç§¯æ ¸ï¼Œ4boxes,classesç±»åˆ«ï¼Œ4 offsets. SSDç½‘ç»œ Multi-scale feature maps for detectionå¤šå°ºåº¦ç‰¹å¾å›¾æ£€æµ‹ åœ¨åŸºç¡€ç½‘ç»œ(VGG16)ç»“æ„åï¼Œæ·»åŠ äº†é¢å¤–çš„å·ç§¯å±‚ï¼Œè¿™äº›å·ç§¯å±‚çš„å¤§å°æ˜¯é€å±‚é€’å‡çš„ï¼Œå¯ä»¥åœ¨å¤šå°ºåº¦ä¸‹è¿›è¡Œ predictionsã€‚ Convolutional predictors for detectionæ£€æµ‹çš„å·ç§¯é¢„æµ‹å™¨ æ¯ä¸ªæ·»åŠ çš„ç‰¹å¾å±‚ï¼ˆæˆ–å¯é€‰çš„åŸºç¡€ç½‘ç»œçš„ç°æœ‰ç‰¹å¾å±‚ï¼‰å¯ä»¥ä½¿ç”¨ä¸€ç»„å·ç§¯æ»¤æ³¢å™¨äº§ç”Ÿå›ºå®šçš„é¢„æµ‹é›†åˆã€‚å¯¹äºå…·æœ‰p ä¸ªé€šé“çš„å¤§å°ä¸ºmÃ—n çš„ç‰¹å¾å±‚ï¼Œä½¿ç”¨3Ã—3Ã—p å·ç§¯æ ¸å·ç§¯æ“ä½œï¼Œäº§ç”Ÿç±»åˆ«çš„åˆ†æ•°æˆ–ç›¸å¯¹äºé»˜è®¤æ¡†çš„åæ ‡åç§»ã€‚åœ¨æ¯ä¸ªåº”ç”¨å·ç§¯æ ¸è¿ç®—çš„mÃ—n å¤§å°ä½ç½®å¤„ï¼Œäº§ç”Ÿä¸€ä¸ªè¾“å‡ºå€¼ã€‚è¾¹ç•Œæ¡†ç›¸å¯¹äºé»˜è®¤æ¡†æµ‹é‡çš„åç§»è¾“å‡ºå€¼ã€‚ Default boxes and aspect ratiosé»˜è®¤æ¡†ä¸å®½é«˜æ¯” å°†ä¸€ç»„é»˜è®¤è¾¹ç•Œæ¡†ä¸é¡¶å±‚ç½‘ç»œæ¯ä¸ªç‰¹å¾å›¾å•å…ƒå…³è”ã€‚é»˜è®¤æ¡†å¯¹ç‰¹å¾å›¾ä½œå·ç§¯è¿ç®—ï¼Œä½¿å¾—æ¯ä¸ªæ¡†å®ä¾‹ç›¸å¯¹äºå…¶å¯¹åº”å•å…ƒæ ¼çš„ä½ç½®æ˜¯å›ºå®šçš„ã€‚åœ¨æ¯ä¸ªç‰¹å¾æ˜ å°„å•å…ƒä¸­ï¼Œæˆ‘ä»¬é¢„æµ‹ç›¸å¯¹äºå•å…ƒæ ¼ä¸­çš„é»˜è®¤æ¡†å½¢çŠ¶çš„åç§»ï¼Œä»¥åŠæ¯ä¸ªæ¡†ä¸­å®ä¾‹çš„æ¯ç±»åˆ†æ•°ã€‚å…·ä½“æ¥è¯´ï¼Œå¯¹äºåœ¨ç»™å®šä½ç½®çš„k ä¸ªæ¡†ä¸­æ¯ä¸ªæ¡†ï¼Œæˆ‘ä»¬è®¡ç®—c ç±»åˆ†æ•°(ä½ç½®å’Œç½®ä¿¡åº¦ï¼‰å’Œç›¸å¯¹äºåŸå§‹é»˜è®¤æ¡†çš„4 ä¸ªåç§»é‡ã€‚äºæ˜¯ï¼Œåœ¨ feature map ä¸­çš„æ¯ä¸€ä¸ª feature map cell ä¸Šï¼Œå°±éœ€è¦æœ‰$ (c+4)\\times k$ ä¸ª filtersã€‚å¯¹äºä¸€å¼ $ mÃ—n$å¤§å°çš„ feature mapï¼Œå³ä¼šäº§ç”Ÿ$(c+4)\\times k\\times m\\times n$ ä¸ªè¾“å‡ºç»“æœã€‚ é»˜è®¤æ¡†ä¸å®½é«˜æ¯” feature map cell å°±æ˜¯å°† feature map åˆ‡åˆ†æˆ 8Ã—8 æˆ–è€… 4Ã—4 ä¹‹åçš„ä¸€ä¸ªæ ¼å­ï¼› è€Œ default box å°±æ˜¯æ¯ä¸€ä¸ªæ ¼å­ä¸Šï¼Œä¸€ç³»åˆ—å›ºå®šå¤§å°çš„ boxï¼Œå³å›¾ä¸­è™šçº¿æ‰€å½¢æˆçš„ä¸€ç³»åˆ— boxesã€‚ Training Matching strategåŒ¹é…ç­–ç•¥ (MutiBox )ï¼šthe best jaccard overlap(IOU)åŒ¹é…æ¯ä¸€ä¸ªground truth box å’Œ default box. ä¸MutiBoxä¸åŒçš„æ˜¯ï¼šåªè¦ jaccard overlap(IOU)å¤§äºä¸€ä¸ªthresholdé˜ˆå€¼(0.5)å³é…å¯¹æˆåŠŸã€‚ Whyï¼šä½¿å¾—æœ‰å¤šä¸ªé‡å é»˜è®¤æ¡†æ—¶ç½‘ç»œé¢„æµ‹è·å¾—é«˜ç½®ä¿¡åº¦ï¼Œä¸å•å•åªæ‰¾åŒ¹é…åº¦åšé«˜çš„æ¡†ã€‚ Training objective $x^p_{ij}={1ï¼Œ0}$ï¼›ç¬¬$i$ä¸ªdefault boxä¸ç±»åˆ«$p$çš„ç¬¬$j$ä¸ªground truth boxç›¸åŒ¹é…æ—¶å€¼ä¸º1ã€‚ æ ¹æ®åŒ¹é…ç­–ç•¥ï¼Œå¿…æœ‰$\\sum_i x^p_{ij}\\geq1$ã€‚ objective loss functionæ€»ä½“ç›®æ ‡æŸå¤±å‡½æ•°æ˜¯ä½ç½®æŸå¤±ï¼ˆlocï¼‰å’Œç½®ä¿¡æŸå¤±ï¼ˆconfï¼‰çš„åŠ æƒå’Œï¼š :$L(x,c,l,g)=\\frac{1}{N}(L_{conf}(x,c)+\\alpha L_{loc}(x,l,g))$ Næ˜¯ä¸ground truth boxç›¸åŒ¹é…çš„default boxesçš„ä¸ªæ•° $L_{loc}$æ˜¯ç±»ä¼¼äºFast RCNN çš„é¢„æµ‹æ¡†(l)å’ŒçœŸå®æ ‡ç­¾å€¼æ¡†(g)å‚æ•°ä¹‹é—´çš„Smooth L1 loss. $L_{conf}$ç½®ä¿¡æŸå¤±æ˜¯softmax æŸå¤±å¯¹å¤šç±»åˆ«ç½®ä¿¡$(c)$å’Œæƒé‡é¡¹$\\alpha$è®¾ç½®ä¸º1 çš„äº¤å‰éªŒè¯ã€‚ Choosing scales and aspect ratios for default boxesé€‰æ‹©é»˜è®¤æ¡†çš„æ¯”ä¾‹å’Œå®½é«˜æ¯” è¶Šåº•å±‚çš„layersï¼Œä¿ç•™çš„å›¾åƒç»†èŠ‚è¶Šå¤šã€‚ lower and upper feature maps for detection. $s_k=s_{min}+\\frac{s_{max}-s_{min}}{m-1}(k-1), \\ k\\in[1,m]$ $s_k$ä¸ºæ¯ä¸€ä¸ªç‰¹å¾å›¾ä¸­é»˜è®¤æ¡†å°ºå¯¸å¤§å°ï¼Œm ä¸ºfeature mapsï¼Œå…¶ä¸­$s_{min}$ æ˜¯0.2ï¼Œ$s_{max}$ æ˜¯0.95ï¼Œæ„å‘³ç€æœ€ä½å±‚å…·æœ‰0.2 çš„åˆ»åº¦ï¼Œæœ€é«˜å±‚å…·æœ‰0.95 çš„åˆ»åº¦ï¼Œå¹¶ä¸”å…¶é—´çš„æ‰€æœ‰å±‚æ˜¯è§„åˆ™é—´éš”çš„ã€‚ å®½é«˜æ¯”$a _r={1,2,3,\\frac{1}{2},\\frac{1}{3}}$ï¼›widthï¼š$w^a_k=s_k\\sqrt a_r$ï¼›heightï¼š$h^a_k=s_k/\\sqrt a_r$ å½“$a_r$ä¸º1æ—¶ï¼Œå¢åŠ ä¸€ä¸ªé»˜è®¤æ¡†ï¼Œ$sâ€™k=\\sqrt{s_ks{k+1}}$ã€‚æ¯ä¸ªfeature map locationæœ‰6ä¸ªé»˜è®¤æ¡†ã€‚ æ¯ä¸ªdefault boxçš„ä¸­å¿ƒï¼š$(\\frac{i+0.5}{|f_k|},\\frac{j+0.5}{|f_k|})$ ï¼Œ$|f_k|$ä¸ºç¬¬kä¸ªfeature mapçš„å¤§å°ï¼Œ$i,j\\in[0,|f_k|]$ Hard negative mining ç”Ÿæˆçš„é¢„æµ‹æ¡†è´Ÿæ ·æœ¬Negative boxesè¿œå¤šäºPositive boxes.ï¼ˆä¸å¹³è¡¡ï¼Œè®­ç»ƒéš¾ä»¥æ”¶æ•›ï¼‰ è§£å†³æ–¹æ¡ˆï¼šæ¯ä¸ªé»˜è®¤æ¡†çš„æœ€é«˜ç½®ä¿¡åº¦å¯¹å®ƒä»¬è¿›è¡Œæ’åºï¼Œå¹¶é€‰æ‹©å‰é¢çš„é‚£äº›ï¼Œä½¿å¾—æ­£è´Ÿæ ·æœ¬ä¹‹é—´çš„æ¯”ç‡æœ€å¤šä¸º3ï¼š1ï¼Œä»¥ä»£æ›¿ä½¿ç”¨æ‰€æœ‰çš„è´Ÿæ ·æœ¬ã€‚ Data augmentationæ•°æ®å¢å¹¿ Experimental Resultsï¼š PASCAL VOC2007 Model analysis PASCAL VOC2012 COCO Preliminary ILSVRC results Data Augmentation for Small Object Accuracy Inference time ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/ssd/:1:1","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"SSD","uri":"/posts/deeplearning/object-detection/ssd/"},{"categories":["Deep Learning"],"content":"YOLO","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"[toc] ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:0:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"YOLO V1 æ–‡ç« æ ‡é¢˜ï¼šYou Only Look Once:Unified, Real-Time Object Detection ä½œè€…ï¼šJoseph Redmon, Santosh Divvalay, Ross Girshick, Ali Farhadi å‘è¡¨æ—¶é—´ï¼š(CVPR 2016) YOLOç®—æ³•æ˜¯å•é˜¶æ®µç›®æ ‡æ£€æµ‹çš„ç»å…¸ç®—æ³•ï¼Œèƒ½å®ç°å¿«é€Ÿã€å®æ—¶ã€é«˜ç²¾åº¦çš„å›¾åƒè¯†åˆ«å’Œç›®æ ‡æ£€æµ‹ã€‚ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:1:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Abstract ä»‹ç»yoloç®—æ³•åŠå…¶é€Ÿåº¦å¿«çš„ä¼˜ç‚¹ â€‹ å°†æ£€æµ‹å˜ä¸ºä¸€ä¸ª regression problemï¼ŒYOLO ä»è¾“å…¥çš„å›¾åƒï¼Œä»…ä»…ç»è¿‡ä¸€ä¸ª neural networkï¼Œç›´æ¥å¾—åˆ° bounding boxes ä»¥åŠæ¯ä¸ª bounding box æ‰€å±ç±»åˆ«çš„æ¦‚ç‡ã€‚æ­£å› ä¸ºæ•´ä¸ªçš„æ£€æµ‹è¿‡ç¨‹ä»…ä»…æœ‰ä¸€ä¸ªç½‘ç»œï¼Œæ‰€ä»¥å®ƒå¯ä»¥ç›´æ¥ end-to-end çš„ä¼˜åŒ–ã€‚ é€Ÿåº¦å¿«ï¼šæ ‡å‡†çš„ YOLO ç‰ˆæœ¬æ¯ç§’å¯ä»¥å®æ—¶åœ°å¤„ç† 45 å¸§å›¾åƒã€‚ä¸€ä¸ªè¾ƒå°ç‰ˆæœ¬ï¼šFast YOLOï¼Œå¯ä»¥æ¯ç§’å¤„ç† 155 å¸§å›¾åƒï¼Œå®ƒçš„ mAPï¼ˆmean Average Precisionï¼‰ ä¾ç„¶å¯ä»¥è¾¾åˆ°å…¶ä»–å®æ—¶æ£€æµ‹ç®—æ³•çš„ä¸¤å€ã€‚ å‡ºç°è¾ƒå¤šcoordinate errorså®šä½è¯¯å·®ï¼Œä½†YOLO æœ‰æ›´å°‘çš„ background errorsèƒŒæ™¯è¯¯å·®ã€‚ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:2:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Introduction yoloç®€å•åŸç†å›¾ï¼›ä¸R-CNNç›¸æ¯”yoloçš„ä¼˜ç‚¹ï¼›ä¸ä¼ ç»Ÿæ£€æµ‹ç®—æ³•ç›¸æ¯”yoloçš„ä¼˜ç‚¹ yoloæµç¨‹å›¾ Resize image.å°†å›¾ç‰‡å°ºå¯¸å˜ä¸º448*448 Run convolutional network.è¾“å…¥åˆ°ç¥ç»ç½‘ç»œä¸­ Non-max suppression.ä½¿ç”¨éæå¤§å€¼æŠ‘åˆ¶åˆ°æœ€åç»“æœ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:3:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Unified Detection one stage detectionç®—æ³•çš„åŸç†ä¸ç»†èŠ‚ yoloç®—æ³•åŸç† å°†å›¾ç‰‡éšå¼çš„åˆ†ä¸ºS*Sä¸ªç½‘æ ¼(grid cell) ç‰©ä½“çš„ä¸­å¿ƒè½åœ¨å“ªä¸ªç½‘æ ¼å†…ï¼Œå“ªä¸ªç½‘æ ¼å°±è´Ÿè´£é¢„æµ‹è¿™ä¸ªç‰©ä½“ æ¯ä¸ªç½‘æ ¼éœ€è¦é¢„æµ‹Bä¸ªbounding boxï¼ŒCä¸ªç±»åˆ«(è¿™Bä¸ªæ¡†é¢„æµ‹çš„ä¸ºä¸€ä¸ªç±»åˆ«ï¼Œä¸€ä¸ªç‰©ä½“) å¦‚æœä¸€ä¸ªç½‘æ ¼å†…å‡ºç°ä¸¤ä¸ªç‰©ä½“ä¸­å¿ƒï¼Ÿ ä¸€ä¸ªç½‘æ ¼é‡ŒåŒ…å«äº†å¾ˆå¤šå°ç‰©ä½“ï¼Ÿ yoloå¯¹é çš„å¾ˆè¿‘çš„ç‰©ä½“ä»¥åŠå°ç›®æ ‡ç¾¤ä½“æ£€æµ‹æ•ˆæœä¸æ˜¯å¾ˆå¥½ æ¯ä¸ªæ¡†åŒ…å«äº†ä½ç½®ä¿¡æ¯å’Œç½®ä¿¡åº¦(x,y,w,h,confidence) xyè¡¨ç¤ºbounding boxçš„ä¸­å¿ƒç›¸å¯¹äºcellå·¦ä¸Šè§’åæ ‡åç§» å®½é«˜åˆ™æ˜¯ç›¸å¯¹äºæ•´å¼ å›¾ç‰‡çš„å®½é«˜è¿›è¡Œå½’ä¸€åŒ–çš„ã€‚ï¼ˆç‰©ä½“ç›¸å¯¹grid cellçš„å¤§å°ï¼‰ å›¾ä¸­æ¡†çº¿ç²—ç»†è¡¨ç¤ºconfidenceçš„å¤§å° ä¸€å¼ å›¾é¢„æµ‹çš„ä¿¡æ¯æœ‰S*S*(B*5+C)ï¼ˆæ³¨æ„ï¼šclassä¿¡æ¯æ˜¯é’ˆå¯¹æ¯ä¸ªç½‘æ ¼çš„ï¼Œconfidenceä¿¡æ¯æ˜¯é’ˆå¯¹æ¯ä¸ªbounding boxçš„ã€‚ï¼‰ Comfidence Scoreï¼šæŒ‡çš„æ˜¯ä¸€ä¸ªè¾¹ç•Œæ¡†ä¸­åŒ…å«æŸä¸ªç‰©ä½“çš„å¯èƒ½æ€§å¤§å°ä»¥åŠä½ç½®çš„å‡†ç¡®æ€§ï¼ˆå³æ˜¯å¦æ°å¥½åŒ…è£¹è¿™ä¸ªç‰©ä½“ï¼‰ã€‚ Pr(object)æ˜¯bounding boxå†…å­˜åœ¨å¯¹è±¡çš„æ¦‚ç‡ã€‚Pr(object)å¹¶ä¸ç®¡æ˜¯å“ªä¸ªå¯¹è±¡ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯æœ‰æˆ–æ²¡æœ‰å¯¹è±¡çš„æ¦‚ç‡ã€‚å¦‚æœæœ‰objectè½åœ¨ä¸€ä¸ªgrid cellé‡Œï¼Œç¬¬ä¸€é¡¹å–1ï¼Œå¦åˆ™å–0ã€‚ç¬¬äºŒé¡¹æ˜¯é¢„æµ‹çš„bounding boxå’Œå®é™…çš„groundtruthä¹‹é—´çš„IoUå€¼ã€‚å…¶ä¸­IOUè¡¨ç¤ºäº†é¢„æµ‹çš„bboxä¸çœŸå®bboxï¼ˆGTï¼‰çš„æ¥è¿‘ç¨‹åº¦ã€‚ç½®ä¿¡åº¦é«˜è¡¨ç¤ºè¿™é‡Œå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ä¸”ä½ç½®æ¯”è¾ƒå‡†ç¡®ï¼Œç½®ä¿¡åº¦ä½è¡¨ç¤ºå¯èƒ½æ²¡æœ‰å¯¹è±¡æˆ–å³ä¾¿æœ‰å¯¹è±¡ä¹Ÿå­˜åœ¨è¾ƒå¤§çš„ä½ç½®åå·®ã€‚ è®­ç»ƒé˜¶æ®µï¼š Pr(object)æ ‡ç­¾å€¼é0å³1ï¼›$IOU^{truth}_{pred}$æŒ‰å®é™…è®¡ç®— ä¸¤è€…ä¹˜ç§¯å³ä¸ºComfidence Scoreçš„æ ‡ç­¾å€¼ å¯¹äºè´Ÿè´£é¢„æµ‹ç‰©ä½“çš„boxï¼Œè¿™ä¸ªä¾¿ç­¾å€¼å°±æ˜¯$IOU^{truth}_{pred}$ é¢„æµ‹é˜¶æ®µï¼š å›å½’å¤šå°‘å°±æ˜¯å¤šå°‘ éšå«åŒ…å«ä¸¤è€… YOLOçš„bboxæ˜¯æ²¡æœ‰è®¾å®šå¤§å°å’Œå½¢çŠ¶çš„ï¼Œåªæ˜¯å¯¹ä¸¤ä¸ªbboxè¿›è¡Œé¢„æµ‹ï¼Œä¿ç•™é¢„æµ‹æ¯”è¾ƒå‡†çš„bboxã€‚YOLOçš„2ä¸ªbounding boxäº‹å…ˆå¹¶ä¸çŸ¥é“ä¼šåœ¨ä»€ä¹ˆä½ç½®ï¼Œåªæœ‰ç»è¿‡å‰å‘è®¡ç®—ï¼Œç½‘ç»œä¼šè¾“å‡º2ä¸ªbounding boxï¼Œè¿™ä¸¤ä¸ªbounding boxä¸æ ·æœ¬ä¸­å¯¹è±¡å®é™…çš„bounding boxè®¡ç®—IOUã€‚ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:4:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Network design yoloç½‘ç»œç»“æ„å›¾ yoloç½‘ç»œç»“æ„ 24å±‚å·ç§¯å±‚æå–å›¾åƒç‰¹å¾ 2å±‚å…¨è¿æ¥å±‚å›å½’å¾—åˆ°$7\\times7\\times30$çš„Tensor ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:4:1","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Training yoloè®­ç»ƒæ–¹æ³•ï¼ŒæŸå¤±å‡½æ•°åŠå‚æ•° æœ€åä¸€å±‚ç”¨çº¿æ€§æ¿€æ´»å‡½æ•°ï¼Œå…¶ä»–å±‚ç”¨leaky ReLU; ç›¸æ¯”äºReLUï¼Œleakyå¹¶ä¸ä¼šè®©è´Ÿæ•°ç›´æ¥ä¸º0ï¼Œè€Œæ˜¯ä¹˜ä»¥ä¸€ä¸ªå¾ˆå°çš„ç³»æ•°ï¼ˆæ’å®šï¼‰ï¼Œä¿ç•™è´Ÿæ•°è¾“å‡ºï¼Œä½†æ˜¯è¡°å‡è´Ÿæ•°è¾“å‡º æŸå¤±å‡½æ•° è®¾è®¡ç›®æ ‡å°±æ˜¯è®©åæ ‡ï¼ˆx,y,w,hï¼‰ï¼Œconfidenceï¼Œclassification è¿™ä¸ªä¸‰ä¸ªæ–¹é¢è¾¾åˆ°å¾ˆå¥½çš„å¹³è¡¡ã€‚ yolov1æŸå¤±å‡½æ•° $\\mathbb I_{i j}^{obj}$ï¼šç¬¬$i$ä¸ªgrid cellçš„ç¬¬$j$ä¸ªbounding boxè‹¥==è´Ÿè´£==é¢„æµ‹ç‰©ä½“åˆ™ä¸º1ï¼Œå¦åˆ™ä¸º0ï¼› $\\mathbb I_{i j}^{nobj}$ï¼šç¬¬$i$ä¸ªgrid cellçš„ç¬¬$j$ä¸ªbounding boxè‹¥==ä¸è´Ÿè´£==é¢„æµ‹ç‰©ä½“åˆ™ä¸º1ï¼Œå¦åˆ™ä¸º0ï¼› $\\mathbb I_{i }^{obj}$ï¼šç¬¬$i$ä¸ªgrid cellæ˜¯å¦åŒ…å«ç‰©ä½“ï¼Œå³æ˜¯å¦æœ‰ground truth æ¡†çš„ä¸­å¿ƒç‚¹è½åœ¨æ­¤grid cellä¸­ï¼Œè‹¥æœ‰åˆ™ä¸º1ï¼Œå¦åˆ™ä¸º0 å…¨éƒ¨é‡‡ç”¨sum-squared error losså­˜åœ¨çš„é—®é¢˜ï¼š ç¬¬ä¸€ï¼Œ8ç»´çš„localization errorå’Œ20ç»´çš„classification erroråŒç­‰é‡è¦æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ï¼› ç¬¬äºŒï¼Œå¦‚æœä¸€ä¸ªç½‘æ ¼ä¸­æ²¡æœ‰objectï¼ˆä¸€å¹…å›¾ä¸­è¿™ç§ç½‘æ ¼å¾ˆå¤šï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šå°†è¿™äº›ç½‘æ ¼ä¸­çš„boxçš„confidence pushåˆ°0ï¼Œç›¸æ¯”äºè¾ƒå°‘çš„æœ‰objectçš„ç½‘æ ¼ï¼Œè¿™ç§åšæ³•æ˜¯overpoweringçš„ï¼Œè¿™ä¼šå¯¼è‡´ç½‘ç»œä¸ç¨³å®šç”šè‡³å‘æ•£ã€‚ è§£å†³åŠæ³•ï¼š æ›´é‡è§†8ç»´çš„åæ ‡é¢„æµ‹ï¼Œç»™è¿™äº›æŸå¤±å‰é¢èµ‹äºˆæ›´å¤§çš„loss weightï¼Œè®°ä¸º$\\lambda_{coord}$åœ¨pascal VOCè®­ç»ƒä¸­å–5ã€‚ å¯¹æ²¡æœ‰objectçš„boxçš„confidence lossï¼Œèµ‹äºˆå°çš„loss weightï¼Œè®°ä¸º$\\lambda_{noobj}$åœ¨pascal VOCè®­ç»ƒä¸­å–0.5ã€‚ æœ‰objectçš„boxçš„confidence losså’Œç±»åˆ«çš„lossçš„loss weightæ­£å¸¸å–1ã€‚ å¯¹ä¸åŒå¤§å°çš„bboxé¢„æµ‹ä¸­ï¼Œç›¸æ¯”äºå¤§bboxé¢„æµ‹åä¸€ç‚¹ï¼Œå°boxé¢„æµ‹åä¸€ç‚¹æ›´ä¸èƒ½å¿å—ã€‚è€Œsum-square error lossä¸­å¯¹åŒæ ·çš„åç§»lossæ˜¯ä¸€æ ·ã€‚ ä¸ºäº†ç¼“å’Œè¿™ä¸ªé—®é¢˜ï¼Œä½œè€…ç”¨äº†ä¸€ä¸ªæ¯”è¾ƒå–å·§çš„åŠæ³•ï¼Œå°±æ˜¯å°†boxçš„widthå’Œheightå–å¹³æ–¹æ ¹ä»£æ›¿åŸæœ¬çš„heightå’Œwidthã€‚ å¦‚ä¸‹å›¾ï¼šsmall bboxçš„æ¨ªè½´å€¼è¾ƒå°ï¼Œå‘ç”Ÿåç§»æ—¶ï¼Œååº”åˆ°yè½´ä¸Šçš„lossï¼ˆä¸‹å›¾ç»¿è‰²ï¼‰æ¯”big box(ä¸‹å›¾çº¢è‰²)è¦å¤§ã€‚ yolov1æŸå¤±å‡½æ•° è®­ç»ƒè®¾ç½® batchsize=64ï¼›momentum=0.9(åŠ¨é‡å› å­)ï¼›decay=0.0005(æƒé‡è¡°å‡$ L_2$æ­£åˆ™åŒ–) ç¬¬ä¸€ä¸ªè¿­ä»£å‘¨æœŸå­¦ä¹ ç‡ä»$10^{-3}$åˆ° $10^{-2}$ï¼›$10^{-2}$è®­ç»ƒç¬¬2-75è½®ï¼›$10^{-3}$å†è®­ç»ƒ30è½®ï¼›$10^{-4}$å†è®­ç»ƒ30è½®ï¼› åœ¨ç¬¬ä¸€ä¸ªè¿æ¥å±‚ä¹‹åï¼Œä¸¢å¼ƒå±‚ä½¿ç”¨=.05çš„æ¯”ä¾‹ï¼Œé˜²æ­¢å±‚ä¹‹é—´çš„äº’ç›¸é€‚åº” æ•°æ®å¢å¼ºï¼š å¼•å…¥åŸå§‹å›¾åƒ$20%$å¤§å°çš„éšæœºç¼©æ”¾å’Œè½¬æ¢ åœ¨HSVè‰²å½©ç©ºé—´ä¸­ä½¿ç”¨1.5çš„å› å­æ¥éšæœºè°ƒæ•´å›¾åƒçš„æ›å…‰å’Œé¥±å’Œåº¦ã€‚ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:4:2","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Inference yoloé¢„æµ‹é˜¶æ®µç»†èŠ‚ $$ Pr(Class_i|Object)*Pr(Object)*IOU^{truth}_{pred}=Pr(Object)*IOU^{truth}_{pred} $$ ç­‰å¼å·¦è¾¹ç¬¬ä¸€é¡¹å°±æ˜¯æ¯ä¸ªç½‘æ ¼é¢„æµ‹çš„ç±»åˆ«ä¿¡æ¯ï¼Œç¬¬äºŒä¸‰é¡¹å°±æ˜¯æ¯ä¸ªbounding boxé¢„æµ‹çš„confidenceã€‚è¿™ä¸ªä¹˜ç§¯å³encodeäº†é¢„æµ‹çš„boxå±äºæŸä¸€ç±»çš„æ¦‚ç‡ï¼Œä¹Ÿæœ‰è¯¥boxå‡†ç¡®åº¦çš„ä¿¡æ¯ã€‚ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:4:3","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Limitations of YOLO é€Ÿåº¦å¿«ï¼šæŠŠæ£€æµ‹ä½œä¸ºå›å½’é—®é¢˜å¤„ç†ï¼Œæµç¨‹ç®€å•ï¼Œä»…éœ€è¦è¾“å…¥ä¸€å¼ å›¾ æ³›åŒ–èƒ½åŠ›å¼ºï¼šyoloå¯ä»¥å­¦ä¹ åˆ°ç‰©ä½“çš„é€šç”¨ç‰¹å¾ï¼Œæ³›åŒ–èƒ½åŠ›æ›´å¥½ã€‚åº”ç”¨åœ¨æ–°é¢†åŸŸä¸ä¼šå´©æ‰ã€‚ å…¨å±€æ¨ç†ï¼šå¯¹æ•´å¼ å›¾å¤„ç†ï¼Œåˆ©ç”¨å…¨å›¾ä¿¡æ¯ï¼Œå‡é˜³æ€§é”™è¯¯å°‘ï¼ˆèƒŒæ™¯å½“ä½œç‰©ä½“é”™è¯¯ç‡å°‘ï¼‰ ç²¾åº¦ä¸æœ€å…ˆè¿›çš„ç®—æ³•æ¯”ä¸é«˜ï¼Œå¯¹å°ç‰©ä½“ä¸å‹å¥½ åˆ†ç±»æ­£ç¡®ä½†å®šä½è¯¯å·®å¤§ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:4:4","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Comparison to Other Detection Systems DPM ä¼ ç»Ÿç‰¹å¾ï¼šHOG ä¼ ç»Ÿåˆ†ç±»å™¨ï¼šSVM æ»‘çª—å¥—æ¨¡æ¿ å¼¹ç°§æ¨¡å‹ï¼šå­æ¨¡å‹+ä¸»æ¨¡å‹ R-CNN å€™é€‰åŒºåŸŸç”Ÿæˆ æå–ç‰¹å¾ SVMè¿›è¡Œåˆ†ç±» NMSå‰”é™¤é‡å å»ºè®®æ¡† ä½¿ç”¨å›å½’å™¨ç²¾ç»†ä¿®æ­£å€™é€‰æ¡†ä½ç½® Deep MultiBox OverFeat ä½¿ç”¨å…¨å·ç§¯ç½‘ç»œè¿›è¡Œé«˜æ•ˆæ»‘çª—è¿ç®— ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:5:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Experiments R-T Systems on pas VOC 2007ç»“æœåˆ†æ ä¸å®æ—¶æ£€æµ‹å™¨ç›¸æ¯”ï¼š fast yolo ä¸ä»…é€Ÿåº¦è€Œä¸”mapè¿˜é«˜ yoloçš„mapæ¯”fast yoloé«˜ï¼Œè€Œä¸”ä¹Ÿå¯ä»¥è¾¾åˆ°å®æ—¶æ£€æµ‹ ä¸é€Ÿåº¦ç¨æ…¢çš„æ£€æµ‹å™¨ç›¸æ¯”ï¼šyoloåœ¨ä¿è¯ä¸é”™çš„ç²¾åº¦åŒæ—¶é€Ÿåº¦æœ€å¿«ã€‚ å„ç±»é”™è¯¯æ¯”ä¾‹åˆ†æ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:6:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Real-Time Detection In The Wild yoloå¯ä»¥è¿æ¥æ‘„åƒå¤´è¿›è¡Œå®æ—¶æ£€æµ‹ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:7:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Conclusion ç»“è®ºå†æ¬¡å¼ºè°ƒyoloçš„ä¼˜ç‚¹ï¼šone-stage å¿«é€Ÿ é²æ£’ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:8:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» Object Detection in 20 Years: A Survey YOLOå‘å±•è·¯çº¿åšå®¢ YOLOå®˜ç½‘ YOLOv1å®˜ç½‘ YOLOv1ä½œè€…CVPR2016å¤§ä¼šæ±‡æŠ¥ ä¸€ä¸ªä¸é”™çš„slideä»‹ç» Joseph Redmon æ¨ç‰¹ è°·æ­Œå­¦æœ¯ä¸»é¡µ Githubä¸»é¡µ [ç®€å†]([https://pjreddie.com/static/Redmon%20Resume.pdf](https://pjreddie.com/static/Redmon Resume.pdf)) 2017å¹´8æœˆTEDæ¼”è®²ï¼šHow computers learn to recognize objects instantly | Joseph Redmon 2018å¹´6æœˆTEDæ¼”è®²ï¼šComputers can see. Now what? | Joseph Redmon | TEDxGateway ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:9:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"YOLO V2 æ–‡ç« æ ‡é¢˜ï¼šYOLO9000: Better, Faster, Stronger ä½œè€…ï¼šJoseph Redmon, Ali Farhadi å‘è¡¨æ—¶é—´ï¼š(CVPR 2017) YOLOV2æ˜¯YOLOç›®æ ‡æ£€æµ‹ç³»åˆ—ç®—æ³•çš„ç¬¬äºŒä¸ªç‰ˆæœ¬ã€‚ ç¬¬ä¸€éƒ¨åˆ†ï¼šåœ¨YOLOV1åŸºç¡€ä¸Šè¿›è¡Œäº†è‹¥å¹²æ”¹è¿›ä¼˜åŒ–ï¼Œå¾—åˆ°YOLOV2ï¼Œæå‡ç®—æ³•å‡†ç¡®åº¦å’Œé€Ÿåº¦ã€‚ç‰¹åˆ«æ˜¯å¢åŠ äº†Anchoræœºåˆ¶ï¼Œæ”¹è¿›äº†éª¨å¹²ç½‘ç»œã€‚ ç¬¬äºŒéƒ¨åˆ†ï¼šæå‡ºåˆ†å±‚æ ‘çŠ¶çš„åˆ†ç±»æ ‡ç­¾ç»“æ„WordTreeï¼Œåœ¨ç›®æ ‡æ£€æµ‹å’Œå›¾åƒåˆ†ç±»æ•°æ®é›†ä¸Šè”åˆè®­ç»ƒï¼ŒYOLO9000å¯ä»¥æ£€æµ‹è¶…è¿‡9000ä¸ªç±»åˆ«çš„ç‰©ä½“ã€‚ CVPR 2017è®ºæ–‡ï¼šYOLO9000: Better, Faster, Strongerï¼Œè·å¾—CVPR 2017 Best Paper Honorable Mention ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:10:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Better å…¶ç›®çš„æ˜¯å¼¥è¡¥YOLOçš„ä¸¤ä¸ªç¼ºé™·ï¼š å®šä½è¯¯å·® å¬å›ç‡ï¼ˆRecallï¼‰è¾ƒä½ï¼ˆå’ŒåŸºäºå€™é€‰åŒºåŸŸçš„æ–¹æ³•ç›¸æ¯”ï¼‰ Recall æ˜¯è¢«æ­£ç¡®è¯†åˆ«å‡ºæ¥çš„ç‰©ä½“ä¸ªæ•°ä¸æµ‹è¯•é›†ä¸­æ‰€æœ‰å¯¹åº”ç‰©ä½“çš„ä¸ªæ•°çš„æ¯”å€¼ã€‚ YOLOv2ç›¸æ¯”YOLOv1çš„æ”¹è¿›ç­–ç•¥ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:11:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Batch Normalization CNNç½‘ç»œé€šç”¨çš„æ–¹æ³•ï¼Œä¸ä½†èƒ½å¤Ÿæ”¹å–„ç½‘ç»œçš„æ”¶æ•›æ€§ï¼Œè€Œä¸”èƒ½å¤ŸæŠ‘åˆ¶è¿‡æ‹Ÿåˆï¼Œæœ‰æ­£åˆ™åŒ–çš„ä½œç”¨ã€‚ BNä¸Dropouté€šå¸¸ä¸ä¸€èµ·ä½¿ç”¨ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:11:1","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"High Resolution Classifier åœ¨YOLO V2ä¸­ä½¿ç”¨ImageNetæ•°æ®é›†ï¼Œé¦–å…ˆä½¿ç”¨224Ã—224çš„åˆ†è¾¨ç‡è®­ç»ƒ160ä¸ªepochsï¼Œç„¶åè°ƒæ•´ä¸º448Ã—448åœ¨è®­ç»ƒ10ä¸ªepochsã€‚ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:11:2","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Convolutional With Anchor Boxes åœ¨YOLO V2ä¸­å€Ÿé‰´ Fast R-CNNä¸­çš„Anchorçš„æ€æƒ³ã€‚ å»æ‰äº†YOLOç½‘ç»œçš„å…¨è¿æ¥å±‚å’Œæœ€åçš„æ± åŒ–å±‚ï¼Œä½¿æå–ç‰¹å¾çš„ç½‘ç»œèƒ½å¤Ÿå¾—åˆ°æ›´é«˜åˆ†è¾¨ç‡çš„ç‰¹å¾ã€‚ ä½¿ç”¨$416\\times416$ä»£æ›¿$448\\times448$ä½œä¸ºç½‘ç»œçš„è¾“å…¥ï¼Œå¾—åˆ°çš„ç‰¹å¾å›¾çš„å°ºå¯¸ä¸ºå¥‡æ•°ã€‚ å¥‡æ•°å¤§å°çš„å®½å’Œé«˜ä¼šä½¿å¾—æ¯ä¸ªç‰¹å¾å›¾åœ¨åˆ’åˆ†cellçš„æ—¶å€™å°±åªæœ‰ä¸€ä¸ªcenter cell ç½‘ç»œæœ€ç»ˆå°†$416\\times416$çš„è¾“å…¥å˜æˆ$13\\times13$å¤§å°çš„feature mapè¾“å‡ºï¼Œä¹Ÿå°±æ˜¯ç¼©å°æ¯”ä¾‹ä¸º32ã€‚ï¼ˆ5ä¸ªæ± åŒ–å±‚ï¼Œæ¯ä¸ªæ± åŒ–å±‚å°†è¾“å…¥çš„å°ºå¯¸ç¼©å°1/2ï¼‰ã€‚ Anchor Boxesï¼ˆ æé«˜objectçš„å®šä½å‡†ç¡®ç‡ï¼‰åœ¨YOLOä¸­ï¼Œæ¯ä¸ªgrid cellåªé¢„æµ‹2ä¸ªbboxï¼Œæœ€ç»ˆåªèƒ½é¢„æµ‹$7\\times7\\times2=98$ä¸ªbboxã€‚åœ¨YOLO V2ä¸­å¼•å…¥äº†Anchor Boxesçš„æ€æƒ³ï¼Œï¼Œæ¯ä¸ªgrid cellåªé¢„æµ‹5ä¸ªanchor boxï¼Œé¢„æµ‹$13\\times13\\times5=845$ä¸ªbboxã€‚ æ€»æ€§èƒ½ä¸‹é™ï¼›recallå¢å¤§ï¼›precisioné™ä½ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:11:3","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Dimension Clusters ï¼ˆèšç±»ï¼‰ (è§£å†³æ¯ä¸ªGrid Cellç”Ÿæˆçš„bounding boxçš„ä¸ªæ•°é—®é¢˜) Kå‡å€¼èšç±» è·ç¦»åº¦é‡æŒ‡æ ‡ï¼š$d(box,centroid)=1-IOU(box,centroid)$ é’ˆå¯¹åŒä¸€ä¸ªgrid cellï¼Œå…¶å°†IOUç›¸è¿‘çš„èšåˆ°ä¸€èµ· é€‰æ‹©k=5 ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:11:4","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Direct location prediction æ¨¡å‹ä¸ç¨³å®š,ç”±äºé¢„æµ‹boxçš„ä½ç½®(x,y)å¼•èµ·çš„ Faster RCNNï¼š $x=(t_x\\times w_a)+x_a$ $y=(t_y\\times h_a)+y_a$ $x,y$æ˜¯é¢„æµ‹è¾¹æ¡†çš„ä¸­å¿ƒï¼Œ $x_a,y_a$æ˜¯å…ˆéªŒæ¡†ï¼ˆanchorï¼‰çš„ä¸­å¿ƒç‚¹åæ ‡ï¼Œ $w_a,h_a$æ˜¯å…ˆéªŒæ¡†ï¼ˆanchorï¼‰çš„å®½å’Œé«˜ï¼Œ $t_x,t_y$æ˜¯è¦å­¦ä¹ çš„å‚æ•°ã€‚è¾“å‡ºçš„åç§»é‡ YOLOV2ï¼šå°†é¢„æµ‹è¾¹æ¡†çš„ä¸­å¿ƒçº¦æŸåœ¨ç‰¹å®šgirdç½‘æ ¼å†… $b_x=\\sigma(t_x)+c_x$ $b_y=\\sigma(t_y)+c_y$ $b_w=p_we^{t_w}$ $b_h=p_he^{t_h}$ $Pr(object)*IOU(b,object)=\\sigma(t_o)$ $b_x,b_y,b_w,b_h$æ˜¯é¢„æµ‹è¾¹æ¡†çš„ä¸­å¿ƒå’Œå®½é«˜ã€‚ $Pr(object)âˆ—IOU(b,object)$æ˜¯é¢„æµ‹è¾¹æ¡†çš„ç½®ä¿¡åº¦ï¼ŒYOLO1æ˜¯ç›´æ¥é¢„æµ‹ç½®ä¿¡åº¦çš„å€¼ï¼Œè¿™é‡Œå¯¹é¢„æµ‹å‚æ•°$t_o$è¿›è¡ŒÏƒå˜æ¢åä½œä¸ºç½®ä¿¡åº¦çš„å€¼ã€‚ $c_x,c_y$æ˜¯å½“å‰ç½‘æ ¼å·¦ä¸Šè§’åˆ°å›¾åƒå·¦ä¸Šè§’çš„è·ç¦»ï¼Œè¦å…ˆå°†ç½‘æ ¼å¤§å°å½’ä¸€åŒ–ï¼Œå³ä»¤ä¸€ä¸ªç½‘æ ¼çš„å®½=1ï¼Œé«˜=1ã€‚ $p_w,p_h$æ˜¯å…ˆéªŒæ¡†çš„å®½å’Œé«˜ã€‚ $\\sigma$ æ˜¯sigmoidå‡½æ•°ã€‚ $t_x,t_y,t_w,t_h,t_o$æ˜¯è¦å­¦ä¹ çš„å‚æ•°ï¼Œåˆ†åˆ«ç”¨äºé¢„æµ‹è¾¹æ¡†çš„ä¸­å¿ƒå’Œå®½é«˜ï¼Œä»¥åŠç½®ä¿¡åº¦ã€‚ è¾¹æ¡†é¢„æµ‹ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:11:5","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Fine-Grained Features ç»†ç²’åº¦ç‰¹å¾ æå‡ºä¸€ç§ç§°ä¹‹ä¸ºâ€œç›´é€šâ€å±‚ï¼ˆpassthrough layerï¼‰çš„æ“ä½œï¼Œä¹Ÿæ˜¯å°†å…·æœ‰ä¸°å¯Œçº¹ç†ä¿¡æ¯çš„æµ…å±‚ç‰¹å¾ä¸å…·æœ‰ä¸°å¯Œè¯­ä¹‰ä¿¡æ¯çš„æ·±å±‚ç‰¹å¾è¿›è¡Œèåˆï¼Œå®ç°å¯¹ç›®æ ‡çš„â€œå¤§å°é€šåƒâ€ã€‚ æ®YOLO2çš„ä»£ç ï¼Œç‰¹å¾å›¾å…ˆç”¨$1\\times1$å·ç§¯ä»$ 26\\times26\\times512 $é™ç»´åˆ°$ 26\\times26\\times64$ï¼Œå†åš1æ‹†4å¹¶passthroughã€‚ passthrough ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:11:6","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Multi-Scale Training é€šè¿‡ä¸åŒåˆ†è¾¨ç‡å›¾ç‰‡çš„è®­ç»ƒæ¥æé«˜ç½‘ç»œçš„é€‚åº”æ€§ã€‚ é‡‡ç”¨äº†{320,352,â€¦,608}ç­‰10ç§è¾“å…¥å›¾åƒçš„å°ºå¯¸ï¼Œè¿™äº›å°ºå¯¸çš„è¾“å…¥å›¾åƒå¯¹åº”è¾“å‡ºçš„ç‰¹å¾å›¾å®½å’Œé«˜æ˜¯{10,11,â€¦19}ã€‚è®­ç»ƒæ—¶æ¯10ä¸ªbatchå°±éšæœºæ›´æ¢ä¸€ç§å°ºå¯¸ï¼Œä½¿ç½‘ç»œèƒ½å¤Ÿé€‚åº”å„ç§å¤§å°çš„å¯¹è±¡æ£€æµ‹ã€‚ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:11:7","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Faster ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:12:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Darknet-19 BackBoneï¼šDarknet19 ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:12:1","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Training for detection YOLOV2æ¨¡å‹æ¡†æ¶ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:12:2","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"æŸå¤±å‡½æ•° $$ \\begin{array}{r} \\operatorname{loss}_{t}=\\sum_{i=0}^{W} \\sum_{j=0}^{H} \\sum_{k=0}^{A} \\mathbb I_{\\text {Max IOU }\u003c\\text { Thresh }} \\lambda_{\\text {noobj }} *\\left(-b_{i j k}^{o}\\right)^{2} \\\\ +\\mathbb I_{t\u003c12800} \\lambda_{\\text {prior }} * \\sum_{r \\in(x, y, w, h)}\\left(\\text { prior }_{k}^{r}-b_{i j k}^{r}\\right)^{2} \\\\ +\\mathbb I_{k}^{\\text {truth }}\\left(\\lambda_{\\text {coord }} * \\sum_{r \\in(x, y, w, h)}\\left(\\text { truth }^{r}-b_{i j k}^{r}\\right)^{2}\\right. \\\\ +\\lambda_{o b j} *\\left(I O U_{\\text {truth }}^{k}-b_{i j k}^{o}\\right)^{2} \\\\ \\left.+\\lambda_{\\text {class }} *\\left(\\sum_{c=1}^{C}\\left(\\operatorname{truth}^{c}-b_{i j k}^{c}\\right)^{2}\\right)\\right) \\end{array} $$ Wï¼šè¾“å‡ºç‰¹å¾å›¾å®½åº¦13ï¼›Hï¼šè¾“å‡ºç‰¹å¾å›¾é«˜åº¦13ï¼› Aï¼šå…ˆéªŒæ¡†ä¸ªæ•°ä¸º5 ç½®ä¿¡åº¦è¯¯å·®ï¼ˆè¾¹æ¡†å†…æ— å¯¹è±¡ï¼‰backgroundçš„ç½®ä¿¡åº¦è¯¯å·® $b_{ijk}^o$é¢„æµ‹æ¡†ç½®ä¿¡åº¦ è®¡ç®—å„ä¸ªé¢„æµ‹æ¡†å’Œæ‰€æœ‰ground truthçš„IOUå€¼ï¼Œå¹¶ä¸”å–æœ€å¤§å€¼Max_IOUï¼Œå¦‚æœè¯¥å€¼å°äºä¸€å®šçš„é˜ˆå€¼ï¼ˆYOLOv2ä½¿ç”¨çš„æ˜¯0.6ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªé¢„æµ‹æ¡†å°±æ ‡è®°ä¸ºbackground é¢„æµ‹æ¡†ä¸Anchorä½ç½®è¯¯å·®ï¼ˆå‰12800æ¬¡è¿­ä»£ï¼‰ $prior_k^r$ï¼šAnchorä½ç½®ï¼›$b_{ijk}^r$ï¼šé¢„æµ‹æ¡†ä½ç½® $\\mathbb I_k^{truth}$ï¼šè¯¥Anchorå’Œground truthçš„IOUæœ€å¤§å¯¹åº”çš„é¢„æµ‹æ¡†è´Ÿè´£é¢„æµ‹ç‰©ä½“ï¼ˆIOU\u003e0.6ä½†éæœ€å¤§çš„é¢„æµ‹æ¡†å¿½ç•¥å…¶æŸå¤±ï¼‰ å®šä½è¯¯å·®ï¼ˆè¾¹æ¡†å†…æœ‰å¯¹è±¡ï¼‰ $truth^r$ï¼šæ ‡æ³¨æ¡†ä½ç½®ï¼›$b_{ijk}^r$ï¼šé¢„æµ‹æ¡†ä½ç½® ç½®ä¿¡åº¦è¯¯å·®ï¼ˆè¾¹æ¡†å†…æœ‰å¯¹è±¡ï¼‰ $I O U_{\\text {truth }}^{k}$ ï¼šAnchorä¸æ ‡æ³¨æ¡†çš„IOUï¼› $b_{i j k}^{o}$ï¼šé¢„æµ‹æ¡†ç½®ä¿¡åº¦ åˆ†ç±»è¯¯å·®ï¼ˆè¾¹æ¡†å†…æœ‰å¯¹è±¡ï¼‰ $truth^c$ï¼šæ ‡æ³¨æ¡†ç±»åˆ«ï¼›$b_{ijk}^c$ï¼šé¢„æµ‹æ¡†ç±»åˆ« ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:12:3","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Stronger ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:13:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» å¯è§†åŒ–YOLOv2ç½‘ç»œç»“æ„ å¯è§†åŒ–YOLOv2-tiny YOLO v2 æŸå¤±å‡½æ•°æºç åˆ†æ YOLO v2çš„å®˜æ–¹Darknetå®ç° YOLO v2çš„Keraså®ç° çŸ¥ä¹ï¼š0ç›®æ ‡æ£€æµ‹é‚£ç‚¹å„¿äº‹â€”â€”æ›´å¥½æ›´å¿«çš„YOLO-V2 çŸ¥ä¹ï¼š1ç›®æ ‡æ£€æµ‹é‚£ç‚¹å„¿äº‹â€”â€”æ›´å¥½æ›´å¿«çš„YOLO-V2 çŸ¥ä¹ï¼š\u003cæœºå™¨çˆ±å­¦ä¹ \u003eYOLOv2 / YOLO9000 æ·±å…¥ç†è§£ çŸ¥ä¹ï¼šç›®æ ‡æ£€æµ‹|YOLOv2åŸç†ä¸å®ç°(é™„YOLOv3) ç›®æ ‡æ£€æµ‹ä¹‹YOLO V2 V3 ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:14:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"YOLO V3 æ–‡ç« æ ‡é¢˜ï¼šYOLOv3: An Incremental Improvement ä½œè€…ï¼šJoseph Redmon ï¼ŒAli Farhadi å‘è¡¨æ—¶é—´ï¼š(CVPR 2018) YOLOV3æ˜¯å•é˜¶æ®µç›®æ ‡æ£€æµ‹ç®—æ³•YOLOç³»åˆ—çš„ç¬¬ä¸‰ä¸ªç‰ˆæœ¬ï¼Œç”±åç››é¡¿å¤§å­¦Joseph Redmonå‘å¸ƒäº2018å¹´4æœˆï¼Œå¹¿æ³›ç”¨äºå·¥ä¸šç•Œã€‚ æ”¹è¿›äº†æ­£è´Ÿæ ·æœ¬é€‰å–ã€æŸå¤±å‡½æ•°ã€Darknet-53éª¨å¹²ç½‘ç»œï¼Œå¹¶å¼•å…¥äº†ç‰¹å¾é‡‘å­—å¡”å¤šå°ºåº¦é¢„æµ‹ï¼Œæ˜¾è‘—æå‡äº†é€Ÿåº¦å’Œç²¾åº¦ã€‚ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:15:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"The Deal ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:16:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"[Bounding Box Prediction](###Direct location prediction) æ­£è´Ÿæ ·æœ¬çš„åŒ¹é… é¢„æµ‹æ¡†ï¼ˆæ¯ä¸ªGTä»…åˆ†é…ä¸€ä¸ªAnchorè´Ÿè´£é¢„æµ‹ï¼‰ æ­£ä¾‹ï¼šä¸GT IOUæœ€å¤§ è´Ÿä¾‹ï¼šIOU\u003c0.5 å¿½ç•¥ï¼šIOU\u003e0.5ä½†éæœ€å¤§ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:16:1","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Predictions Across Scaleså¤šå°ºåº¦ è¾“å…¥ grid cell Anchor é¢„æµ‹æ¡†æ•° è¾“å‡ºå¼ é‡çš„æ•°æ®ç»“æ„ YOLO V1 $448\\times448$ $7\\times7$ 0 $7\\times7\\times2=98$ $7\\times7\\times(5\\times B+C)$ YOLO V2 $416\\times416$ $13\\times13$ 5 $13\\times13\\times5=845$ $845\\times(5+20)$ YOLO V3 $256\\times256$ $32\\times32$ï¼Œ$16\\times16$ï¼Œ$8\\times8$ 3 $4032$ $4032\\times(5+80)$ $416\\times416$ $52\\times52$ï¼Œ$26\\times26$ï¼Œ$13\\times13$ 3 $10647$ $10647\\times(5+80)$ Yolov3å€Ÿé‰´äº†FPNç‰¹å¾å›¾æ€æƒ³ï¼Œå°å°ºå¯¸ç‰¹å¾å›¾ç”¨äºæ£€æµ‹å¤§å°ºå¯¸ç‰©ä½“ï¼Œè€Œå¤§å°ºå¯¸ç‰¹å¾å›¾æ£€æµ‹å°å°ºå¯¸ç‰©ä½“ã€‚ç‰¹å¾å›¾çš„è¾“å‡ºç»´åº¦ä¸º $N\\times N\\times[3\\times(4+1+80)]$ï¼Œ$N\\times Nä¸º$è¾“å‡ºç‰¹å¾å›¾æ ¼ç‚¹æ•°ï¼Œä¸€å…±3ä¸ªAnchoræ¡†ï¼Œæ¯ä¸ªæ¡†æœ‰4ç»´é¢„æµ‹æ¡†æ•°å€¼$t_x,t_y,t_w,t_h$ ï¼Œ1ç»´é¢„æµ‹æ¡†ç½®ä¿¡åº¦ï¼Œ80ç»´ç‰©ä½“ç±»åˆ«æ•°ã€‚ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:16:2","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"yolov3ç½‘ç»œå›¾ BackBoneï¼šDarknet53 YOLOV3æ¨¡å‹æ¡†æ¶ Yolov3ä¸­ï¼Œåªæœ‰å·ç§¯å±‚ï¼Œé€šè¿‡è°ƒèŠ‚å·ç§¯æ­¥é•¿æ§åˆ¶è¾“å‡ºç‰¹å¾å›¾çš„å°ºå¯¸ concatæ“ä½œä¸åŠ å’Œæ“ä½œçš„åŒºåˆ«ï¼šåŠ å’Œæ“ä½œæ¥æºäºResNetæ€æƒ³ï¼Œå°†è¾“å…¥çš„ç‰¹å¾å›¾ï¼Œä¸è¾“å‡ºç‰¹å¾å›¾å¯¹åº”ç»´åº¦è¿›è¡Œç›¸åŠ ï¼Œå³$y=f(x)+x$ ï¼›è€Œconcatæ“ä½œæºäºDenseNetç½‘ç»œçš„è®¾è®¡æ€è·¯ï¼Œå°†ç‰¹å¾å›¾æŒ‰ç…§é€šé“ç»´åº¦ç›´æ¥è¿›è¡Œæ‹¼æ¥ï¼Œä¾‹å¦‚çš„$8\\times8\\times16$ç‰¹å¾å›¾ä¸$8\\times8\\times16$çš„ç‰¹å¾å›¾æ‹¼æ¥åç”Ÿæˆ$8\\times8\\times32$çš„ç‰¹å¾å›¾ã€‚ ä¸Šé‡‡æ ·å±‚(upsample)ï¼šä½œç”¨æ˜¯å°†å°å°ºå¯¸ç‰¹å¾å›¾é€šè¿‡æ’å€¼ç­‰æ–¹æ³•ï¼Œç”Ÿæˆå¤§å°ºå¯¸å›¾åƒã€‚ä¾‹å¦‚ä½¿ç”¨æœ€è¿‘é‚»æ’å€¼ç®—æ³•ï¼Œå°†$8\\times8$çš„å›¾åƒå˜æ¢ä¸º$16\\times16$ã€‚ä¸Šé‡‡æ ·å±‚ä¸æ”¹å˜ç‰¹å¾å›¾çš„é€šé“æ•°ã€‚ YOLOV3 YOLOV3è®­ç»ƒè¿‡ç¨‹ YOLOV3æµ‹è¯•è¿‡ç¨‹ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:16:3","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"æŸå¤±å‡½æ•° $$ \\begin{equation} \\begin{split} {loss} \u0026= \\sum_{i=0}^{K^2}\\sum_{j=0}^{M}\\mathbb{I}_{i,j}^{obj}\\cdot (2-w_i\\cdot h_i)(-x_i log(\\hat x_i)-(1-x_i)log(1-\\hat x_i))\\\\ \u0026+\\quad\\sum_{i=0}^{K^2}\\sum_{j=0}^{M}\\mathbb{I}_{i,j}^{obj}\\cdot (2-w_i\\cdot h_i)(-y_i log( \\hat y_i)-(1-y_i)log(1-\\hat y_i))\\\\ \u0026+\\quad\\ \\sum_{i=0}^{K^2}\\sum_{j=0}^{M}\\mathbb{I}_{i,j}^{obj}\\cdot (2-w_i\\cdot h_i)[(w_i-\\hat w_i)^2+(h_i-\\hat h_i)^2]\\\\ \u0026- \\quad \\sum_{i=0}^{K^2}\\sum_{j=0}^{M}\\mathbb{1}_{i,j}^{obj}\\cdot[C_ilog(\\hat C_i)+(1-C_i)log(1-\\hat C_i)]\\\\ \u0026- \\quad \\sum_{i=0}^{K^2}\\sum_{j=0}^{M}\\mathbb{1}_{i,j}^{noobj}\\cdot[C_ilog(\\hat C_i)+(1-C_i)log(1-\\hat C_i)]\\\\ \u0026-\\quad \\sum_{i=0}^{K^2}\\sum_{j=0}^{M}\\mathbb{1}_{i,j}^{obj}\\cdot\\sum_{c\\in classes}[p_i(c)log(\\hat p_i(c))+(1-p_i(c))log(1-\\hat p_i(c))] \\\\ \\end{split}\\end{equation} $$ä¸€ä¸ªæ˜¯ç›®æ ‡æ¡†ä½ç½®$x,y,w,h$ï¼ˆå·¦ä¸Šè§’å’Œé•¿å®½ï¼‰å¸¦æ¥çš„è¯¯å·®ï¼Œåˆåˆ†ä¸º$x,y$å¸¦æ¥çš„BCE Lossä»¥åŠ$w,h$å¸¦æ¥çš„MSE Lossã€‚ Kï¼šgrid sizeï¼›Mï¼šAnchor boxï¼›$\\mathbb{I}_{i,j}^{obj}$è¡¨ç¤ºå¦‚æœåœ¨$i,j$å¤„çš„boxæœ‰ç›®æ ‡ï¼Œåˆ™ä¸º1ï¼Œå¦åˆ™ä¸º0ï¼›w å’Œ h åˆ†åˆ«æ˜¯ground truth çš„å®½å’Œé«˜ å¸¦$\\hat x$å·ä»£è¡¨é¢„æµ‹å€¼ï¼›ä¸å¸¦çš„è¡¨ç¤ºæ ‡ç­¾ ä¸€ä¸ªæ˜¯ç›®æ ‡ç½®ä¿¡åº¦å¸¦æ¥çš„è¯¯å·®ï¼Œä¹Ÿå°±æ˜¯objå¸¦æ¥çš„lossï¼ˆBCE Lossï¼‰ $\\mathbb{I}_{i,j}^{noobj}$ï¼šæ˜¯å¦ä¸ºè´Ÿæ ·æœ¬ æœ€åä¸€ä¸ªæ˜¯ç±»åˆ«å¸¦æ¥çš„è¯¯å·®ï¼Œä¹Ÿå°±æ˜¯classå¸¦æ¥çš„lossï¼ˆç±»åˆ«æ•°ä¸ªBCE Lossï¼‰ã€‚ $BCE=-\\hat c_ilog(c_i)-(1-\\hat c_i)log(1-c_i)$ï¼šäºŒå…ƒäº¤å‰ç†µæŸå¤±å‡½æ•°(Binary Cross Entropy)ï¼›$\\hat c_i$æ ‡ç­¾å€¼(é0å³1)ï¼›$ c_i$é¢„æµ‹å€¼(0-1ä¹‹é—´) ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:17:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» YOLOV3ç›®æ ‡æ£€æµ‹Demoè§†é¢‘ YOLOv3å®˜ç½‘ darknet github ä»£ç å¤ç° Ultralyticså…¬å¸ï¼šhttps://github.com/ultralytics/yolov3 https://github.com/qqwweee/keras-yolo3 https://github.com/bubbliiiing/yolo3-pytorch cvpodsï¼šhttps://github.com/Megvii-BaseDetection/cvpods/blob/master/cvpods/modeling/meta_arch/yolov3.py åšå®¢ çŸ¥ä¹ï¼šæ·±å…¥æµ…å‡ºYoloç³»åˆ—ä¹‹Yolov3\u0026Yolov4\u0026Yolov5\u0026Yoloxæ ¸å¿ƒåŸºç¡€çŸ¥è¯†å®Œæ•´è®²è§£ çŸ¥ä¹ï¼šè¿‘è·ç¦»è§‚å¯ŸYOLOv3 çŸ¥ä¹ï¼šYoloä¸‰éƒ¨æ›²è§£è¯»â€”â€”Yolov3 Netronå¯è§†åŒ–YOLOV3ç½‘ç»œç»“æ„ yolov3å®ç°ç†è®º yoloç³»åˆ—ä¹‹yolo v3ã€æ·±åº¦è§£æã€‘ YOLO v3ç½‘ç»œç»“æ„åˆ†æ Bç«™å·¥ç¨‹å¸ˆAlgernoné‰´é»„YOLO æŸå¤±å‡½æ•° å®˜æ–¹DarkNet YOLO V3æŸå¤±å‡½æ•°å®Œç»“ç‰ˆ Whatâ€™s new in YOLO v3? ç»“æ„è§£æ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:18:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"YOLO V4 æ–‡ç« æ ‡é¢˜ï¼šYOLOv4: Optimal Speed and Accuracy of Object Detection ä½œè€…ï¼šAlexey Bochkovskiy,Chien-Yao Wang, Hong-Yuan Mark Liao å‘è¡¨æ—¶é—´ï¼š(CVPR 2020) åŸå§‹ä»£ç  YoloV4-pytorchä»£ç  ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:19:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Introduction æå‡ºäº†ä¸€ç§å®æ—¶ã€é«˜ç²¾åº¦çš„ç›®æ ‡æ£€æµ‹æ¨¡å‹ã€‚ å®ƒæ˜¯å¯ä»¥ä½¿ç”¨1080Ti æˆ– 2080Ti ç­‰é€šç”¨ GPU æ¥è®­ç»ƒå¿«é€Ÿå’Œå‡†ç¡®çš„ç›®æ ‡æ£€æµ‹å™¨ï¼› åœ¨æ£€æµ‹å™¨è®­ç»ƒé˜¶æ®µï¼ŒéªŒè¯äº†ä¸€äº›æœ€å…ˆè¿›çš„ Bag-of-Freebies å’Œ Bag-of-Specials æ–¹æ³•çš„æ•ˆæœï¼› å¯¹ SOTA æ–¹æ³•è¿›è¡Œæ”¹è¿›ï¼Œä½¿å…¶æ•ˆç‡æ›´é«˜ï¼Œæ›´é€‚åˆå• GPU è®­ç»ƒï¼ŒåŒ…æ‹¬ CBNï¼ŒPAN å’Œ SAM ç­‰ã€‚ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:20:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Related work ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:21:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Bag of freebies åªæ”¹å˜è®­ç»ƒç­–ç•¥æˆ–åªå¢åŠ è®­ç»ƒæˆæœ¬ï¼Œä¸å½±å“æ¨ç†æˆæœ¬çš„æ–¹æ³•ï¼›ç™½ç»™çš„æé«˜ç²¾åº¦ï¼ˆèµ å“ï¼‰ Data Augmentation æ•°æ®å¢å¼º å¢åŠ è¾“å…¥å›¾ç‰‡çš„å¯å˜æ€§ï¼›æ›´é«˜çš„é²æ£’æ€§ã€‚ åƒç´ çº§è°ƒæ•´ï¼›ä¿ç•™è°ƒæ•´åŒºåŸŸå†…çš„æ‰€æœ‰åŸå§‹åƒç´ ä¿¡æ¯ã€‚ photometric distortions å…‰ç…§ç•¸å˜ brightness, contrast,hue, saturation, and noise of an imageäº®åº¦ã€å¯¹æ¯”åº¦ã€è‰²è°ƒã€é¥±å’Œåº¦å’Œå™ªå£° geometric distortions å‡ ä½•ç•¸å˜ random scaling, cropping, flipping, and ro-tating éšæœºç¼©æ”¾ã€è£å‰ªã€ç¿»è½¬å’Œæ—‹è½¬ æ¨¡æ‹Ÿå¯¹è±¡é®æŒ¡ random erase éšæœºæ“¦é™¤ CutOut ï¼šéšæœºå±è”½è¾“å…¥çš„æ–¹å½¢åŒºåŸŸçš„ç®€å•æ­£åˆ™åŒ–æŠ€æœ¯å¡«å……0åƒç´ å€¼ hide-and-seekï¼šè®­ç»ƒå›¾åƒä¸­éšæœºéšè—patchesï¼Œå½“æœ€å…·åŒºåˆ«æ€§çš„å†…å®¹è¢«éšè—æ—¶ï¼Œè¿«ä½¿ç½‘ç»œå¯»æ‰¾å…¶ä»–ç›¸å…³å†…å®¹ grid maskï¼šé€šè¿‡ç”Ÿæˆ1ä¸ªå’ŒåŸå›¾ç›¸åŒåˆ†è¾¨ç‡çš„mask,ç„¶åå°†è¯¥maskå’ŒåŸå›¾ç›¸ä¹˜å¾—åˆ°ä¸€ä¸ªGridMaskå¢å¼ºåçš„å›¾åƒã€‚ æ­£åˆ™åŒ– DropOutï¼šéšæœºåˆ é™¤å‡å°‘ç¥ç»å…ƒçš„æ•°é‡ï¼Œä½¿ç½‘ç»œå˜å¾—æ›´ç®€å• DropConnect DropBlockï¼šå°†Cutoutåº”ç”¨åˆ°æ¯ä¸€ä¸ªç‰¹å¾å›¾ã€‚å¹¶ä¸æ˜¯ç”¨å›ºå®šçš„å½’é›¶æ¯”ç‡ï¼Œè€Œæ˜¯åœ¨è®­ç»ƒæ—¶ä»¥ä¸€ä¸ªå°çš„æ¯”ç‡å¼€å§‹ï¼Œéšç€è®­ç»ƒè¿‡ç¨‹çº¿æ€§çš„å¢åŠ è¿™ä¸ªæ¯”ç‡ï¼›å¯åº”ç”¨äºç½‘ç»œçš„æ¯ä¸€å±‚ï¼›ä¸åŒç»„åˆï¼Œçµæ´» å›¾åƒèåˆ MixUpï¼šä½¿ç”¨ä¸¤ä¸ªå›¾åƒä»¥ä¸åŒçš„ç³»æ•°æ¯”ç‡è¿›è¡Œä¹˜æ³•å’Œå åŠ ï¼Œç„¶åç”¨è¿™äº›å åŠ çš„æ¯”ç‡è°ƒæ•´æ ‡ç­¾ CutMixï¼šæŠŠMixupå’ŒCutoutç»“åˆï¼Œåˆ‡å‰²ä¸€å—patchå¹¶ä¸”ç²˜è´´ä¸Šå¦å¤–ä¸€å¼ è®­ç»ƒå›¾ç‰‡ç›¸åŒåœ°æ–¹çš„patchï¼Œå¯¹åº”çš„labelä¹ŸæŒ‰ç…§patchå¤§å°çš„æ¯”ä¾‹è¿›è¡Œæ··åˆ é£æ ¼è¿ç§» ç±»åˆ«ä¸å¹³è¡¡ Two stageï¼šRCNN â€¦ hard negative example miningï¼šç”¨åˆå§‹çš„æ­£è´Ÿæ ·æœ¬(ä¸€èˆ¬æ˜¯æ­£æ ·æœ¬+ä¸æ­£æ ·æœ¬åŒè§„æ¨¡çš„è´Ÿæ ·æœ¬çš„ä¸€ä¸ªå­é›†)è®­ç»ƒåˆ†ç±»å™¨, ç„¶åå†ç”¨è®­ç»ƒå‡ºçš„åˆ†ç±»å™¨å¯¹æ ·æœ¬è¿›è¡Œåˆ†ç±», æŠŠå…¶ä¸­è´Ÿæ ·æœ¬ä¸­é”™è¯¯åˆ†ç±»çš„é‚£äº›æ ·æœ¬(hard negative)æ”¾å…¥è´Ÿæ ·æœ¬é›†åˆ, å†ç»§ç»­è®­ç»ƒåˆ†ç±»å™¨, å¦‚æ­¤åå¤, ç›´åˆ°è¾¾åˆ°åœæ­¢æ¡ä»¶(æ¯”å¦‚åˆ†ç±»å™¨æ€§èƒ½ä¸å†æå‡). online hard example miningï¼šè‡ªåŠ¨åœ°é€‰æ‹©éš¾åˆ†è¾¨æ ·æœ¬æ¥è¿›è¡Œè®­ç»ƒ One stageï¼šSSDï¼Œyoloâ€¦ Focal Loss One-hotéš¾è¡¨è¾¾ç±»åˆ«ä¹‹é—´çš„å…³è” label smoothing(Inception V3)ï¼šå°†ç¡¬æ ‡ç­¾è½¬åŒ–ä¸ºè½¯æ ‡ç­¾è¿›è¡Œè®­ç»ƒï¼Œå¯ä»¥ä½¿æ¨¡å‹æ›´å…·æœ‰é²æ£’æ€§ knowledge distillationï¼šå¼•å…¥çŸ¥è¯†è’¸é¦çš„æ¦‚å¿µå¹¶ç”¨äºè®¾è®¡æ ‡ç­¾ç»†åŒ–ç½‘ç»œ BBox Regression é‡å é¢ç§¯ ä¸­å¿ƒç‚¹è·ç¦» é•¿å®½æ¯” å‘å±•å†ç¨‹ï¼šIOU_Loss(2016)-\u003eGIOU_Loss(2019)-\u003eDIOU_Loss(2020)-\u003eCIOU_Loss(2020) IOU_Loss IOU_Loss Aï¼šé¢„æµ‹æ¡†ä¸çœŸå®æ¡†çš„äº¤é›†ï¼›Bï¼šé¢„æµ‹æ¡†ä¸çœŸå®æ¡†çš„å¹¶é›† $IOU=\\frac{A}{B}$ $IOU_{Loss}=1-IOU$ :è€ƒè™‘äº†é¢„æµ‹BBoxé¢ç§¯å’Œground truth BBoxé¢ç§¯çš„é‡å é¢ç§¯ IOU_Loss_q Q1ï¼šå³çŠ¶æ€1çš„æƒ…å†µï¼Œå½“é¢„æµ‹æ¡†å’Œç›®æ ‡æ¡†ä¸ç›¸äº¤æ—¶ï¼ŒIOU=0ï¼Œæ— æ³•ååº”ä¸¤ä¸ªæ¡†è·ç¦»çš„è¿œè¿‘ï¼Œæ­¤æ—¶æŸå¤±å‡½æ•°ä¸å¯å¯¼ï¼ŒIOU_Lossæ— æ³•ä¼˜åŒ–ä¸¤ä¸ªæ¡†ä¸ç›¸äº¤çš„æƒ…å†µã€‚ Q2ï¼šå³çŠ¶æ€2å’ŒçŠ¶æ€3çš„æƒ…å†µï¼Œå½“ä¸¤ä¸ªé¢„æµ‹æ¡†å¤§å°ç›¸åŒï¼Œä¸¤ä¸ªIOUä¹Ÿç›¸åŒï¼ŒIOU_Lossæ— æ³•åŒºåˆ†ä¸¤è€…ç›¸äº¤æƒ…å†µçš„ä¸åŒã€‚ GIOU_Loss GIOU_Loss $GIOU=IOU-\\frac{|C-B|}{|C|}$ï¼›C:ä¸¤æ¡†çš„æœ€å°å¤–æ¥çŸ©å½¢ï¼›å·®é›†=C-å¹¶é›†B $GIOU_{Loss}=1-GIOU$ :å¢åŠ äº†ç›¸äº¤å°ºåº¦çš„è¡¡é‡æ–¹å¼ GIOU_Loss_q Qï¼šçŠ¶æ€1ã€2ã€3éƒ½æ˜¯é¢„æµ‹æ¡†åœ¨ç›®æ ‡æ¡†å†…éƒ¨ä¸”é¢„æµ‹æ¡†å¤§å°ä¸€è‡´çš„æƒ…å†µï¼Œè¿™æ—¶é¢„æµ‹æ¡†å’Œç›®æ ‡æ¡†çš„å·®é›†éƒ½æ˜¯ç›¸åŒçš„ï¼Œå› æ­¤è¿™ä¸‰ç§çŠ¶æ€çš„GIOUå€¼ä¹Ÿéƒ½æ˜¯ç›¸åŒçš„ï¼Œè¿™æ—¶GIOUé€€åŒ–æˆäº†IOUï¼Œæ— æ³•åŒºåˆ†ç›¸å¯¹ä½ç½®å…³ç³»ã€‚ DIOU_Loss DIOU_Loss $DIOU=IOU-\\frac{{Distance_2}^2}{Distance_C^2}$ï¼›Distance_Cï¼šCçš„å¯¹è§’çº¿è·ç¦»ï¼›Distance_2ï¼šä¸¤ä¸ªæ¡†çš„ä¸¤ä¸ªä¸­å¿ƒç‚¹çš„æ¬§æ°è·ç¦»$DIOU_Loss=1-DIOU$ ï¼šè€ƒè™‘äº†é‡å é¢ç§¯å’Œä¸­å¿ƒç‚¹è·ç¦»ï¼›å½“ç›®æ ‡æ¡†åŒ…è£¹é¢„æµ‹æ¡†çš„æ—¶å€™ï¼Œç›´æ¥åº¦é‡2ä¸ªæ¡†çš„è·ç¦»ï¼Œå› æ­¤DIOU_Lossæ”¶æ•›çš„æ›´å¿«ã€‚ DIOU_Loss_q Qï¼šç›®æ ‡æ¡†åŒ…è£¹é¢„æµ‹æ¡†ï¼›é¢„æµ‹æ¡†çš„ä¸­å¿ƒç‚¹çš„ä½ç½®éƒ½æ˜¯ä¸€æ ·çš„ CIOU_Loss $CIOU=IOU-\\frac{{Distance_2}^2}{Distance_C^2}-\\frac{v^2}{(1-IOU)+v}$ $v=\\frac{4}{\\pi^2}(arctan\\frac{w^{gt}}{h^{gt}}-arctan\\frac{w^{p}}{h^{p}})^2$ : gtè¡¨ç¤ºç›®æ ‡æ¡†çš„å®½é«˜ï¼›pè¡¨ç¤ºé¢„æµ‹æ¡†çš„å®½é«˜ $CIOU_{Loss}=1-CIOU$ï¼šåŒæ—¶è€ƒè™‘åˆ°é‡å é¢ç§¯å’Œä¸­å¿ƒç‚¹ä¹‹é—´çš„è·ç¦»ä»¥åŠé•¿å®½æ¯” ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:21:1","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Bag of specials å°‘é‡å¢åŠ äº†æ¨ç†æˆæœ¬ï¼Œå´æ˜¾è‘—æå‡æ€§èƒ½çš„æ’ä»¶æ¨¡å—å’Œåå¤„ç†æ–¹æ³•ï¼›ä¸å…è´¹ï¼Œä½†å¾ˆå®æƒ ï¼ˆç‰¹ä»·ï¼‰ Enlarging Receptive Field æ‰©å¤§æ„Ÿå—é‡ SPP ï¼šSPPå°†SPMé›†æˆåˆ°CNNä½¿ç”¨max-poolingæ“ä½œè€Œä¸æ˜¯bag-of-wordè¿ç®—ï¼› æºäºSPM å°†ç‰¹å¾å›¾åˆ†å‰²æˆå‡ ä¸ªdÃ—dç›¸ç­‰å¤§å°çš„å—ï¼Œå…¶ä¸­då¯ä»¥æ˜¯{1,2,3,â€¦}ï¼Œä»è€Œå½¢æˆç©ºé—´é‡‘å­—å¡”ï¼Œç„¶åæå–bag-of-wordç‰¹å¾ã€‚ [YOLOV3](###YOLO V3)æ”¹è¿›ç‰ˆSPPæ¨¡å—ï¼šå°†SPPæ¨¡å—ä¿®æ”¹ä¸ºèåˆ$kÃ—k$æ± åŒ–æ ¸çš„æœ€å¤§æ± åŒ–è¾“å‡ºï¼Œå…¶ä¸­$k = {1,5,9,13}$ï¼Œæ­¥é•¿ç­‰äº1ã€‚ ä¸€ä¸ªç›¸å¯¹è¾ƒå¤§çš„$kÃ—k$æœ‰æ•ˆåœ°å¢åŠ äº†backboneçš„æ„Ÿå—é‡ ASPP ï¼šå’Œæ”¹è¿›ç‰ˆSPPæ¨¡å—åŒºåˆ«æ˜¯ä¸»è¦ç”±åŸæ¥çš„æ­¥é•¿1ã€æ ¸å¤§å°ä¸º$kÃ—k$çš„æœ€å¤§æ± åŒ–åˆ°å‡ ä¸ª$3Ã—3$æ ¸ï¼Œç¼©æ”¾æ¯”ä¾‹ä¸º$k$ï¼Œæ­¥é•¿1çš„ç©ºæ´å·ç§¯ã€‚ RFB ï¼šå‡ ä¸ª$kÃ—k$æ ¸ï¼Œç¼©æ”¾æ¯”ä¾‹ä¸º$k$ï¼Œæ­¥é•¿1çš„ç©ºæ´å·ç§¯ Attention Mechanism æ³¨æ„åŠ›æœºåˆ¶ channel-wise attention SE point-wise attention SAM SAM å¯¹å·ç§¯å±‚çš„è¾“å‡ºç‰¹å¾å›¾åº”ç”¨æœ€å¤§æ± åŒ–å’Œå¹³å‡æ± åŒ–ã€‚å°†è¿™ä¸¤ä¸ªç‰¹å¾åšconcatæ“ä½œæ¥ï¼Œç„¶ååœ¨ä¸€ä¸ªå·ç§¯å±‚ä¸­ä¼ é€’ï¼Œç„¶ååº”ç”¨ sigmoid å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†çªå‡ºæ˜¾ç¤ºæœ€é‡è¦çš„ç‰¹å¾æ‰€åœ¨çš„ä½ç½®ã€‚ SAM Feature Integration ç‰¹å¾èåˆæ¨¡å— skip connection (FCN) hyper-column SFAM :ä½¿ç”¨SEæ¨¡å—åœ¨å¤šå°ºåº¦ä¸²è”çš„ç‰¹å¾å›¾ä¸Šæ‰§è¡Œchannel-wiseçº§åˆ«çš„é‡æ–°åŠ æƒ ASFF :ä½¿ç”¨softmaxä½œä¸ºpoint-wiseçº§åˆ«é‡æ–°åŠ æƒï¼Œç„¶åæ·»åŠ ä¸åŒå°ºåº¦çš„ç‰¹å¾å›¾ BiFPN :æå‡ºäº†å¤šè¾“å…¥åŠ æƒæ®‹å·®è¿æ¥ä»¥æ‰§è¡ŒæŒ‰ scale-wiseçº§åˆ«é‡æ–°åŠ æƒï¼Œç„¶åæ·»åŠ ä¸åŒå°ºåº¦çš„ç‰¹å¾å›¾ã€‚ Activation Function æ¿€æ´»å‡½æ•° è®©æ¢¯åº¦æ›´æœ‰æ•ˆåœ°ä¼ æ’­ï¼ŒåŒæ—¶ä¸ä¼šé€ æˆå¤ªå¤šé¢å¤–çš„è®¡ç®—æˆæœ¬ ReLUï¼šåŸºæœ¬ä¸Šè§£å†³æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ traditionalï¼š$tanhï¼Œsigmoid$ LReLU ï¼ŒPReLU ï¼šè§£å†³è¾“å‡ºå°äºé›¶æ—¶ReLUçš„æ¢¯åº¦ä¸ºé›¶çš„é—®é¢˜ã€‚ ReLU6 (MobileNet)ï¼Œhard-Swish (MobileNet V3)ï¼šä¸“ä¸ºé‡åŒ–ç½‘ç»œè®¾è®¡ Scaled ExponentialLinear Unit (SELU) ï¼šself-normalizing ç¥ç»ç½‘ç»œè®¾è®¡ Swishï¼Œ Mishï¼šè¿ç»­å¯å¾®çš„æ¿€æ´»å‡½æ•° Mish çš„ä¸‹ç•Œå’Œä¸Šç•Œä¸º [â‰ˆ -0.31,âˆ]ã€‚ç”±äºä¿ç•™äº†å°‘é‡çš„è´Ÿé¢ä¿¡æ¯ï¼ŒMishé€šè¿‡è®¾è®¡æ¶ˆé™¤äº†**Dying ReLUç°è±¡**æ‰€å¿…éœ€çš„å…ˆå†³æ¡ä»¶ã€‚è¾ƒå¤§çš„è´Ÿåå·®ä¼šå¯¼è‡´ ReLu å‡½æ•°é¥±å’Œï¼Œå¹¶å¯¼è‡´æƒé‡åœ¨åå‘ä¼ æ’­é˜¶æ®µæ— æ³•æ›´æ–°ï¼Œä»è€Œä½¿ç¥ç»å…ƒæ— æ³•è¿›è¡Œé¢„æµ‹ã€‚ Mish å±æ€§æœ‰åŠ©äºæ›´å¥½çš„è¡¨ç°åŠ›å’Œä¿¡æ¯æµã€‚ç”±äºåœ¨ä¸Šé¢æ— ç•Œï¼ŒMish é¿å…äº†é¥±å’Œï¼Œè¿™é€šå¸¸ä¼šç”±äºæ¥è¿‘é›¶çš„æ¢¯åº¦è€Œå¯¼è‡´è®­ç»ƒå‡æ…¢ã€‚ä¸‹ç•Œä¹Ÿæ˜¯æœ‰åˆ©çš„ï¼Œå› ä¸ºå®ƒä¼šäº§ç”Ÿå¾ˆå¼ºçš„æ­£åˆ™åŒ–æ•ˆæœã€‚ Post-processing Method åå¤„ç†æ–¹æ³• ç”¨æ¥è¿‡æ»¤å¯¹åŒä¸€ç‰©ä½“é¢„æµ‹ä¸å¥½çš„BBoxesï¼Œåªä¿ç•™å“åº”è¾ƒé«˜çš„å€™é€‰BBoxes Greedy NMS (R-CNN)ï¼šå¢åŠ åˆ†ç±»ç½®ä¿¡åº¦ï¼›ç”±é«˜åˆ°ä½é¡ºåº Soft NMS ï¼šè€ƒè™‘äº†å¯¹è±¡çš„é®æŒ¡å¯èƒ½å¯¼è‡´å…·æœ‰IoUå¾—åˆ†çš„Greedy NMSä¸­çš„ç½®ä¿¡åº¦å¾—åˆ†ä¸‹é™çš„é—®é¢˜ DIOU NMSï¼šåœ¨soft NMSçš„åŸºç¡€ä¸Šï¼Œåœ¨BBoxç­›é€‰è¿‡ç¨‹ä¸­åŠ å…¥ä¸­å¿ƒç‚¹è·ç¦»ä¿¡æ¯ã€‚ Anchor freeé‡Œä¸ä½¿ç”¨NMSåå¤„ç†ï¼šNMSéƒ½æ²¡æœ‰ç›´æ¥æ¶‰åŠæå–ç‰¹å¾å›¾ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:21:2","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Methodology ç›®çš„æ˜¯åœ¨è¾“å…¥ç½‘ç»œåˆ†è¾¨ç‡ã€å·ç§¯å±‚æ•°ç›®ã€å‚æ•°æ•°é‡å’Œæ¯å±‚è¾“å‡ºä¸ªæ•°ä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ Selection of architecture æ£€æµ‹å™¨å’Œåˆ†ç±»å™¨ä¸åŒç‚¹ æ›´å¤§çš„è¾“å…¥ç½‘ç»œå°ºå¯¸ï¼ˆåˆ†è¾¨ç‡ï¼‰â€”â€”ç”¨äºæ£€æµ‹å¤šä¸ªå°å°ºå¯¸ç›®æ ‡ æ›´å¤šçš„å±‚æ•°â€”â€”è·å¾—æ›´å¤§çš„æ„Ÿå—é‡ä»¥ä¾¿èƒ½é€‚åº”ç½‘ç»œè¾“å…¥å°ºå¯¸çš„å¢åŠ  æ›´å¤šå‚æ•°â€”â€”è·å¾—æ›´å¤§çš„æ¨¡å‹å®¹é‡ä»¥ä¾¿åœ¨å•ä¸ªå›¾åƒä¸­æ£€æµ‹å¤šä¸ªå¤§å°ä¸åŒçš„ç‰©ä½“ã€‚ ä¸åŒå¤§å°çš„æ„Ÿå—é‡çš„å½±å“ æœ€å¤§ç›®æ ‡å°ºå¯¸â€”â€”å…è®¸è§‚å¯Ÿåˆ°æ•´ä¸ªç›®æ ‡ æœ€å¤§ç½‘ç»œå°ºå¯¸â€”â€”å…è®¸è§‚å¯Ÿåˆ°ç›®æ ‡å‘¨å›´çš„ä¸Šä¸‹æ–‡ è¶…å‡ºç½‘ç»œå°ºå¯¸â€”â€”å¢åŠ å›¾åƒåƒç´ ç‚¹ä¸æœ€ç»ˆæ¿€æ´»å€¼ä¹‹é—´çš„è¿æ¥æ•° Selection of BoF and BoS [Activations](####Activation Function æ¿€æ´»å‡½æ•°): ReLU, ==leaky-ReLU==, parametric-ReLU,ReLU6, SELU, ==Swish==, ==Mish== RReluå’ŒSELUéš¾è®­ç»ƒï¼›ReLU6æ˜¯é‡åŒ–ç½‘ç»œä¸“ç”¨ï¼ˆæ’é™¤é€‰é¡¹ï¼‰ [Bounding box regression loss](####Post-processing Method åå¤„ç†æ–¹æ³•): MSE, IoU, GIoU,CIoU, DIoU ä¸ç”¨CIOU_nmsï¼šå½±å“å› å­våŒ…å«æ ‡æ³¨æ¡†ä¿¡æ¯ï¼›å‰å‘æ¨ç†æ²¡æœ‰æ ‡æ³¨æ¡†ä¿¡æ¯ [Data augmentation](####Data Augmentation æ•°æ®å¢å¼ºl): CutOut, MixUp, CutMixï¼ŒMosaic [Regularization method](####Data Augmentation æ•°æ®å¢å¼ºl): DropOut, DropPath ,Spatial DropOut , DropBlock DropBlockæœ€ä¼˜ Normalization : BNï¼Œ CGBN or SyncBN) ï¼ŒFRNï¼ŒCBN) ä¸€ä¸ªGPU:æ’é™¤SyncBN Skip-connections: Residual connections, Weighted residual connections, Multi-input weighted residual connections(MiWRC), Cross stage partial connections (CSP) Additional improvements å¼•å…¥äº†ä¸€ç§æ–°çš„æ•°æ®å¢å¼ºæ–¹æ³•Mosaicå’Œè‡ªå¯¹æŠ—è®­ç»ƒæ–¹æ³•ï¼ˆSelf-Adversarial Trainingï¼ŒSATï¼‰ Mosaicï¼šéšæœºè£å‰ª4ä¸ªè®­ç»ƒå›¾ç‰‡ï¼Œå†æ‹¼æ¥åˆ°1å¼ å›¾ç‰‡(COCOæ•°æ®é›†ç›®æ ‡åˆ†å¸ƒä¸å‡è¡¡) ä¸°å¯Œæ•°æ®é›† å‡å°‘GPU å½’ä¸€åŒ–è®¡ç®—æ¯å±‚çš„4å¼ ä¸åŒå›¾ç‰‡è®¡ç®—æ¿€æ´»ç»Ÿè®¡ä¿¡æ¯ å‡å°‘large mini-batch sizeçš„éœ€æ±‚ Augementation for small object dection 2019ï¼šç•Œå®šå¤§ä¸­å°ç›®æ ‡$(0-32ï¼›32-96ï¼›96-âˆ)$ Self-Adversarial Training (SAT) è‡ªå¯¹æŠ—è®­ç»ƒ ä»¥2ä¸ªforward backward stagesçš„æ–¹å¼è¿›è¡Œæ“ä½œã€‚åœ¨ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œç¥ç»ç½‘ç»œæ”¹å˜çš„æ˜¯åŸå§‹å›¾åƒè€Œä¸æ˜¯çš„ç½‘ç»œæƒé‡ã€‚è¿™æ ·ç¥ç»ç½‘ç»œå¯¹å…¶è‡ªèº«è¿›è¡Œå¯¹æŠ—æ€§æ”»å‡»ï¼Œæ”¹å˜åŸå§‹å›¾åƒå¹¶åˆ›é€ å‡ºå›¾åƒä¸Šæ²¡æœ‰ç›®æ ‡çš„å‡è±¡ã€‚åœ¨ç¬¬2ä¸ªé˜¶æ®µä¸­ï¼Œé€šè¿‡æ­£å¸¸æ–¹å¼åœ¨ä¿®æ”¹çš„å›¾åƒä¸Šè¿›è¡Œç›®æ ‡æ£€æµ‹å¯¹ç¥ç»ç½‘ç»œè¿›è¡Œè®­ç»ƒã€‚ ä½¿ç”¨é—ä¼ ç®—æ³•é€‰æ‹©æœ€ä¼˜è¶…å‚æ•° ä¿®æ”¹çš„SAMã€ä¿®æ”¹çš„PANå’ŒCross mini-Batch Normalization (CmBN) Modified SAM Modified PAN SAMä»spatial-wise attentionä¿®æ”¹ä¸ºpoint-wise attentionã€‚ PANçš„ shortcut connectionæ”¹ä¸ºconcatenationã€‚ Cross mnin-Batch Normalization BNæ˜¯å¯¹å½“å‰mini-batchè¿›è¡Œå½’ä¸€åŒ–ï¼Œ CBNæ˜¯å¯¹å½“å‰ä»¥åŠå½“å‰å¾€å‰æ•°3ä¸ªmini-batchçš„ç»“æœè¿›è¡Œå½’ä¸€åŒ–ï¼Œ CmBN è¡¨ç¤º CBN ä¿®æ”¹ç‰ˆæœ¬,è¿™ä»…åœ¨å•ä¸ªæ‰¹æ¬¡å†…çš„mini-batchä¹‹é—´æ”¶é›†ç»Ÿè®¡ä¿¡æ¯ã€‚ å½“batch sizeå˜å°æ—¶ï¼ŒBNä¸ä¼šæ‰§è¡Œã€‚æ ‡å‡†å·®å’Œå‡å€¼çš„ä¼°è®¡å€¼å—æ ·æœ¬é‡çš„å½±å“ã€‚æ ·æœ¬é‡è¶Šå°ï¼Œå°±è¶Šä¸å¯èƒ½ä»£è¡¨åˆ†å¸ƒçš„å®Œæ•´æ€§ã€‚ YOLO V4 YOLOV4_CSPç½‘ç»œå›¾ Backbone ï¼šCSPDarkNet53 æ¯ä¸ªCSPæ¨¡å—å‰é¢çš„å·ç§¯æ ¸çš„å¤§å°éƒ½æ˜¯$3\\times3$ï¼Œstride=2ï¼Œèµ·åˆ°ä¸‹é‡‡æ ·çš„ä½œç”¨ã€‚ å› ä¸ºBackboneæœ‰5ä¸ªCSPæ¨¡å—ï¼Œè¾“å…¥å›¾åƒæ˜¯$608\\times608$ï¼Œæ‰€ä»¥ç‰¹å¾å›¾å˜åŒ–çš„è§„å¾‹æ˜¯ï¼š608-\u003e304-\u003e152-\u003e76-\u003e38-\u003e19 Cross Stage Partial Network è·¨é˜¶æ®µå±€éƒ¨ç½‘ç»œï¼šCSPNet CSPNet: A New Backbone that can Enhance Learning Capability of CNN åŸå§‹ä»£ç  CSPæ¨¡å—ï¼Œè§£å†³ç½‘ç»œä¼˜åŒ–ä¸­çš„æ¢¯åº¦ä¿¡æ¯é‡å¤ å°†åŸºç¡€å±‚çš„ç‰¹å¾æ˜ å°„åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œç„¶åé€šè¿‡è·¨é˜¶æ®µå±‚æ¬¡ç»“æ„å°†å®ƒä»¬åˆå¹¶ é€šè¿‡æˆªæ–­æ¢¯åº¦æµæ¥é˜²æ­¢è¿‡å¤šçš„é‡å¤æ¢¯åº¦ä¿¡æ¯ã€‚ å¢å¼ºCNNå­¦ä¹ èƒ½åŠ›,ä½¿å¾—åœ¨è½»é‡åŒ–çš„åŒæ—¶ä¿æŒå‡†ç¡®æ€§ é™ä½è®¡ç®—ç“¶é¢ˆ é™ä½å†…å­˜æˆæœ¬ Neckï¼šPAN ï¼Œ[SPP](####Enlarging Receptive Field æ‰©å¤§æ„Ÿå—é‡) SPPæ¨¡å—ï¼šæ˜¾è‘—åœ°å¢åŠ äº†æ„Ÿå—é‡ï¼Œåˆ†ç¦»å‡ºæœ€æ˜¾è‘—çš„ä¸Šä¸‹æ–‡ç‰¹å¾ï¼Œå¹¶ä¸”å‡ ä¹æ²¡æœ‰é€ æˆç½‘ç»œè¿è¡Œé€Ÿåº¦çš„é™ä½ã€‚ ã€ŠDC-SPP-Yoloã€‹ï¼šä¸»å¹²ç½‘ç»œé‡‡ç”¨SPPæ¯”å•ä¸€çš„ä½¿ç”¨æœ€å¤§æ± åŒ–æ–¹å¼æ›´åŠ æœ‰æ•ˆåœ°å¢åŠ ä¸»å¹²ç‰¹å¾çš„æ¥æ”¶èŒƒå›´ï¼›å¯ä»¥æ˜¾è‘—åˆ†ç¦»ä¸Šä¸‹æ–‡ç‰¹å¾ã€‚ FPN,è‡ªé¡¶å‘ä¸‹ï¼Œå°†é«˜å±‚çš„ç‰¹å¾ä¿¡æ¯é€šè¿‡ä¸Šé‡‡æ ·çš„æ–¹å¼è¿›è¡Œä¼ é€’èåˆï¼Œå¾—åˆ°è¿›è¡Œé¢„æµ‹çš„ç‰¹å¾å›¾ã€‚ä¼ è¾¾å¼ºè¯­ä¹‰ç‰¹å¾ PAN,è‡ªé¡¶å‘ä¸Šï¼Œä¼ è¾¾å¼ºå®šä½ç‰¹å¾ Headï¼šYOLOV3 ä½¿ç”¨æŠ€å·§ Bag of Freebies (BoF) for backbone CutMixå’ŒMosaicæ•°æ®å¢å¼ºï¼ŒDropBlockæ­£åˆ™åŒ–, ç±»æ ‡ç­¾å¹³æ»‘ Bag of Specials (BoS) for backbone Mishæ¿€æ´»å‡½æ•°ï¼Œè·¨é˜¶æ®µéƒ¨åˆ†è¿æ¥(CSP)ï¼Œå¤šè¾“å…¥åŠ æƒæ®‹å·®è¿æ¥ (MiWRC) Bag of Freebies (BoF) for detector: CIoUæŸå¤±å‡½æ•°, CmBN, DropBlockæ­£åˆ™åŒ–ï¼ŒMosaicæ•°æ®å¢å¼ºï¼Œè‡ªå¯¹æŠ—è®­ç»ƒï¼ˆSATï¼‰ï¼ŒEliminate grid sensitivityï¼Œä¸ºæ¯ä¸ªçœŸå®æ ‡ç­¾ä½¿ç”¨å¤šä¸ªanchorï¼ŒCosine annealing schedulerï¼Œä¼˜åŒ–çš„è¶…å‚æ•°ï¼Œéšæœºçš„è®­ç»ƒå½¢çŠ¶ Bag of Specials (BoS) for detector: Mishæ¿€æ´»å‡½æ•°ï¼ŒSPPæ¨¡å—ï¼ŒSAMæ¨¡å—ï¼Œè·¯å¾„èšåˆæ¨¡å—ï¼ˆPANï¼‰, DIoU-NMS ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:22:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Experiments ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:23:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"å®éªŒè®¾ç½® ImageNetå›¾åƒåˆ†ç±»å®éªŒ è®­ç»ƒæ­¥éª¤ï¼š8,000,000 batch size=128ï¼›mini-batch size=32 å¤šé¡¹å¼è¡°å‡è°ƒåº¦ç­–ç•¥åˆå§‹å­¦ä¹ ç‡=0.1 warm-upæ­¥éª¤=1,000 åŠ¨é‡å› å­=0.9ï¼›è¡°å‡æƒé‡=0.005 å‡ä½¿ç”¨1080 Tiæˆ–2080 Ti GPUè¿›è¡Œè®­ç»ƒ MS COCOç›®æ ‡æ£€æµ‹å®éªŒ è®­ç»ƒæ­¥éª¤ï¼š500,500 batch size=64æ‰§è¡Œå¤šå°ºåº¦è®­ç»ƒï¼›mini-batch size=8æˆ–è€…4 æ­¥é˜¶è¡°å‡å­¦ä¹ ç‡è°ƒåº¦ç­–ç•¥ï¼Œåˆå§‹å­¦ä¹ ç‡=0.01ï¼Œåˆ†åˆ«åœ¨40ä¸‡æ­¥å’Œ45ä¸‡æ­¥ä¸Šä¹˜ä»¥ç³»æ•°0.1 åŠ¨é‡å› å­=0.9ï¼›è¡°å‡æƒé‡=0.0005 é—ä¼ ç®—æ³•ä½¿ç”¨YOLOv3-SPPè®­ç»ƒGIoUæŸå¤±ï¼Œå¹¶æœç´¢300ä¸ªepochçš„æœ€å°5ké›† æœç´¢å­¦ä¹ ç‡=0.00261ï¼ŒåŠ¨é‡=0.949ï¼ŒIoUé˜ˆå€¼= 0.213ï¼Œ loss normalizer 0.07ã€‚ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:23:1","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"ä¸åŒæŠ€å·§å¯¹åˆ†ç±»å™¨å’Œæ£€æµ‹å™¨è®­ç»ƒçš„å½±å“ åˆ†ç±»å™¨è®­ç»ƒçš„BoF-backbone (Bag of Freebies)åŒ…æ‹¬CutMixå’ŒMosaicæ•°æ®å¢å¼ºã€ç±»åˆ«æ ‡ç­¾smoothingã€‚ Influence of BOF and Mish on the clasffie æ£€æµ‹å™¨æ¶ˆèå®éªŒï¼š Ablation Studies of BOF Sï¼šæ¶ˆé™¤gridçµæ•åº¦ï¼Œåœ¨YOLOv3é€šè¿‡æ–¹ç¨‹$b_x=\\sigma(t_x)+c_x;b_y=\\sigma(t_y)+c_y$è®¡ç®—å¯¹è±¡åæ ‡ï¼Œå…¶ä¸­$c_x,c_y$å§‹ç»ˆä¸ºæ•´æ•°ï¼Œå› æ­¤ï¼Œå½“$b_x$å€¼æ¥è¿‘$c_x$æˆ–$c_x+1$æ—¶éœ€è¦æé«˜çš„$t_x$ç»å¯¹å€¼ã€‚æˆ‘ä»¬é€šè¿‡å°†sigmoidä¹˜ä»¥è¶…è¿‡1.0çš„å› å­æ¥è§£å†³æ­¤é—®é¢˜ï¼Œä»è€Œæ¶ˆé™¤äº†æ²¡æœ‰æ£€æµ‹åˆ°ç›®æ ‡æ ¼å­çš„å½±å“ã€‚ Mï¼šMosaicæ•°æ®å¢å¼º ITï¼šIoUé˜ˆå€¼â€”â€”å¦‚æœIoU(ground truth, anchor) \u003e IoUé˜ˆå€¼ï¼Œä¸ºä¸€ä¸ªground truthä½¿ç”¨å¤šä¸ªanchor GAï¼šé—ä¼ ç®—æ³• LSï¼šç±»åˆ«æ ‡ç­¾smoothing CBNï¼šCmBN CAï¼šCosine annealing schedulerâ€”â€”ä½™å¼¦é€€ç«è¡°å‡æ³•;ä¸Šå‡çš„æ—¶å€™ä½¿ç”¨çº¿æ€§ä¸Šå‡ï¼Œä¸‹é™çš„æ—¶å€™æ¨¡æ‹Ÿcoså‡½æ•°ä¸‹é™ã€‚æ‰§è¡Œå¤šæ¬¡ã€‚ DMï¼šDynamic mini-batch sizeâ€”â€”é‡‡ç”¨éšæœºè®­ç»ƒå½¢çŠ¶æ—¶ï¼Œå¯¹äºå°åˆ†è¾¨ç‡çš„è¾“å…¥è‡ªåŠ¨å¢å¤§mini-batchçš„å¤§å° OAï¼šæœ€ä¼˜åŒ–Anchors å½“ä½¿ç”¨SPPã€PANå’ŒSAMæ—¶ï¼Œæ£€æµ‹å™¨è·å¾—æœ€ä½³æ€§èƒ½ã€‚ Ablation Studies of BOS ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:23:2","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"ä¸åŒbackboneå’Œé¢„è®­ç»ƒæƒé‡å¯¹æ£€æµ‹å™¨è®­ç»ƒçš„å½±å“ CSPDarknet53æ¯”CSPResNeXt50æ›´é€‚åˆäºåšæ£€æµ‹å™¨çš„backbone ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:23:3","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"ä¸åŒçš„mini-batch sizeå¯¹æ£€æµ‹å™¨è®­ç»ƒçš„å½±å“ è®­ç»ƒæ—¶åŠ å…¥BoFå’ŒBoSåmini-batchå¤§å°å‡ ä¹å¯¹æ£€æµ‹å™¨æ€§èƒ½æ²¡æœ‰ä»»ä½•å½±å“ ä¸å†éœ€è¦ä½¿ç”¨æ˜‚è´µçš„GPUæ¥è¿›è¡Œè®­ç»ƒ;ä¸€ä¸ªå³å¯ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:23:4","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» çŸ¥ä¹ï¼šYOLOv4 ä»‹ç»åŠå…¶æ¨¡å‹ä¼˜åŒ–æ–¹æ³• çŸ¥ä¹ï¼šæ·±å…¥æµ…å‡ºYoloç³»åˆ—ä¹‹Yolov3\u0026Yolov4\u0026Yolov5\u0026Yoloxæ ¸å¿ƒåŸºç¡€çŸ¥è¯†å®Œæ•´è®²è§£ YOLOv4ç½‘ç»œè¯¦è§£ YOLOv4é‡ç£…å‘å¸ƒï¼Œäº”å¤§æ”¹è¿›ï¼ŒäºŒåå¤šé¡¹æŠ€å·§å®éªŒï¼Œå ªç§°æœ€å¼ºç›®æ ‡æ£€æµ‹ä¸‡èŠ±ç­’ é¡¹ç›®å®è·µYOLO V4ä¸‡å­—åŸç†è¯¦ç»†è®²è§£å¹¶è®­ç»ƒè‡ªå·±çš„æ•°æ®é›† æ¿€æ´»å‡½æ•°(ReLU, Swish, Maxout) YOLOv4è®ºæ–‡è¯¦ç»†è§£è¯» ç¿æ™ºçš„ç›®æ ‡æ£€æµ‹32â€”â€”TF2æ­å»ºYoloV4ç›®æ ‡æ£€æµ‹å¹³å° YOLO V4 â€” æŸå¤±å‡½æ•°è§£æ 004.YOLO-V4ï¼ˆyoloç³»åˆ—ï¼‰ Explanation of YOLO V4 a one stage detector ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:24:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Scaled-YOLOv4 æ–‡ç« æ ‡é¢˜ï¼šScaled-YOLOv4: Scaling Cross Stage Partial Network ä½œè€…ï¼šChien-Yao Wang, Alexey Bochkovskiy, Hong-Yuan Mark Liao å‘è¡¨æ—¶é—´ï¼š(CVPR 2021) source code - Pytorch (use to reproduce results) scaled YOLOV4_Lç½‘ç»œå›¾ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:25:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» Review â€” Scaled-YOLOv4: Scaling Cross Stage Partial Network YOLOæ¼”é€² â€” 4 â€” Scaled-YOLOv4 ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:26:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"YOLO V5 åŸå§‹ä»£ç  6.1 YOLOV5_L_2ç½‘ç»œå›¾ YOLOV5_Lç½‘ç»œå›¾ æ•°æ®å¢å¼º data/hyps/hyp.scratch-high.yamlé…ç½® Mosaic copy pasteï¼šä¸åŒç›®æ ‡å¤åˆ¶ç²˜è´´æ‹¼æ¥ Random affine MixUp Albumentations æ•°æ®å¢å¼ºåº“ Augment HSV Random horizontal flip è®­ç»ƒç­–ç•¥ Multi-scale training (0.5~1.5x) AutoAnchor (For training custom data) Warmup and Cosine LR scheduler EMA (Exponential Moving Average) Mixed precision Evolve hyper-parameters ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:27:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"æŸå¤±è®¡ç®— Classes loss, åˆ†ç±»æŸå¤±ï¼Œé‡‡ç”¨çš„æ˜¯BCE loss, æ³¨æ„åªè®¡ç®—æ­£æ ·æœ¬çš„åˆ†ç±»æŸå¤±ã€‚ Objectness loss, objæŸå¤±ï¼Œé‡‡ç”¨çš„ä¾ç„¶æ˜¯BCE loss,æ³¨æ„è¿™é‡Œçš„obæŒ‡çš„æ˜¯ç½‘ç»œé¢„æµ‹çš„ç›®æ ‡è¾¹ç•Œæ¡†ä¸GT Boxçš„CIoUã€‚è¿™é‡Œè®¡ç®—çš„æ˜¯æ‰€æœ‰æ ·æœ¬çš„objæŸå¤±ã€‚ $$ Loss = \\lambda_1L_{cls} + \\lambda_2L_{obj} + \\lambda_3L_{loc} $$","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:28:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"å¹³è¡¡ä¸åŒå°ºåº¦æŸå¤± $$ L_{obj} = 4.0\\cdot L_{obj}^{small}+1.0 L_{obj}^{medum}+0.4 L_{obj}^{large} $$","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:28:1","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» YOLOv5ç½‘ç»œè¯¦è§£ YOLOv5 æ•™ç¨‹ è®­ç»ƒè‡ªå®šä¹‰æ•°æ® ğŸš€æ¨èçš„ è·å¾—æœ€ä½³è®­ç»ƒç»“æœçš„æç¤º â˜˜ï¸ æ¨èçš„ æƒé‡å’Œåå·®è®°å½• ğŸŒŸæ–°çš„ ç”¨äºæ•°æ®é›†ã€æ ‡ç­¾å’Œä¸»åŠ¨å­¦ä¹ çš„ Roboflow ğŸŒŸæ–°çš„ å¤š GPU è®­ç»ƒ PyTorch é›†çº¿å™¨ â­æ–°çš„ TFLiteã€ONNXã€CoreMLã€TensorRT å¯¼å‡º ğŸš€ æµ‹è¯•æ—¶é—´å¢å¼º (TTA) æ¨¡å‹åˆå¥ æ¨¡å‹ä¿®å‰ª/ç¨€ç– è¶…å‚æ•°æ¼”åŒ– å†»ç»“å±‚çš„è¿ç§»å­¦ä¹  â­æ–°çš„ æ¶æ„æ€»ç»“ â­æ–°çš„ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:29:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"YOLOX æ–‡ç« æ ‡é¢˜ï¼šYOLOX: Exceeding YOLO Series in 2021 ä½œè€…ï¼šZheng Ge, Songtao Liu, Feng Wang, Zeming Li, Jian Sun å‘è¡¨æ—¶é—´ï¼š(CVPR 2021) åŸå§‹ä»£ç  Anchor-Free å’Œyolov5çš„v5.0ä¸åŒçš„æ˜¯headéƒ¨åˆ† YOLOX_L_2ç½‘ç»œå›¾ YOLOX_Lç½‘ç»œå›¾ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:30:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» çŸ¥ä¹ï¼šæ·±å…¥æµ…å‡ºYoloç³»åˆ—ä¹‹Yoloxæ ¸å¿ƒåŸºç¡€å®Œæ•´è®²è§£ Bç«™ï¼šYoloXç½‘ç»œè¯¦è§£ ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:31:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"YOLO V7 æ–‡ç« æ ‡é¢˜ï¼šYOLOv7: Trainable bag-of-freebies sets new state-of-the-art for real-time object detectors ä½œè€…ï¼šChien-Yao Wang, Alexey Bochkovskiy, Hong-Yuan Mark Liao å‘è¡¨æ—¶é—´ï¼š( 2022) å®˜æ–¹æºç  ","date":"2023-06-04","objectID":"/posts/deeplearning/object-detection/yolo/:32:0","tags":["Deep Learning","ç›®æ ‡æ£€æµ‹"],"title":"YOLO","uri":"/posts/deeplearning/object-detection/yolo/"},{"categories":["Deep Learning"],"content":"Distilling knowledge ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/distilling-knowledge-/","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"Distilling knowledge ","uri":"/posts/deeplearning/light-weight/distilling-knowledge-/"},{"categories":["Deep Learning"],"content":"Distilling knowledge æ–‡ç« æ ‡é¢˜ï¼šDistilling the knowledge in a neural network ä½œè€…ï¼šHinton G, Vinyals O, Dean J. å‘è¡¨æ—¶é—´ï¼š(NIPS 2014) ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/distilling-knowledge-/:1:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"Distilling knowledge ","uri":"/posts/deeplearning/light-weight/distilling-knowledge-/"},{"categories":["Deep Learning"],"content":"Distillation $$ q_i = \\frac{exp(z_i/T)}{\\sum _j exp(z_j/T)} $$","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/distilling-knowledge-/:2:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"Distilling knowledge ","uri":"/posts/deeplearning/light-weight/distilling-knowledge-/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» è®ºæ–‡ä¸»é¡µ è’¸é¦æœºç†è®ºæ–‡ Hinton-NeurIPS2019è®ºæ–‡ï¼šWhen Does Label Smoothing Help? ICLR2021è®ºæ–‡ï¼šIs Label Smoothing Truly Incompatible with Knowledge Distillation: An Empirical Study ï¼šçŸ¥ä¹è§£è¯» Does Knowledge Distillation Really Work? ï¼šçŸ¥ä¹è§£è¯» æ ‡ç­¾å¹³æ»‘å’ŒçŸ¥è¯†è’¸é¦çš„å…³ç³» å‘å±•è¶‹åŠ¿ å¤šè€å¸ˆå¤šå­¦ç”Ÿ çŸ¥è¯†çš„è¡¨ç¤ºã€æ•°æ®é›†è’¸é¦ã€å¯¹æ¯”å­¦ä¹ ï¼š Attention Transferè®ºæ–‡ï¼šhttps://arxiv.org/abs/1612.03928 Dataset Distillation å¤šæ¨¡æ€ã€çŸ¥è¯†å›¾è°±ã€é¢„è®­ç»ƒå¤§æ¨¡å‹çš„çŸ¥è¯†è’¸é¦ è®ºæ–‡è§£è¯» Knowledge Distillation ç™¾ç§‘ Knowledge distillation in deep learning and its applications Knowledge Distillation: Principles, Algorithms, Applications Hintonå®˜æ–¹PPT çŸ¥ä¹ï¼šçŸ¥è¯†è’¸é¦æ˜¯ä»€ä¹ˆï¼Ÿä¸€ä»½å…¥é—¨éšç¬”â€”â€”å…¬å¼ï¼ˆ2ï¼‰çš„è¯¦ç»†æ¨å¯¼ çŸ¥ä¹ï¼šã€ç»å…¸ç®€è¯»ã€‘çŸ¥è¯†è’¸é¦(Knowledge Distillation) ç»å…¸ä¹‹ä½œ çŸ¥ä¹ï¼šå“ªä½æ¥èŠèŠæ·±åº¦å­¦ä¹ çŸ¥è¯†è’¸é¦ï¼ˆknowledge distillationï¼‰ï¼Ÿ åšå®¢è§£è¯»1 åšå®¢è§£è¯»2 åšå®¢è§£è¯»3 åšå®¢è§£è¯»4 çŸ¥ä¹:é™€é£è½® ä»£ç åº“ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/distilling-knowledge-/:3:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"Distilling knowledge ","uri":"/posts/deeplearning/light-weight/distilling-knowledge-/"},{"categories":["Deep Learning"],"content":"GhostNet","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/ghostnet/","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"GhostNet","uri":"/posts/deeplearning/light-weight/ghostnet/"},{"categories":["Deep Learning"],"content":"GhostNet æ–‡ç« æ ‡é¢˜ï¼šGhostNet: More Features from Cheap Operations ä½œè€…ï¼šKai Han, Yunhe Wang, Qi Tian, Jianyuan Guo, Chunjing Xu, Chang Xu å‘è¡¨æ—¶é—´ï¼š(CVPR 2020) å®˜æ–¹æºç  ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/ghostnet/:1:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"GhostNet","uri":"/posts/deeplearning/light-weight/ghostnet/"},{"categories":["Deep Learning"],"content":"GhostNets æ–‡ç« æ ‡é¢˜ï¼šGhostNets on Heterogeneous Devices via Cheap Operations ä½œè€…ï¼šKai Han, Yunhe Wang, Chang Xu, Jianyuan Guo, Chunjing Xu, Enhua Wu, Qi Tian å‘è¡¨æ—¶é—´ï¼š(IJCV 2022) å®˜æ–¹æºç  ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/ghostnet/:2:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"GhostNet","uri":"/posts/deeplearning/light-weight/ghostnet/"},{"categories":["Deep Learning"],"content":"LCNet","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/lcnet/","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"LCNet","uri":"/posts/deeplearning/light-weight/lcnet/"},{"categories":["Deep Learning"],"content":"PP-LCNet æ–‡ç« æ ‡é¢˜ï¼šPP-LCNet: A Lightweight CPU Convolutional Neural Network ä½œè€…ï¼šCheng Cui, Tingquan Gao, Shengyu Wei, Yuning Du, Ruoyu Guo, Shuilong Dong, Bin Lu, Ying Zhou, Xueying Lv, Qiwen Liu, Xiaoguang Hu, Dianhai Yu, Yanjun Ma å‘è¡¨æ—¶é—´ï¼š(2021) å®˜æ–¹æºç  è®¾è®¡æµç¨‹ å…¨é¢æ‘¸åº•ï¼šå°†ç›®å‰æ‰€æœ‰è½»é‡çº§æ¨¡å‹åŠç»„åˆæ¨¡å‹åœ¨Intel CPUä¸Šåšæ¨ç†ï¼ˆå¼€å¯MKLDNNï¼‰,è®°å½•æ¨ç†æ—¶é—´å’Œç²¾åº¦ æ€»ç»“å½’çº³ï¼šå¯»æ‰¾æ¨ç†æ—¶é—´è¾ƒå°ï¼Œç²¾åº¦è¾ƒé«˜çš„æ¨¡å‹çš„ç‰¹ç‚¹ å¼ºå¼ºè”åˆï¼šç»„åˆè¿™äº›blockæ„å»ºä¸€ä¸ªåŸºæœ¬çš„baselineæ¨¡å‹â€”â€”BaseNet é”¦ä¸Šæ·»èŠ±ï¼šåŸºäºBaseNetï¼Œå®éªŒæ€§åœ°æ·»åŠ å­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œå¸¸ç”¨çš„æå‡æ¨¡å‹æ€§èƒ½çš„æ¨¡å— æ›¿æ¢æ¿€æ´»å‡½æ•°ReLUä¸ºH-Swish ä¸æ¶‰åŠæŒ‡æ•°è¿ç®—ï¼Œæ¨¡å‹æ¨ç†æ—¶é—´å‡ ä¹ä¸å˜ï¼Œç²¾åº¦æå‡2%~3% åˆé€‚ä½ç½®æ·»åŠ SEæ¨¡å— LCNet_SE_location åˆé€‚ä½ç½®æ·»åŠ æ›´å¤§å·ç§¯æ ¸ kernel Sizeä¸æ˜¯è¶Šå¤§è¶Šå¥½ï¼Œæœ‰æœ€ä¼˜å€¼ LCNet_large_kernel_location GAPåæ·»åŠ æ›´å¤§çš„1x1conv GAPåç›´æ¥æ¥åˆ†ç±»å±‚ï¼Œç‰¹å¾è¿›ä¸€æ­¥æ•´åˆåŠ å·¥ä¼šå—é™ï¼Œæ·»åŠ ä¸€å±‚å¤§çš„1x1çš„convå±‚å¯ä»¥æœ‰æ•ˆé¿å…è¿™ä¸ªé—®é¢˜ æ¨ç†æ—¶é—´å¢åŠ ï¼š10% ç²¾åº¦å¢åŠ ï¼š2%~3% LCNet LCNet LCNet_ablation LCNet_ablation ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/lcnet/:1:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"LCNet","uri":"/posts/deeplearning/light-weight/lcnet/"},{"categories":["Deep Learning"],"content":"MobileNet","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"MobileNetV1 æ–‡ç« æ ‡é¢˜ï¼šMobileNets: Efficient Convolutional Neural Networks for Mobile Vision Applications ä½œè€…ï¼šAndrew G. Howard, Menglong Zhu, Bo Chen, Dmitry Kalenichenko, Weijun Wang, Tobias Weyand, Marco Andreetto, Hartwig Adam å‘è¡¨æ—¶é—´ï¼š(CVPR 2017) MobileNet V1æ˜¯è°·æ­Œ2017å¹´æå‡ºçš„è½»é‡åŒ–å·ç§¯ç¥ç»ç½‘ç»œï¼Œç”¨äºåœ¨ç§»åŠ¨ç«¯ã€è¾¹ç¼˜ç»ˆç«¯è®¾å¤‡ä¸Šè¿›è¡Œå®æ—¶è¾¹ç¼˜è®¡ç®—å’Œäººå·¥æ™ºèƒ½æ¨ç†éƒ¨ç½²ã€‚ ä½¿ç”¨æ·±åº¦å¯åˆ†ç¦»å·ç§¯Depthwise Separable Convolutionï¼Œåœ¨ä¿è¯å‡†ç¡®åº¦æ€§èƒ½çš„åŸºç¡€ä¸Šï¼Œå°†å‚æ•°é‡ã€è®¡ç®—é‡å‹ç¼©ä¸ºæ ‡å‡†å·ç§¯çš„å…«åˆ°ä¹åˆ†ä¹‹ä¸€ã€‚å¼•å…¥ç½‘ç»œå®½åº¦è¶…å‚æ•°å’Œè¾“å…¥å›¾åƒåˆ†è¾¨ç‡è¶…å‚æ•°ï¼Œè¿›ä¸€æ­¥æ§åˆ¶ç½‘ç»œå°ºå¯¸ã€‚ åœ¨ImageNetå›¾åƒåˆ†ç±»ã€Stanford Dogç»†ç²’åº¦å›¾åƒåˆ†ç±»ã€ç›®æ ‡æ£€æµ‹ã€äººè„¸å±æ€§è¯†åˆ«ã€äººè„¸ç¼–ç ã€ä»¥å›¾æœåœ°ç­‰è®¡ç®—æœºè§†è§‰ä»»åŠ¡ä¸Šï¼Œç»“åˆçŸ¥è¯†è’¸é¦è¿›è¡Œè¯„ä¼°ï¼ŒMobileNetè¡¨ç°å‡ºæè‡´çš„è½»é‡åŒ–å’Œé€Ÿåº¦æ€§èƒ½ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:1:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"Prior Work å‹ç¼©å·²æœ‰æ¨¡å‹ çŸ¥è¯†è’¸é¦ æƒå€¼é‡åŒ– å‰ªæ æƒé‡å‰ªæ é€šé“å‰ªæ æ³¨æ„åŠ›è¿ç§» ç›´æ¥è®­ç»ƒå°æ¨¡å‹ squeezeNet MobileNet ShuffleNet Xception EfficientNet NasNet DARTS ç›´æ¥åŠ é€Ÿå·ç§¯è¿ç®— im2col+GEMM Winograd ä½ç§©åˆ†è§£ ç¡¬ä»¶éƒ¨ç½² TensorRT Jetson Tensorflow-slim Tensorflow-lite Openvino ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:2:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"MobileNet Architecture ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:3:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"Depthwise Separable Convolution æ·±åº¦å¯åˆ†ç¦»å·ç§¯ å°†æ ‡å‡†å·ç§¯åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šdepthwise convolutionï¼Œ$1\\times1$ pointwise convolution é€å±‚å·ç§¯å¤„ç†æ¯ä¸ªç‰¹å¾é€šé“ä¸Šçš„ç©ºé—´ä¿¡æ¯ï¼Œé€ç‚¹å·ç§¯è¿›è¡Œé€šé“é—´çš„ç‰¹å¾èåˆã€‚ æ ‡å‡†å·ç§¯ï¼šå·ç§¯æ ¸channel=è¾“å…¥ç‰¹å¾çŸ©é˜µchannelï¼›è¾“å‡ºç‰¹å¾çŸ©é˜µchannel=å·ç§¯æ ¸ä¸ªæ•° æ·±åº¦å¯åˆ†ç¦»å·ç§¯ï¼šå·ç§¯æ ¸channel=1ï¼›è¾“å‡ºç‰¹å¾çŸ©é˜µchannel=å·ç§¯æ ¸ä¸ªæ•°=è¾“å…¥ç‰¹å¾çŸ©é˜µchannelï¼› æ¯ä¸ªè¾“å…¥é€šé“åº”ç”¨ä¸€ä¸ªå·ç§¯æ ¸è¿›è¡Œé€å±‚å·ç§¯ æ ‡å‡†å·ç§¯ æ·±åº¦å¯åˆ†ç¦»å·ç§¯ $D_K$ï¼šå·ç§¯æ ¸å°ºå¯¸ï¼›$M$ï¼šå·ç§¯æ ¸é€šé“æ•°ï¼ˆè¾“å…¥é€šé“æ•°ï¼‰ï¼›$N$ï¼šå·ç§¯æ ¸ä¸ªæ•°ï¼ˆè¾“å‡ºé€šé“æ•°ï¼‰ï¼›$D_F$ï¼šç‰¹å¾å›¾å¤§å° æ ‡å‡†å·ç§¯å‚æ•°è®¡ç®—ï¼š$D_K\\times D_K\\times M\\times N$; è®¡ç®—é‡ï¼š$D_K\\times D_K\\times M\\times N\\times D_F\\times D_F$ æ·±åº¦å¯åˆ†ç¦»å·ç§¯å‚æ•°è®¡ç®—ï¼š$D_K\\times D_K\\times M+M\\times N$; æ·±åº¦å¯åˆ†ç¦»å·ç§¯è®¡ç®—é‡ï¼š$D_K\\times D_K\\times M\\times D_F\\times D_F+M\\times N \\times D_F \\times D_F$ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:3:1","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"Network Structure and Training MobileNet Body Architecture Filter Shapeï¼šå·ç§¯æ ¸å°ºå¯¸Ã—è¾“å…¥ç‰¹å¾çŸ©é˜µæ·±åº¦Ã—å·ç§¯æ ¸ä¸ªæ•° ç¬¬ä¸€å±‚æ˜¯æ ‡å‡†å·ç§¯ æ”¾å¼ƒpoolingå±‚ï¼Œè€Œä½¿ç”¨stride=2çš„å·ç§¯ æ‰€æœ‰å±‚åé¢éƒ½æœ‰BNå±‚å’ŒReLU6ï¼›æ›´å¤šçš„ReLU6ï¼Œå¢åŠ äº†æ¨¡å‹çš„éçº¿æ€§å˜åŒ–ï¼Œå¢å¼ºäº†æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚ è¿™ä¸ªæ¿€æ´»å‡½æ•°åœ¨float16/int8çš„åµŒå…¥å¼è®¾å¤‡ä¸­æ•ˆæœå¾ˆå¥½ï¼Œèƒ½è¾ƒå¥½åœ°ä¿æŒç½‘ç»œçš„é²æ£’æ€§ã€‚ æ·±åº¦å¯åˆ†ç¦»å·ç§¯ MobileNetV1çš„å¤§éƒ¨åˆ†è®¡ç®—é‡å’Œå‚æ•°é‡éƒ½æ˜¯$1\\times1$å·ç§¯èŠ±è´¹çš„ã€‚ MobileNetV1çš„è®¡ç®—é‡å’Œå‚æ•°åˆ†å¸ƒ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:3:2","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"Width and Resolution Multiplier å®½åº¦$\\alpha $å’Œåˆ†è¾¨ç‡$ \\rho$è¶…å‚æ•° å®½åº¦è¶…å‚æ•°$\\alpha $ï¼šæ§åˆ¶å·ç§¯å±‚å·ç§¯æ ¸ä¸ªæ•° $D_K\\times D_K\\times \\alpha M\\times D_F\\times D_F+\\alpha M\\times \\alpha N \\times D_F \\times D_F$ $\\alpha \\in(0,1]$ï¼›ä¸€èˆ¬è®¾ç½®ä¸ºï¼š$1, 0.75,0.5,0.25$ åˆ†è¾¨ç‡è¶…å‚æ•°$\\rho $ï¼šæ§åˆ¶è¾“å…¥å›¾åƒå¤§å° $D_K\\times D_K\\times \\alpha M\\times \\rho D_F\\times \\rho D_F+\\alpha M\\times \\alpha N \\times \\rho D_F \\times \\rho D_F$ $\\rho \\in(0,1]$ï¼›ä¸€èˆ¬è®¾ç½®ä¸ºï¼š$1, \\frac {6}{7},\\frac {5}{7},\\frac {4}{7}$ å¯¹åº”åˆ†è¾¨ç‡ä¸º$224,192,160,128$ è®¡ç®—ä¸¾ä¾‹ï¼š$D_K=3,M=512,N=512,D_F=14$ MobileNetV1çš„è®¡ç®—ä¾‹å­ æ·±åº¦å·ç§¯åœ¨GPUä¸Šè¿è¡Œé€Ÿåº¦è¿˜ä¸å¦‚ä¸€èˆ¬çš„æ ‡å‡†å·ç§¯ï¼Œå› ä¸ºdepthwise çš„å·ç§¯æ ¸å¤ç”¨ç‡æ¯”æ™®é€šå·ç§¯è¦å°å¾ˆå¤šï¼Œè®¡ç®—å’Œå†…å­˜è®¿é—®çš„æ¯”å€¼æ¯”æ™®é€šå·ç§¯æ›´å°ï¼Œå› æ­¤ä¼šèŠ±æ›´å¤šæ—¶é—´åœ¨å†…å­˜å¼€é”€ä¸Šï¼Œè€Œä¸”per-channelçš„çŸ©é˜µè®¡ç®—å¾ˆå°ä¸å®¹æ˜“å¹¶è¡Œå¯¼è‡´çš„æ›´æ…¢ï¼Œä½†ç†è®ºä¸Šè®¡ç®—é‡å’Œå‚æ•°é‡éƒ½æ˜¯å¤§å¤§å‡å°‘çš„ï¼Œåªæ˜¯åº•å±‚ä¼˜åŒ–çš„é—®é¢˜ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:3:3","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"ä»£ç  import torch.nn as nn class MobileNet(nn.Module): def __init__(self, num_classes=1000): super(MobileNet, self).__init__() self.num_classes = num_classes def conv_bn(inp, oup, stride): return nn.Sequential( nn.Conv2d(inp, oup, 3, stride, 1, bias=False), nn.BatchNorm2d(oup), nn.ReLU(inplace=True) ) def conv_dw(inp, oup, stride): return nn.Sequential( nn.Conv2d(inp, inp, 3, stride, 1, groups=inp, bias=False), nn.BatchNorm2d(inp), nn.ReLU(inplace=True), nn.Conv2d(inp, oup, 1, 1, 0, bias=False), nn.BatchNorm2d(oup), nn.ReLU(inplace=True), ) self.model = nn.Sequential( conv_bn(3, 32, 2), conv_dw(32, 64, 1), conv_dw(64, 128, 2), conv_dw(128, 128, 1), conv_dw(128, 256, 2), conv_dw(256, 256, 1), conv_dw(256, 512, 2), conv_dw(512, 512, 1), conv_dw(512, 512, 1), conv_dw(512, 512, 1), conv_dw(512, 512, 1), conv_dw(512, 512, 1), conv_dw(512, 1024, 2), conv_dw(1024, 1024, 1), nn.AvgPool2d(7), ) self.fc = nn.Linear(1024, self.num_classes) def forward(self, x): x = self.model(x) x = x.view(-1, 1024) x = self.fc(x) return x ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:4:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"æ‰©å±•é˜…è¯» Kerasä¸­çš„MobileNeté¢„è®­ç»ƒæ¨¡å‹æ–‡æ¡£ Kerasä¸­çš„MobileNeté¢„è®­ç»ƒæ¨¡å‹ä»£ç  Laurent Sifre2013åšå£«è®ºæ–‡ï¼šRigid-motion scattering for image classification] è´¾æ‰¬æ¸…åšå£«è®ºæ–‡ ä¸ºä»€ä¹ˆ MobileNetã€ShuffleNet åœ¨ç†è®ºä¸Šé€Ÿåº¦å¾ˆå¿«ï¼Œå·¥ç¨‹ä¸Šå¹¶æ²¡æœ‰ç‰¹åˆ«å¤§çš„æå‡ï¼Ÿ è½»é‡çº§ç¥ç»ç½‘ç»œâ€œå·¡ç¤¼â€ï¼ˆäºŒï¼‰â€”â€” MobileNetï¼Œä»V1åˆ°V3 Why MobileNet and Its Variants (e.g. ShuffleNet) Are Fast å·ç§¯ç¥ç»ç½‘ç»œä¸­çš„Separable Convolution Googleâ€™s MobileNets on the iPhone ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:5:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"MobileNetV2 æ–‡ç« æ ‡é¢˜ï¼šMobileNetV2: Inverted Residuals and Linear Bottlenecks ä½œè€…ï¼šMark Sandlerï¼Œ Andrew Howard ï¼ŒMenglong Zhu ï¼ŒAndrey Zhmoginovï¼Œ Liang-Chieh Chen å‘è¡¨æ—¶é—´ï¼š(CVPR 2018) ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:6:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"Preliminaries, discussion and intuition ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:7:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"[Depthwise Separable Convolution](###Depthwise Separable Convolution æ·±åº¦å¯åˆ†ç¦»å·ç§¯) ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:7:1","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"linear bottleneck MobileNetV2_MobileNetV1 MobileNetV2å¾®ç»“æ„ ç¬¬ä¸€å±‚Pointwise convolutionï¼šç›®çš„æ˜¯åœ¨æ•°æ®è¿›å…¥æ·±åº¦å·ç§¯ä¹‹å‰æ‰©å±•æ•°æ®ä¸­çš„é€šé“æ•° Depthwise convolutionçš„Filteræ•°é‡å–å†³äºä¹‹å‰çš„Pointwiseçš„é€šé“æ•°ã€‚è€Œè¿™ä¸ªé€šé“æ•°æ˜¯å¯ä»¥ä»»æ„æŒ‡å®šçš„ï¼Œå› æ­¤è§£é™¤äº†3x3å·ç§¯æ ¸ä¸ªæ•°çš„é™åˆ¶ ç¬¬äºŒæ¬¡Pointwiseåˆ™ä¸é‡‡ç”¨éçº¿æ€§æ¿€æ´»ï¼Œä¿ç•™çº¿æ€§ç‰¹å¾ If the manifold of interest remains non-zero volume after ReLU transformation, it corresponds to a linear transformation. ReLU is capable of preserving complete information about the input manifold, but only if the input manifold lies in a low-dimensional subspace of the input space. ReLUæ¿€æ´»å‡½æ•°å¯¹ä½ç»´ç‰¹å¾ä¿¡æ¯é€ æˆå¤§é‡æŸå¤±ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:7:2","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"Inverted residuals Inverted residuals ç°è‰²ä¸ºä¸‹ä¸€ä¸ªç»“æ„çš„å¼€å§‹ï¼›æœ‰æ ¼å­é˜´å½±çš„å±‚ï¼šè¡¨ç¤ºä¸åŒ…å«éçº¿æ€§çš„å±‚ The diagonally hatched texture indicates layers that do not contain non-linearities. MobileNetV2_ResNet MobileNetV2_ExpandProject ResNet å…ˆé™ç»´ (0.25å€)ã€å·ç§¯ã€å†å‡ç»´ï¼Œè€Œ MobileNet V2 åˆ™æ˜¯ å…ˆå‡ç»´ (6å€)ã€å·ç§¯ã€å†é™ç»´ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:7:3","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"Information flow interpretation compress æ‰©å±•å±‚å……å½“è§£å‹ç¼©å™¨ï¼ˆå¦‚unzipï¼‰ï¼Œé¦–å…ˆå°†æ•°æ®æ¢å¤ä¸ºå®Œæ•´å½¢å¼ï¼Œç„¶åæ·±åº¦å±‚æ‰§è¡Œç½‘ç»œæ­¤é˜¶æ®µé‡è¦çš„ä»»ä½•è¿‡æ»¤ï¼Œæœ€åæŠ•å½±å±‚å‹ç¼©æ•°æ®ä»¥ä½¿å…¶å†æ¬¡å˜å°ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:7:4","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"Model Architecture MobileNetV2 Architecture tï¼šexpansion rateï¼›cï¼šå·ç§¯æ ¸ä¸ªæ•°ï¼›nï¼šé‡å¤æ¬¡æ•°ï¼›sï¼šé¦–ä¸ªæ¨¡å—çš„æ­¥é•¿ï¼Œå…¶ä»–ä¸º1 ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:8:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"Experiments Classifier åŸºç¡€ç½‘ç»œçš„è¾“å‡ºé€šå¸¸æ˜¯ 7Ã—7 åƒç´ çš„å›¾åƒã€‚åˆ†ç±»å™¨é¦–å…ˆä½¿ç”¨å…¨å±€æ± åŒ–å±‚å°†å¤§å°ä» 7Ã—7 å‡å°åˆ° 1Ã—1 åƒç´ â€”â€”åŸºæœ¬ä¸Šé‡‡ç”¨ 49 ä¸ªä¸åŒé¢„æµ‹å™¨çš„é›†åˆâ€”â€”ç„¶åæ˜¯åˆ†ç±»å±‚å’Œ softmaxã€‚ Object Detection è·å–æœ€åä¸€ä¸ªåŸºç¡€ç½‘ç»œå±‚çš„è¾“å‡ºï¼Œè¿˜è·å–å‰å‡ ä¸ªå±‚çš„è¾“å‡ºï¼Œå¹¶å°†è¿™äº›è¾“å‡ºé€åˆ° SSD å±‚ã€‚MobileNet å±‚çš„å·¥ä½œæ˜¯å°†è¾“å…¥å›¾åƒä¸­çš„åƒç´ è½¬æ¢ä¸ºæè¿°å›¾åƒå†…å®¹çš„ç‰¹å¾ï¼Œå¹¶å°†è¿™äº›ç‰¹å¾ä¼ é€’ç»™å…¶ä»–å±‚ã€‚å› æ­¤ï¼Œæ­¤å¤„ä½¿ç”¨ MobileNet ä½œä¸ºç¬¬äºŒä¸ªç¥ç»ç½‘ç»œçš„ç‰¹å¾æå–å™¨ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:9:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» Kerasé¢„è®­ç»ƒMobileNetV2æºä»£ç  ä¸MobileNetV2æœ‰å…³çš„Githubé«˜èµå¼€æºé¡¹ç›® è°·æ­ŒAIåšå®¢ Figure 2: MobileNetV2 with inverted residuals å›¾è§£MobileNetV2ä¸­çš„Bottlenecks çŸ¥ä¹ï¼šMobileNet V2 è®ºæ–‡åˆè¯» MobileNet version 2 ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:10:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"MobileNetV3 æ–‡ç« æ ‡é¢˜ï¼šSearching for MobileNetV3 ä½œè€…ï¼šAndrew Howardï¼ŒMark Sandlerï¼ŒGrace Chuï¼ŒLiang-Chieh Chenï¼ŒBo Chenï¼Œ Mingxing Tanï¼ŒWeijun Wangï¼ŒYukun Zhuï¼Œ Ruoming Pangï¼Œ Vijay Vasudevanï¼Œ Quoc V. Leï¼Œ Hartwig Adam å‘è¡¨æ—¶é—´ï¼š(CVPR 2019) ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:11:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"Efficient Mobile Building Blocksæ›´æ–°Block MobileNetV3_block åŠ å…¥SEæ¨¡å—(Squeeze-and-Excite)ï¼šSEæ¨¡å—æ˜¯ä¸€ç§è½»é‡çº§çš„é€šé“æ³¨æ„åŠ›æ¨¡å—ã€‚depthwiseä¹‹åï¼Œç»è¿‡æ± åŒ–å±‚ï¼Œç„¶åç¬¬ä¸€ä¸ªfcå±‚ï¼Œé€šé“æ•°ç¼©å°4å€ï¼Œå†ç»è¿‡ç¬¬äºŒä¸ªfcå±‚ï¼Œé€šé“æ•°å˜æ¢å›å»ï¼ˆæ‰©å¤§4å€ï¼‰ï¼Œç„¶åä¸depthwiseè¿›è¡ŒæŒ‰ä½ç›¸ä¹˜ã€‚ MobileNetV3_block_SE æ›´æ–°æ¿€æ´»å‡½æ•° ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:11:1","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"ä½¿ç”¨NASæœç´¢å‚æ•° åˆ©ç”¨NASï¼ˆç¥ç»ç»“æ„æœç´¢ï¼‰å’ŒNetAdaptæ¥æœç´¢ç½‘ç»œçš„é…ç½®å’Œå‚æ•°ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:11:2","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"Redesigning Expensive Layersé‡æ–°è®¾è®¡è€—æ—¶å±‚ç»“æ„ MobileNetV3_Last stage å‡å°‘ç¬¬ä¸€ä¸ªå·ç§¯å±‚çš„å·ç§¯æ ¸ä¸ªæ•°(32-\u003e16)ï¼šä½¿ç”¨ReLUæˆ–è€…swishæ¿€æ´»å‡½æ•°ï¼Œèƒ½å°†é€šé“æ•°ç¼©å‡åˆ°16ç»´ï¼Œä¸”å‡†ç¡®ç‡ä¿æŒä¸å˜ã€‚è¿™åˆèƒ½èŠ‚çœ2msçš„å»¶æ—¶ã€‚ $$ ReLU6(x)=min(max(x,0),6)\\\\ h\\_sigmoid[x]=\\frac{ReLU6(x+3)}{6} $$ $swish\\ x = x\\dot \\sigma (x)$ ï¼›$\\sigma = \\frac{1}{1+e^{-x}}$ è®¡ç®—ã€æ±‚å¯¼å¤æ‚ï¼Œå¯¹é‡åŒ–è¿‡ç¨‹ä¸å‹å¥½ã€‚å°†sigmoidå‡½æ•°æ›¿æ¢ä¸ºpiece-wise linear hard analog function. $$ h\\_swish[x]=x\\frac{ReLU6(x+3)}{6} $$ç²¾ç®€Last Stage ï¼šOriginal Last Stageä¸ºv2çš„æœ€åè¾“å‡ºå‡ å±‚ï¼Œv3ç‰ˆæœ¬å°†å¹³å‡æ± åŒ–å±‚æå‰äº†ã€‚åœ¨ä½¿ç”¨1Ã—1å·ç§¯è¿›è¡Œæ‰©å¼ åï¼Œå°±ç´§æ¥æ± åŒ–å±‚-æ¿€æ´»å‡½æ•°ï¼Œæœ€åä½¿ç”¨1Ã—1çš„å·ç§¯è¿›è¡Œè¾“å‡ºã€‚é€šè¿‡è¿™ä¸€æ”¹å˜ï¼Œèƒ½å‡å°‘7msçš„å»¶è¿Ÿï¼Œæé«˜äº†11%çš„è¿ç®—é€Ÿåº¦ï¼Œä¸”å‡ ä¹æ²¡æœ‰ä»»ä½•ç²¾åº¦æŸå¤±ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:11:3","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"MobileNetV3 Architecture Specification for MobileNetV3-Large Specification for MobileNetV3-Small exo_sizeï¼šå‡ç»´ï¼›#out è¾“å‡ºé€šé“æ•°ï¼› NLï¼šæ¿€æ´»å‡½æ•° ï¼› sï¼šæ­¥è· ï¼›NBNï¼šæ²¡æœ‰æ‰¹é‡å½’ä¸€åŒ– ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:12:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"MobileNeXt æ–‡ç« æ ‡é¢˜ï¼šRethinking Bottleneck Structure for Efficient Mobile Network Design ä½œè€…ï¼šZhou Daquan, Qibin Hou, Yunpeng Chen, Jiashi Feng, Shuicheng Yan å‘è¡¨æ—¶é—´ï¼š(ECCV 2020) å®˜æ–¹ä»£ç  code block æ¯ä¸ªå—çš„åšåº¦æ¥è¡¨ç¤ºç›¸åº”çš„ç›¸å¯¹é€šé“æ•° (a)ï¼šClassic residual bottleneck blocks ç»å…¸æ®‹å·®å— ä¸€ä¸ª 1Ã—1 å·ç§¯ç”¨äºé€šé“ç¼©å‡ï¼Œä¸€ä¸ª 3Ã—3 å·ç§¯ç”¨äºç©ºé—´ç‰¹å¾æå–ï¼Œå¦ä¸€ä¸ª 1Ã—1 å·ç§¯ç”¨äºé€šé“æ‰©å±• (b)ï¼šInverted residual blocks å€’æ®‹å·®å— ä¸€ä¸ª 1Ã—1 å·ç§¯ç”¨äºé€šé“æ‰©å±•ï¼Œä¸€ä¸ª 3Ã—3 æ·±åº¦å¯åˆ†ç¦»å·ç§¯ç”¨äºç©ºé—´ç‰¹å¾æå–ï¼Œå¦ä¸€ä¸ª 1Ã—1 å·ç§¯ç”¨äºé€šé“ç¼©å‡ å°†ä½ç»´å‹ç¼©å¼ é‡ä½œä¸ºè¾“å…¥ï¼Œå¹¶é€šè¿‡é€ç‚¹å·ç§¯å°†å…¶æ‰©å±•åˆ°æ›´é«˜ç»´ã€‚åº”ç”¨æ·±åº¦å·ç§¯è¿›è¡Œç©ºé—´ä¸Šä¸‹æ–‡ç¼–ç ï¼Œå¦ä¸€ä¸ªé€ç‚¹å·ç§¯ä»¥ç”Ÿæˆä½ç»´ç‰¹å¾å¼ é‡ä½œä¸ºä¸‹ä¸€ä¸ªå—çš„è¾“å…¥ã€‚ ç”±äºç›¸é‚»å€’ç½®å·®ä¹‹é—´çš„è¡¨ç¤ºæ˜¯ä½ç»´çš„ã€‚bottleneckä¹‹é—´çš„shortcutå¯èƒ½ä¼šé˜»æ­¢æ¥è‡ªé¡¶å±‚çš„æ¢¯åº¦åœ¨æ¨¡å‹è®­ç»ƒæœŸé—´æˆåŠŸä¼ æ’­åˆ°åº•å±‚ã€‚ æ·±åº¦å¯åˆ†ç¦»å·ç§¯ç”¨äºç©ºé—´ç‰¹å¾æå–åè¿›è¡Œé€šé“å‹ç¼©å¯èƒ½æ— æ³•ä¿ç•™è¶³å¤Ÿçš„æœ‰ç”¨ä¿¡æ¯ï¼Œé€ æˆä¿¡æ¯ä¸¢å¤± ShuffleNetV2 åœ¨åå‘æ®‹å·®å—ä¹‹å‰æ’å…¥ä¸€ä¸ªé€šé“æ‹†åˆ†æ¨¡å—ï¼Œå¹¶åœ¨å…¶åæ·»åŠ å¦ä¸€ä¸ªé€šé“æ··æ´—æ¨¡å— HBONet ä¸­ï¼Œä¸‹é‡‡æ ·æ“ä½œè¢«å¼•å…¥åˆ°å€’æ®‹å·®å—ä¸­ï¼Œç”¨äºå¯¹æ›´ä¸°å¯Œçš„ç©ºé—´ä¿¡æ¯è¿›è¡Œå»ºæ¨¡ã€‚ MobileNetV3 æå‡ºåœ¨æ¯ä¸ªé˜¶æ®µæœç´¢æœ€ä¼˜æ¿€æ´»å‡½æ•°å’Œå€’æ®‹å·®å—çš„æ‰©å±•ç‡ MixNet æå‡ºåœ¨å€’æ®‹å·®å—ä¸­æœç´¢æ·±åº¦å¯åˆ†ç¦»å·ç§¯çš„æœ€ä½³å†…æ ¸å¤§å° (c)ï¼šSandglass Block æ²™æ¼å— åœ¨æ›´é«˜ç»´åº¦ä¸Šæ‰§è¡Œæ’ç­‰æ˜ å°„å’Œç©ºé—´å˜æ¢ï¼Œä»è€Œæœ‰æ•ˆåœ°å‡è½»ä¿¡æ¯ä¸¢å¤±å’Œæ¢¯åº¦æ··æ·† MobileNeXt_different_variants Performance of different variants (a)ï¼šç›´æ¥ä¿®æ”¹ç»å…¸çš„æ®‹å·®å—æ„å»ºçš„ï¼Œå°†æ ‡å‡†çš„ 3Ã—3 å·ç§¯æ›¿æ¢ä¸º 3Ã—3 æ·±åº¦å·ç§¯ã€‚ ä¸(d)ç›¸æ¯”ï¼Œæ€§èƒ½ä¸‹é™äº†çº¦ 5%ï¼šå¯èƒ½ç”±äºæ·±åº¦å·ç§¯æ˜¯åœ¨å…·æœ‰ä½ç»´ç‰¹å¾ç©ºé—´çš„bottleneckä¸­è¿›è¡Œçš„ï¼Œå› æ­¤æ— æ³•æ•è·è¶³å¤Ÿçš„ç©ºé—´ä¿¡æ¯ã€‚ (b)ï¼šåœ¨aåŸºç¡€ä¸Šæ·»åŠ åŠ äº†å¦ä¸€ä¸ª 3Ã—3 æ·±åº¦å·ç§¯ ä¸(a)ç›¸æ¯” ç²¾åº¦æé«˜äº† 1% ä»¥ä¸Šï¼šè¡¨æ˜ç¼–ç æ›´å¤šçš„ç©ºé—´ä¿¡æ¯ç¡®å®æœ‰å¸®åŠ© ä¸(d)ç›¸æ¯” (c)ï¼šåŸºäºåŸå§‹çš„å€’æ®‹å·®å—ï¼Œå°†æ·±åº¦å·ç§¯ä»é«˜ç»´ç‰¹å¾ç©ºé—´ç§»åŠ¨åˆ°ç‰¹å¾é€šé“è¾ƒå°‘çš„bottleneckä½ç½® ä¸(b)ç›¸æ¯”æ›´å·®ï¼šè¡¨æ˜åœ¨é«˜ç»´è¡¨ç¤ºä¹‹é—´å»ºç«‹shortcutæ›´æœ‰åˆ©äºç½‘ç»œæ€§èƒ½ (d)ï¼šæ²™æ¼å— è®¾è®¡åŸåˆ™ ä¸ºäº†åœ¨ä¼ è¾“åˆ°é¡¶å±‚æ—¶ä¿ç•™æ¥è‡ªåº•å±‚çš„æ›´å¤šä¿¡æ¯å¹¶ä¿ƒè¿›è·¨å±‚çš„æ¢¯åº¦ä¼ æ’­ï¼Œåº”è¯¥åœ¨é«˜ç»´è¡¨ç¤ºä¹‹é—´å»ºç«‹shortcut å…·æœ‰å°å†…æ ¸å¤§å°ï¼ˆä¾‹å¦‚ 3 Ã— 3ï¼‰çš„æ·±åº¦å·ç§¯æ˜¯è½»é‡çº§çš„ï¼Œå¯ä»¥é€‚å½“åœ°å°†å‡ ä¸ªæ·±åº¦å·ç§¯åº”ç”¨äºæ›´é«˜ç»´çš„ç‰¹å¾ï¼Œä»¥ä¾¿å¯ä»¥ç¼–ç æ›´ä¸°å¯Œçš„ç©ºé—´ä¿¡æ¯ã€‚ å°†bottleneckä¿æŒåœ¨å‰©ä½™è·¯å¾„çš„ä¸­é—´ï¼Œä»¥èŠ‚çœå‚æ•°å’Œè®¡ç®—æˆæœ¬ã€‚ é«˜ç»´è¡¨ç¤ºä¹‹é—´å»ºç«‹shortcutã€‚ ä¸¤ä¸ªæ·±åº¦å·ç§¯éƒ½æ˜¯åœ¨é«˜ç»´ç©ºé—´ä¸­è¿›è¡Œçš„ï¼Œå¯ä»¥æå–æ›´ä¸°å¯Œçš„ç‰¹å¾è¡¨ç¤ºã€‚ ä½¿ç”¨çº¿æ€§ç“¶é¢ˆå¯ä»¥å¸®åŠ©é˜²æ­¢ç‰¹å¾å€¼è¢«å½’é›¶ï¼Œä»è€Œå‡å°‘ä¿¡æ¯ä¸¢å¤±ï¼šç¬¬ä¸€ä¸ªé€ç‚¹å·ç§¯ä¹‹åä¸æ·»åŠ ä»»ä½•æ¿€æ´»å±‚ã€‚ ä»…åœ¨ç¬¬ä¸€ä¸ªæ·±åº¦å·ç§¯å±‚å’Œæœ€åä¸€ä¸ªé€ç‚¹å·ç§¯å±‚ä¹‹åæ·»åŠ æ¿€æ´»å±‚ï¼šæœ€åä¸€ä¸ªå·ç§¯ä¹‹åæ·»åŠ ä¸€ä¸ªæ¿€æ´»å±‚ä¼šå¯¹åˆ†ç±»æ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ï¼ˆç»éªŒï¼‰ã€‚ MobileNeXt_sandglass_block æ³¨æ„ï¼Œ$M\\neq N$æ—¶ä¸æ·»åŠ shortcut ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:13:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"MobileNeXt Architecture MobileNetV2 MobileNeXt bï¼šé‡å¤æ¬¡æ•°ã€‚ tï¼šé€šé“æ‰©å±•æ¯”ã€‚ kï¼šç±»åˆ« ä¸ºäº†è¯æ˜æ¨¡å‹çš„å¥½å¤„æ¥è‡ªäºæ–°é¢–æ¶æ„ï¼Œè€Œä¸æ˜¯åˆ©ç”¨æ›´å¤šçš„æ·±åº¦å·ç§¯æˆ–æ›´å¤§çš„æ„Ÿå—é‡ ä¸ MobileNetV2 çš„æ”¹è¿›ç‰ˆæœ¬è¿›è¡Œæ¯”è¾ƒï¼Œåœ¨ä¸­é—´æ’å…¥äº†ä¸€ä¸ªæ·±åº¦å·ç§¯å—ã€‚MobileNetV2 çš„æ€§èƒ½æé«˜åˆ°äº† 73%ï¼Œè¿™ä»ç„¶æ¯”MobileNeXtçš„ (74%) å·®å¾—å¤šã€‚ $$ G_{1ï¼š\\alpha M}= Ï†(F)_{1ï¼š\\alpha M} + F_{1ï¼š\\alpha M}, \\ G_{\\alpha M:M} = Ï†(F)_{\\alpha M:M} $$ é¦–å…ˆï¼Œåœ¨å‡å°‘ä¹˜æ•°ä¹‹åï¼Œå¯ä»¥å‡å°‘æ¯ä¸ªæ„å»ºå—ä¸­çš„element-wise additionsçš„æ•°é‡ã€‚é€å…ƒç´ åŠ æ³•éå¸¸è€—æ—¶ã€‚å¯ä»¥é€‰æ‹©è¾ƒä½çš„æ’ç­‰å¼ é‡ä¹˜æ•°ä»¥äº§ç”Ÿæ›´å¥½çš„å»¶è¿Ÿï¼Œè€Œæ€§èƒ½å‡ ä¹æ²¡æœ‰ä¸‹é™ã€‚ å…¶æ¬¡ï¼Œå¯ä»¥å‡å°‘å†…å­˜è®¿é—®æ¬¡æ•°ã€‚å‡å°‘æ’ç­‰å¼ é‡çš„é€šé“ç»´åº¦å¯ä»¥æœ‰æ•ˆåœ°é¼“åŠ±å¤„ç†å™¨å°†å…¶å­˜å‚¨åœ¨ç¼“å­˜æˆ–å¤„ç†å™¨é™„è¿‘çš„å…¶ä»–æ›´å¿«çš„å†…å­˜ä¸­ï¼Œä»è€Œæ”¹å–„å»¶è¿Ÿã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:14:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"ReXNet æ–‡ç« æ ‡é¢˜ï¼šRethinking Channel Dimensions for Efficient Model Design ä½œè€…ï¼šDongyoon Han, Sangdoo Yun, Byeongho Heo, YoungJoon Yoo å‘è¡¨æ—¶é—´ï¼š(CVPR 2021) v1ç‰ˆæœ¬å«åšReXNet: Diminishing Representational Bottleneck on Convolutional Neural Network å®˜æ–¹ä»£ç  ReXNet,ReXNet æ˜¯ NAVER é›†å›¢ ClovaAI ç ”å‘ä¸­å¿ƒåŸºäºä¸€ç§ç½‘ç»œæ¶æ„è®¾è®¡æ–°èŒƒå¼è€Œæ„å»ºçš„ç½‘ç»œã€‚é’ˆå¯¹ç°æœ‰ç½‘ç»œä¸­å­˜åœ¨çš„ Representational Bottleneck é—®é¢˜ï¼Œä½œè€…æå‡ºäº†ä¸€ç»„æ–°çš„è®¾è®¡åŸåˆ™ã€‚ä½œè€…è®¤ä¸ºä¼ ç»Ÿçš„ç½‘ç»œæ¶æ„è®¾è®¡èŒƒå¼ä¼šäº§ç”Ÿè¡¨è¾¾ç“¶é¢ˆï¼Œè¿›è€Œå½±å“æ¨¡å‹çš„æ€§èƒ½ã€‚ä¸ºç ”ç©¶æ­¤é—®é¢˜ï¼Œä½œè€…ç ”ç©¶äº†ä¸Šä¸‡ä¸ªéšæœºç½‘ç»œç”Ÿæˆç‰¹å¾çš„ matric rankï¼ŒåŒæ—¶è¿›ä¸€æ­¥ç ”ç©¶äº†ç½‘ç»œå±‚ä¸­é€šé“é…ç½®æ–¹æ¡ˆã€‚åŸºäºæ­¤ï¼Œä½œè€…æå‡ºäº†ä¸€ç»„ç®€å•è€Œæœ‰æ•ˆçš„è®¾è®¡åŸåˆ™ï¼Œä»¥æ¶ˆé™¤è¡¨è¾¾ç“¶é¢ˆé—®é¢˜ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:15:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"Designing an Expansion Layer Visualization of the output rank åœ¨ç¬¬ä¸€ä¸ª1Ã—1å·ç§¯æ—¶ï¼Œéœ€è¦ç”¨6æˆ–æ›´å°çš„æ‰©å±•æ¯”æ¥è®¾è®¡ä¸€ä¸ªinverted bottleneckï¼› åœ¨è½»é‡çº§æ¨¡å‹ä¸­ï¼Œæ¯ä¸ªå¸¦æœ‰æ·±åº¦å·ç§¯çš„inverted bottleneckéƒ½éœ€è¦æ›´é«˜çš„é€šé“ç»´åº¦æ¯”ï¼› å¤æ‚çš„éçº¿æ€§ï¼Œå¦‚ELUå’ŒSiLUï¼Œéœ€è¦æ”¾åœ¨1Ã—1å·ç§¯æˆ–3Ã—3å·ç§¯ä¹‹åï¼ˆä¸æ˜¯æ·±åº¦å·ç§¯ï¼‰ channel dimension ratioï¼š$d_{in}/d_{out}\\in[0.1,1]$ rank ratioï¼š$rank(f(WX))/d_{out}$ $f(WX)$ï¼šè¾“å‡ºç‰¹å¾ï¼›$W\\in R^{d_{out}\\times d_{in}};X\\in R^{d_{in}\\times N}$ï¼›$N$ä¸ºbatchsizeï¼›$f$ä¸ºå½’ä¸€åŒ–åçš„éçº¿æ€§å‡½æ•° Average Rank Ratio:æ¯ä¸ªæ¨¡å‹å–å¹³å‡ Visualization of the searched modelsâ€™ channel dimensions vs. block index Detailed searched channel configurations ä»200ä¸ªæœç´¢è¿‡çš„æ¨¡å‹ä¸­æ”¶é›†å‰10%ã€ä¸­é—´10%ï¼ˆå³å‰50%å’Œ60%ä¹‹é—´çš„æ¨¡å‹ï¼‰å’Œå10%çš„æ¨¡å‹ Red: top-10%; blue: middle-10%; green: bottom-10% accuracy models çº¢è‰²çš„Block Indexçš„çº¿æ€§å‚æ•°åŒ–äº«æœ‰æ›´é«˜çš„ç²¾åº¦ï¼ŒåŒæ—¶ä¿æŒç±»ä¼¼çš„è®¡ç®—æˆæœ¬ã€‚æœ€ä½³æ¨¡å‹çš„é€šé“é…ç½®ä¸ºçº¿æ€§å¢åŠ ã€‚ ç»¿è‰²çš„æ¨¡å‹å¤§å¹…å‡å°‘äº†è¾“å…¥ä¾§çš„é€šé“ï¼Œå› æ­¤ï¼Œå¤§éƒ¨åˆ†çš„æƒé‡å‚æ•°è¢«æ”¾ç½®åœ¨è¾“å‡ºä¾§ï¼Œå¯¼è‡´ç²¾åº¦çš„æŸå¤±ã€‚ è“è‰²ä»£è¡¨å¤„äºä¸­é—´10%ç²¾åº¦çš„æ¨¡å‹ï¼Œä¸ä¼ ç»Ÿé€šé“é…ç½®ç›¸ä¼¼ã€‚ä¼ ç»Ÿé…ç½®æ˜¯é€šè¿‡é™åˆ¶æ—©æœŸå±‚çš„é€šé“ï¼Œå¹¶åœ¨é è¿‘è¾“å‡ºçš„åœ°æ–¹æä¾›æ›´å¤šçš„é€šé“æ¥è¾¾åˆ°flop-efficientyçš„ç›®çš„ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:16:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"Network upgrade MobileNetv2 ReXNet_1.0x MobileNetv1 ReXNet_plain ReXNet é€šé“æ•°çº¿æ€§å¢åŠ  åœ¨æ¯ä¸ªå€’ç½®ç“¶é¢ˆçš„ç¬¬ä¸€ä¸ª1Ã—1å·ç§¯åæ›¿æ¢ReLU6 è§‚å¯Ÿåˆ°ç»´æ•°æ¯”è¾ƒå°çš„å±‚éœ€è¦æ›´å¤šçš„å¤„ç† ç¬¬äºŒä¸ªæ·±åº¦å·ç§¯çš„é€šé“ç»´æ•°æ¯”ä¸º1ï¼Œæ‰€ä»¥åœ¨æ­¤ä¸æ›¿æ¢ReLU6ã€‚ MB1å’ŒMB6æŒ‡çš„æ˜¯MobileNetV2çš„inverted bottleneckï¼Œæ‰©å±•ç‡åˆ†åˆ«ä¸º1å’Œ6ã€‚ ReXNetï½œæ¶ˆé™¤è¡¨è¾¾ç“¶é¢ˆï¼Œæå‡æ€§èƒ½æŒ‡æ ‡ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:17:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"MixNet æ–‡ç« æ ‡é¢˜ï¼šMixConv: Mixed Depthwise Convolutional Kernels ä½œè€…ï¼šMingxing Tan, Quoc V. Le å‘è¡¨æ—¶é—´ï¼š(BMVC 2019) MixConv,MixNet æ˜¯è°·æ­Œå‡ºçš„ä¸€ç¯‡å…³äºè½»é‡çº§ç½‘ç»œçš„æ–‡ç« ï¼Œä¸»è¦å·¥ä½œå°±åœ¨äºæ¢ç´¢ä¸åŒå¤§å°çš„å·ç§¯æ ¸çš„ç»„åˆã€‚ä½œè€…å‘ç°ç›®å‰ç½‘ç»œæœ‰ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼šå°çš„å·ç§¯æ ¸æ„Ÿå—é‡å°ï¼Œå‚æ•°å°‘ï¼Œä½†æ˜¯å‡†ç¡®ç‡ä¸é«˜;å¤§çš„å·ç§¯æ ¸æ„Ÿå—é‡å¤§ï¼Œå‡†ç¡®ç‡ç›¸å¯¹ç•¥é«˜ï¼Œä½†æ˜¯å‚æ•°ä¹Ÿç›¸å¯¹å¢åŠ äº†å¾ˆå¤š.ä¸ºäº†è§£å†³ä¸Šé¢ä¸¤ä¸ªé—®é¢˜ï¼Œæ–‡ä¸­æå‡ºä¸€ç§æ–°çš„æ··åˆæ·±åº¦åˆ†ç¦»å·ç§¯(MDConv)(mixed depthwise convolution)ï¼Œå°†ä¸åŒçš„æ ¸å¤§å°æ··åˆåœ¨ä¸€ä¸ªå·ç§¯è¿ç®—ä¸­ï¼Œå¹¶ä¸”åŸºäº AutoML çš„æœç´¢ç©ºé—´ï¼Œæå‡ºäº†ä¸€ç³»åˆ—çš„ç½‘ç»œå«åš MixNetsï¼Œåœ¨ ImageNet ä¸Šå–å¾—äº†è¾ƒå¥½çš„æ•ˆæœã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/mobilenet/:18:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"MobileNet","uri":"/posts/deeplearning/light-weight/mobilenet/"},{"categories":["Deep Learning"],"content":"NAS","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/nas/","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"NAS","uri":"/posts/deeplearning/light-weight/nas/"},{"categories":["Deep Learning"],"content":"MnasNet æ–‡ç« æ ‡é¢˜ï¼šMnasNet: Platform-Aware Neural Architecture Search for Mobile ä½œè€…ï¼šMingxing Tan, Bo Chen, Ruoming Pang, Vijay Vasudevan, Mark Sandler, Andrew Howard, Quoc V. Le å‘è¡¨æ—¶é—´ï¼š(CVPR 2019) è°·æ­Œè½»é‡åŒ–å·ç§¯ç¥ç»ç½‘ç»œMnasnetï¼Œä»‹äºMobileNet V2å’ŒV3ä¹‹é—´ã€‚ ä½¿ç”¨å¤šç›®æ ‡ä¼˜åŒ–çš„ç›®æ ‡å‡½æ•°ï¼Œå…¼é¡¾é€Ÿåº¦å’Œç²¾åº¦ï¼Œå…¶ä¸­é€Ÿåº¦ç”¨çœŸå®æ‰‹æœºæ¨æ–­æ—¶é—´è¡¡é‡ã€‚ æå‡ºåˆ†å±‚çš„ç¥ç»ç½‘ç»œæ¶æ„æœç´¢ç©ºé—´ï¼Œå°†å·ç§¯ç¥ç»ç½‘ç»œåˆ†è§£ä¸ºè‹¥å¹²blockï¼Œåˆ†åˆ«æœç´¢å„è‡ªçš„åŸºæœ¬æ¨¡å—ï¼Œä¿è¯å±‚ç»“æ„å¤šæ ·æ€§ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/nas/:1:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"NAS","uri":"/posts/deeplearning/light-weight/nas/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» å®˜æ–¹ä»£ç  Github-pytorchæ¨¡å‹ä»£ç  çŸ¥ä¹ï¼šå¦‚ä½•è¯„ä»· Google æœ€æ–°çš„æ¨¡å‹ MnasNetï¼Ÿ çŸ¥ä¹ï¼šMnasNetï¼šç»ˆç«¯è½»é‡åŒ–æ¨¡å‹æ–°æ€è·¯ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/nas/:2:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"NAS","uri":"/posts/deeplearning/light-weight/nas/"},{"categories":["Deep Learning"],"content":"Re-parameterization","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/re-parameterization/","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"Re-parameterization","uri":"/posts/deeplearning/light-weight/re-parameterization/"},{"categories":["Deep Learning"],"content":"ACNet æ–‡ç« æ ‡é¢˜ï¼šACNet: Strengthening the Kernel Skeletons for Powerful CNN via Asymmetric Convolution Blocks ä½œè€…ï¼šXiaohan Ding, Yuchen Guo, Guiguang Ding, Jungong Han å‘è¡¨æ—¶é—´ï¼š(ICCV 2019) å®˜æ–¹æºç  ACNetï¼Œæå‡ºäº†ä¸€ä¸ªAsymmetric Convolution Block (ACB),å¯ä»¥åœ¨æ™®é€šçš„ç½‘ç»œä¸­åŠ å…¥ä¸€äº›ACBæ¥ä»£æ›¿æ™®é€šçš„å·ç§¯ï¼Œè¿™ä¸ªä»…åœ¨è®­ç»ƒçš„æ—¶å€™èµ·ä½œç”¨ï¼Œç„¶åæµ‹è¯•çš„æ—¶å€™å¯ä»¥ä½¿å¾—ç½‘ç»œæ¢å¤ä¹‹å‰çš„ç»“æ„ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•æ˜¯æå‡äº†ç½‘ç»œçš„æ€§èƒ½ä½†æ˜¯å®Œå…¨ä¸ä¼šç ´åç½‘ç»œã€‚ Reparam(KxK) = KxK-BN + 1xK-BN + Kx1-BNã€‚è¿™ä¸€è®°æ³•è¡¨ç¤ºç”¨ä¸‰ä¸ªå¹³è¡Œåˆ†æ”¯ï¼ˆKxKï¼Œ1xKï¼ŒKx1ï¼‰çš„åŠ å’Œæ¥æ›¿æ¢ä¸€ä¸ªKxKå·ç§¯ã€‚æ³¨æ„ä¸‰ä¸ªåˆ†æ”¯å„è·Ÿä¸€ä¸ªBNï¼Œä¸‰ä¸ªåˆ†æ”¯åˆ†åˆ«è¿‡BNä¹‹åå†ç›¸åŠ ã€‚è¿™æ ·åšå¯ä»¥æå‡å·ç§¯ç½‘ç»œçš„æ€§èƒ½ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/re-parameterization/:1:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"Re-parameterization","uri":"/posts/deeplearning/light-weight/re-parameterization/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» ç»“æ„é‡å‚æ•°åŒ–ï¼šåˆ©ç”¨å‚æ•°è½¬æ¢è§£è€¦è®­ç»ƒå’Œæ¨ç†ç»“æ„ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/re-parameterization/:2:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"Re-parameterization","uri":"/posts/deeplearning/light-weight/re-parameterization/"},{"categories":["Deep Learning"],"content":"ACNetV2 æ–‡ç« æ ‡é¢˜ï¼šDiverse Branch Block: Building a Convolution as an Inception-like Unit ä½œè€…ï¼šXiaohan Ding, Xiangyu Zhang, Jungong Han, Guiguang Ding å‘è¡¨æ—¶é—´ï¼š(CVPR 2021) å®˜æ–¹æºç  Reparam(KxK) = KxK-BN + 1x1-BN + 1x1-BN-AVG-BN + 1x1-BN-KxK-BNã€‚æœ¬å±ŠCVPRæ¥æ”¶çš„å¦ä¸€ç¯‡æ–‡ç« ã€‚è·ŸACNetçš„ç›¸ä¼¼ç‚¹åœ¨äºéƒ½æ˜¯é€šç”¨çš„å·ç§¯ç½‘ç»œåŸºæœ¬æ¨¡å—ï¼Œéƒ½å¯ä»¥ç”¨æ¥æ›¿æ¢å¸¸è§„å·ç§¯å±‚ã€‚é‡‡ç”¨äº†æ›´ä¸ºå¤æ‚çš„è¿ç»­å·ç§¯ï¼ˆ1x1-BN-KxK-BNè¡¨ç¤ºå…ˆè¿‡1x1å·ç§¯ï¼Œå†è¿‡BNï¼Œå†è¿‡KxKå·ç§¯ï¼Œå†è¿‡å¦ä¸€ä¸ªBNï¼‰å’Œaverage poolingï¼ˆè®°ä½œAVGï¼‰ï¼Œæ•ˆæœè¶…è¿‡ACNetã€‚åœ¨è¿™ç¯‡æ–‡ç« é‡Œä¹Ÿæ¢ç´¢äº†reparamä¹‹æ‰€ä»¥workçš„åŸå› ï¼Œç»™å‡ºäº†ä¸€äº›è§£é‡Šã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/re-parameterization/:3:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"Re-parameterization","uri":"/posts/deeplearning/light-weight/re-parameterization/"},{"categories":["Deep Learning"],"content":"RepVGG æ–‡ç« æ ‡é¢˜ï¼šRepVGG: Making VGG-style ConvNets Great Again ä½œè€…ï¼šXiaohan Ding, Xiangyu Zhang, Ningning Ma, Jungong Han, Guiguang Ding, Jian Sun å‘è¡¨æ—¶é—´ï¼š(CVPR 2021) å®˜æ–¹æºç  RepVGG,RepVGG(Making VGG-style ConvNets Great Again)ç³»åˆ—æ¨¡å‹æ˜¯ç”±æ¸…åå¤§å­¦(ä¸è´µå¹¿å›¢é˜Ÿ)ã€æ—·è§†ç§‘æŠ€(å­™å‰‘ç­‰äºº)ã€æ¸¯ç§‘å¤§å’Œé˜¿ä¼¯é‡Œæ–¯ç‰¹å¨æ–¯å¤§å­¦åœ¨ 2021 å¹´æå‡ºçš„ä¸€ä¸ªç®€å•ä½†å¼ºå¤§çš„å·ç§¯ç¥ç»ç½‘ç»œæ¶æ„ï¼Œè¯¥æ¶æ„å…·æœ‰ç±»ä¼¼äº VGG çš„æ¨ç†æ—¶é—´ä¸»ä½“ï¼Œè¯¥ä¸»ä½“ä»…ç”± 3x3 å·ç§¯å’Œ ReLU çš„å †æ ˆç»„æˆï¼Œè€Œè®­ç»ƒæ—¶é—´æ¨¡å‹å…·æœ‰å¤šåˆ†æ”¯æ‹“æ‰‘ã€‚è®­ç»ƒæ—¶é—´å’Œæ¨ç†æ—¶é—´æ¶æ„çš„è¿™ç§è§£è€¦æ˜¯é€šè¿‡ç»“æ„é‡æ–°å‚æ•°åŒ–(re-parameterization)æŠ€æœ¯å®ç°çš„ï¼Œå› æ­¤è¯¥æ¨¡å‹ç§°ä¸º RepVGGã€‚ Reparam(3x3) = 3x3-BN + 1x1-BN + BNã€‚å¯¹æ¯ä¸ª3x3å·ç§¯ï¼Œåœ¨è®­ç»ƒæ—¶ç»™å®ƒæ„é€ å¹¶è¡Œçš„æ’ç­‰å’Œ1x1å·ç§¯åˆ†æ”¯ï¼Œå¹¶å„è‡ªè¿‡BNåç›¸åŠ ã€‚æˆ‘ä»¬ç®€å•å †å è¿™æ ·çš„ç»“æ„å¾—åˆ°å½¢æˆäº†ä¸€ä¸ªVGGå¼çš„ç›´ç­’å‹æ¶æ„ã€‚æ¨ç†æ—¶çš„è¿™ä¸ªæ¶æ„ä»…æœ‰ä¸€è·¯3x3å·ç§¯å¤¹ReLUï¼Œè¿åˆ†æ”¯ç»“æ„éƒ½æ²¡æœ‰ï¼Œå¯ä»¥è¯´â€œä¸€å·åˆ°åº•â€ï¼Œæ•ˆç‡å¾ˆé«˜ã€‚è¿™æ ·ç®€å•çš„ç»“æ„åœ¨ImageNetä¸Šå¯ä»¥è¾¾åˆ°è¶…è¿‡80%çš„å‡†ç¡®ç‡ï¼Œæ¯”è¾ƒç²¾åº¦å’Œé€Ÿåº¦å¯ä»¥è¶…è¿‡æˆ–æ‰“å¹³RegNetç­‰SOTAæ¨¡å‹ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/re-parameterization/:4:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"Re-parameterization","uri":"/posts/deeplearning/light-weight/re-parameterization/"},{"categories":["Deep Learning"],"content":"ResRep æ–‡ç« æ ‡é¢˜ï¼šResRep: Lossless CNN Pruning via Decoupling Remembering and Forgetting ä½œè€…ï¼šXiaohan Ding, Tianxiang Hao, Jianchao Tan, Ji Liu, Jungong Han, Yuchen Guo, Guiguang Ding å‘è¡¨æ—¶é—´ï¼š(ICCV 2021) å®˜æ–¹æºç  ResRep: Reparam(KxK) = KxK-BN-1x1ã€‚è¿™æ˜¯ä¸€ä¸ªå‰ªæï¼ˆchannel pruningï¼‰æ–¹æ³•ã€‚1x1å·ç§¯åˆå§‹åŒ–ä¸ºå•ä½çŸ©é˜µï¼Œå› è€Œä¸æ”¹å˜æ¨¡å‹åŸæœ¬çš„è¾“å‡ºã€‚ç„¶åæˆ‘ä»¬é€šè¿‡ä¸€å¥—ç‰¹æ®Šè®¾è®¡çš„æ›´æ–°è§„åˆ™å°†è¿™ä¸ªå•ä½çŸ©é˜µå˜å¾—è¡Œæ•°å°‘äºåˆ—æ•°ï¼ˆå³output_channels\u003cinput_channelsï¼‰ï¼Œç„¶åå°†æ•´ä¸ªKxK-BN-1x1åºåˆ—è½¬æ¢ä¸ºä¸€ä¸ªKxKå·ç§¯ï¼Œä»è€Œå°†åŸæœ¬çš„KxKå·ç§¯çš„output_channelså‡å°‘ã€‚è¿™ä¸€æ–¹æ³•èƒ½åœ¨ResNet-50ä¸Šå®ç°è¶…è¿‡50%å‹ç¼©ç‡çš„æƒ…å†µä¸‹ç²¾åº¦å®Œå…¨ä¸æ‰ï¼ˆä»76.15%çš„torchvisionæ ‡å‡†æ¨¡å‹å‹ç¼©åˆ°è¿˜æ˜¯76.15%ï¼‰ï¼Œæ®æˆ‘æ‰€çŸ¥è¿™æ˜¯ç¬¬ä¸€ä¸ªå®ç°å¦‚æ­¤é«˜æ— æŸå‹ç¼©ç‡çš„ä¼ ç»Ÿï¼ˆç»“æ„åŒ–ï¼ŒéåŠ¨æ€ï¼ŒéNASï¼‰å‰ªææ–¹æ³•ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/re-parameterization/:5:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"Re-parameterization","uri":"/posts/deeplearning/light-weight/re-parameterization/"},{"categories":["Deep Learning"],"content":"RepMLP æ–‡ç« æ ‡é¢˜ï¼šRepMLPNet: Hierarchical Vision MLP with Re-parameterized Locality ä½œè€…ï¼šXiaohan Ding, Honghao Chen, Xiangyu Zhang, Jungong Han, Guiguang Ding å‘è¡¨æ—¶é—´ï¼š(CVPR 2022) å®˜æ–¹æºç  æœ¬æ–‡æå‡ºäº†ä¸€ç§å°†å±€éƒ¨æ€§æ³¨å…¥ FC å±‚çš„é‡æ–°å‚æ•°åŒ–æ–¹æ³•ã€ä¸€ç§æ–°é¢–çš„ MLP æ ·å¼å—å’Œåˆ†å±‚ MLP æ¶æ„ã€‚ RepMLPNet åœ¨å‡†ç¡®æ€§-æ•ˆç‡æƒè¡¡å’Œè®­ç»ƒæˆæœ¬æ–¹é¢ä¼˜äºå‡ ä¸ªåŒæ—¶æå‡ºçš„ MLPã€‚ç„¶è€Œï¼Œä½œä¸º MLPï¼ŒRepMLPNet æœ‰å‡ ä¸ªæ˜æ˜¾çš„å…±åŒå¼±ç‚¹ã€‚ 1) ä¸ Vision Transformers ç±»ä¼¼ï¼ŒMLP å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œéœ€è¦å¼ºå¤§çš„æ•°æ®å¢å¼ºå’Œæ­£åˆ™åŒ–æŠ€æœ¯ã€‚ 2ï¼‰åœ¨æ‰‹æœºç­‰ä½åŠŸè€—è®¾å¤‡ä¸Šï¼ŒMLP çš„æ¨¡å‹å°ºå¯¸å¯èƒ½æ˜¯ä¸€ä¸ªéšœç¢ã€‚ 3) è™½ç„¶æˆ‘ä»¬ç¬¬ä¸€æ¬¡å°è¯•ä½¿ç”¨ MLP éª¨å¹²è¿›è¡Œè¯­ä¹‰åˆ†å‰²çš„ç»“æœå¾ˆæœ‰å¸Œæœ›ï¼Œä½†æˆ‘ä»¬æ²¡æœ‰è§‚å¯Ÿåˆ°ä¼˜äºä¼ ç»Ÿ CNN çš„ä¼˜åŠ¿ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/re-parameterization/:6:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"Re-parameterization","uri":"/posts/deeplearning/light-weight/re-parameterization/"},{"categories":["Deep Learning"],"content":"RepLKNet æ–‡ç« æ ‡é¢˜ï¼šScaling Up Your Kernels to 31x31: Revisiting Large Kernel Design in CNNs ä½œè€…ï¼šXiaohan Ding, Xiangyu Zhang, Yizhuang Zhou, Jungong Han, Guiguang Ding, Jian Sun å‘è¡¨æ—¶é—´ï¼š(CVPR 2022) å®˜æ–¹æºç  è¿™ç¯‡è®ºæ–‡é‡æ–°å®¡è§†äº†åœ¨è®¾è®¡ CNN æ¶æ„æ—¶é•¿æœŸè¢«å¿½è§†çš„å¤§å·ç§¯æ ¸ã€‚æˆ‘ä»¬è¯æ˜ï¼Œä½¿ç”¨å‡ ä¸ªå¤§å†…æ ¸è€Œä¸æ˜¯è®¸å¤šå°å†…æ ¸å¯ä»¥æ›´æœ‰æ•ˆåœ°äº§ç”Ÿæ›´å¤§çš„æœ‰æ•ˆæ„Ÿå—é‡ï¼Œä»è€Œå¤§å¹…æå‡ CNN çš„æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨ä¸‹æ¸¸ä»»åŠ¡ä¸Šçš„æ€§èƒ½ï¼Œå¹¶åœ¨æ•°æ®å’Œæ¨¡å‹æ‰©å±•æ—¶å¤§å¤§ç¼©å° CNN å’Œ ViT ä¹‹é—´çš„æ€§èƒ½å·®è·.æˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„å·¥ä½œèƒ½å¤Ÿæ¨è¿› CNN å’Œ ViT çš„ç ”ç©¶ã€‚ä¸€æ–¹é¢ï¼Œå¯¹äº CNN ç¤¾åŒºï¼Œæˆ‘ä»¬çš„ç ”ç©¶ç»“æœè¡¨æ˜æˆ‘ä»¬åº”è¯¥ç‰¹åˆ«æ³¨æ„ ERFï¼Œè¿™å¯èƒ½æ˜¯é«˜æ€§èƒ½çš„å…³é”®ã€‚å¦ä¸€æ–¹é¢ï¼Œå¯¹äº ViT ç¤¾åŒºï¼Œç”±äºå¤§å·ç§¯å¯ä»¥æ›¿ä»£å…·æœ‰ç±»ä¼¼è¡Œä¸ºçš„å¤šå¤´è‡ªæ³¨æ„åŠ›ï¼Œè¿™å¯èƒ½æœ‰åŠ©äºç†è§£è‡ªæ³¨æ„åŠ›çš„å†…åœ¨æœºåˆ¶ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/re-parameterization/:7:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"Re-parameterization","uri":"/posts/deeplearning/light-weight/re-parameterization/"},{"categories":["Deep Learning"],"content":"RepGhost æ–‡ç« æ ‡é¢˜ï¼šRepGhost: A Hardware-Efficient Ghost Module via Re-parameterization ä½œè€…ï¼šChengpeng Chen, Zichao Guo, Haien Zeng, Pengfei Xiong, Jian Dong å‘è¡¨æ—¶é—´ï¼š( 2022) å®˜æ–¹æºç  ä¸ºäº†åœ¨è½»é‡çº§ CNN æ¶æ„è®¾è®¡ä¸­æœ‰æ•ˆåœ°åˆ©ç”¨ç‰¹å¾é‡ç”¨ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç§æ–°çš„è§†è§’ï¼Œé€šè¿‡ç»“æ„é‡æ–°å‚æ•°åŒ–æŠ€æœ¯éšå¼å®ç°ç‰¹å¾é‡ç”¨ï¼Œè€Œä¸æ˜¯å¹¿æ³›ä½¿ç”¨ä½†æ•ˆç‡ä½ä¸‹çš„ä¸²è”æ“ä½œã€‚é€šè¿‡è¿™ç§æŠ€æœ¯ï¼Œæå‡ºäº†ä¸€ç§ç”¨äºéšå¼ç‰¹å¾é‡ç”¨çš„æ–°é¢–ä¸”ç¡¬ä»¶é«˜æ•ˆçš„ RepGhost æ¨¡å—ã€‚æ‰€æå‡ºçš„ RepGhost æ¨¡å—åœ¨è®­ç»ƒæ—¶èåˆæ¥è‡ªä¸åŒå±‚çš„ç‰¹å¾ï¼Œå¹¶åœ¨æ¨ç†å‰åœ¨æƒé‡ç©ºé—´ä¸­æ‰§è¡Œèåˆè¿‡ç¨‹ï¼Œä»è€Œäº§ç”Ÿç”¨äºå¿«é€Ÿæ¨ç†çš„ç®€åŒ–ä¸”ç¡¬ä»¶é«˜æ•ˆçš„æ¶æ„ã€‚åŸºäº RepGhost æ¨¡å—ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªåä¸º RepGhostNet çš„ç¡¬ä»¶é«˜æ•ˆè½»é‡çº§ CNNï¼Œå®ƒåœ¨ç§»åŠ¨è®¾å¤‡çš„å‡†ç¡®æ€§ - å»¶è¿Ÿæƒè¡¡æ–¹é¢å±•ç¤ºäº†å¤šé¡¹è§†è§‰ä»»åŠ¡çš„æœ€æ–°æŠ€æœ¯æ°´å¹³ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/re-parameterization/:8:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"Re-parameterization","uri":"/posts/deeplearning/light-weight/re-parameterization/"},{"categories":["Deep Learning"],"content":"ShuffleNet","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/shufflenet/","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"ShuffleNet","uri":"/posts/deeplearning/light-weight/shufflenet/"},{"categories":["Deep Learning"],"content":"ShuffleNetV1 æ–‡ç« æ ‡é¢˜ï¼šShufflenet: An extremely efficient convolutional neural network for mobile devices ä½œè€…ï¼šXiangyu Zhangï¼ŒXinyu Zhouï¼ŒMengxiao Lin ï¼ŒJian Sun ï¼ŒMegvii Inc (Face++) å‘è¡¨æ—¶é—´ï¼š(CVPR 2018) æ—·è§†å®˜æ–¹å¼€æºShuffleNetä»£ç ï¼›pytorchä»£ç  ShuffleNet V1ï¼ŒShuffleNetä¸»è¦åŒ…å«ä¸¤ä¸ªæ–°å‹çš„ç»“æ„ï¼šåˆ†ç»„é€ç‚¹å·ç§¯(pointwise group conv)å’Œé€šé“é‡æ’(channel shuffle)ã€‚ä½œè€…ä»¬é€šè¿‡ä½¿ç”¨åˆ†ç»„çš„1x1å·ç§¯åœ¨MobileNetçš„åŸºç¡€ä¸Šè¿›ä¸€æ­¥å‡å°‘å‚æ•°, åŒæ—¶ä¸ºäº†ä¿éšœåˆ†ç»„åçš„Channelwiseçš„ä¿¡æ¯äº¤æ¢, ä½œè€…ä»¬å¼•å…¥äº†ChannelShuffleè¿™ä¸€æ“ä½œ, å°†channelé‡æ–°æ’åˆ—, ä½¿å¾—ä¸‹æ¬¡åˆ†ç»„å·ç§¯çš„æ¯ä¸€ç»„ç‰¹å¾å›¾éƒ½å«æœ‰æ¥è‡ªä¸Šæ¬¡å·ç§¯çš„å„ç»„ç‰¹å¾å›¾. å†å¼•å…¥æ®‹å·®è¿æ¥ä¹‹å¤–, ShuffleNetV1ä¹Ÿé€šè¿‡è¿æ¥ä¸‹é‡‡æ ·çš„è¾“å…¥åœ¨é™ä½åˆ†è¾¨ç‡çš„åŒæ—¶æ‰©å¼ é€šé“æ•°, åŒæ—¶ä¹Ÿæ²¡æœ‰å¼•å…¥æ–°çš„å‚æ•°ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/shufflenet/:1:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"ShuffleNet","uri":"/posts/deeplearning/light-weight/shufflenet/"},{"categories":["Deep Learning"],"content":"Related work ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/shufflenet/:2:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"ShuffleNet","uri":"/posts/deeplearning/light-weight/shufflenet/"},{"categories":["Deep Learning"],"content":"Group Convolution æ¯ä¸ªå·ç§¯æ ¸ä¸å†å¤„ç†æ‰€æœ‰è¾“å…¥é€šé“ï¼Œè€Œåªæ˜¯å¤„ç†ä¸€éƒ¨åˆ†é€šé“ã€‚ CondenseNet: An Efficient DenseNet using Learned Group Convolutions ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/shufflenet/:2:1","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"ShuffleNet","uri":"/posts/deeplearning/light-weight/shufflenet/"},{"categories":["Deep Learning"],"content":"Approach ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/shufflenet/:3:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"ShuffleNet","uri":"/posts/deeplearning/light-weight/shufflenet/"},{"categories":["Deep Learning"],"content":"Channel Shuffle for Group Convolutions Channel Shuffle (a) GConvè™½ç„¶èƒ½å¤Ÿå‡å°‘å‚æ•°ä¸è®¡ç®—é‡ï¼Œä½† GConvä¸­ä¸åŒç»„ä¹‹é—´ä¿¡æ¯æ²¡æœ‰äº¤æµã€‚ (b)(c) é€šé“é‡æ’ def shuffle_channels(x, groups): \"\"\" Parameters x: Input tensor of with `channels_last` data format groups: int number of groups per channel Returns channel shuffled output tensor Examples Example for a 1D Array with 3 groups \u003e\u003e\u003e d = np.array([0,1,2,3,4,5,6,7,8]) \u003e\u003e\u003e x = np.reshape(d, (3,3)) \u003e\u003e\u003e x = np.transpose(x, [1,0]) \u003e\u003e\u003e x = np.reshape(x, (9,)) '[0 1 2 3 4 5 6 7 8] --\u003e [0 3 6 1 4 7 2 5 8]' \"\"\" \"\"\"shuffle channels of a 4-D Tensor\"\"\" batch_size, channels, height, width = x.size() assert channels % groups == 0 channels_per_group = channels // groups # split into groups x = x.view(batch_size, groups, channels_per_group, height, width) # transpose 1, 2 axis x = x.transpose(1, 2).contiguous() # reshape into orignal x = x.view(batch_size, channels, height, width) return x ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/shufflenet/:3:1","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"ShuffleNet","uri":"/posts/deeplearning/light-weight/shufflenet/"},{"categories":["Deep Learning"],"content":"ShuffleNet unit ShuffleNetV1-block (a) ResNetç½‘ç»œä¸­$1\\times1$å·ç§¯ç†è®ºè®¡ç®—é‡å æ®93.4% $1\\times1$å·ç§¯æ¢æˆGConvï¼Œç¬¬ä¸€ä¸ªè¿›è¡Œé€šé“é‡æ’ (b) stride =1 (c) stride =2ï¼›è¿›è¡ŒConcatæ‹¼æ¥ Feature Mapçš„å°ºå¯¸ä¸º$w\\times h \\times c$ï¼›bottleneckçš„é€šé“æ•°ä¸º$m$ã€‚ ResNetï¼š$F_{ResNet}=hw(1\\times1\\times c\\times m)+hw(3\\times3\\times m\\times m)+hw(1\\times1\\times m\\times c)=hw(2cm+9m^2)$ ResNeXtï¼š$F_{ResNeXt}=hw(1\\times1\\times c\\times m)+hw(3\\times3\\times m\\times m)/g+hw(1\\times1\\times m\\times c)=hw(2cm+9m^2/g)$ ShuffleNetï¼š$F_{ShuffleNet}=hw(1\\times1\\times c\\times m)/g+hw(3\\times3\\times m)+hw(1\\times1\\times m\\times c)/g=hw(2cm/g+9m)$ ç»“æ„çš„ç¬¬ä¸€ä¸ªblockçš„ç¬¬ä¸€ä¸ªpoint convç”¨çš„æ™®é€šå·ç§¯ shuffle block:å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ•´ä¸ªblocké¦–å…ˆé€šè¿‡å¦‚ä¸‹å›¾æ‰€ç¤ºçš„groupæ“ä½œå‡å°‘ç½‘ç»œå‚æ•°ï¼Œå¹¶å¯¹groupæ“ä½œåè¾“å‡ºçš„ç‰¹å¾å›¾ä½œshuffleæ“ä½œï¼Œç”¨ä»¥æ¶ˆé™¤ç”±äºgroupé€ æˆçš„ç‰¹å¾å±è”½ç°è±¡ï¼Œç´§æ¥ç€å†è·Ÿä¸€ä¸ªgroupæ“ä½œã€‚ ![shuffle block1](ShuffleNet.assets/shuffle block1.png) ShuffleNetV1 architecture ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/shufflenet/:3:2","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"ShuffleNet","uri":"/posts/deeplearning/light-weight/shufflenet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» æ—·è§†ç§‘æŠ€å®˜ç½‘ çŸ¥ä¹ï¼šå¦‚ä½•çœ‹å¾… Face++ æ—·è§†ç§‘æŠ€å‡ºå“çš„è½»é‡é«˜æ•ˆç½‘ç»œ ShuffleNet ï¼Ÿ ShuffleNet V1/V2 | è½»é‡çº§æ·±å±‚ç¥ç»ç½‘ç»œ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/shufflenet/:4:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"ShuffleNet","uri":"/posts/deeplearning/light-weight/shufflenet/"},{"categories":["Deep Learning"],"content":"ShuffleNetV2 æ–‡ç« æ ‡é¢˜ï¼šShuffleNet V2: Practical Guidelines for Efficient CNN Architecture Design ä½œè€…ï¼šNingning Ma, Xiangyu Zhang, Hai-Tao Zheng, Jian Sun å‘è¡¨æ—¶é—´ï¼š(ECCV 2018) ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/shufflenet/:5:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"ShuffleNet","uri":"/posts/deeplearning/light-weight/shufflenet/"},{"categories":["Deep Learning"],"content":"é«˜æ•ˆç½‘ç»œè®¾è®¡çš„å››ä¸ªæŒ‡å¯¼åŸåˆ™ G1ï¼šå½“è¾“å…¥å’Œè¾“å‡ºçš„é€šé“æ•°ç›¸åŒæ—¶ï¼Œconvè®¡ç®—æ‰€éœ€çš„MACæœ€å°(ä¿æŒFLOPsä¸å˜)ï¼› Validation experiment for Guideline 1,Input image size is 56 Ã— 56. MobileNetV2ç“¶é¢ˆç»“æ„è¿èƒŒäº†G1ã€‚ FLOPSè®¡ç®—é‡: $B=1\\times 1\\times c_1\\times h \\times w\\times c_2=hwc_1c_2$; $c_1$ï¼šè¾“å…¥é€šé“æ•°ï¼›$c_2$ï¼šè¾“å‡ºé€šé“æ•° $$ \\begin{equation} \\begin{split} MAC \u0026= h\\times w\\times c_1+h \\times w \\times c_2+1\\times 1\\times c_1 \\times c_2\\\\ \u0026=hw(c_1+c_2)+c_1c_2\\\\ \u0026=B(\\frac{1}{c_1}+\\frac{1}{c_2})+\\frac{B}{hw}\\\\ \u0026\\geq 2\\sqrt{hwB}+\\frac{B}{hw} (å½“ä¸”ä»…å½“c_1=c_æ—¶ï¼Œç­‰å·æˆç«‹) \\end{split} \\end{equation} $$ $$ \\sqrt{\\frac{{c_1}^2+{c_2}^2}{2}}\\geq \\frac{c_1+c_2}{2}\\geq \\sqrt{c_1c_2}\\geq \\frac{2}{\\frac{1}{c_1}+\\frac{1}{c_2}} $$ G2ï¼šå¤§é‡çš„åˆ†ç»„å·ç§¯ä¼šå¢åŠ MACå¼€é”€(ä¿æŒFLOPsä¸å˜)ï¼› Validation experiment for Guideline 2,Input image size is 56 Ã— 56. $$ \\begin{equation} \\begin{split} MAC \u0026=hw(c_1+c_2)+c_1c_2/g\\\\ \u0026=hwc_1+\\frac{Bg}{c_1}+\\frac{B}{hw}\\\\ \\end{split} \\end{equation} $$$$ B = \\frac{hwc_1c_2}{g} $$ å›ºå®šè¾“å…¥å°ºå¯¸å’Œè®¡ç®—é‡ï¼š$g$è¶Šå¤§ï¼ŒMACè¶Šå¤§ ShuffleNet V1 ä¸¥é‡ä¾èµ–åˆ†ç»„å·ç§¯ï¼Œè¿™è¿åäº† G2 G3ï¼šç½‘ç»œç»“æ„çš„ç¢ç‰‡åŒ–ä¼šå‡å°‘å…¶å¯å¹¶è¡Œä¼˜åŒ–çš„ç¨‹åº¦ï¼› GoogleNetç³»åˆ—å’ŒNASNetä¸­å¾ˆå¤šåˆ†æ”¯è¿›è¡Œä¸åŒçš„å·ç§¯/poolè®¡ç®—éå¸¸ç¢ç‰‡ï¼Œå¯¹ç¡¬ä»¶è¿è¡Œå¾ˆä¸å‹å¥½ï¼› Validation experiment for Guideline 3,Input image size is 56 Ã— 56 2-fragment-seriesè¡¨ç¤ºä¸€ä¸ªblockä¸­æœ‰2ä¸ªå·ç§¯å±‚ä¸²è¡Œï¼Œä¹Ÿå°±æ˜¯ç®€å•çš„å åŠ ï¼› 4-fragment-parallelè¡¨ç¤ºä¸€ä¸ªblockä¸­æœ‰4ä¸ªå·ç§¯å±‚å¹¶è¡Œï¼Œç±»ä¼¼Inceptionçš„æ•´ä½“è®¾è®¡ã€‚ å¯ä»¥çœ‹å‡ºåœ¨ç›¸åŒFLOPsçš„æƒ…å†µä¸‹ï¼Œå•å·ç§¯å±‚ï¼ˆ1-fragmentï¼‰çš„é€Ÿåº¦æœ€å¿«ã€‚ åœ¨ GPU ä¸Šç¢ç‰‡ç»“æ„ä¼šå¤§å¤§é™ä½è¿ç®—é€Ÿåº¦ï¼Œè€Œåœ¨ CPU ä¸Šåˆ™ä¸æ˜¯é‚£ä¹ˆæ˜æ˜¾ G4ï¼šElement-wiseæ“ä½œä¸å¯å¿½è§†ï¼› å¯¹å»¶æ—¶å½±å“å¾ˆå¤§ï¼ŒåŒ…æ‹¬Add/Relu/short-cut/depthwise convolutionç­‰ï¼Œä¸»è¦æ˜¯å› ä¸ºè¿™äº›æ“ä½œè®¡ç®—ä¸å†…å­˜è®¿é—®çš„å æ¯”å¤ªå°ï¼› Validation experiment for Guideline 4 é‡‡ç”¨çš„æ˜¯Resnet50çš„ç“¶é¢ˆç»“æ„ï¼ˆbottleneckï¼‰,åˆ†åˆ«å»æ‰å…¶ä¸­çš„ ReLU å’Œè·³è·ƒè¿æ¥ï¼Œç„¶åæµ‹è¯•å®ƒä»¬å„è‡ªçš„è¿è¡Œé€Ÿåº¦ã€‚å¯ä»¥çœ‹åˆ°æ— è®ºæ˜¯å»æ‰å…¶ä¸­å“ªä¸€ä¸ªæ“ä½œï¼Œè¿è¡Œé€Ÿåº¦éƒ½ä¼šåŠ å¿«ã€‚ ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/shufflenet/:6:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"ShuffleNet","uri":"/posts/deeplearning/light-weight/shufflenet/"},{"categories":["Deep Learning"],"content":"ShuffleNet V2 ShuffleNetV2-block å»æ‰äº†åˆ†ç»„å·ç§¯(G2)çš„æ“ä½œï¼Œå»æ‰äº†Add(G4)æ“ä½œï¼Œæ¢æˆä¸¤ä¸ªåˆ†æ”¯æ‹¼æ¥(Concat)èµ·æ¥ï¼Œä»è€Œé€šé“æ•°é‡ä¿æŒä¸å˜ (G1)ï¼Œç„¶åè¿›è¡Œä¸ShuffleNetV1ç›¸åŒçš„Channel Shuï¬„eæ“ä½œæ¥ä¿è¯ä¸¤ä¸ªåˆ†æ”¯é—´èƒ½è¿›è¡Œä¿¡æ¯äº¤æµã€‚ ShuffleNetV2 architecture ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/shufflenet/:7:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"ShuffleNet","uri":"/posts/deeplearning/light-weight/shufflenet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» çŸ¥ä¹ï¼šå¦‚ä½•è¯„ä»·shufflenet V2ï¼Ÿ çŸ¥ä¹ï¼šè½»é‡çº§ç¥ç»ç½‘ç»œâ€œå·¡ç¤¼â€ï¼ˆä¸€ï¼‰â€”â€” ShuffleNetV2 çŸ¥ä¹ï¼šå¦‚ä½•çœ‹å¾… Face++ æ—·è§†ç§‘æŠ€å‡ºå“çš„è½»é‡é«˜æ•ˆç½‘ç»œ ShuffleNet ï¼Ÿ 51CTOåšå®¢ ECCV 2018 | æ—·è§†ç§‘æŠ€æå‡ºæ–°å‹è½»é‡æ¶æ„ShuffleNet V2ï¼šä»ç†è®ºå¤æ‚åº¦åˆ°å®ç”¨è®¾è®¡å‡†åˆ™ è½»é‡çº§ç¥ç»ç½‘ç»œï¼šShuffleNetV2è§£è¯» torchstate-è®¡ç®—ç¥ç»ç½‘ç»œå„å±‚å‚æ•°é‡å’Œè®¡ç®—é‡ å¸¸è§pytorchæ¨¡å‹çš„å‚æ•°é‡å’ŒMAC ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/shufflenet/:8:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"ShuffleNet","uri":"/posts/deeplearning/light-weight/shufflenet/"},{"categories":["Deep Learning"],"content":"SqueezeNet","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/squeezenet/","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"SqueezeNet","uri":"/posts/deeplearning/light-weight/squeezenet/"},{"categories":["Deep Learning"],"content":"SqueezeNet æ–‡ç« æ ‡é¢˜ï¼šSqueezeNet: AlexNet-level accuracy with 50x fewer parameters and \u003c0.5MB model size ä½œè€…ï¼š å‘è¡¨æ—¶é—´ï¼š(ICLR 2016) ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/squeezenet/:1:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"SqueezeNet","uri":"/posts/deeplearning/light-weight/squeezenet/"},{"categories":["Deep Learning"],"content":"SqueezeNext æ–‡ç« æ ‡é¢˜ï¼šSqueezeNext: Hardware-Aware Neural Network Design ä½œè€…ï¼š å‘è¡¨æ—¶é—´ï¼š(CVPR 2018) ä½œè€…æå‡ºäº†ä¸‰ç§ç­–ç•¥æ¥å®ç°åœ¨ä¿æŒç²¾åº¦çš„æƒ…å†µä¸‹å¤§å¤§å‡å°‘å½“æ—¶ä¸»æµæ¨¡å‹(ä»¥AlexNetä¸ºä¾‹)çš„è®¡ç®—é‡å’Œå‚æ•°é‡ï¼š å°†æ¨¡å‹ä¸­ä¸€éƒ¨åˆ†çš„3Ã—3å·ç§¯ç”¨1Ã—1æ¥ä»£æ›¿ï¼Œ1Ã—1å·ç§¯æ˜¯3Ã—3å‚æ•°é‡å’Œè®¡ç®—é‡çš„1/9ï¼Œæ‰€ä»¥å¯ä»¥å¤§å¤§å‡å°‘å‚æ•°é‡å’Œè®¡ç®—é‡ï¼› å‡å°‘3Ã—3å·ç§¯çš„è¾“å…¥é€šé“æ•°ï¼Œè¿™ä¸ªå¯ä»¥é€šè¿‡åœ¨è¿›å…¥3Ã—3å·ç§¯ä¹‹å‰åŠ ä¸€ä¸ª1Ã—1å·ç§¯æ¥å®ç°é€šé“æ•°é‡çš„å‡å°‘ï¼› å°†ä¸‹é‡‡æ ·å±‚çš„ä½ç½®å¾€åæ¨ï¼Œä½¿å¾—æ¨¡å‹å¯ä»¥åœ¨æ›´å¤§çš„feature mapä¸Šè¿›è¡Œæ›´å¤šçš„å­¦ä¹ ï¼Œè¿™ä¸€æ­¥è™½ç„¶ä¼šåœ¨å¢åŠ è®¡ç®—é‡ï¼Œä½†æ˜¯å’Œä¸Šé¢ä¸¤ä¸ªç­–ç•¥ç»“åˆå¯ä»¥åœ¨ç»´æŒæ¨¡å‹ç²¾åº¦çš„æƒ…å†µä¸‹ä»å¤§å¤§å‡å°‘å‚æ•°é‡å’Œè®¡ç®—é‡ï¼› fire module â€‹ è¿™ä¸ªfire moduleç”±squeezeéƒ¨åˆ†å’Œexpandéƒ¨åˆ†æ„æˆï¼Œsqueezeéƒ¨åˆ†æ˜¯1Ã—1çš„å·ç§¯å±‚ï¼Œè€Œexpandéƒ¨åˆ†æ˜¯1Ã—1çš„å·ç§¯å’Œ3Ã—3çš„å·ç§¯æ‹¼æ¥èµ·æ¥çš„ï¼Œæ¯æ¬¡feature mapè¾“å…¥è¿™ä¸ªfire moduleä¼šåœ¨squeezeå±‚é™ä½é€šé“æ•°ï¼Œç„¶ååœ¨expandé€šé“å¢åŠ é€šé“æ•°ï¼Œä»è€Œåœ¨å‚æ•°é‡æ›´å°‘çš„æƒ…å†µä¸‹ä»ç„¶å¯ä»¥å¾—åˆ°å……åˆ†çš„å­¦ä¹ ã€‚ â€‹ æœ€åç»“åˆä¸€äº›æ¨¡å‹å‹ç¼©çš„æ–¹æ³•å¯ä»¥ä½¿å¾—SqueezeNetåœ¨è¾¾åˆ°AlexNetåŒç­‰ç²¾åº¦çš„æƒ…å†µä¸‹ï¼Œå‚æ•°é‡å‡å°‘åˆ°åè€…çš„1/50ï¼Œè®¡ç®—é‡å‡å°‘åˆ°åè€…çš„1/510ã€‚ squeezenext ä»¥ squeezenetä¸ºbaselineã€‚ Low Rank Filtersï¼Œå°†3Ã—3å·ç§¯åˆ†è§£ä¸ºï¼š3Ã—1+1Ã—3ï¼Œå®ç°ä½ç§©æ»¤æ³¢å™¨ä»è€Œå‡å°‘ç½‘ç»œå‚æ•°ã€‚ SqueezeNext Blockæå‡ºäº†å¦‚å›¾æ‰€ç¤ºå…ˆåˆ©ç”¨ä¸¤ä¸ª1Ã—1å·ç§¯æ ¸è¿›è¡Œé™ç»´å‡å°‘è¾“å…¥é€šé“æ•°ï¼Œå†é€šè¿‡ä¸¤ä¸ªä½ç§©æ»¤æ³¢å™¨ï¼Œæœ€åé€šè¿‡1Ã—1å·ç§¯å†å‡ç»´ã€‚ é‡‡ç”¨shortcut connectionâ€”â€”ResNetç»å…¸ç»“æ„ åœ¨multi-processor embedded systemä¸Šè¿›è¡Œå®éªŒï¼Œå¹¶é€šè¿‡å®éªŒç»“æœæŒ‡å¯¼ç½‘ç»œçš„è®¾è®¡ï¼Œä½¿ç½‘ç»œinferenceæ—¶é€Ÿåº¦æ›´å¿« ","date":"2023-06-03","objectID":"/posts/deeplearning/light-weight/squeezenet/:2:0","tags":["Deep Learning","è½»é‡çº§ç½‘ç»œ"],"title":"SqueezeNet","uri":"/posts/deeplearning/light-weight/squeezenet/"},{"categories":["Deep Learning"],"content":"AlexNet","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/alexnet/","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AlexNet","uri":"/posts/deeplearning/image-classification/alexnet/"},{"categories":["Deep Learning"],"content":"AlexNet æ–‡ç« æ ‡é¢˜ï¼šImageNet Classification with Deep Convolutional Neural Networks ä½œè€…ï¼šAlex Krizhevsky, Ilya Sutskever, Hinton å‘è¡¨æ—¶é—´ï¼š(NIPS 2012) è®ºæ–‡ä¸»é¡µ AlexNetæ˜¯2012å¹´ImageNetå›¾åƒåˆ†ç±»ç«èµ›å† å†›ï¼Œé¦–æ¬¡å°†æ·±åº¦å­¦ä¹ å’Œå·ç§¯ç¥ç»ç½‘ç»œç”¨äºå¤§è§„æ¨¡å›¾åƒæ•°æ®é›†åˆ†ç±»ï¼Œæ¯”ä¹‹å‰çš„æ¨¡å‹æœ‰å·¨å¤§çš„æ€§èƒ½é£è·ƒï¼Œåœ¨ILSVRC-2012å›¾åƒåˆ†ç±»ç«èµ›ä¸­è·å¾—äº†top-5è¯¯å·®15.3%çš„å† å†›æˆç»©ï¼Œè¿œè¿œä¼˜äºç¬¬äºŒåï¼ˆtop-5é”™è¯¯ç‡ä¸º26.2%ï¼‰ï¼Œåœ¨å­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œå¼•èµ·å·¨å¤§è½°åŠ¨ï¼Œè‡ªæ­¤ä¹‹åï¼Œè®¡ç®—æœºè§†è§‰å¼€å§‹å¹¿æ³›é‡‡ç”¨æ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œï¼Œæ¨¡å‹æ€§èƒ½æ—¥æ–°æœˆå¼‚ï¼Œå¹¶è¿ç§»æ³›åŒ–åˆ°ç›®æ ‡æ£€æµ‹ã€è¯­ä¹‰åˆ†å‰²ç­‰å…¶å®ƒè®¡ç®—æœºè§†è§‰ä»»åŠ¡ã€‚ AlexNetçš„ä½œè€…ä¹‹ä¸€Hintonå› ä¸ºåœ¨ç¥ç»ç½‘ç»œå’Œè®¡ç®—æœºè§†è§‰çš„è´¡çŒ®ï¼Œè·å¾—2019å¹´å›¾çµå¥–ã€‚ AlexNeté‡‡ç”¨äº†ReLUæ¿€æ´»å‡½æ•°ã€åŒGPUæ¨¡å‹å¹¶è¡Œã€LRNå±€éƒ¨å“åº”å½’ä¸€åŒ–ã€é‡å æœ€å¤§æ± åŒ–ã€æ•°æ®å¢å¼ºã€Dropoutæ­£åˆ™åŒ–ç­‰æŠ€å·§ã€‚ AlexNetåŒ…å«äº”ä¸ªå·ç§¯å±‚ï¼Œæ± åŒ–å±‚ï¼ŒDropoutå±‚å’Œä¸‰ä¸ªå…¨è¿æ¥å±‚ï¼Œæœ€ç»ˆé€šè¿‡1000ä¸ªè¾“å‡ºç¥ç»å…ƒè¿›è¡Œsoftmaxåˆ†ç±»ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/alexnet/:1:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AlexNet","uri":"/posts/deeplearning/image-classification/alexnet/"},{"categories":["Deep Learning"],"content":"The Dataset ImageNet ç½‘ç»œå¯¹æ¯å¼ å›¾ç‰‡ç»™å‡ºäº”ä¸ªé¢„æµ‹lç±»åˆ«ç»“æœæ¦‚ç‡ä»é«˜åˆ°ä½ Top1:æ¦‚ç‡æœ€é«˜çš„é¢„æµ‹ç±»åˆ«ä¸ºæ­£ç¡®æ ‡ç­¾ Top5:äº”ä¸ªé¢„æµ‹ç±»åˆ«é‡ŒåŒ…å«æ­£ç¡®æ ‡è¶ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/alexnet/:2:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AlexNet","uri":"/posts/deeplearning/image-classification/alexnet/"},{"categories":["Deep Learning"],"content":"The Architecture ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/alexnet/:3:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AlexNet","uri":"/posts/deeplearning/image-classification/alexnet/"},{"categories":["Deep Learning"],"content":"ReLuæ¿€æ´»å‡½æ•° åœ¨AlexNetä¸­ç”¨çš„éçº¿æ€§éé¥±å’Œå‡½æ•°æ˜¯$f=max(0,x)$ï¼Œå³ReLUã€‚å®éªŒç»“æœè¡¨æ˜ï¼Œè¦å°†æ·±åº¦ç½‘ç»œè®­ç»ƒè‡³training error rateè¾¾åˆ°25%çš„è¯ï¼ŒReLUåªéœ€5ä¸ªepochsçš„è¿­ä»£ï¼Œä½†tanhå•å…ƒéœ€è¦35ä¸ªepochsçš„è¿­ä»£ï¼Œç”¨ReLUæ¯”tanhå¿«6å€ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/alexnet/:3:1","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AlexNet","uri":"/posts/deeplearning/image-classification/alexnet/"},{"categories":["Deep Learning"],"content":"å¤šGPUæ¨¡å‹å¹¶è¡Œ ä¸ºæé«˜è¿è¡Œé€Ÿåº¦å’Œæé«˜ç½‘ç»œè¿è¡Œè§„æ¨¡ï¼Œä½œè€…é‡‡ç”¨åŒGPUçš„è®¾è®¡æ¨¡å¼ã€‚å¹¶ä¸”è§„å®šGPUåªèƒ½åœ¨ç‰¹å®šçš„å±‚è¿›è¡Œé€šä¿¡äº¤æµã€‚å…¶å®å°±æ˜¯æ¯ä¸€ä¸ªGPUè´Ÿè´£ä¸€åŠçš„è¿ç®—å¤„ç†ã€‚ä½œè€…çš„å®éªŒæ•°æ®è¡¨ç¤ºï¼Œtwo-GPUæ–¹æ¡ˆä¼šæ¯”åªç”¨one-GPUè·‘åŠä¸ªä¸Šé¢å¤§å°ç½‘ç»œçš„æ–¹æ¡ˆï¼Œåœ¨å‡†ç¡®åº¦ä¸Šæé«˜äº†1.7%çš„top-1å’Œ1.2%çš„top-5ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶one-GPUç½‘ç»œè§„æ¨¡åªæœ‰two-GPUçš„ä¸€åŠï¼Œä½†å…¶å®è¿™ä¸¤ä¸ªç½‘ç»œå…¶å®å¹¶éç­‰ä»·çš„ã€‚ ç”±åå‘ä¼ æ’­åŸç†ï¼Œæ˜¾å­˜ä¸­ä¸ä»…å­˜å‚¨æ¨¡å‹å‚æ•°è¿˜éœ€å­˜å‚¨æ­£å‘ä¼ æ’­æ—¶æ¯ä¸€å±‚batchçš„ä¸­é—´ç»“æœã€‚batch sizeè¶Šå¤§ï¼Œå æ˜¾å­˜è¶Šå¤§ã€‚ åŒGPU(å…¨å‚æ•°)çš„è®­ç»ƒæ—¶é—´æ¯”å•GPU(åŠå‚æ•°)æ›´çŸ­ï¼›å•GPU(åŠå‚æ•°)æ¨¡å‹ä¸­æœ€åä¸€ä¸ªå·ç§¯å±‚å’Œå…¨è¿æ¥å±‚æ•°é‡å’ŒåŒGPU(å…¨å‚æ•°)æ¨¡å‹ç›¸åŒï¼Œå› æ­¤â€œåŠå‚æ•°â€å¹¶éçœŸçš„åªæœ‰ä¸€åŠçš„å‚æ•°ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/alexnet/:3:2","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AlexNet","uri":"/posts/deeplearning/image-classification/alexnet/"},{"categories":["Deep Learning"],"content":"LRNå±€éƒ¨å“åº”å½’ä¸€åŒ– $$ b_{x,y}^i=a_{x,y}^i/(k+\\alpha \\sum_{j=max(0ï¼Œi-n/2)}^{min(N-1,i+n/2)}(a_{x,y}^j)^2)^\\beta $$ $a_{x,y}^i$ï¼šä»£è¡¨åœ¨feature mapä¸­ç¬¬$i$ä¸ªé€šé“ä¸Š$(x,y)$ä½ç½®ä¸Šçš„å€¼ï¼›kå¸¸æ•°é˜²æ­¢åˆ†æ¯ä¸º0ï¼› Nï¼šfeature map é€šé“æ•°ï¼ˆæœ¬å±‚å·ç§¯æ ¸ä¸ªæ•°ï¼‰nï¼šè¡¨ç¤ºç›¸é‚»çš„å‡ ä¸ªå·ç§¯æ ¸ã€‚ $(k,\\alpha,\\beta,n)=(0,1,1,N)$ä»£è¡¨æ™®é€šæ²¿æ‰€æœ‰é€šé“å½’ä¸€åŒ–ï¼› $(k,\\alpha,\\beta,n)=(2,10^{-4},0.75,5)$AlexNetæ‰€ç”¨å‚æ•°ä»–ä»¬çš„å€¼æ˜¯åœ¨éªŒè¯é›†ä¸Šå®éªŒå¾—åˆ°çš„ã€‚ è¿™ç§å½’ä¸€åŒ–æ“ä½œå®ç°äº†æŸç§å½¢å¼çš„æ¨ªå‘æŠ‘åˆ¶(å…´å¥‹çš„ç¥ç»å…ƒå¯¹å‘¨å›´ç¥ç»å…ƒæœ‰æŠ‘åˆ¶ä½œç”¨)ã€‚ å·ç§¯æ ¸çŸ©é˜µçš„æ’åºæ˜¯éšæœºä»»æ„ï¼Œå¹¶ä¸”åœ¨è®­ç»ƒä¹‹å‰å°±å·²ç»å†³å®šå¥½é¡ºåºã€‚è¿™ç§LRNå½¢æˆäº†ä¸€ç§ä¾§å‘æŠ‘åˆ¶æœºåˆ¶ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/alexnet/:3:3","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AlexNet","uri":"/posts/deeplearning/image-classification/alexnet/"},{"categories":["Deep Learning"],"content":"Overlapping Pooling æ± å±‚æ˜¯ç›¸åŒå·ç§¯æ ¸é¢†åŸŸå‘¨å›´ç¥ç»å…ƒçš„è¾“å‡ºã€‚æ± å±‚è¢«è®¤ä¸ºæ˜¯ç”±ç©ºé—´è·ç¦»sä¸ªåƒç´ çš„æ± å•å…ƒç½‘æ ¼çš„ç»„æˆã€‚ä¹Ÿå¯ä»¥ç†è§£æˆä»¥å¤§å°ä¸ºæ­¥é•¿å¯¹å‰é¢å·ç§¯å±‚çš„ç»“æœè¿›è¡Œåˆ†å—ï¼Œå¯¹å—å¤§å°ä¸ºçš„å·ç§¯æ˜ å°„ç»“æœåšæ€»ç»“ã€‚Poolingå•å…ƒåœ¨æ€»ç»“æå–ç‰¹å¾çš„æ—¶å€™ï¼Œå…¶è¾“å…¥ä¼šå—åˆ°ç›¸é‚»poolingå•å…ƒçš„è¾“å…¥å½±å“ï¼Œä¹Ÿå°±æ˜¯æå–å‡ºæ¥çš„ç»“æœå¯èƒ½æ˜¯æœ‰é‡å¤çš„(å¯¹max poolingè€Œè¨€)ã€‚è€Œä¸”ï¼Œå®éªŒè¡¨ç¤ºä½¿ç”¨å¸¦äº¤å çš„Poolingçš„æ•ˆæœæ¯”çš„ä¼ ç»Ÿè¦å¥½ï¼Œåœ¨top-1å’Œtop-5ä¸Šåˆ†åˆ«æé«˜äº†0.4%å’Œ0.3%ï¼Œåœ¨è®­ç»ƒé˜¶æ®µæœ‰é¿å…è¿‡æ‹Ÿåˆçš„ä½œç”¨ã€‚ åæ¥çš„paperä¸é‡‡ç”¨è¿™ç§æ–¹æ³• ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/alexnet/:3:4","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AlexNet","uri":"/posts/deeplearning/image-classification/alexnet/"},{"categories":["Deep Learning"],"content":"æ€»ä½“ç»“æ„ ç½‘ç»œç»“æ„è¯¦è§£ conv1â€“\u003eReLuâ€“\u003ePoolâ€“\u003eLRN;conv2â€“\u003eReLuâ€“\u003ePoolâ€“\u003eLRN;conv3â€“\u003eReLu;conv4â€“\u003eReLu;conv5â€“\u003eReLuâ€“\u003ePool AlexNetç½‘ç»œç»“æ„ è¾“å…¥æ•°æ®ä¸º$227\\times227\\times3$å›¾åƒï¼Œé€šè¿‡Conv1ï¼Œå·ç§¯æ ¸ä¸ºï¼Œ$11\\times11$ï¼Œå·ç§¯æ ¸ä¸ªæ•°ä¸º96ä¸ªï¼Œæ­¥é•¿ä¸º4ï¼ŒPaddingä¸º2ï¼Œè¾“å‡ºç‰¹å¾å›¾$55\\times55\\times96$ã€‚$N=(W-F+2P)/s+1=[227-11+(2\\times2)]/4+1=55$ è¾“å…¥æ•°æ®ä¸º$224\\times224\\times3$å›¾åƒï¼Œé€šè¿‡Conv1ï¼Œå·ç§¯æ ¸ä¸º$11\\times11$ï¼Œå·ç§¯æ ¸ä¸ªæ•°ä¸º96ä¸ªï¼Œæ­¥é•¿ä¸º4ï¼ŒPaddingä¸º[1:2]ï¼ˆå·¦ä¸Šå„è¡¥1ä¸ª0ï¼Œå³ä¸‹å„è¡¥2ä¸ª0ï¼‰ï¼›è¾“å‡ºç‰¹å¾å›¾$55\\times55\\times96$ã€‚$N=(W-F+2P)/s+1=[224-11+(1+2)]/4+1=55$ tuple:(1,2) # 1ä»£è¡¨ä¸Šä¸‹æ–¹å„è¡¥ä¸€è¡Œé›¶ # 2ä»£è¡¨å·¦å³ä¸¤ä¾§å„è¡¥ä¸¤åˆ—é›¶ nn.ZeroPad2d((1,2,1,2)) # å·¦ä¾§è¡¥ä¸€åˆ—ï¼Œå³ä¾§è¡¥ä¸¤åˆ—((z)) # ä¸Šæ–¹è¡¥ä¸€è¡Œï¼Œä¸‹æ–¹è¡¥ä¸¤è¡Œ Maxpooling1æ»‘åŠ¨çª—å£$3\\times3\\times96$,æ­¥é•¿ä¸º2ï¼Œpaddingï¼š0 ï¼›è¾“å‡ºç‰¹å¾å›¾$27\\times27\\times96$ã€‚$N=(W-F+2P)/s+1=[55-3+0)]/2+1=27$ æ± åŒ–æ“ä½œåªæ”¹å˜ç‰¹å¾å›¾å¤§å°ï¼Œä¸æ”¹å˜æ·±åº¦ã€‚ é€šè¿‡Conv2ï¼Œå·ç§¯æ ¸ä¸º$5\\times5$ï¼Œå·ç§¯æ ¸ä¸ªæ•°ä¸º256ä¸ªï¼Œæ­¥é•¿ä¸º1ï¼ŒPaddingä¸º2ï¼Œè¾“å‡ºç‰¹å¾å›¾$27\\times27\\times256ã€‚$$N=(W-F+2P)/s+1=[27-5+(2\\times2)]/1+1=27$ Maxpooling2æ»‘åŠ¨çª—å£$3\\times3\\times256$,æ­¥é•¿ä¸º2ï¼Œpaddingï¼š0 ï¼›è¾“å‡ºç‰¹å¾å›¾$13\\times13\\times256$ã€‚$N=(W-F+2P)/s+1=[27-3+0)]/2+1=13$ é€šè¿‡Conv3ï¼Œå·ç§¯æ ¸ä¸º$3\\times3$ï¼Œå·ç§¯æ ¸ä¸ªæ•°ä¸º384ä¸ªï¼Œæ­¥é•¿ä¸º1ï¼ŒPaddingä¸º1ï¼Œè¾“å‡ºç‰¹å¾å›¾$13\\times13\\times384$ ã€‚ $N=(W-F+2P)/s+1=[13-3+(2\\times1)]/1+1=13$ é€šè¿‡Conv4ï¼Œå·ç§¯æ ¸ä¸º$3\\times3$ï¼Œå·ç§¯æ ¸ä¸ªæ•°ä¸º384ä¸ªï¼Œæ­¥é•¿ä¸º1ï¼ŒPaddingä¸º1ï¼Œè¾“å‡ºç‰¹å¾å›¾$13\\times13\\times384$ ã€‚ $N=(W-F+2P)/s+1=[13-3+(2\\times1)]/1+1=13$ é€šè¿‡Conv5ï¼Œå·ç§¯æ ¸ä¸º$3\\times3$ï¼Œå·ç§¯æ ¸ä¸ªæ•°ä¸º256ä¸ªï¼Œæ­¥é•¿ä¸º1ï¼ŒPaddingä¸º1ï¼Œè¾“å‡ºç‰¹å¾å›¾$13\\times13\\times256$ ã€‚ $N=(W-F+2P)/s+1=[13-3+(2\\times1)]/1+1=13$ Maxpooling3æ»‘åŠ¨çª—å£$3\\times3\\times256$,æ­¥é•¿ä¸º2ï¼Œpaddingï¼š0 ï¼›è¾“å‡ºç‰¹å¾å›¾$6\\times6\\times256$ã€‚$N=(W-F+2P)/s+1=[13-3+0)]/2+1=6$ FC6ï¼š$6\\times6\\times256$è¿›è¡Œæ‰å¹³åŒ–å¤„ç†æˆä¸º$1\\times 9216$,ç”¨ä¸€ä¸ªç»´åº¦ä¸º$9216\\times4096$çŸ©é˜µå®Œæˆè¾“å…¥è¾“å‡ºçš„å…¨è¿æ¥ï¼Œè¾“å‡º$1\\times 4096$ FC7ï¼šç”¨ä¸€ä¸ªç»´åº¦ä¸º$4096\\times4096$çŸ©é˜µå®Œæˆè¾“å…¥è¾“å‡ºçš„å…¨è¿æ¥ï¼Œè¾“å‡º$1\\times 4096$ FC8ï¼šç”¨ä¸€ä¸ªç»´åº¦ä¸º$4096\\times1000$çŸ©é˜µå®Œæˆè¾“å…¥è¾“å‡ºçš„å…¨è¿æ¥ï¼Œè¾“å‡º$1\\times 1000$ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/alexnet/:3:5","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AlexNet","uri":"/posts/deeplearning/image-classification/alexnet/"},{"categories":["Deep Learning"],"content":"Reducing Overfiting ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/alexnet/:4:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AlexNet","uri":"/posts/deeplearning/image-classification/alexnet/"},{"categories":["Deep Learning"],"content":"Data Augmentationæ•°æ®å¢å¼º é’ˆå¯¹==ä½ç½®==ï¼š è®­ç»ƒé˜¶æ®µï¼šéšæœºåœ°ä»$256\\times256$çš„åŸå§‹å›¾åƒä¸­æˆªå–$224\\times224$å¤§å°çš„åŒºåŸŸ(æ°´å¹³ç¿»è½¬åŠé•œåƒ),ç›¸å½“äºå¢åŠ äº†$2*(256-224)^2=2048$å€çš„æ•°æ®é‡ã€‚ å¦‚æœæ²¡æœ‰æ•°æ®å¢å¼º,ä»…é åŸå§‹çš„æ•°æ®é‡,å‚æ•°ä¼—å¤šçš„CNNä¼šé™·å…¥è¿‡æ‹Ÿåˆä¸­,ä½¿ç”¨äº†æ•°æ®å¢å¼ºåå¯ä»¥å¤§å¤§å‡è½»è¿‡æ‹Ÿåˆ,æå‡æ³›åŒ–èƒ½åŠ›ã€‚ æµ‹è¯•é˜¶æ®µï¼šå–å›¾ç‰‡çš„å››ä¸ªè§’åŠ ä¸­é—´å…±5ä¸ªä½ç½®,å¹¶è¿›è¡Œå·¦å³ç¿»è½¬,ä¸€å…±è·å¾—10å¼ å›¾ç‰‡,å¯¹ä»–ä»¬è¿›è¡Œé¢„æµ‹å¹¶å¯¹10æ¬¡ç»“æœæ±‚å‡å€¼ é’ˆå¯¹==é¢œè‰²==ï¼š å¯¹å›¾åƒçš„RGBæ•°æ®è¿›è¡ŒPCAå¤„ç†,å¹¶å¯¹ä¸»æˆåˆ†åšä¸€ä¸ªæ ‡å‡†å·®ä¸º0.1çš„é«˜æ–¯æ‰°åŠ¨,å¢åŠ äº›å™ªå£°,ï¼ˆä¿®æ”¹RGBé€šé“åƒç´ å€¼ï¼‰è¿™ä¸ª Trickå¯ä»¥è®©é”™è¯¯ç‡å†ä¸‹é™1%ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/alexnet/:4:1","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AlexNet","uri":"/posts/deeplearning/image-classification/alexnet/"},{"categories":["Deep Learning"],"content":"Dropout éšæœºå¤±æ´» éšæœºï¼šdropout probability (eg: p=0.5) å¤±æ´»ï¼šweight = 0 è®­ç»ƒé˜¶æ®µï¼šæ¯ä¸€ä¸ªbatchéšæœºå¤±æ´»ä¸€åŠçš„ç¥ç»å…ƒï¼ˆå°†ç¥ç»å…ƒè¾“å‡ºè®¾ç½®ä¸º0ï¼‰é˜»æ–­è¯¥ç¥ç»å…ƒçš„å‰å‘-åå‘ä¼ æ’­ã€‚ é¢„æµ‹é˜¶æ®µï¼šä¿ç•™æ‰€æœ‰ç¥ç»å…ƒï¼Œé¢„æµ‹ç»“æœä¹˜ä»¥0.5 ã€‚ Dropoutå‡å°‘è¿‡æ‹Ÿåˆçš„ç†ç”± æ¨¡å‹é›†æˆ p=0.5æ„å‘³ç€$2^n$ä¸ªå…±äº«æƒé‡çš„æ½œåœ¨ç½‘ç»œ è®°å¿†éšå³æŠ¹å» å‡å°‘ç¥ç»å…ƒä¹‹é—´çš„è”åˆä¾èµ–æ€§ æœ‰æ€§ç¹æ®– æ¯ä¸ªåŸºå› ç‰‡æ®µéƒ½è¦ä¸æ¥è‡ªå¦ä¸€ä¸ªéšå³ä¸ªä½“çš„åŸºå› ç‰‡æ®µååŒå·¥ä½œ æ•°æ®å¢å¼º æ€»å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªå›¾ç‰‡ä½¿ç¥ç»ç½‘ç»œä¸­é—´å±‚ç»“æœä¸Dropoutåç›¸åŒ ç›¸å½“äºå¢åŠ äº†è¿™å¼ å›¾ç‰‡åˆ°æ•°æ®é›†é‡Œ ç¨€ç–æ€§ ç­‰ä»·äºæ­£åˆ™é¡¹ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/alexnet/:4:2","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AlexNet","uri":"/posts/deeplearning/image-classification/alexnet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» AlexNet â€“ ImageNet Classification with Deep Convolutional Neural Networks LRNä¸BNçš„åŒºåˆ« AlexNetçš„CUDAä»£ç å®ç° é‡å æ± åŒ–ä¸ºä½•èƒ½é˜²æ­¢è¿‡æ‹Ÿåˆ NORBæ•°æ®é›† Caltech-101æ•°æ®é›† Caltech-256æ•°æ®é›† Caltech-256æ•°æ®é›†ï¼ˆKaggle) æ ‡æ³¨å·¥å…·LabelMeï¼ˆä¸»é¡µ) æ ‡æ³¨å·¥å…·LabelMeï¼ˆGithub) ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/alexnet/:5:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AlexNet","uri":"/posts/deeplearning/image-classification/alexnet/"},{"categories":["Deep Learning"],"content":"ZFNet æ–‡ç« æ ‡é¢˜ï¼šVisualizing and Understanding Convolutional Networks ä½œè€…ï¼šMatthew D Zeilerï¼ŒRob Fergus å‘è¡¨æ—¶é—´ï¼š(CVPR 2013) çº½çº¦å¤§å­¦ZFNetï¼Œ2013å¹´ImageNetå›¾åƒåˆ†ç±»ç«èµ›å† å†›æ¨¡å‹ã€‚æå‡ºäº†ä¸€ç³»åˆ—å¯è§†åŒ–å·ç§¯ç¥ç»ç½‘ç»œä¸­é—´å±‚ç‰¹å¾çš„æ–¹æ³•ï¼Œå¹¶å·§å¦™è®¾ç½®äº†å¯¹ç…§æ¶ˆèå®éªŒï¼Œä»å„ä¸ªè§’åº¦åˆ†æå·ç§¯ç¥ç»ç½‘ç»œå„å±‚æå–çš„ç‰¹å¾åŠå¯¹å˜æ¢çš„æ•æ„Ÿæ€§ã€‚ ä½¿ç”¨åå·ç§¯deconvnetï¼Œå°†ä¸­é—´å±‚feature mapæŠ•å°„é‡æ„å›åŸå§‹è¾“å…¥åƒç´ ç©ºé—´ï¼Œä¾¿äºå¯è§†åŒ–æ¯ä¸ªfeature mapæ•è·çš„ç‰¹å¾ã€‚ æ”¹è¿›AlexNetæ¨¡å‹ï¼Œå‡å°å·ç§¯æ ¸å°ºå¯¸ï¼Œå‡å°æ­¥é•¿ï¼Œå¢åŠ å·ç§¯æ ¸ï¼Œæå‡ºZFNetã€‚ è®­ç»ƒè¿‡ç¨‹ä¸­ä¸åŒå±‚ç‰¹å¾æ¼”åŒ–å¯è§†åŒ–ã€‚ å›¾åƒå¹³ç§»ã€ç¼©æ”¾ã€æ—‹è½¬æ•æ„Ÿæ€§åˆ†æã€‚ å›¾åƒå±€éƒ¨é®æŒ¡æ•æ„Ÿæ€§åˆ†æï¼ˆé®æŒ¡åŒä¸€å¼ ç‹—è„¸å›¾åƒçš„ä¸åŒéƒ¨ä½ï¼Œåˆ†æç»“æœå˜åŒ–ï¼‰ã€‚ å›¾åƒå±€éƒ¨é®æŒ¡ç›¸å…³æ€§æ•æ„Ÿæ€§åˆ†æï¼ˆé®æŒ¡ä¸åŒç‹—è„¸çš„åŒä¸€éƒ¨ä½ï¼Œåˆ†æç›¸å…³æ€§ï¼‰ã€‚ ZFNetåœ¨ImageNet2012å›¾åƒåˆ†ç±»ç«èµ›ç»“æœã€‚ æ¨¡å‹è¿ç§»å­¦ä¹ æ³›åŒ–åˆ°å…¶å®ƒæ•°æ®é›†çš„æ€§èƒ½åˆ†æï¼šCaltech-101ã€Caltech-256ã€PASCAL VOC2012ã€‚ å»é™¤å…¨è¿æ¥å±‚å’Œå·ç§¯å±‚åæ¨¡å‹æ€§èƒ½åˆ†æã€‚ æ¨¡å‹å„å±‚ç‰¹å¾å¯¹åˆ†ç±»ä»»åŠ¡çš„æœ‰æ•ˆæ€§åˆ†æã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/alexnet/:6:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AlexNet","uri":"/posts/deeplearning/image-classification/alexnet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» åŸä½œè€…è®²è§£è§†é¢‘ï¼ˆè§†é¢‘ä¸­æœ‰å‡ é¡µpptæ’­æ”¾é¡ºåºé”™è¯¯ï¼‰ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/alexnet/:7:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AlexNet","uri":"/posts/deeplearning/image-classification/alexnet/"},{"categories":["Deep Learning"],"content":"AutoML","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/automl/","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AutoML","uri":"/posts/deeplearning/image-classification/automl/"},{"categories":["Deep Learning"],"content":"NIR æ–‡ç« æ ‡é¢˜ï¼šNeural Inheritance Relation Guided One-Shot Layer Assignment Search ä½œè€…ï¼šRang Meng, Weijie Chen, Di Xie, Yuan Zhang, Shiliang Pu å‘è¡¨æ—¶é—´ï¼š(AAAI 2020) ç›¸åŒFLOPsé‡Œï¼Œå„ä¸ªstageé‡Œå±‚æ•°çš„è°ƒæ•´ï¼›å±‚æ•°æœç´¢å•ç‹¬æ‘˜å‡ºæ¥ï¼Œæ›´åŠ å­˜ç²¹çš„æ¢ç©¶ç¥ç»ç½‘ç»œç»“æ„ä¹‹é—´çš„å…³ç³»ï¼Œå¹¶å¸Œæœ›ç½‘ç»œç»“æ„å…³ç³»çš„æ€è·¯ï¼Œå¯ä»¥ç»™NASç¤¾åŒºå¸¦æ¥ä¸€äº›insightï¼Œè¿›ä¸€æ­¥å¾—åˆ°æ›´åŠ é€šç”¨çš„é«˜æ•ˆNASæ–¹æ¡ˆã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/automl/:1:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AutoML","uri":"/posts/deeplearning/image-classification/automl/"},{"categories":["Deep Learning"],"content":"RegNet æ–‡ç« æ ‡é¢˜ï¼šDesigning Network Design Spaces ä½œè€…ï¼šIlija Radosavovic, Raj Prateek Kosaraju, Ross Girshick, Kaiming He, Piotr DollÃ¡r å‘è¡¨æ—¶é—´ï¼š(CVPR 2020) å®˜æ–¹æºç  RegNet æ˜¯ç”± facebook äº 2020 å¹´æå‡ºï¼Œæ—¨åœ¨æ·±åŒ–è®¾è®¡ç©ºé—´ç†å¿µçš„æ¦‚å¿µï¼Œåœ¨ AnyNetX çš„åŸºç¡€ä¸Šé€æ­¥æ”¹è¿›ï¼Œé€šè¿‡åŠ å…¥å…±äº«ç“¶é¢ˆ ratioã€å…±äº«ç»„å®½åº¦ã€è°ƒæ•´ç½‘ç»œæ·±åº¦ä¸å®½åº¦ç­‰ç­–ç•¥ï¼Œæœ€ç»ˆå®ç°ç®€åŒ–è®¾è®¡ç©ºé—´ç»“æ„ã€æé«˜è®¾è®¡ç©ºé—´çš„å¯è§£é‡Šæ€§ã€æ”¹å–„è®¾è®¡ç©ºé—´çš„è´¨é‡ï¼Œå¹¶ä¿æŒè®¾è®¡ç©ºé—´çš„æ¨¡å‹å¤šæ ·æ€§çš„ç›®çš„ã€‚æœ€ç»ˆè®¾è®¡å‡ºçš„æ¨¡å‹åœ¨ç±»ä¼¼çš„æ¡ä»¶ä¸‹ï¼Œæ€§èƒ½è¿˜è¦ä¼˜äº EfficientNetï¼Œå¹¶ä¸”åœ¨ GPU ä¸Šçš„é€Ÿåº¦æé«˜äº† 5 å€ã€‚ æˆ‘ä»¬å‘ç°æœ€ä½³æ¨¡å‹çš„æ·±åº¦åœ¨è®¡ç®—æœºåˆ¶ï¼ˆ~20 ä¸ªå—ï¼‰ä¸­æ˜¯ç¨³å®šçš„ï¼Œå¹¶ä¸”æœ€ä½³æ¨¡å‹ä¸ä½¿ç”¨ç“¶é¢ˆæˆ–å€’ç½®ç“¶é¢ˆ è¾“å…¥æ˜¯ä¸€ä¸ªåˆå§‹è®¾è®¡ç©ºé—´ï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªç»†åŒ–çš„è®¾è®¡ç©ºé—´ï¼Œå…¶ä¸­æ¯ä¸ªè®¾è®¡æ­¥éª¤çš„ç›®çš„æ˜¯å‘ç°èƒ½å¤Ÿäº§ç”Ÿæ›´ç®€å•æˆ–æ€§èƒ½æ›´å¥½çš„æ¨¡å‹ç¾¤ä½“çš„è®¾è®¡åŸ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/automl/:2:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AutoML","uri":"/posts/deeplearning/image-classification/automl/"},{"categories":["Deep Learning"],"content":"AnyNet Design Space stemï¼Œbodyï¼Œhead åœ¨è¯¥è®¾è®¡ç©ºé—´ä¸­ï¼Œç½‘ç»œçš„ä¸»ä½“å°±æ˜¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼ˆstemï¼Œbodyï¼Œheadï¼‰ã€‚å…¶ä¸­stemå’Œheadæ˜¯å›ºå®šä¸å˜çš„ï¼Œstemå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å·ç§¯å±‚ï¼ˆé»˜è®¤åŒ…å«bnä»¥åŠreluï¼‰ï¼Œå·ç§¯æ ¸å¤§å°ä¸º3x3ï¼Œæ­¥è·ä¸º2ï¼Œå·ç§¯æ ¸ä¸ªæ•°ä¸º32ï¼Œheadå°±æ˜¯åˆ†ç±»ç½‘ç»œä¸­å¸¸è§çš„åˆ†ç±»å™¨ï¼Œç”±ä¸€ä¸ªå…¨å±€å¹³å‡æ± åŒ–å±‚å’Œå…¨è¿æ¥å±‚æ„æˆã€‚æ‰€ä»¥ç½‘ç»œä¸­æœ€ä¸»è¦çš„å°±æ˜¯bodyéƒ¨åˆ†ï¼Œbodyæ˜¯ç”±4ä¸ªstageå †å ç»„æˆï¼Œè€Œstageæ˜¯ç”±ä¸€ç³»åˆ—blockå †å ç»„æˆã€‚ä½†blockçš„è¯¦ç»†ç»“æ„ä»¥åŠå‚æ•°å¹¶æ²¡æœ‰åšä»»ä½•é™åˆ¶ï¼Œè¿™å°±æ˜¯AnyNet AnyNetX(A) ç”±å›¾å¯çŸ¥ï¼Œä¸»åˆ†æ”¯éƒ½æ˜¯ä¸€ä¸ª1x1çš„å·ç§¯ï¼ˆåŒ…æ‹¬bnå’Œreluï¼‰ã€ä¸€ä¸ª3x3çš„groupå·ç§¯ï¼ˆåŒ…æ‹¬bnå’Œreluï¼‰ã€å†æ¥ä¸€ä¸ª1x1çš„å·ç§¯ï¼ˆåŒ…æ‹¬bnï¼‰ã€‚shortcutæ·å¾„åˆ†æ”¯ä¸Šå½“stride=1æ—¶ä¸åšä»»ä½•å¤„ç†ï¼Œå½“stride=2æ—¶é€šè¿‡ä¸€ä¸ª1x1çš„å·ç§¯ï¼ˆåŒ…æ‹¬bnï¼‰è¿›è¡Œä¸‹é‡‡æ ·ã€‚å›¾ä¸­çš„rä»£è¡¨åˆ†è¾¨ç‡ç®€å•ç†è§£ä¸ºç‰¹å¾çŸ©é˜µçš„é«˜ã€å®½ï¼Œå½“æ­¥è·sç­‰äº1æ—¶ï¼Œè¾“å…¥è¾“å‡ºçš„rä¿æŒä¸å˜ï¼Œå½“sç­‰äº2æ—¶ï¼Œè¾“å‡ºçš„rä¸ºè¾“å…¥çš„ä¸€åŠã€‚wä»£è¡¨ç‰¹å¾çŸ©é˜µçš„channelï¼ˆæ³¨æ„å½“s=2æ—¶ï¼Œè¾“å…¥çš„æ˜¯w i âˆ’ 1 w_{i-1} AnyNetX(B) ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/automl/:3:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AutoML","uri":"/posts/deeplearning/image-classification/automl/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» è‡ªåŠ¨é©¾é©¶ç³»åˆ—è®ºæ–‡è§£è¯»ï¼ˆä¸€ï¼‰ï¼šRegNetâ€”â€”é¢ è¦†NASçš„AutoMLæ–‡ç«  RegNetç½‘ç»œç»“æ„ä¸æ­å»º ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/automl/:4:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"AutoML","uri":"/posts/deeplearning/image-classification/automl/"},{"categories":["Deep Learning"],"content":"ConvNeXt","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/convnext-/","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ConvNeXt","uri":"/posts/deeplearning/image-classification/convnext-/"},{"categories":["Deep Learning"],"content":"ConvNeXt æ–‡ç« æ ‡é¢˜ï¼šA ConvNet for the 2020s ä½œè€…ï¼šZhuang Liu, Hanzi Mao, Chao-Yuan Wu, Christoph Feichtenhofer, Trevor Darrell, Saining Xie å‘è¡¨æ—¶é—´ï¼š2022 Official Code ResNetçš„Transformerç‰ˆ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/convnext-/:1:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ConvNeXt","uri":"/posts/deeplearning/image-classification/convnext-/"},{"categories":["Deep Learning"],"content":"Modernizing a ConvNet: a Roadmapè·¯çº¿å›¾ æ·±è‰²ä¸º ResNet-50/Swin-Tï¼›ç°è‰²ä¸ºResNet-200/Swin-Bï¼›é˜´å½±ä¸ºæœªä¿®æ”¹ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/convnext-/:2:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ConvNeXt","uri":"/posts/deeplearning/image-classification/convnext-/"},{"categories":["Deep Learning"],"content":"Detailed Architectures ConvNeXt Detailed results for modernizing a ResNet-50 Detailed results for modernizing a ResNet-200 ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/convnext-/:2:1","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ConvNeXt","uri":"/posts/deeplearning/image-classification/convnext-/"},{"categories":["Deep Learning"],"content":"macro design å®è§‚è®¾è®¡ Changing stage compute ratio (78.8%â€”\u003e79.4%) æ¯ä¸ªstageçš„blockæ•°é‡ï¼š(3ï¼Œ4ï¼Œ6ï¼Œ3)-\u003e(3ï¼Œ3ï¼Œ9ï¼Œ3) å’Œä¸ºSwin-Tçš„stage(1ï¼Œ1ï¼Œ3ï¼Œ1)ä¸€è‡´ã€‚ Changing stem to â€œPatchifyâ€ (79.4%â€”\u003e79.5%) è¾“å…¥224ï¼›ç»å†stemï¼Œå¯¼è‡´$4\\times$ä¸‹é‡‡æ ·æˆ56ï¼›å·ç§¯è®¡ç®—ï¼š $ (W-F+2P)/s+1$ ä¼ ç»Ÿï¼šstride=2çš„$7\\times7$å·ç§¯(paddingä¸º3)â€”\u003estride=2çš„$3\\times3$max poolingï¼ˆpaddingä¸º1ï¼‰ $(224-7+2\\cdot3)/2+1=112â€“\u003e(112-3+2)/2=56$ï¼ˆpytorchå‘ä¸‹å–æ•´ï¼‰ Swin-Tï¼šstride=4çš„$4\\times4$å·ç§¯ $(224-4)/4+1=56$ ConvNeXt ï¼šstride=4çš„$4\\times4$å·ç§¯ # æ ‡å‡†ResNet stem = nn.Sequential( nn.Conv2d(in_chans, dims[0], kernel_size=7, stride=2,padding=3), nn.MaxPool2d(kernel_size=3, stride=2, padding=1) ) # ConvNeXt stem = nn.Sequential( nn.Conv2d(in_chans, dims[0], kernel_size=4, stride=4), LayerNorm(dims[0], eps=1e-6, data_format=\"channels_first\") ) ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/convnext-/:2:2","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ConvNeXt","uri":"/posts/deeplearning/image-classification/convnext-/"},{"categories":["Deep Learning"],"content":"ResNeXt (79.4%â€”\u003e80.5%) Use more groups, expand width ä½¿ç”¨æ›´å¤šçš„ç»„ï¼Œæ‰©å¤§å®½åº¦ bottleneckçš„$3\\times3$å·ç§¯â€”\u003edepthwise conv(ç»„æ•°ç­‰äºé€šé“æ•°) å°†ç½‘ç»œå®½åº¦å¢åŠ åˆ°ä¸Swin-Tçš„é€šé“æ•°é‡ç›¸åŒï¼ˆä»64åˆ°96ï¼‰ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/convnext-/:2:3","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ConvNeXt","uri":"/posts/deeplearning/image-classification/convnext-/"},{"categories":["Deep Learning"],"content":"Inverted bottleneck (80.5%â€”\u003e80.6%) Block modifications and resulted specifications (a) ResNeXt blockï¼› (b) inverted bottleneck block ï¼› (c) bçš„æ·±åº¦å·ç§¯ä½ç½®ä¸Šç§» d=4ï¼ˆç»´åº¦ç³»æ•°ï¼‰ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/convnext-/:2:4","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ConvNeXt","uri":"/posts/deeplearning/image-classification/convnext-/"},{"categories":["Deep Learning"],"content":"large kernel size ä½¿ç”¨[cå›¾](###Inverted bottleneck (80.5%â€”\u003e80.6%))æ·±åº¦å·ç§¯ä½ç½®ä¸Šç§»åçš„å€’æ®‹å·®ç»“æ„ (é€€åŒ–åˆ°79.9%) ä½¿ç”¨$7\\times7$å·ç§¯ ï¼ˆ79.9% (3Ã—3) â€”\u003e 80.6%ï¼‰ (7Ã—7) ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/convnext-/:2:5","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ConvNeXt","uri":"/posts/deeplearning/image-classification/convnext-/"},{"categories":["Deep Learning"],"content":"various layer-wise micro designså„ç§å±‚çº§çš„å¾®è§‚è®¾è®¡ ConvNeXt_Block class Block(nn.Module): r\"\"\" ConvNeXt Block. There are two equivalent implementations: (1) DwConv -\u003e LayerNorm (channels_first) -\u003e 1x1 Conv -\u003e GELU -\u003e 1x1 Conv; all in (N, C, H, W) (2) DwConv -\u003e Permute to (N, H, W, C); LayerNorm (channels_last) -\u003e Linear -\u003e GELU -\u003e Linear; Permute back We use (2) as we find it slightly faster in PyTorch Args: dim (int): Number of input channels. drop_path (float): Stochastic depth rate. Default: 0.0 layer_scale_init_value (float): Init value for Layer Scale. Default: 1e-6. \"\"\" def __init__(self, dim, drop_path=0., layer_scale_init_value=1e-6): super().__init__() self.dwconv = nn.Conv2d(dim, dim, kernel_size=7, padding=3, groups=dim) # depthwise conv self.norm = LayerNorm(dim, eps=1e-6) self.pwconv1 = nn.Linear(dim, 4 * dim) # pointwise/1x1 convs, implemented with linear layers self.act = nn.GELU() self.pwconv2 = nn.Linear(4 * dim, dim) # gammaçš„ä½œç”¨æ˜¯ç”¨äºåšlayer scaleè®­ç»ƒç­–ç•¥ self.gamma = nn.Parameter(layer_scale_init_value * torch.ones((dim)), requires_grad=True) if layer_scale_init_value \u003e 0 else None # drop_pathæ˜¯ç”¨äºstoch. depthè®­ç»ƒç­–ç•¥ self.drop_path = DropPath(drop_path) if drop_path \u003e 0. else nn.Identity() def forward(self, x): input = x x = self.dwconv(x) # ç”±äºç”¨FCæ¥åš1x1convï¼Œæ‰€ä»¥éœ€è¦è°ƒæ¢é€šé“é¡ºåº x = x.permute(0, 2, 3, 1) # (N, C, H, W) -\u003e (N, H, W, C) x = self.norm(x) x = self.pwconv1(x) x = self.act(x) x = self.pwconv2(x) if self.gamma is not None: x = self.gamma * x x = x.permute(0, 3, 1, 2) # (N, H, W, C) -\u003e (N, C, H, W) x = input + self.drop_path(x) return x ç”¨GELUä»£æ›¿RELU (80.6%ä¸å˜) å’ŒSwin-Tä¸€æ ·åªç”¨ä¸€ä¸ªGELU (80.6%â€”\u003e81.3%) åªç•™ä¸‹ä¸€ä¸ªBNå±‚ï¼ˆæ¯”Swin-Tè¿˜å°‘ï¼šåœ¨Blockå¼€å§‹æ·»åŠ ä¸€ä¸ªé¢å¤–çš„BNå±‚å¹¶ä¸èƒ½æé«˜æ€§èƒ½ï¼‰(81.3%â€”\u003e81.4%) ç”¨LNä»£æ›¿BN (81.4%â€”\u003e81.5%) ç›´æ¥åœ¨ResNetåŸºç¡€ä¸Šæ›¿æ¢æˆLNï¼Œæ•ˆæœå¹¶ä¸å¥½ã€‚ å•ç‹¬çš„ä¸‹é‡‡æ ·å±‚ (81.5%â€”\u003e82%) ResNetï¼šstride=2çš„$3\\times3$å·ç§¯ï¼Œæœ‰æ®‹å·®ç»“æ„çš„blockåˆ™åœ¨çŸ­è·¯è¿æ¥ä¸­ä½¿ç”¨stride=2çš„$1\\times1$å·ç§¯ Swin-Tï¼šå•ç‹¬é‡‡æ ·å±‚ ConvNeXt ï¼šstride=2çš„$2\\times2$å·ç§¯ #https://github.com/facebookresearch/ConvNeXt/blob/e4e7eb2fbd22d58feae617a8c989408824aa9eda/models/convnext.py#L72 self.downsample_layers = nn.ModuleList() # stem and 3 intermediate downsampling conv layers stem = nn.Sequential( nn.Conv2d(in_chans, dims[0], kernel_size=4, stride=4), LayerNorm(dims[0], eps=1e-6, data_format=\"channels_first\") ) self.downsample_layers.append(stem) for i in range(3): downsample_layer = nn.Sequential( LayerNorm(dims[i], eps=1e-6, data_format=\"channels_first\"), nn.Conv2d(dims[i], dims[i+1], kernel_size=2, stride=2), ) self.downsample_layers.append(downsample_layer) ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/convnext-/:2:6","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ConvNeXt","uri":"/posts/deeplearning/image-classification/convnext-/"},{"categories":["Deep Learning"],"content":"Empirical Evaluations on ImageNet ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/convnext-/:3:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ConvNeXt","uri":"/posts/deeplearning/image-classification/convnext-/"},{"categories":["Deep Learning"],"content":"ConvNeXt å˜ä½“é…ç½® ConvNeXt ç³»åˆ— C_channels B_stage_blocks IN-1K top-1 acc_input_224 ConvNeXt-T (96,192,384,768) (3,3,9,3) 82.1 ConvNeXt-S (96,192,384,768) (3,3,27,3) 83.1 ConvNeXt-B (128,256,512,1024) (3,3,27,3) 83.8 ConvNeXt-L (192,384,768,1536) (3,3,27,3) 84.3 ConvNeXt-XL (256,512,1024,2048) (3,3,27,3) IN-22K pre-trained-87.0 ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/convnext-/:3:1","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ConvNeXt","uri":"/posts/deeplearning/image-classification/convnext-/"},{"categories":["Deep Learning"],"content":"Training Techniques ImageNet-1K (Pre)-training config ResNet50(standard) ResNet50(timm) ResNet50(torchvision) ConvNeXt-T optimizer SGD LAMB SGD AdamW base learning rate 0.1 5e-3 0.5 4e-3 weight decay 1e-4 0.01 2e-5 0.05 optimizer momentum 0.9 - 0.9 $\\beta_1,\\beta_2=0.9,0.999$ batch size $8\\times32=256$ $4\\times512=2048$ $8\\times128=1024$ $4\\times8\\times128=4096$ training epochs 90 600 600 300 learning rate schedule StepLR (step=30,gamma=0.1) cosine decay cosine decay cosine decay warmup epochs - 5 5 20 warmup schedule - linear linear linear The effective batch size = --nodes * --ngpus * --batch_size * --update_freq. In the example above, the effective batch size is 4*8*128*1 = 4096 æ•°æ®å¢å¼º (Pre)-training config ResNet50(standard) ResNet50(timm) ResNet50(torchvision) ConvNeXt-T Mixup - 0.2 0.2 0.8 Cutmix - 1.0 1.0 1.0 RandAugment - (7,0.5) auto_augment=â€˜ta_wideâ€™ (9,0.5) æ­£åˆ™åŒ– (Pre)-training config ResNet50(standard) ResNet50(timm) ResNet50(torchvision) ConvNeXt-T Stochastic Depth - 0.05 - 0.1 Label Smoothing - 0.1 0.1 0.1 Layer Scale - - - 1e-6 EMA - - 0.99998 0.9999 Top-1 acc (Pre)-training config ResNet50(standard) ResNet50(timm) ResNet50(torchvision) ConvNeXt-T Top-1 acc 75.3 80.4 80.674 82.1 ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/convnext-/:3:2","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ConvNeXt","uri":"/posts/deeplearning/image-classification/convnext-/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» ConvNeXtï¼šæ‰‹æŠŠæ‰‹æ•™ä½ æ”¹æ¨¡å‹ ResNet strikes back: An improved training procedure in timm How to Train State-Of-The-Art Models Using TorchVisionâ€™s Latest Primitives ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/convnext-/:4:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ConvNeXt","uri":"/posts/deeplearning/image-classification/convnext-/"},{"categories":["Deep Learning"],"content":"EfficientNet","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/efficientnet/","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"EfficientNet","uri":"/posts/deeplearning/image-classification/efficientnet/"},{"categories":["Deep Learning"],"content":"EfficientNet æ–‡ç« æ ‡é¢˜ï¼šEfficientNet: Rethinking Model Scaling for Convolutional Neural Networks ä½œè€…ï¼šMingxing Tan, Quoc V. Le å‘è¡¨æ—¶é—´ï¼š(ICML 2019) Official Code EfficientNet PyTorch EfficientNet æ˜¯ä¸€ç»„é’ˆå¯¹FLOPså’Œå‚æ•°æ•ˆç‡è¿›è¡Œä¼˜åŒ–çš„æ¨¡å‹ã€‚å®ƒåˆ©ç”¨NASæœç´¢åŸºçº¿EfficientNet-B0ï¼Œå®ƒåœ¨å‡†ç¡®æ€§å’ŒFLOPsæ–¹é¢æœ‰æ›´å¥½çš„æƒè¡¡ã€‚ç„¶åä½¿ç”¨å¤åˆç¼©æ”¾ç­–ç•¥å¯¹åŸºçº¿æ¨¡å‹è¿›è¡Œç¼©æ”¾ï¼Œä»¥è·å¾—ä¸€ç³»åˆ—æ¨¡å‹B1-B7ã€‚ Model_Scaling Scaling Up EfficientNet-B0 with Different Methods å¢åŠ ç½‘ç»œçš„æ·±åº¦depthèƒ½å¤Ÿå¾—åˆ°æ›´åŠ ä¸°å¯Œã€å¤æ‚çš„ç‰¹å¾å¹¶ä¸”èƒ½å¤Ÿå¾ˆå¥½çš„åº”ç”¨åˆ°å…¶å®ƒä»»åŠ¡ä¸­ã€‚ä½†ç½‘ç»œçš„æ·±åº¦è¿‡æ·±ä¼šé¢ä¸´æ¢¯åº¦æ¶ˆå¤±ï¼Œè®­ç»ƒå›°éš¾çš„é—®é¢˜ã€‚(ResNet) å¢åŠ ç½‘ç»œçš„widthèƒ½å¤Ÿè·å¾—æ›´é«˜ç»†ç²’åº¦çš„ç‰¹å¾å¹¶ä¸”ä¹Ÿæ›´å®¹æ˜“è®­ç»ƒï¼Œä½†å¯¹äºwidthå¾ˆå¤§è€Œæ·±åº¦è¾ƒæµ…çš„ç½‘ç»œå¾€å¾€å¾ˆéš¾å­¦ä¹ åˆ°æ›´æ·±å±‚æ¬¡çš„ç‰¹å¾ã€‚(Inception) å¢åŠ è¾“å…¥ç½‘ç»œçš„å›¾åƒåˆ†è¾¨ç‡èƒ½å¤Ÿæ½œåœ¨å¾—è·å¾—æ›´é«˜ç»†ç²’åº¦çš„ç‰¹å¾æ¨¡æ¿ï¼Œä½†å¯¹äºéå¸¸é«˜çš„è¾“å…¥åˆ†è¾¨ç‡ï¼Œå‡†ç¡®ç‡çš„å¢ç›Šä¹Ÿä¼šå‡å°ï¼Œå¹¶ä¸”å¤§åˆ†è¾¨ç‡å›¾åƒä¼šå¢åŠ è®¡ç®—é‡ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/efficientnet/:1:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"EfficientNet","uri":"/posts/deeplearning/image-classification/efficientnet/"},{"categories":["Deep Learning"],"content":"Scaling Dimensions Scaling Up a Baseline Model with Different Network Width (w), Depth (d), and Resolution (r) Coefficient æ‰©å¤§ç½‘ç»œä¸­æ·±åº¦ã€å®½åº¦æˆ–è€…åˆ†è¾¨ç‡çš„ä»»ä¸€ç»´åº¦èƒ½æé«˜æ¨¡å‹çš„å‡†ç¡®ç‡ï¼Œä½†éšç€æ¨¡å‹çš„æ‰©å¤§ï¼Œè¿™ç§å‡†ç¡®ç‡çš„å¢ç›Šæ•ˆæœä¼šé€æ­¥æ¶ˆå¤±ï¼› Scaling up any dimension of network width, depth, or resolution improves accuracy, but the accuracy gain diminishes for bigger models. Scaling Network Width for Different Baseline Networks $(d=1.0,r=1.0)$ï¼š18ä¸ªå·ç§¯å±‚ï¼Œåˆ†è¾¨ç‡ä¸º$224\\times224$ $(d=2.0,r=1.3)$ï¼š36ä¸ªå·ç§¯å±‚ï¼Œåˆ†è¾¨ç‡ä¸º$299\\times299$ ä¸ºäº†æ›´å¥½çš„å‡†ç¡®ç‡å’Œæ•ˆç‡ï¼Œå¾ˆæœ‰å¿…è¦å»å¹³è¡¡æå‡ç½‘ç»œä¸­æ·±åº¦ã€å®½åº¦å’Œåˆ†è¾¨ç‡çš„æ‰€æœ‰ç»´åº¦ã€‚ In order to pursue better accuracy and efficiency, it is critical to balance all dimensions of network width, depth, and resolution during ConvNet scaling. ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/efficientnet/:2:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"EfficientNet","uri":"/posts/deeplearning/image-classification/efficientnet/"},{"categories":["Deep Learning"],"content":"Problem Formulation $N = \\bigodot_{i=1â€¦s} F_i^{L_i}(X_{\u003cH_i,W_i,C_i\u003e})$ $ \\bigodot_{i=1â€¦s}$ï¼šè¿ä¹˜è¿ç®— $F_i$è¡¨ç¤ºä¸€ä¸ªè¿ç®—æ“ä½œï¼›$F_i^{L_i}$è¡¨ç¤ºåœ¨ç¬¬iä¸ªstageä¸­$F_i$è¿ç®—è¢«é‡å¤æ‰§è¡Œäº†$L_i$æ¬¡ $X$è¡¨ç¤ºç¬¬iä¸ªstageçš„ç‰¹å¾çŸ©é˜µï¼ˆè¾“å…¥å¼ é‡ï¼‰ $\u003cH_i,W_i,C_i\u003e$è¡¨ç¤º$X$çš„é«˜å®½å’Œé€šé“æ•° $max_{d,w,r} \\ \\ Accuracy(N(d,w,r))$ å…¶ä¸­ $N(d,w,r)=\\bigodot_{i=1â€¦s} \\hat F_i^{\\hat L_i}(X_{\u003cr\\dot {\\hat H_i},r\\dot {\\hat W_i},w\\dot {\\hat C_i}\u003e})$ $Memory(N)\\leq target_memory$ $ FLOPS(N)\\leq target_flops$ $d$ç”¨æ¥ç¼©æ”¾æ·±åº¦$\\hat {L_i}$ $r$ç”¨æ¥ç¼©æ”¾åˆ†è¾¨ç‡å³å½±å“$\\hat{H_i},\\hat{W_i}$ $w$ç”¨æ¥ç¼©æ”¾ç‰¹å¾çŸ©é˜µçš„é€šé“æ•°$\\hat{C_i}$ $$ depth:d=\\alpha^\\phi\\\\ width:w=\\beta^\\phi\\\\ resolution:r=\\gamma^\\phi\\\\ s.t. \\ \\alpha \\cdot \\beta^2\\cdot\\gamma^2 \\approx2\\\\ \\alpha\\geq1,\\beta\\geq1,\\gamma\\geq1 $$ FLOPsï¼ˆç†è®ºè®¡ç®—é‡ï¼‰ä¸depthçš„å…³ç³»ï¼šå½“depthç¿»å€ï¼ŒFLOPsä¹Ÿç¿»å€ã€‚ FLOPsä¸widthçš„å…³ç³»ï¼šå½“widthç¿»å€ï¼ˆå³channalç¿»å€ï¼‰ï¼ŒFLOPsä¼šç¿»4å€ å½“widthç¿»å€ï¼Œè¾“å…¥ç‰¹å¾çŸ©é˜µçš„channelså’Œè¾“å‡ºç‰¹å¾çŸ©é˜µçš„channelsæˆ–å·ç§¯æ ¸çš„ä¸ªæ•°éƒ½ä¼šç¿»å€ï¼Œæ‰€ä»¥FLOPsä¼šç¿»4å€ FLOPsä¸resolutionçš„å…³ç³»ï¼šå½“resolutionç¿»å€ï¼ŒFLOPsä¼šç¿»4å€ æ€»çš„FLOPså€ç‡å¯ä»¥ç”¨è¿‘ä¼¼ç”¨$(\\alpha \\cdot \\beta^{2} \\cdot \\gamma^{2})^{\\phi}$è¡¨ç¤º ï¼š$\\beta^2ï¼šc_i,c_o;\\gamma^2:h,w$ å›ºå®š$\\phi=1$ï¼ŒåŸºäºä¸Šè¿°çº¦æŸæ¡ä»¶è¿›è¡Œæœç´¢ï¼ŒEfficientNet_B0çš„æœ€ä½³å‚æ•°ä¸º$\\alpha=1.2,\\beta=1.1.\\gamma=1.15$ã€‚ å›ºå®š$\\alpha=1.2,\\beta=1.1.\\gamma=1.15$ï¼Œåœ¨EfficientNetB-0çš„åŸºç¡€ä¸Šä½¿ç”¨ä¸åŒçš„$ \\phi$åˆ†åˆ«å¾—åˆ°EfficientNetB1-B7ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/efficientnet/:3:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"EfficientNet","uri":"/posts/deeplearning/image-classification/efficientnet/"},{"categories":["Deep Learning"],"content":"EfficientNet Architecture EfficientNet-B0 baseline network å…¶ä¸­å·ç§¯å±‚åé»˜è®¤éƒ½æœ‰BNä»¥åŠSwishæ¿€æ´»å‡½æ•° MBConv ç¬¬ä¸€ä¸ªå‡ç»´çš„$1\\times1$å·ç§¯å±‚ï¼Œå®ƒçš„å·ç§¯æ ¸ä¸ªæ•°æ˜¯è¾“å…¥ç‰¹å¾çŸ©é˜µchannelçš„nå€(è¿™é‡Œçš„nå¯¹åº”Operatoré‡Œçš„MBConvn) å½“n=1æ—¶ï¼Œä¸è¦ç¬¬ä¸€ä¸ªå‡ç»´çš„$1\\times1$å·ç§¯å±‚ï¼Œå³Stage2ä¸­çš„MBConvç»“æ„éƒ½æ²¡æœ‰ç¬¬ä¸€ä¸ªå‡ç»´çš„1x1å·ç§¯å±‚ï¼ˆè¿™å’ŒMobileNetV3ç½‘ç»œç±»ä¼¼ï¼‰ å…³äºshortcutè¿æ¥ï¼Œä»…å½“è¾“å…¥MBConvç»“æ„çš„ç‰¹å¾çŸ©é˜µä¸è¾“å‡ºçš„ç‰¹å¾çŸ©é˜µshapeç›¸åŒæ—¶æ‰å­˜åœ¨ æ³¨æ„ï¼šåœ¨æºç ä¸­åªæœ‰ä½¿ç”¨åˆ°shortcutçš„MBConvæ¨¡å—æ‰æœ‰Dropoutå±‚ï¼›Dropoutå±‚çš„drop_rateæ˜¯ä»0é€’å¢åˆ°0.2çš„ï¼Œæ˜¯Stochastic Depthï¼Œå³ä¼šéšæœºä¸¢æ‰æ•´ä¸ªblockçš„ä¸»åˆ†æ”¯ï¼ˆåªå‰©æ·å¾„åˆ†æ”¯ï¼Œç›¸å½“äºç›´æ¥è·³è¿‡äº†è¿™ä¸ªblockï¼‰ä¹Ÿå¯ä»¥ç†è§£ä¸ºå‡å°‘äº†ç½‘ç»œçš„æ·±åº¦ã€‚ SE ç”±ä¸€ä¸ªå…¨å±€å¹³å‡æ± åŒ–ï¼Œä¸¤ä¸ªå…¨è¿æ¥å±‚ç»„æˆã€‚ ç¬¬ä¸€ä¸ªå…¨è¿æ¥å±‚çš„èŠ‚ç‚¹ä¸ªæ•°æ˜¯è¾“å…¥è¯¥MBConvæ¨¡å—çš„ç‰¹å¾çŸ©é˜µchannelsçš„1/4(MobileNetV3æ˜¯feature mapçš„channelsçš„1/4)ï¼Œä¸”ä½¿ç”¨Swishæ¿€æ´»å‡½æ•°ã€‚ ç¬¬äºŒä¸ªå…¨è¿æ¥å±‚çš„èŠ‚ç‚¹ä¸ªæ•°ç­‰äºDepthwise Convå±‚è¾“å‡ºçš„ç‰¹å¾çŸ©é˜µchannelsï¼Œä¸”ä½¿ç”¨Sigmoidæ¿€æ´»å‡½æ•°ã€‚ model width_coefficient depth_coefficient resolution dropout_rate efficientnet-b0 1.0 1.0 224 0.2 efficientnet-b1 1.0 1.1 240 0.2 efficientnet-b2 1.1 1.2 260 0.3 efficientnet-b3 1.2 1.4 300 0.3 efficientnet-b4 1.4 1.8 380 0.4 efficientnet-b5 1.6 2.2 456 0.4 efficientnet-b6 1.8 2.6 528 0.5 efficientnet-b7 2.0 3.1 600 0.5 efficientnet-b8 2.2 3.6 672 0.5 efficientnet-12 4.3 5.3 800 0.5 width_coefficientä»£è¡¨channelç»´åº¦ä¸Šçš„å€ç‡å› å­ æ¯”å¦‚åœ¨ EfficientNetB0ä¸­Stage1çš„$3\\times3$å·ç§¯å±‚æ‰€ä½¿ç”¨çš„å·ç§¯æ ¸ä¸ªæ•°æ˜¯32ï¼Œé‚£ä¹ˆåœ¨B6ä¸­å°±æ˜¯$32 \\times 1.8=57.6$,æ¥ç€å–æ•´åˆ°ç¦»å®ƒæœ€è¿‘çš„8çš„æ•´æ•°å€å³56ï¼Œå…¶å®ƒStageåŒç†ã€‚ depth_coefficientä»£è¡¨depthç»´åº¦ä¸Šçš„å€ç‡å› å­ï¼ˆä»…é’ˆå¯¹Stage2åˆ°Stage8ï¼‰ æ¯”å¦‚åœ¨EfficientNetB0ä¸­Stage7çš„$ {\\widehat L}_i=4 $é‚£ä¹ˆåœ¨B6ä¸­å°±æ˜¯$4 \\times 2.6=10.4$ï¼Œæ¥ç€å‘ä¸Šå–æ•´å³11ã€‚ dropout_rateæ˜¯æœ€åä¸€ä¸ªå…¨è¿æ¥å±‚å‰çš„dropoutå±‚ï¼ˆåœ¨stage9çš„Poolingä¸FCä¹‹é—´ï¼‰çš„dropout_rateã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/efficientnet/:4:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"EfficientNet","uri":"/posts/deeplearning/image-classification/efficientnet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» EfficientNetç½‘ç»œè¯¦è§£ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/efficientnet/:5:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"EfficientNet","uri":"/posts/deeplearning/image-classification/efficientnet/"},{"categories":["Deep Learning"],"content":"EfficientNetV2 æ–‡ç« æ ‡é¢˜ï¼šEfficientNetV2: Smaller Models and Faster Training ä½œè€…ï¼šMingxing Tan, Quoc V. Le å‘è¡¨æ—¶é—´ï¼š(ICML 2021) Official Code PyTorch Image Models EfficientNetV1çš„è®­ç»ƒç“¶é¢ˆ å¤§å›¾åƒå°ºå¯¸å¯¼è‡´äº†å¤§é‡çš„å†…å­˜ä½¿ç”¨ï¼Œè®­ç»ƒé€Ÿåº¦éå¸¸æ…¢ã€‚ è§£å†³æ–¹æ³•ï¼šé™ä½è®­ç»ƒå›¾åƒçš„å°ºå¯¸ æ·±åº¦å·ç§¯åœ¨ç½‘ç»œæµ…å±‚ï¼ˆå‰æœŸï¼‰ä¸­é€Ÿåº¦ç¼“æ…¢ï¼Œä½†åœ¨åæœŸé˜¶æ®µæœ‰æ•ˆã€‚ï¼ˆæ— æ³•å……åˆ†åˆ©ç”¨ç°æœ‰çš„ä¸€äº›åŠ é€Ÿå™¨ï¼‰ è§£å†³æ–¹æ³•ï¼šå¼•å…¥Fused-MBConvç»“æ„ åŒç­‰çš„æ‰©å¤§æ¯ä¸ªstageæ˜¯æ¬¡ä¼˜çš„ã€‚åœ¨EfficientNetV1ä¸­ï¼Œæ¯ä¸ªstageçš„æ·±åº¦å’Œå®½åº¦éƒ½æ˜¯åŒç­‰æ”¾å¤§çš„ã€‚ä½†æ¯ä¸ªstageå¯¹ç½‘ç»œçš„è®­ç»ƒé€Ÿåº¦ä»¥åŠå‚æ•°æ•°é‡çš„è´¡çŒ®å¹¶ä¸ç›¸åŒ è§£å†³æ–¹æ³•ï¼šéå‡åŒ€çš„ç¼©æ”¾ç­–ç•¥æ¥ç¼©æ”¾æ¨¡å‹ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/efficientnet/:6:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"EfficientNet","uri":"/posts/deeplearning/image-classification/efficientnet/"},{"categories":["Deep Learning"],"content":"Fused-MBConv Structure of MBConv and Fused-MBConv. æºç æ²¡æœ‰ä½¿ç”¨SEæ¨¡å— Replacing MBConv with Fused-MBConv åªæ›¿æ¢stage1-3ï¼Œç”¨NASæœç´¢å‡ºæ¥çš„ç»“æœ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/efficientnet/:7:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"EfficientNet","uri":"/posts/deeplearning/image-classification/efficientnet/"},{"categories":["Deep Learning"],"content":"EfficientNetV2 Architecture EfficientNetV2_S ä¸EfficientNetV1çš„ä¸åŒç‚¹ é™¤äº†ä½¿ç”¨MBConvæ¨¡å—ï¼Œè¿˜ä½¿ç”¨Fused-MBConvæ¨¡å— ä¼šä½¿ç”¨è¾ƒå°çš„expansion ratio åå‘ä½¿ç”¨æ›´å°çš„kernel_size($3\\times3$) ç§»é™¤äº†EfficientNetV1ä¸­æœ€åä¸€ä¸ªæ­¥è·ä¸º1çš„stageï¼ˆV1ä¸­çš„stage8ï¼‰ #################### EfficientNet V2 configs #################### # rä»£è¡¨å½“å‰Stageä¸­Operatoré‡å¤å †å çš„æ¬¡æ•° # kä»£è¡¨kernel_size # sä»£è¡¨æ­¥è·stride # eä»£è¡¨expansion ratio # iä»£è¡¨input channels # oä»£è¡¨output channels # cä»£è¡¨conv_typeï¼Œ1ä»£è¡¨Fused-MBConvï¼Œ0ä»£è¡¨MBConvï¼ˆé»˜è®¤ä¸ºMBConvï¼‰ # seä»£è¡¨ä½¿ç”¨SEæ¨¡å—ï¼Œä»¥åŠse_ratio v2_base_block = [ # The baseline config for v2 models. 'r1_k3_s1_e1_i32_o16_c1', 'r2_k3_s2_e4_i16_o32_c1', 'r2_k3_s2_e4_i32_o48_c1', 'r3_k3_s2_e4_i48_o96_se0.25', 'r5_k3_s1_e6_i96_o112_se0.25', 'r8_k3_s2_e6_i112_o192_se0.25', ] v2_s_block = [ # about base * (width1.4, depth1.8) 'r2_k3_s1_e1_i24_o24_c1', 'r4_k3_s2_e4_i24_o48_c1', 'r4_k3_s2_e4_i48_o64_c1', 'r6_k3_s2_e4_i64_o128_se0.25', 'r9_k3_s1_e6_i128_o160_se0.25', 'r15_k3_s2_e6_i160_o256_se0.25', ] v2_m_block = [ # about base * (width1.6, depth2.2) 'r3_k3_s1_e1_i24_o24_c1', 'r5_k3_s2_e4_i24_o48_c1', 'r5_k3_s2_e4_i48_o80_c1', 'r7_k3_s2_e4_i80_o160_se0.25', 'r14_k3_s1_e6_i160_o176_se0.25', 'r18_k3_s2_e6_i176_o304_se0.25', 'r5_k3_s1_e6_i304_o512_se0.25', ] v2_l_block = [ # about base * (width2.0, depth3.1) 'r4_k3_s1_e1_i32_o32_c1', 'r7_k3_s2_e4_i32_o64_c1', 'r7_k3_s2_e4_i64_o96_c1', 'r10_k3_s2_e4_i96_o192_se0.25', 'r19_k3_s1_e6_i192_o224_se0.25', 'r25_k3_s2_e6_i224_o384_se0.25', 'r7_k3_s1_e6_i384_o640_se0.25', ] efficientnetv2_params = { # (block, width, depth, train_size, eval_size, dropout, randaug, mixup, aug) 'efficientnetv2-s': # 83.9% @ 22M (v2_s_block, 1.0, 1.0, 300, 384, 0.2, 10, 0, 'randaug'), 'efficientnetv2-m': # 85.2% @ 54M (v2_m_block, 1.0, 1.0, 384, 480, 0.3, 15, 0.2, 'randaug'), 'efficientnetv2-l': # 85.7% @ 120M (v2_l_block, 1.0, 1.0, 384, 480, 0.4, 20, 0.5, 'randaug'), } ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/efficientnet/:8:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"EfficientNet","uri":"/posts/deeplearning/image-classification/efficientnet/"},{"categories":["Deep Learning"],"content":"progressive learningæ¸è¿›å¼å­¦ä¹  åœ¨è®­ç»ƒæ—©æœŸï¼Œå…ˆå¯¹å›¾åƒå°ºå¯¸å°ä¸”æ­£åˆ™åŒ–ç¨‹åº¦è¾ƒå¼±çš„ç½‘ç»œè¿›è¡Œè®­ç»ƒ(å¦‚dropoutã€data augmentation)ï¼Œç„¶åé€æ¸å¢å¤§å›¾åƒå°ºå¯¸å¹¶åŠ å…¥æ›´å¼ºçš„æ­£åˆ™åŒ–ã€‚ å»ºç«‹åœ¨æ¸è¿›è°ƒæ•´å¤§å°çš„åŸºç¡€ä¸Šï¼Œä½†é€šè¿‡åŠ¨æ€ï¼ˆè‡ªé€‚åº”ï¼‰è°ƒæ•´æ­£åˆ™åŒ–ï¼ˆDropout, Rand Augment, Mixupï¼‰ EfficientNetV2_Algorithm_1. ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/efficientnet/:9:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"EfficientNet","uri":"/posts/deeplearning/image-classification/efficientnet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» EfficientNetV2ç½‘ç»œè¯¦è§£ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/efficientnet/:10:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"EfficientNet","uri":"/posts/deeplearning/image-classification/efficientnet/"},{"categories":["Deep Learning"],"content":"Inception","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"ç­–ç•¥ï¼šsplit-transform-merge ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:0:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"InceptionV1ï¼ˆGoogLeNetï¼‰ æ–‡ç« æ ‡é¢˜ï¼šGoing Deeper with Convolutions ä½œè€…ï¼šChristian Szegedyï¼ŒWei Liuï¼ŒYangqing Jiaï¼ŒPierre Sermanetï¼ŒScott Reedï¼ŒDragomir Anguelovï¼ŒDumitru Erhanï¼ŒVincent Vanhouckeï¼ŒAndrew Rabinovich å‘è¡¨æ—¶é—´ï¼š(CVPR 2015) GoogLeNetæ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œç»“æ„ï¼ŒåŠå…¶åç»­å˜ç§Inception-V1ã€Inception-V2-Inception-V3ã€Inception-V4ã€‚ ä½¿ç”¨Inceptionæ¨¡å—ï¼Œå¼•å…¥å¹¶è¡Œç»“æ„å’Œä¸åŒå°ºå¯¸çš„å·ç§¯æ ¸ï¼Œæå–ä¸åŒå°ºåº¦çš„ç‰¹å¾ï¼Œå°†ç¨€ç–çŸ©é˜µèšåˆä¸ºè¾ƒä¸ºå¯†é›†çš„å­çŸ©é˜µï¼Œå¤§å¤§æé«˜è®¡ç®—æ•ˆç‡ï¼Œé™ä½å‚æ•°æ•°é‡ã€‚åŠ å…¥è¾…åŠ©åˆ†ç±»å™¨ï¼Œå®ç°äº†æ¨¡å‹æ•´åˆã€åå‘ä¼ æ’­ä¿¡å·æ”¾å¤§ã€‚ GoogLeNetåœ¨ILSVRC-2014å›¾åƒåˆ†ç±»ç«èµ›ä¸­è·å¾—äº†top-5è¯¯å·®6.7%çš„å† å†›æˆç»©ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:1:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Introduction å¯å‘æ–‡çŒ® Network In Network $1\\times1$å·ç§¯é™ç»´-å‡ç»´ Global Average poolingå±‚å–ä»£å…¨è¿æ¥å±‚ Provable Bounds for Learning Some Deep Representations ç”¨ç¨€ç–ã€åˆ†æ•£çš„ç½‘ç»œå–ä»£ä»¥å‰åºå¤§å¯†é›†è‡ƒè‚¿çš„ç½‘ç»œ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:2:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Related work LeNetï¼ŒAlexNetï¼ŒZFNetï¼ŒNiNï¼Œoverfeat ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:3:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Motivation and High Level Considerations æé«˜æ¨¡å‹æ€§èƒ½çš„ä¼ ç»Ÿæ–¹æ³•ï¼š å¢åŠ æ·±åº¦ï¼ˆå±‚æ•°ï¼‰ å¢åŠ å®½åº¦ï¼ˆå·ç§¯æ ¸ä¸ªæ•°ï¼‰é€‚ç”¨äºå¤§è§„æ¨¡æ ‡æ³¨å¥½çš„æ•°æ®é›† äº§ç”Ÿçš„é—®é¢˜ï¼š æ ‡æ³¨æˆæœ¬é«˜ è®¡ç®—æ•ˆç‡é—®é¢˜ ä¸¤ä¸ªç›¸è¿å·ç§¯å±‚,ä¸¤å±‚åŒæ­¥å¢åŠ å·ç§¯æ ¸ä¸ªæ•°ï¼Œè®¡ç®—é‡å°†å¹³æ–¹å¢åŠ  å¦‚æœå¾ˆå¤šæƒé‡è®­ç»ƒåæ¥è¿‘0ï¼Œè¿™éƒ¨åˆ†è®¡ç®—å°±è¢«æµªè´¹æ‰äº† ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:4:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"GoogLeNet åŸå§‹Inceptionæ¨¡å—é€šé“æ•°è¶Šæ¥è¶Šå¤šï¼Œè®¡ç®—é‡çˆ†ç‚¸ã€‚ åŸå§‹Inception æ¯ä¸ª Inception ç»“æ„æœ‰ 4 ä¸ªåˆ†æ”¯ï¼Œä¸»è¦åŒ…å« 1x1, 3x3, 5x5 å·ç§¯æ ¸å’Œ max pooling æ“ä½œçš„æ­¥é•¿ä¸º1ï¼Œä»¥ä¿æŒè¾“å‡ºç‰¹å¾å±‚çš„å°ºå¯¸ä¸å·ç§¯æ ¸è¾“å‡ºå°ºå¯¸ä¸€è‡´ã€‚1x1 å·ç§¯æ ¸çš„ä½œç”¨æ˜¯é™ç»´ï¼Œä»¥é¿å… cancatenation æ“ä½œå¯¼è‡´ç‰¹å¾å±‚è¿‡æ·±ï¼Œå¹¶å‡å°‘ç½‘ç»œå‚æ•°. ä¼˜åŒ–Inception å¤ªè¿‡å¯†é›†å‹ç¼©çš„åµŒå…¥å‘é‡ä¸ä¾¿äºæ¨¡å‹å¤„ç†ï¼›åªåœ¨$3\\times3$ã€$5\\times5$å·ç§¯å±‚ä¹‹å‰ç”¨$1\\times1$é™ç»´ã€‚ GoogLeNet #$3\\times3$reduceï¼š$3\\times3$å·ç§¯ä¹‹å‰çš„$1\\times1$å·ç§¯ï¼Œå…¶ä»–reduceåŒç† pool projï¼šæ± åŒ–åçš„$1\\times1$å·ç§¯ æ‰€æœ‰å·ç§¯ä½¿ç”¨reluæ¿€æ´»å‡½æ•° GAPï¼šå…¨å±€å¹³å‡æ± åŒ– ä¸€ä¸ªchannelç”¨ä¸€ä¸ªå¹³å‡å€¼ä»£è¡¨å–ä»£å…¨è¿æ¥å±‚ï¼Œå‡å°‘å‚æ•°é‡ã€‚ ä¾¿äºfine-tuneè¿ç§»å­¦ä¹  æå‡äº†0.6%çš„TOP1å‡†ç¡®ç‡ åŸå§‹è¾“å…¥å›¾åƒä¸º224x224x3ï¼Œä¸”éƒ½è¿›è¡Œäº†é›¶å‡å€¼åŒ–çš„é¢„å¤„ç†æ“ä½œï¼ˆå›¾åƒæ¯ä¸ªåƒç´ å‡å»å‡å€¼ï¼‰ã€‚ Stem Network:Conv-Pool-2x Conv-Poolï¼ˆåº•å±‚å…ˆç”¨æ™®é€šå·ç§¯å±‚ï¼Œåé¢ç”¨9ä¸ªInceptionæ¨¡å—å åŠ ï¼‰ Classifier output(removed expensive FC layers!) Auxiliary classification outputs to inject additional gradient at lower layers (AvgPool-1x1Conv-FC-FC-Softmax) åœ¨4aå’Œ4dåé¢åŠ è¾…åŠ©åˆ†ç±»å±‚ æ”¹å–„æ¢¯åº¦æ¶ˆå¤± æ­£åˆ™åŒ– è®©æµ…å±‚ä¹Ÿèƒ½å­¦ä¹ åˆ°åŒºåˆ†ç‰¹å¾ å…¶å®æ²¡å¤ªå¤§ç”¨å¤„ï¼Œåœ¨v2/v3ç‰ˆæœ¬å»æ‰ è®­ç»ƒæ—¶æŸå¤±å‡½æ•°ï¼š$L=L_{æœ€å}+0.3\\times L_{è¾…1}+0.3\\times L_{è¾…2}$ æµ‹è¯•é˜¶æ®µï¼šå»æ‰è¾…åŠ©åˆ†ç±»å™¨ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:5:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Training Methodlogy æ•°æ®å¹¶è¡Œï¼šä¸€ä¸ªbatchå‡åˆ†kä»½ï¼Œè®©ä¸åŒèŠ‚ç‚¹å‰å‘å’Œåå‘ä¼ æ’­ï¼Œå†ç”±ä¸­å¤®param severä¼˜åŒ–æ›´æ–°æƒé‡ asynchronous stochastic gradient descentï¼šå¼‚æ­¥éšæœºæ¢¯åº¦ä¸‹é™ å›¾åƒå¢å¼º è£å‰ªä¸ºåŸå›¾8%-100%ä¹‹é—´ï¼Œå®½é«˜æ¯”3/4å’Œ4/3ä¹‹é—´ï¼› ç­‰æ¦‚ç‡ä½¿ç”¨ä¸åŒæ’å€¼æ–¹æ³•ï¼ˆåŒçº¿æ€§ï¼ŒåŒºåŸŸï¼Œæœ€è¿‘é‚»ï¼Œä¸‰æ¬¡å‡½æ•°ï¼‰ è£å‰ªï¼š å°†åŸå›¾ç¼©æ”¾ä¸ºçŸ­è¾¹é•¿åº¦256ï¼Œ288ï¼Œ320ï¼Œ352çš„å››ä¸ªå°ºåº¦ æ¯ä¸ªå°ºåº¦è£å‰ªå‡ºå·¦ä¸­å³ï¼ˆæˆ–ä¸Šä¸­ä¸‹ï¼‰ä¸‰å¼ å°å›¾ æ¯å¼ å°å›¾å–å››ä¸ªè§’å’Œä¸­å¤®çš„äº”å¼ $224\\times224$çš„patchä»¥åŠæ¯å¼ å°å›¾ç¼©æ”¾ä¸º$224\\times224$ï¼Œå…±6ä¸ªpatchåŒæ—¶å–é•œåƒ $4\\times3\\times6\\times2=144$ä¸ªpatch ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:6:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» ILSVRC2014ç«èµ›æ±‡æŠ¥ åšå®¢ HebbianåŸåˆ™ç†è§£ 1ã€ç½‘ç»œæ›´å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œå½“æ•°æ®é›†ä¸å…¨çš„æ—¶å€™ï¼Œè¿‡æ‹Ÿåˆæ›´å®¹æ˜“å‘ç”Ÿï¼Œäºæ˜¯æˆ‘ä»¬éœ€è¦ä¸ºç½‘ç»œfeedå¤§é‡çš„æ•°æ®ï¼Œä½†æ˜¯åˆ¶ä½œæ ·æœ¬é›†æœ¬èº«å°±æ˜¯ä¸€ä»¶å¤æ‚çš„äº‹æƒ…ã€‚ 2ã€å¤§é‡éœ€è¦æ›´æ–°çš„å‚æ•°å°±ä¼šå¯¼è‡´éœ€è¦å¤§é‡çš„è®¡ç®—èµ„æºï¼Œè€Œå½“ä¸‹å³ä½¿ç¡¬ä»¶å¿«é€Ÿå‘å±•ï¼Œè¿™æ ·åºå¤§çš„è®¡ç®—ä¹Ÿæ˜¯å¾ˆæ˜‚è´µçš„ è§£å†³ä»¥ä¸Šé—®é¢˜çš„æ ¹æœ¬æ–¹æ³•å°±æ˜¯æŠŠå…¨è¿æ¥çš„ç½‘ç»œå˜ä¸ºç¨€ç–è¿æ¥ï¼ˆå·ç§¯å±‚å…¶å®å°±æ˜¯ä¸€ä¸ªç¨€ç–è¿æ¥ï¼‰ï¼Œå½“æŸä¸ªæ•°æ®é›†çš„åˆ†å¸ƒå¯ä»¥ç”¨ä¸€ä¸ªç¨€ç–ç½‘ç»œè¡¨è¾¾çš„æ—¶å€™å°±å¯ä»¥é€šè¿‡åˆ†ææŸäº›æ¿€æ´»å€¼çš„ç›¸å…³æ€§ï¼Œå°†ç›¸å…³åº¦é«˜çš„ç¥ç»å…ƒèšåˆï¼Œæ¥è·å¾—ä¸€ä¸ªç¨€ç–çš„è¡¨ç¤ºã€‚ è¿™ç§æ–¹æ³•ä¹Ÿå‘¼åº”äº†Hebbian principleï¼Œä¸€ä¸ªå¾ˆé€šä¿—çš„ç°è±¡ï¼Œå…ˆæ‘‡é“ƒé“›ï¼Œä¹‹åç»™ä¸€åªç‹—å–‚é£Ÿï¼Œä¹…è€Œä¹…ä¹‹ï¼Œç‹—å¬åˆ°é“ƒé“›å°±ä¼šå£æ°´è¿è¿ã€‚è¿™ä¹Ÿå°±æ˜¯ç‹—çš„â€œå¬åˆ°â€é“ƒé“›çš„ç¥ç»å…ƒä¸â€œæ§åˆ¶â€æµå£æ°´çš„ç¥ç»å…ƒä¹‹é—´çš„é“¾æ¥è¢«åŠ å¼ºäº†ï¼Œè€ŒHebbian principleçš„ç²¾ç¡®è¡¨è¾¾å°±æ˜¯å¦‚æœä¸¤ä¸ªç¥ç»å…ƒå¸¸å¸¸åŒæ—¶äº§ç”ŸåŠ¨ä½œç”µä½ï¼Œæˆ–è€…è¯´åŒæ—¶æ¿€åŠ¨ï¼ˆfireï¼‰ï¼Œè¿™ä¸¤ä¸ªç¥ç»å…ƒä¹‹é—´çš„è¿æ¥å°±ä¼šå˜å¼ºï¼Œåä¹‹åˆ™å˜å¼±ï¼ˆneurons that fire together, wire togetherï¼‰ å¯è§†åŒ–GoogLeNet ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:7:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"InceptionV2ï¼ˆBN-Inceptionï¼‰ æ–‡ç« æ ‡é¢˜ï¼šBatch Normalization: Accelerating Deep Network Training by Reducing Internal Covariate Shift ä½œè€…ï¼šSergey Ioffe, Christian Szegedy å‘è¡¨æ—¶é—´ï¼š(ICML 2015) ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:8:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Abstract è®­ç»ƒæ…¢å’Œå›°éš¾ï¼šinternal covariate shift (ICS) ä½å­¦ä¹ ç‡ï¼›å‚æ•°åˆå§‹åŒ– Batch Normalization åŠ å¿«æ¨¡å‹è®­ç»ƒé€Ÿåº¦ï¼›åŠ é€Ÿæ”¶æ•› å¯ä»¥ä½¿ç”¨æ›´é«˜çš„å­¦ä¹ ç‡ï¼›å‚æ•°åˆå§‹åŒ– å’Œå½“å‰æœ€å¥½çš„åˆ†ç±»ç½‘ç»œç›¸æ¯”è®­ç»ƒæ­¥éª¤é™ä½14å€ å…·æœ‰ä¸€å®šæ­£åˆ™åŒ–ä½œç”¨ åœ¨æŸäº›æƒ…å†µï¼Œå‡å°‘Dropoutçš„ä½¿ç”¨ ä½¿æ¨¡å‹æ•ˆæœæ›´å¥½ï¼ˆå¹¶ä¸æ˜¯æ‰€æœ‰æ¨¡å‹ç”¨äº†BN å°±ä¼šæ›´å¥½ï¼‰ top-5ï¼š4.9%ï¼› test errorï¼š4.8% è¶…è¿‡äº†äººå·¥è¯„åˆ†çš„å‡†ç¡®æ€§ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:9:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Introduction ä½¿ç”¨mini-batch å°æ‰¹é‡çš„æŸå¤±æ¢¯åº¦æ˜¯å¯¹è®­ç»ƒé›†ä¸Šæ¢¯åº¦çš„ä¼°è®¡ï¼Œå…¶è´¨é‡éšç€æ‰¹é‡å¤§å°çš„å¢åŠ è€Œæé«˜ã€‚ ç°ä»£è®¡ç®—å¹³å°æä¾›çš„å¹¶è¡Œæ€§ï¼Œæ‰¹å¤„ç†çš„è®¡ç®—æ¯”å•ä¸ªç¤ºä¾‹çš„mæ¬¡è®¡ç®—æ•ˆç‡è¦é«˜å¾—å¤šã€‚ internal covariate shiftï¼šåœ¨æ·±åº¦å­¦ä¹ ç½‘ç»œçš„è®­ç»ƒè¿‡ç¨‹ä¸­ç½‘ç»œå†…éƒ¨ç»“ç‚¹çš„åˆ†å¸ƒå˜åŒ–ç§°ä¸ºå†…éƒ¨åå˜é‡åç§» æ¯ä¸€å±‚æ•°æ®çš„å¾®å°å˜åŒ–éƒ½ä¼šéšç€ç½‘ç»œä¸€å±‚ä¸€å±‚çš„ä¼ é€’è€Œè¢«é€æ¸æ”¾å¤§ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:10:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Normalization via Mini-Batch Statistics ç™½åŒ–ï¼ˆWhiteningï¼‰:å¯¹è¾“å…¥æ•°æ®åˆ†å¸ƒè¿›è¡Œå˜æ¢ ä½¿å¾—è¾“å…¥ç‰¹å¾åˆ†å¸ƒå…·æœ‰ç›¸åŒçš„å‡å€¼ä¸æ–¹å·®ã€‚å…¶ä¸­PCAç™½åŒ–ä¿è¯äº†æ‰€æœ‰ç‰¹å¾åˆ†å¸ƒå‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1ï¼›è€ŒZCAç™½åŒ–åˆ™ä¿è¯äº†æ‰€æœ‰ç‰¹å¾åˆ†å¸ƒå‡å€¼ä¸º0ï¼Œæ–¹å·®ç›¸åŒï¼› å»é™¤ç‰¹å¾ä¹‹é—´çš„ç›¸å…³æ€§ã€‚ ç™½åŒ–è¿‡ç¨‹è®¡ç®—æˆæœ¬å¤ªé«˜ ç™½åŒ–è¿‡ç¨‹ç”±äºæ”¹å˜äº†ç½‘ç»œæ¯ä¸€å±‚çš„åˆ†å¸ƒï¼Œå› è€Œæ”¹å˜äº†ç½‘ç»œå±‚ä¸­æœ¬èº«æ•°æ®çš„è¡¨è¾¾èƒ½åŠ› Batch Normalizationï¼šç®€åŒ–ç™½åŒ– å•ç‹¬å¯¹æ¯ä¸ªç‰¹å¾æ ‡å‡†åŒ–å‚æ•°ï¼Œä½¿å…¶å…·æœ‰é›¶å‡å€¼å’Œå•ä½æ–¹å·®ã€‚ å¼•å…¥äº†ä¸¤ä¸ªå¯å­¦ä¹ çš„å‚æ•°$\\gamma$ä¸$\\beta$ï¼Œè¿™ä¸¤ä¸ªå‚æ•°çš„å¼•å…¥æ˜¯ä¸ºäº†æ¢å¤æ•°æ®æœ¬èº«çš„è¡¨è¾¾èƒ½åŠ›ï¼Œå¯¹è§„èŒƒåŒ–åçš„æ•°æ®è¿›è¡Œçº¿æ€§å˜æ¢ã€‚ å¯¹å…¨è¿æ¥å±‚ï¼Œä½œç”¨åœ¨ç‰¹å¾ç»´ å¯¹å·ç§¯å±‚ï¼Œä½œç”¨åœ¨é€šé“ç»´ å¦‚æœbatch sizeä¸º$m$ï¼Œåˆ™åœ¨å‰å‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œç½‘ç»œä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰$m$ä¸ªè¾“å‡ºï¼ŒBatch Normalizationå°±æ˜¯å¯¹è¯¥å±‚æ¯ä¸ªèŠ‚ç‚¹çš„è¿™$m$ä¸ªè¾“å‡ºè¿›è¡Œå½’ä¸€åŒ–å†è¾“å‡ºï¼Œå…·ä½“è®¡ç®—æ–¹å¼å¦‚ä¸‹ï¼š BN Standardizationï¼šé¦–å…ˆå¯¹$m$ä¸ª$x$è¿›è¡Œ Standardizationï¼Œå¾—åˆ° zero mean unit varianceçš„åˆ†å¸ƒ$\\hat x$ã€‚ scale and shiftï¼šç„¶åå†$ \\hat x$å¯¹è¿›è¡Œscale and shiftï¼Œç¼©æ”¾å¹¶å¹³ç§»åˆ°æ–°çš„åˆ†å¸ƒ$y$ï¼Œå…·æœ‰æ–°çš„å‡å€¼$\\beta$æ–¹å·®$\\gamma$ã€‚ $$ y_i^{(b)}=BN_{(x_i)^{(b)}}=\\gamma \\cdot (\\frac{x_i^{(b)}-\\mu(x_i)}{\\sqrt {\\sigma(x_i)^2+\\epsilon}})+\\beta $$ $\\mu$å’Œ$\\sigma$ä¸ºè¯¥è¡Œçš„å‡å€¼å’Œæ ‡å‡†å·®ï¼Œ$\\epsilon$ä¸ºé˜²æ­¢é™¤é›¶å¼•å…¥çš„æå°é‡ï¼ˆå¯å¿½ç•¥ï¼‰ $\\gamma$å’Œ$\\beta$ä¸ºscaleå’Œshiftå‚æ•°,ä»¥æé«˜è¡¨ç°åŠ› BNåå‘ä¼ æ’­ BNåå‘ä¼ æ’­ Understanding the backward pass through Batch Normalization Layer è®­ç»ƒé˜¶æ®µè®¡ç®—çš„æ˜¯æ¯ä¸€ä¸ªbatchçš„å‡å€¼å’Œæ–¹å·®ï¼Œä½†æ˜¯æµ‹è¯•æ—¶ç”¨çš„æ˜¯è®­ç»ƒåçš„ï¼ˆæŒ‡æ•°åŠ æƒå¹³å‡ï¼‰çš„å‡å€¼å’Œæ–¹å·®ï¼ˆå´æ©è¾¾ï¼‰ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:11:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Inception V2 Architecture InceptionV2 ç½‘ç»œç»“æ„å›¾ ä¸Inception V1å¯¹æ¯” Inception V1çš„$5\\times 5$å·ç§¯è¢«æ›¿æ¢æˆä¸¤ä¸ª$3\\times 3$ ä½¿ç½‘ç»œçš„æœ€å¤§æ·±åº¦å¢åŠ 9å±‚ã€‚å¢åŠ äº†25%çš„å‚æ•°ï¼Œè®¡ç®—æˆæœ¬å¢åŠ äº†çº¦30%ã€‚ Inception(3X)ï¼ˆç‰¹å¾å›¾ä¸º$28\\times28$ï¼‰æ¨¡å—ä»2ä¸ªå˜æˆ3ä¸ªã€‚ï¼ˆInception3a,bâ€”â€”\u003eInception3a,b,cï¼‰ æ¨¡å—å†…éƒ¨æœ‰æ—¶ä½¿ç”¨å¹³å‡æ± åŒ–ï¼Œæœ‰æ—¶ä½¿ç”¨æœ€å¤§æ± åŒ– æ¨¡å—3c, 4eçš„è¿‡æ»¤å™¨è¿æ¥ä¹‹å‰ä½¿ç”¨äº†stride-2å·ç§¯/æ± åŒ–å±‚ã€‚ åœ¨ç¬¬ä¸€å±‚å·ç§¯å±‚ä¸Šé‡‡ç”¨æ·±åº¦ä¹˜å­8çš„å¯åˆ†ç¦»å·ç§¯ã€‚ å‡å°‘äº†è®¡ç®—æˆæœ¬ï¼ŒåŒæ—¶å¢åŠ äº†è®­ç»ƒæ—¶çš„å†…å­˜æ¶ˆè€—ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:12:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» Batch Normalizationè¯¦è§£ä»¥åŠpytorchå®éªŒ Batch Normalizationè¯¦è§£ Understanding the backward pass through Batch Normalization Layer æ·±å…¥è§£è¯»Inception V2ä¹‹Batch Normalizationï¼ˆé™„æºç ï¼‰ Batch NormalizationåŸç†ä¸å®æˆ˜ ç†è§£Batch Normalizationç³»åˆ—3â€”â€”ä¸ºä»€ä¹ˆæœ‰æ•ˆåŠ11ä¸ªé—®é¢˜ Batch-normalized åº”è¯¥æ”¾åœ¨éçº¿æ€§æ¿€æ´»å±‚çš„å‰é¢è¿˜æ˜¯åé¢ï¼Ÿ How Does Batch Normalization Help Optimization? BNå±‚è®©æŸå¤±å‡½æ•°æ›´å¹³æ»‘ã€‚é€šè¿‡åˆ†æè®­ç»ƒè¿‡ç¨‹ä¸­æ¯æ­¥æ¢¯åº¦æ–¹å‘ä¸Šæ­¥é•¿å˜åŒ–å¼•èµ·çš„æŸå¤±å˜åŒ–èŒƒå›´ã€æ¢¯åº¦å¹…å€¼çš„å˜åŒ–èŒƒå›´ã€å…‰æ»‘åº¦çš„å˜åŒ–ï¼Œè®¤ä¸ºæ·»åŠ BNå±‚åï¼ŒæŸå¤±å‡½æ•°çš„landscape(loss surface)å˜å¾—æ›´å¹³æ»‘ï¼Œç›¸æ¯”é«˜ä½ä¸å¹³ä¸Šä¸‹èµ·ä¼çš„loss surfaceï¼Œå¹³æ»‘loss surfaceçš„æ¢¯åº¦é¢„æµ‹æ€§æ›´å¥½ï¼Œå¯ä»¥é€‰å–è¾ƒå¤§çš„æ­¥é•¿ã€‚ å¯¹æ¯”äº†æ ‡å‡†VGGä»¥åŠåŠ äº†BNå±‚çš„VGGæ¯å±‚åˆ†å¸ƒéšè®­ç»ƒè¿‡ç¨‹çš„å˜åŒ–ï¼Œå‘ç°ä¸¤è€…å¹¶æ— æ˜æ˜¾å·®å¼‚ï¼Œè®¤ä¸ºBatchNormå¹¶æ²¡æœ‰æ”¹å–„ Internal Covariate Shiftã€‚ How Does Batch Normalization Help Optimization? (No, It Is Not About Internal Covariate Shift) An empirical analysis of the optimization of deep network loss surfaces BNæ›´æœ‰åˆ©äºæ¢¯åº¦ä¸‹é™ã€‚ç»˜åˆ¶äº†VGGå’ŒNINç½‘ç»œåœ¨æœ‰æ— BNå±‚çš„æƒ…å†µä¸‹ï¼Œloss surfaceçš„å·®å¼‚ï¼ŒåŒ…å«åˆå§‹ç‚¹ä½ç½®ä»¥åŠä¸åŒä¼˜åŒ–ç®—æ³•æœ€ç»ˆæ”¶æ•›åˆ°çš„local minimaä½ç½®ã€‚æ²¡æœ‰BNå±‚çš„ï¼Œå…¶loss surfaceå­˜åœ¨è¾ƒå¤§çš„é«˜åŸï¼Œæœ‰BNå±‚çš„åˆ™æ²¡æœ‰é«˜åŸï¼Œè€Œæ˜¯å±±å³°ï¼Œå› æ­¤æ›´å®¹æ˜“ä¸‹é™ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:13:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"InceptionV3 æ–‡ç« æ ‡é¢˜ï¼šRethinking the Inception Architecture for Computer Vision Pytorchå®˜æ–¹Inception-V3 ä½œè€…ï¼šSzegedy, Christian, et al å‘è¡¨æ—¶é—´ï¼š(CVPR 2016) æœ¬è®ºæ–‡åœ¨GoogLeNetå’ŒBN-Inceptionçš„åŸºç¡€ä¸Šï¼Œå¯¹Inceptionæ¨¡å—çš„ç»“æ„ã€æ€§èƒ½ã€å‚æ•°é‡å’Œè®¡ç®—æ•ˆç‡è¿›è¡Œäº†é‡æ–°æ€è€ƒå’Œé‡æ–°è®¾è®¡ã€‚æå‡ºäº†Inception V2å’ŒInception V3æ¨¡å‹ï¼Œå–å¾—äº†3.5%å·¦å³çš„Top-5é”™è¯¯ç‡ã€‚ Inception V3å…·æœ‰å¼ºå¤§çš„å›¾åƒç‰¹å¾æŠ½å–å’Œåˆ†ç±»æ€§èƒ½ï¼Œæ˜¯å¸¸ç”¨çš„è¿ç§»å­¦ä¹ ä¸»å¹²ç½‘ç»œåŸºæ¨¡å‹ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:14:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"General Design Principlesé€šç”¨è®¾è®¡åŸåˆ™ï¼ˆå»ºè®®ï¼‰ é¿å…è¿‡åº¦é™ç»´æˆ–æ”¶ç¼©ç‰¹å¾Bottleneckï¼ˆé¿å…è¿‡åº¦çš„1 x 1å·ç§¯ï¼Œç‰¹åˆ«æ˜¯åœ¨ç½‘ç»œæµ…å±‚ï¼‰ feature mapçš„é•¿å®½å¤§å°åº”è¯¥éšç½‘ç»œåŠ æ·±ç¼“æ…¢å‡å° é™ç»´ä¼šé€ æˆå„é€šé“é—´çš„ç›¸å…³æ€§ä¿¡æ¯ä¸¢å¤±ï¼Œä»…ååº”äº†è‡´å¯†çš„åµŒå…¥ä¿¡æ¯ ç‹¬ç«‹çš„ç‰¹å¾è¶Šå¤šæ”¶æ•›è¶Šå¿«ï¼ˆå°½å¯èƒ½åœ¨åˆ†ç±»å±‚ä¹‹å‰å¢åŠ é€šé“æ•°ï¼‰ ç›¸äº’ç‹¬ç«‹ç‰¹å¾è¶Šå¤šï¼Œè¾“å…¥çš„ä¿¡æ¯åˆ†è§£çš„è¶Šå½»åº• HebbinåŸç† å¤§å·ç§¯æ ¸å·ç§¯ä¹‹å‰å¯ç”¨1x1å·ç§¯é™ç»´ï¼ˆ3x3æˆ–5x5å·ç§¯ä¹‹å‰å¯å…ˆç”¨1x1å·ç§¯é™ç»´ï¼Œå¯ä¿ç•™ç›¸é‚»å•å…ƒçš„å¼ºç›¸å…³æ€§ï¼‰ å¤§å°ºåº¦å·ç§¯ï¼šèšåˆç©ºé—´ä¿¡æ¯å¤§æ„Ÿå—é‡ ç›¸é‚»æ„Ÿå—é‡çš„å·ç§¯ç»“æœ é‚»è¿‘å•å…ƒçš„å¼ºç›¸å…³æ€§åœ¨é™ç»´è¿‡ç¨‹ä¸­ä¿¡æ¯æŸå¤±å¾ˆå°‘ å‡è¡¡ç½‘ç»œçš„å®½åº¦å’Œæ·±åº¦ ä¸¤è€…åŒæ—¶æå‡ï¼Œæ—¢å¯ä»¥æå‡æ€§èƒ½ï¼Œä¹Ÿèƒ½æå‡è®¡ç®—æ•ˆç‡ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:15:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Factorizing Convolutions with Large Filter Sizeå·ç§¯åˆ†è§£ $5\\times5$å·ç§¯åˆ†è§£æˆ2ä¸ª$3\\times3$å·ç§¯ï¼›å‡å°‘å‚æ•°æ•°é‡ åˆ†è§£å·ç§¯æ˜¯å¦ä¼šå½±å“æ¨¡å‹è¡¨è¾¾èƒ½åŠ›ï¼Ÿ æ˜¯å¦éœ€ä¿ç•™ç¬¬ä¸€å±‚çš„éçº¿æ€§æ¿€æ´»å‡½æ•°ï¼Ÿ å¢åŠ éçº¿æ€§å¯å­¦ä¹ ç©ºé—´å¢å¼ºäº† Inception Module A $3\\times3$å·ç§¯åˆ†è§£æˆ$3\\times1$å·ç§¯å’Œ$1\\times3$å·ç§¯éå¯¹ç§°ï¼ˆç©ºé—´å¯åˆ†ç¦»å·ç§¯ï¼‰ $n\\times n$å·ç§¯åˆ†è§£æˆ$n \\times1$å·ç§¯å’Œ$1\\times n$å·ç§¯ nè¶Šå¤§ï¼ŒèŠ‚çœçš„è¿ç®—é‡è¶Šå¤§ Inception Module B ä¸å¯¹ç§°å·ç§¯åˆ†è§£åœ¨é å‰çš„å±‚æ•ˆæœä¸å¥½ï¼Œé€‚ç”¨äºfeature mapå°ºå¯¸åœ¨12-20ä¹‹é—´ æ‹“å±•æ»¤æ³¢å™¨ç»„ï¼ˆåŠ å®½ç½‘ç»œï¼Œå‡ç»´ï¼‰åœ¨æœ€ååˆ†ç±»å±‚ä¹‹å‰ï¼Œç”¨è¯¥æ¨¡å—æ‹“å±•ç‰¹å¾ç»´åº¦ï¼Œç”Ÿæˆé«˜ç»´ç¨€ç–ç‰¹å¾ã€‚ Inception Module C ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:16:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Utility of Auxiliary Classifiersè¾…åŠ©åˆ†ç±»å™¨ æå‡ºè¾…åŠ©åˆ†ç±»å™¨å¹¶ä¸èƒ½å¸®åŠ©æ¨¡å‹æ›´å¿«æ”¶æ•›å’Œæ›´å¿«çš„ç‰¹å¾æ¼”åŒ–ã€‚ å¢åŠ äº†BNå±‚å’ŒDropoutå±‚çš„è¾…åŠ©åˆ†ç±»å™¨å¯ä»¥èµ·åˆ°æ­£åˆ™åŒ–ä½œç”¨ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:17:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Efficient Grid Size Reductioné«˜æ•ˆä¸‹é‡‡æ ·æŠ€å·§ å…ˆå·ç§¯å†æ± åŒ–ï¼ˆè®¡ç®—é‡å¤§ï¼‰ å…ˆå·ç§¯å†æ± åŒ– æ­¥é•¿ä¸º2çš„å·ç§¯ï¼ˆå¤§é‡ä¿¡æ¯ä¸¢å¤±ï¼Œè¿ååŸåˆ™1ï¼‰ æ­¥é•¿ä¸º2çš„å·ç§¯åŒ– ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:18:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Inception V3 Inception-v3 çš„ PyTorch ç‰ˆæœ¬ Google Cloud ä¸Šçš„ Inception-v3 InceptionV3 figure5ï¼š$5\\times5$å·ç§¯åˆ†è§£æˆ2ä¸ª$3\\times3$å·ç§¯ figure6ï¼šç©ºé—´å·ç§¯å¯åˆ†ç¦»å·ç§¯ figure7ï¼šæ‹“å±•æ»¤æ³¢å™¨ç»„ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:19:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Label Smoothingæ ‡ç­¾å¹³æ»‘ When Does Label Smoothing Help? æ ‡ç­¾å¹³æ»‘çš„ç›®çš„æ˜¯é˜²æ­¢æœ€å¤§çš„ logit å˜å¾—æ¯”æ‰€æœ‰å…¶ä»– logit å¤§å¾—å¤š new_labels = (1 â€” Îµ) * one_hot_labels + Îµ / K å…¶ä¸­ Îµ æ˜¯ 0.1ï¼Œè¿™æ˜¯ä¸€ä¸ªè¶…å‚æ•°ï¼ŒK æ˜¯ 1000ï¼Œè¿™æ˜¯ç±»çš„æ•°é‡ã€‚åœ¨åˆ†ç±»å™¨å±‚è§‚å¯Ÿåˆ°çš„ä¸€ç§dropoutæ•ˆåº”ã€‚ æ ‡ç­¾ç”¨one-hotç‹¬çƒ­ç¼–ç  $$ L=-\\sum_{i=1}^{k}q_ilog{p_i}=-log{p_y}=-z_y+log{(\\sum_{i=1}^k e^{z_i})} $$å¯èƒ½å¯¼è‡´è¿‡æ‹Ÿåˆ å®ƒé¼“åŠ±æœ€å¤§çš„é€»è¾‘å•å…ƒä¸æ‰€æœ‰å…¶å®ƒé€»è¾‘å•å…ƒä¹‹é—´çš„å·®è·å˜å¤§ï¼Œä¸æœ‰ç•Œé™çš„æ¢¯åº¦âˆ‚â„“/âˆ‚zkç›¸ç»“åˆï¼Œè¿™ä¼šé™ä½æ¨¡å‹çš„é€‚åº”èƒ½åŠ›ã€‚ $$ z^* = \\begin{cases} \\log{\\frac{(k-1)(1-\\varepsilon)}{\\varepsilon}} + \\alpha \u0026 \\text{if } i = y \\\\ \\alpha \u0026 \\text{if } i \\neq y \\end{cases} $$ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:20:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» åœ¨ Cloud TPU ä¸Šè¿è¡Œ Inception v3 çš„é«˜çº§æŒ‡å— åšå®¢ Label Smoothçš„Pandaså®ç°å°ä¾‹å­ çŸ¥ä¹ï¼šç¥ç»ç½‘ç»œä¸­çš„label smoothä¸ºä»€ä¹ˆæ²¡æœ‰ç«ï¼Ÿ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:21:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"InceptionV4 æ–‡ç« æ ‡é¢˜ï¼šInception-v4, Inception-ResNet and the Impact of Residual Connections on Learning ä½œè€…ï¼šSzegedy C , Ioffe S , Vanhoucke V , et al. å‘è¡¨æ—¶é—´ï¼š(AAAI 2017) æå‡ºäº†Inception-V4ã€Inception-ResNet-V1ã€Inception-ResNet-V2ä¸‰ä¸ªæ¨¡å‹ã€‚ Inception-V4åœ¨Inception-V3çš„åŸºç¡€ä¸Šè¿›ä¸€æ­¥æ”¹è¿›äº†Inceptionæ¨¡å—ï¼Œæå‡äº†æ¨¡å‹æ€§èƒ½å’Œè®¡ç®—æ•ˆç‡ã€‚ Inception-V4æ²¡æœ‰ä½¿ç”¨æ®‹å·®æ¨¡å—ï¼Œ Inception-ResNetå°†Inceptionæ¨¡å—å’Œæ·±åº¦æ®‹å·®ç½‘ç»œResNetç»“åˆï¼Œæå‡ºäº†ä¸‰ç§åŒ…å«æ®‹å·®è¿æ¥çš„Inceptionæ¨¡å—ï¼Œæ®‹å·®è¿æ¥æ˜¾è‘—åŠ å¿«äº†è®­ç»ƒæ”¶æ•›é€Ÿåº¦ã€‚ Inception-ResNet-V2å’ŒInception-V4çš„æ—©æœŸstemç½‘ç»œç»“æ„ç›¸åŒã€‚ Inception-ResNet-V1å’ŒInception-V3å‡†ç¡®ç‡ç›¸è¿‘ï¼ŒInception-ResNet-V2å’ŒInception-V4å‡†ç¡®ç‡ç›¸è¿‘ã€‚ ç»è¿‡æ¨¡å‹é›†æˆå’Œå›¾åƒå¤šå°ºåº¦è£å‰ªå¤„ç†åï¼Œæ¨¡å‹Top-5é”™è¯¯ç‡é™ä½è‡³3.1%ã€‚ é’ˆå¯¹å·ç§¯æ ¸ä¸ªæ•°å¤§äº1000æ—¶æ®‹å·®æ¨¡å—æ—©æœŸè®­ç»ƒä¸ç¨³å®šçš„é—®é¢˜ï¼Œæå‡ºäº†å¯¹æ®‹å·®åˆ†æ”¯å¹…åº¦ç¼©å°çš„è§£å†³æ–¹æ¡ˆã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:22:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Inception-V4 Vï¼šä¸ä½¿ç”¨padding ä¸åŠ Vï¼šsame padding å¦‚æœpaddingè®¾ç½®ä¸ºSAMEï¼Œåˆ™è¯´æ˜è¾“å…¥å›¾ç‰‡å¤§å°å’Œè¾“å‡ºå›¾ç‰‡å¤§å°æ˜¯ä¸€è‡´çš„ InceptionV4 Stemä¸»å¹²ç½‘ç»œ InceptionV4_Module_A InceptionV4_Module_B InceptionV4_Module_C æ¨¡å—Aè¾“å‡ºGrid Sizeï¼š$35\\times35$ æ¨¡å—Bè¾“å‡ºGrid Sizeï¼š$17\\times17$ æ¨¡å—Cè¾“å‡ºGrid Sizeï¼š$8\\times8$ ReductionA ReductionB ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:23:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Inception-ResNet-V1 æ€§èƒ½å’ŒInceptionV3ç›¸è¿‘ å¸¦æ®‹å·®æ¨¡å—çš„Inception Inceptionä¹‹åä½¿ç”¨ä¸å¸¦æ¿€æ´»å‡½æ•°çš„$1\\times1$å·ç§¯ï¼šå‡ç»´æ‹“å±•filter bank ï¼ŒåŒ¹é…è¾“å…¥ç»´åº¦ åœ¨ç›¸åŠ å±‚ä¹‹åä¸åšBNï¼Œå‡å°‘è®¡ç®—é‡ã€‚ Inception-ResNet-v1 Stemä¸»å¹²ç½‘ç»œ Inception-ResNet-v1_Module_A Inception-ResNet-v1_Module_B Inception-ResNet-v1_Module_C æ¨¡å—Aè¾“å‡ºGrid Sizeï¼š$35\\times35$ æ¨¡å—Bè¾“å‡ºGrid Sizeï¼š$17\\times17$ æ¨¡å—Cè¾“å‡ºGrid Sizeï¼š$8\\times8$ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:24:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Inception-ResNet-V2 Inception-ResNet-V1å’ŒInception-ResNet-V2ç½‘ç»œæ€»ä½“ç»“æ„ä¸€æ · Inception-ResNet-V2å’ŒInceptinV4ä¸»å¹²ç½‘ç»œä¸€æ · æ€§èƒ½å’ŒInceptionV4ç›¸è¿‘ Inception-ResNet-V2 Stemä¸»å¹²ç½‘ç»œ Inception-ResNet-v2_Module_A Inception-ResNet-v2_Module_B Inception-ResNet-v2_Module_C æ¨¡å—Aè¾“å‡ºGrid Sizeï¼š$35\\times35$ æ¨¡å—Bè¾“å‡ºGrid Sizeï¼š$17\\times17$ æ¨¡å—Cè¾“å‡ºGrid Sizeï¼š$8\\times8$ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:25:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Scaling of the Residuals InceptionV4_Scaling of the Residuals å¯¹æ®‹å·®å—è¾“å‡ºè¿›è¡Œå¹…åº¦å‡å° åœ¨åŠ æ³•èåˆä¹‹å‰ï¼Œå¯¹æ®‹å·®åˆ†æ”¯çš„ç»“æœä¹˜ä»¥å¹…åº¦ç¼©å°ç³»æ•° ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:26:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» è®ºæ–‡ç‰ˆæœ¬1 è®ºæ–‡ç‰ˆæœ¬2 è®ºæ–‡ç‰ˆæœ¬3 Inception-V4å’ŒInception-Resnetè®ºæ–‡é˜…è¯»å’Œä»£ç è§£æ Inception-V4æºä»£ç  Inception-ResNet-V2æºä»£ç  Inceptionè‹±æ–‡ç»¼è¿°åšå®¢ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:27:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Xception æ–‡ç« æ ‡é¢˜ï¼šXception: Deep Learning with Depthwise Separable Convolutions ä½œè€…ï¼šFrancois Chollet Githubä¸»é¡µ æ¨ç‰¹ è°·æ­Œå­¦æœ¯ é¢†è‹± å‘è¡¨æ—¶é—´ï¼š(CVPR 2017) è°·æ­ŒXceptionï¼Œå°†æ·±åº¦å¯åˆ†ç¦»å·ç§¯å¼•å…¥Inceptionæ¨¡å—ï¼Œå®ç°é•¿å®½æ–¹å‘çš„ç©ºé—´ä¿¡æ¯å’Œè·¨é€šé“ä¿¡æ¯çš„å®Œå…¨è§£è€¦ã€‚Xä»£è¡¨Extremeï¼Œæè‡´ã€‚ åœ¨ImageNetæ•°æ®é›†å’ŒJFTæ•°æ®é›†ä¸¤ä¸ªå¤§è§„æ¨¡å›¾åƒåˆ†ç±»ä»»åŠ¡ä¸Šï¼Œæ”¶æ•›é€Ÿåº¦ã€æœ€ç»ˆå‡†ç¡®ç‡éƒ½è¶…è¿‡Inception V3ã€‚ Xceptionä½œè€…ä¸ºæ·±åº¦å­¦ä¹ æ¡†æ¶Kerasä½œè€…FranÃ§ois Cholletã€‚åœ¨Kerasä¸­å¯è°ƒç”¨é¢„è®­ç»ƒçš„Xceptionæ¨¡å‹ä½œä¸ºè¿ç§»å­¦ä¹ çš„éª¨å¹²ç½‘ç»œã€‚ VGGï¼šç»å…¸ä¸²è¡Œå †å æ·±åº¦ Inceptionï¼šæ‹“å±•å¤šåˆ†æ”¯å®½åº¦ï¼Œåˆ†åˆ«å¤„ç†ï¼ˆè§£è€¦ï¼‰å†æ•´åˆæ±‡æ€» åœ¨ DeeplabV3+ ä¸­ï¼Œä½œè€…å°† Xception åšäº†è¿›ä¸€æ­¥çš„æ”¹è¿›ï¼ŒåŒæ—¶å¢åŠ äº† Xception çš„å±‚æ•°ï¼Œè®¾è®¡å‡ºäº† Xception65 å’Œ Xception71 çš„ç½‘ç»œã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:28:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"The Cxeption architecture å‡è®¾ï¼šè·¨é€šé“ä¿¡æ¯å’Œé•¿å®½æ–¹å‘çš„ç©ºé—´ä¿¡æ¯å¯å®Œå…¨åˆ†ç¦»è§£è€¦ Xceptionä¸æ ‡å‡†å¯åˆ†ç¦»å·ç§¯çš„åŒºåˆ« MobileNets: Efficient Convolutional Neural Networks for Mobile Vision Applications (2017) é¡ºåºä¸åŒ Xceptionä¸æ·±åº¦å¯åˆ†ç¦»å·ç§¯çš„åŒºåˆ« Xceptionä¸­ä½¿ç”¨éçº¿æ€§æ¿€æ´»å‡½æ•°ReLu å¸¸è§„å·ç§¯ï¼šä¸€ä¸ªå·ç§¯æ ¸å¤„ç†æ‰€æœ‰é€šé“ æ·±åº¦å¯åˆ†ç¦»å·ç§¯ï¼šä¸€ä¸ªå·ç§¯æ ¸å¤„ç†ä¸€ä¸ªé€šé“ SeperableConvåŒ…å«$1\\times1$å·ç§¯+æ·±åº¦å¯åˆ†ç¦»å·ç§¯+åˆå¹¶ æé™ç‰ˆæœ¬ï¼šæ¯ä¸ª$3\\times3$å·ç§¯å•ç‹¬å¤„ç†ä¸€ä¸ªé€šé“ extreme version of Inception module ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:29:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"Effect of an intermediate activation after pointwise convolutions éçº¿æ€§æ¿€æ´»å¯¹ç©ºé—´-é€šé“æœªè§£è€¦æ—¶æœ‰ç”¨ å¯¹$1\\times1$å·ç§¯åçš„ç‰¹å¾å›¾ï¼Œéçº¿æ€§æ¿€æ´»ä¼šå¯¼è‡´ä¿¡æ¯ä¸¢å¤±ï¼Œä¸åˆ©äºåç»­çš„æ·±åº¦å¯åˆ†ç¦»å·ç§¯ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:30:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» Kerasä¸­çš„Xceptioné¢„è®­ç»ƒæ¨¡å‹ åšå®¢ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/inception/:31:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"Inception","uri":"/posts/deeplearning/image-classification/inception/"},{"categories":["Deep Learning"],"content":"ResNet","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"ResNet æ–‡ç« æ ‡é¢˜ï¼šDeep Residual Learning for Image Recognition ä»£ç åœ°å€ pytorchç‰ˆ ä½œè€…ï¼šKaiming He ï¼ŒXiangyu Zhang ï¼ŒShaoqing Ren ï¼ŒJian Sunï¼ŒMicrosoft Research å‘è¡¨æ—¶é—´ï¼š(CVPR 2016) CVPRè®ºæ–‡ä¸»é¡µ å¾®è½¯äºšæ´²ç ”ç©¶é™¢æå‡ºçš„æ·±åº¦æ®‹å·®ç½‘ç»œResNetï¼Œè·å¾—2015å¹´ImageNetå›¾åƒåˆ†ç±»ã€å®šä½ã€æ£€æµ‹ï¼ŒMS COCOç«èµ›æ£€æµ‹ã€åˆ†å‰²äº”æ¡èµ›é“çš„å† å†›ï¼Œé€šè¿‡å¼•å…¥æ®‹å·®è¿æ¥ï¼Œæœ‰æ•ˆè§£å†³æ·±å±‚ç½‘ç»œè®­ç»ƒæ—¶çš„é€€åŒ–é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡åŠ æ·±ç½‘ç»œå¤§å¤§æå‡æ€§èƒ½ã€‚ ResNetåœ¨ILSVRC-2015å›¾åƒåˆ†ç±»ç«èµ›ä¸­è·å¾—äº†top-5è¯¯å·®3.57%çš„å† å†›æˆç»©ï¼Œåœ¨å›¾åƒåˆ†ç±»ä»»åŠ¡ä¸Šé¦–æ¬¡è¶…è¿‡äººç±»èƒ½åŠ›ã€‚ResNetå¸¸ç”¨äºè¿ç§»å­¦ä¹ å’Œfine-tuningå¾®è°ƒçš„ç‰¹å¾æå–çš„åŸºæ¨¡å‹ã€‚ æå‡ºæ®‹å·®å­¦ä¹ ç»“æ„è§£å†³æ·±ç½‘ç»œçš„é€€åŒ–é—®é¢˜å’Œè®­ç»ƒé—®é¢˜ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:1:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Introduction Question: ç®€å•å åŠ ç¥ç»ç½‘ç»œå±‚å¯ä»¥å—ï¼Ÿ Phenomenonï¼š æ˜æ˜¾çš„æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸é—®é¢˜ï¼Œéš¾ä»¥æ”¶æ•›â€”â€”æ­£åˆ™åŒ–ï¼Œé€‚å½“çš„æƒé‡åˆå§‹åŒ–+Batch Normalizationå¯ä»¥åŠ å¿«ç½‘ç»œæ”¶æ•› æ¨¡å‹é€€åŒ–é—®é¢˜å‡¸æ˜¾ï¼Œå‡†ç¡®ç‡é¥±å’Œ ç½‘ç»œé€€åŒ–ï¼šæ·±å±‚ç½‘ç»œåœ¨è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸Šçš„è¡¨ç°éƒ½ä¸å¦‚æµ…å±‚ç½‘ç»œ æ¨¡å‹é€€åŒ–é—®é¢˜å¹¶éè¿‡æ‹Ÿåˆå¯¼è‡´ï¼Œå¢åŠ æ·±åº¦å¯¼è‡´è®­ç»ƒé›†é”™è¯¯ç‡æå‡ æ·±å±‚ç½‘ç»œä¸èƒ½æ¯”æµ…å±‚ç½‘ç»œé”™è¯¯ç‡æ›´é«˜â€”â€”identity mappingæ’ç­‰æ˜ å°„ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:2:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Residual block æ®‹å·®è·¯å¾„å¦‚ä½•è®¾è®¡ï¼Ÿ shortcutè·¯å¾„å¦‚ä½•è®¾è®¡ï¼Ÿ Residual Blockä¹‹é—´æ€ä¹ˆè¿æ¥ï¼Ÿ Residual block æ®‹å·®æ¨¡å— è¿‡å»ï¼š ç›´æ¥æ‹Ÿåˆ$H(x)$ ç°åœ¨ï¼š æ‹Ÿåˆæ®‹å·®$F(x)=H(x)-x$ shortcut connectionï¼šçŸ­è·¯è¿æ¥/æ·å¾„è¿æ¥ æ—¢æ²¡æœ‰å¼•å…¥é¢å¤–å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰å¢åŠ è®¡ç®—å¤æ‚åº¦ æ‰“ç ´äº†ç½‘ç»œå¯¹ç§°æ€§ï¼Œæå‡ç½‘ç»œè¡¨å¾èƒ½åŠ› identity mappingï¼šæ’ç­‰æ˜ å°„ $\\bigoplus$ä¸ºelement-wise additionï¼Œè¦æ±‚å‚ä¸è¿ç®—çš„$F(x)$å’Œ$x$çš„å°ºå¯¸è¦ç›¸åŒ æ®‹å·®ç½‘ç»œ æ˜“äºä¼˜åŒ–æ”¶æ•› è§£å†³é€€åŒ–é—®é¢˜ å¯ä»¥å¾ˆæ·± ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:2:1","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Related Work æ®‹å·®è¡¨ç¤º( Residual Representations)ï¼š æœ‰æ•ˆçš„æµ…å±‚è¡¨ç¤ºæ–¹æ³•: VLAD( vector of locally aggregated descriptorsï¼‰ Fisher Vector: Probabilistic version of VLAD ç¼–ç æ®‹å·®å‘é‡æ¯”ç¼–ç åŸå§‹å‘é‡è¡¨ç°æ›´å¥½ æ·å¾„è¿æ¥( shortcut Connections)ï¼š MLPâ€”â€”é€šè¿‡çº¿æ€§å±‚å°†è¾“å…¥è¿æ¥åˆ°è¾“å‡º ä»ä¸­é—´å±‚ç›´æ¥è¿æ¥åˆ°è¾…åŠ©åˆ†ç±»å™¨ GoogLeNetâ€”â€”Inception Layer Highway Networksâ€”â€”é—¨æ§å‡½æ•°æ‰®æ¼”æ®‹å·®è§’è‰²ï¼Œé—¨æ§å‚æ•°ç”±å­¦ä¹ å¾—åˆ° Residual Learningâ€”â€”æé«˜ä¿¡æ¯æµæ•ˆç‡ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:3:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Deep Residual Learning ä¼ ç»Ÿå¤šå±‚ç½‘ç»œéš¾ä»¥æ‹Ÿåˆæ’ç­‰æ˜ å°„ å¦‚æœæ’ç­‰æ˜ å°„å·²ç»æœ€ä¼˜ï¼Œæ®‹å·®æ¨¡å—åªéœ€è¦æ‹Ÿåˆé›¶æ˜ å°„ åé¢çš„ç½‘ç»œåªæ‹Ÿåˆå‰é¢ç½‘ç»œçš„è¾“å‡ºä¸æœŸæœ›å‡½æ•°çš„æ®‹å·®ã€‚ [æ®‹å·®å—](###Residual block)ï¼š$y=F(x,{W_i})+x$ $F(x,{W_i})$ï¼šéœ€è¦å­¦ä¹ çš„æ®‹å·®æ˜ å°„ï¼Œç»´åº¦ä¸$x$ä¸€è‡´ $x$ï¼šè‡ªèº«è¾“å…¥ $F+x$ï¼šè·³è·ƒè¿æ¥ï¼Œé€ä¸€åŠ å’Œ,æœ€åè¾“å²€ç»è¿‡æ¿€æ´»å‡½æ•°ReLU æ²¡æœ‰é¢å¤–å‚æ•°,ä¸å¢åŠ å¤æ‚åº¦ $F$åŒ…å«ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šç½‘ç»œå±‚ï¼Œå¦åˆ™è¡¨ç°ä¸ºçº¿æ€§å±‚$y=W_1x+x$ å¦‚æœå·ç§¯å±‚ååŠ BNå±‚ï¼Œåˆ™ä¸éœ€è¦åç½®é¡¹ï¼ˆæœŸæœ›ä¸º0ï¼‰ æ®‹å·®åˆ†æ”¯å‡ºç°ä¸‹é‡‡æ ·(è™šçº¿è¡¨ç¤º) shortcutåˆ†æ”¯ç¬¬ä¸€ä¸ªå·ç§¯å±‚æ­¥é•¿éƒ½ä¸º2 ResNet_optionB å¯¹å¤šå‡ºæ¥çš„é€šé“paddingè¡¥é›¶å¡«å…… ç”¨$1\\times1$å·ç§¯å‡ç»´ æ™®é€šæ®‹å·®æ¨¡å—,ç”¨äºResNet-18/34 bottleneckæ®‹å·®æ¨¡å—,ç”¨äºResNet-50/101/152 $1\\times1$å·ç§¯,å…ˆé™ç»´åå‡ç»´ å‡å°‘å‚æ•°é‡ä¸è®¡ç®—é‡ blockå’Œbottleneck Plain Network(æ™®é€šæ— æ®‹å·®ç½‘ç»œ) ResNet-34ä¸34-layer plain netå’ŒVGGå¯¹æ¯” ResNet ResNet ResNetä¸­ï¼Œæ‰€æœ‰çš„Residual Blockéƒ½æ²¡æœ‰poolingå±‚ï¼Œé™é‡‡æ ·æ˜¯é€šè¿‡convçš„strideå®ç°çš„ï¼› åˆ†åˆ«åœ¨conv3_1ã€conv4_1å’Œconv5_1 Residual Blockï¼Œé™é‡‡æ ·1å€ï¼ŒåŒæ—¶feature mapæ•°é‡å¢åŠ 1å€ï¼Œå¦‚å›¾ä¸­è™šçº¿åˆ’å®šçš„blockï¼› é€šè¿‡Average Poolingå¾—åˆ°æœ€ç»ˆçš„ç‰¹å¾ï¼Œè€Œä¸æ˜¯é€šè¿‡å…¨è¿æ¥å±‚ï¼› æ¯ä¸ªå·ç§¯å±‚ä¹‹åéƒ½ç´§æ¥ç€BatchNorm layerã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:4:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» ResNetè§£å†³é€€åŒ–é—®é¢˜æœºç† æ·±å±‚æ¢¯åº¦å›ä¼ é¡ºç•… æ’ç­‰æ˜ å°„è¿™ä¸€è·¯çš„æ¢¯åº¦æ˜¯1ï¼ŒæŠŠæ·±å±‚æ¢¯åº¦æ³¨å…¥åº•å±‚ï¼Œé˜²æ­¢æ¢¯åº¦æ¶ˆå¤±ã€‚ ç±»æ¯”å…¶å®ƒæœºå™¨å­¦ä¹ æ¨¡å‹ é›†æˆå­¦ä¹  boostingï¼Œæ¯ä¸€ä¸ªå¼±åˆ†ç±»å™¨æ‹Ÿåˆâ€œå‰é¢çš„æ¨¡å‹ä¸GTä¹‹å·®â€ é•¿çŸ­æ—¶è®°å¿†ç¥ç»ç½‘ç»œLSTMçš„é—å¿˜é—¨ã€‚ Reluæ¿€æ´»å‡½æ•°ã€‚ ä¼ ç»Ÿçº¿æ€§ç»“æ„ç½‘ç»œéš¾ä»¥æ‹Ÿåˆâ€œæ’ç­‰æ˜ å°„â€ skip connectionå¯ä»¥è®©æ¨¡å‹è‡ªè¡Œé€‰æ‹©è¦ä¸è¦æ›´æ–° å¼¥è¡¥äº†é«˜åº¦éçº¿æ€§é€ æˆçš„ä¸å¯é€†çš„ä¿¡æ¯æŸå¤±ã€‚( MobileNet v2) ResNetåå‘ä¼ æ’­ä¼ å›çš„æ¢¯åº¦ç›¸å…³æ€§å¥½ The Shattered Gradients Problem: If resnets are the answer, then what is the question? ç½‘ç»œåŠ æ·±,ç›¸é‚»åƒç´ å›ä¼ å›æ¥çš„æ¢¯åº¦ç›¸å…³æ€§è¶Šæ¥è¶Šä½ï¼Œæœ€åæ¥è¿‘ç™½å™ªå£°ä½†ç›¸é‚»åƒç´ ä¹‹é—´å…·æœ‰å±€éƒ¨ç›¸å…³æ€§ï¼Œç›¸é‚»åƒç´ çš„æ¢¯åº¦ä¹Ÿåº”è¯¥å±€éƒ¨ç›¸å…³ã€‚ç›¸é‚»åƒç´ ä¸ç›¸å…³çš„ç™½å™ªå£°æ¢¯åº¦åªæ„å‘³ç€éšæœºæ‰°åŠ¨ï¼Œå¹¶æ— æ‹Ÿåˆã€‚ ResNetæ¢¯åº¦ç›¸å…³æ€§è¡°å‡ä»$\\frac{1}{2^L}$åŠ ä¸º$\\frac{1}{\\sqrt L}$ã€‚ä¿æŒäº†æ¢¯åº¦ç›¸å…³æ€§ã€‚ ResNetç›¸å½“äºå‡ ä¸ªæµ…å±‚ç½‘ç»œçš„é›†æˆ Residual Networks Behave Like Ensembles of Relatively Shallow Networks $2^n$ä¸ªæ½œåœ¨è·¯å¾„(ç±»ä¼¼ dropout) æµ‹è¯•é˜¶æ®µå»æ‰æŸå‡ ä¸ªæ®‹å·®å—ï¼Œå‡ ä¹ä¸å½±å“æ€§èƒ½ skip connectionå¯ä»¥å®ç°ä¸åŒåˆ†è¾¨ç‡ç‰¹å¾çš„ç»„åˆ FPNã€ DenseNet ä»éçº¿æ€§åŠ¨åŠ›å­¦ç³»ç»Ÿç”¨ç¦»æ•£å¾®åˆ†æ–¹ç¨‹è§£é‡Š(é„‚ç»´å—é™¢å£«) ResNetæ•°å­¦æœ¬è´¨æ˜¯ç”¨å¾®åˆ†æ–¹ç¨‹çš„ç§¯åˆ†æ›²çº¿å»æ‹Ÿåˆç³»ç»Ÿçš„ç›®æ ‡å‡½æ•°ï¼›æ„é€ äº†ä¸€ä¸ªå¹³æ»‘çš„è§£ç©ºé—´æµå½¢ï¼Œåœ¨è¿™ä¸ªå¹³æ»‘çš„æµå½¢ä¸Šæ›´å®¹æ˜“æ‰¾åˆ°è§£ã€‚ æ®‹å·®ç½‘ç»œç›¸å½“äºä¸åŒé•¿åº¦çš„ç¥ç»ç½‘ç»œç»„æˆçš„ç»„åˆå‡½æ•°ï¼›æ®‹å·®æ¨¡å—ç›¸å½“äºä¸€ä¸ªå·®åˆ†æ”¾å¤§å™¨ CVPR2016ä½•æºæ˜æ±‡æŠ¥ï¼ˆ2016å¹´6æœˆ27æ—¥ï¼‰ ILSVRC2015ç«èµ› COCO2015æ£€æµ‹ä¸åˆ†å‰²ç«èµ› è®ºæ–‡ç¿»è¯‘ å­™å‰‘é¦–ä¸ªæ·±åº¦å­¦ä¹ åšå£«å¼ ç¥¥é›¨ï¼š3å¹´çœ‹1800ç¯‡è®ºæ–‡ï¼Œ28å²æŒèˆµæ—·è§†åŸºç¡€æ¨¡å‹ç ”ç©¶ PreResNetï¼šIdentity Mappings in Deep Residual Networks-2016 ä»£ç åœ°å€ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:5:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"ResNeXt æ–‡ç« æ ‡é¢˜ï¼šAggregated Residual Transformations for Deep Neural Networks ä½œè€…ï¼šSaining Xie, Ross Girshick, Piotr DollÃ¡r, Zhuowen Tu, Kaiming He å‘è¡¨æ—¶é—´ï¼š(CVPR 2017) pytorchä»£ç  è®¾è®¡blockéµå¾ªä»¥ä¸‹ä¸¤ä¸ªè§„åˆ™ï¼š å¦‚æœè¾“å‡ºç›¸åŒ size çš„ spatial map, é‚£ä¹ˆï¼Œblock çš„ hyper-parameters (å³ width å’Œ filter size) ç›¸åŒ feature mapå¤§å°ç¼©å‡ä¸€åŠï¼Œé€šé“æ•°å¢ä¸€å€ã€‚ è¿™ä¸ªè§„åˆ™ä¿è¯äº†æ¯ä¸ªblockçš„è®¡ç®—å¤æ‚åº¦å‡ ä¹ä¸€è‡´ï¼ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:6:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"ResNeXt Residual Block in ResNet (Left), A Block of ResNeXt with Cardinality = 32 (Right) ResNeXt_block:A layer is denoted as (# input channels, filter size, # output channels) ä¸‰ç§ç­‰ä»· bå’ŒInception V3ç±»ä¼¼ï¼Œä½†bæ˜¯åŒæ„ ResNeXt ResNeXt-50ï¼ˆ32x4dï¼‰ï¼š32æŒ‡è¿›å…¥ç½‘ç»œçš„ç¬¬ä¸€ä¸ªResNeXtåŸºæœ¬ç»“æ„çš„åˆ†ç»„æ•°é‡Cï¼ˆå³cardinalityåŸºæ•°ï¼‰ä¸º32ï¼Œ4dè¡¨ç¤ºdepthå³æ¯ä¸€ä¸ªåˆ†ç»„çš„é€šé“æ•°ä¸º4ï¼ˆæ‰€ä»¥ç¬¬ä¸€ä¸ªåŸºæœ¬ç»“æ„è¾“å…¥é€šé“æ•°ä¸º128ï¼‰ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:7:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» Review: ResNeXt â€” 1st Runner Up in ILSVRC 2016 (Image Classification) çŸ¥ä¹ï¼šè–°é£è¯»è®ºæ–‡ï¼šResNeXt æ·±å…¥è§£è¯»ä¸æ¨¡å‹å®ç° Exploring the Limits of Weakly Supervised Pretraining-ECCV-2018 åœ¨ 2019 å¹´ï¼Œfacebook é€šè¿‡å¼±ç›‘ç£å­¦ä¹ ç ”ç©¶äº†è¯¥ç³»åˆ—ç½‘ç»œåœ¨ ImageNet ä¸Šçš„ç²¾åº¦ä¸Šé™ï¼Œä¸ºäº†åŒºåˆ«ä¹‹å‰çš„ ResNeXt ç½‘ç»œï¼Œè¯¥ç³»åˆ—ç½‘ç»œçš„åç¼€ä¸º wslï¼Œå…¶ä¸­ wsl æ˜¯å¼±ç›‘ç£å­¦ä¹ ï¼ˆweakly-supervised-learningï¼‰çš„ç®€ç§°ã€‚ä¸ºäº†èƒ½æœ‰æ›´å¼ºçš„ç‰¹å¾æå–èƒ½åŠ›ï¼Œç ”ç©¶è€…å°†å…¶ç½‘ç»œå®½åº¦è¿›ä¸€æ­¥æ”¾å¤§ï¼Œå…¶ä¸­æœ€å¤§çš„ ResNeXt101_32x48d_wsl æ‹¥æœ‰ 8 äº¿ä¸ªå‚æ•°ï¼Œå°†å…¶åœ¨ 9.4 äº¿çš„å¼±æ ‡ç­¾å›¾ç‰‡ä¸‹è®­ç»ƒå¹¶åœ¨ ImageNet-1k ä¸Šåš finetuneï¼Œæœ€ç»ˆåœ¨ ImageNet-1k çš„ top-1 è¾¾åˆ°äº† 85.4%ã€‚Fix-ResNeXt ä¸­ï¼Œä½œè€…ä½¿ç”¨äº†æ›´å¤§çš„å›¾åƒåˆ†è¾¨ç‡ï¼Œé’ˆå¯¹è®­ç»ƒå›¾ç‰‡å’ŒéªŒè¯å›¾ç‰‡æ•°æ®é¢„å¤„ç†ä¸ä¸€è‡´çš„æƒ…å†µä¸‹åšäº†ä¸“é—¨çš„ Fix ç­–ç•¥ï¼Œå¹¶ä½¿å¾— ResNeXt101_32x48d_wsl æ‹¥æœ‰äº†æ›´é«˜çš„ç²¾åº¦ï¼Œç”±äºå…¶ç”¨åˆ°äº† Fix ç­–ç•¥ï¼Œæ•…å‘½åä¸º Fix-ResNeXt101_32x48d_wslã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:8:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"ResNeSt æ–‡ç« æ ‡é¢˜ï¼šResNeSt: Split-Attention Networks ä½œè€…ï¼šHang Zhang, Chongruo Wu, Zhongyue Zhang, Yi Zhu, Haibin Lin, Zhi Zhang, Yue Sun, Tong He, Jonas Mueller, R. Manmatha, Mu Li, Alexander Smola å‘è¡¨æ—¶é—´ï¼š(2020) Official Code ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:9:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Split-Attention Networks ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:10:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Split-Attention Block featuremap group and split attention operations ResNeStä¸­æ¯ä¸ªå—å°†ç‰¹å¾å›¾æ²¿ç€channelç»´åº¦åˆ’åˆ†ä¸ºå‡ ä¸ªç»„ï¼ˆgroupsï¼‰å’Œæ›´ç»†ç²’åº¦çš„å­ç»„ï¼ˆsplitsï¼‰ï¼Œæ¯ä¸ªç»„çš„ç‰¹å¾è¡¨ç¤ºæ˜¯ç”±å…¶splitsçš„è¡¨ç¤ºçš„åŠ æƒç»„åˆæ¥ç¡®å®šçš„ï¼ˆæ ¹æ®å…¨å±€ä¸Šä¸‹æ–‡ä¿¡æ¯æ¥ç¡®å®šæƒé‡ï¼‰ï¼Œå°†å¾—åˆ°çš„è¿™ä¸ªå•å…ƒç§°ä¹‹ä¸º Split-Attention block ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:10:1","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"featuremap group å€Ÿé‰´äº†ResNeXtç½‘ç»œçš„æ€æƒ³ï¼Œå°†è¾“å…¥åˆ†ä¸ºKä¸ªï¼Œæ¯ä¸€ä¸ªè®°ä¸ºCardinal1-k ï¼Œç„¶ååˆå°†æ¯ä¸ªCardinalæ‹†åˆ†æˆRä¸ªï¼Œæ¯ä¸€ä¸ªè®°ä¸ºSplit1-rï¼Œæ‰€ä»¥æ€»å…±æœ‰G=KRä¸ªç»„ ResNeSt Block ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:10:2","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Split Attention in Cardinal Groups Split-Attention within a cardinal group ä¸€ä¸ªcardinal groupçš„ç»„åˆè¡¨ç¤ºå¯ä»¥é€šè¿‡å¤šä¸ªsplitsæŒ‰å…ƒç´ æ±‚å’Œè¿›è¡Œèåˆæ¥å¾—åˆ°ï¼Œç¬¬kä¸ªcardinal groupä¸º$\\hat U^k$ï¼› $$ \\hat U^k=\\sum_{j=R(k-1)+1}^{Rk}U_j\\\\ s_c^k=F_{gp}(\\hat U_c^k)=\\frac{1}{H\\times W}\\sum_{i=1}^H\\sum_{j=1}^W\\hat U_c^k(i,j)\\\\ $$ $\\hat U^k\\in R^{H\\times W\\times C/K}$ï¼›$s^k\\in R^{C/K}$ï¼›$k\\in1,2,â€¦,K$ï¼›$Hã€W $å’Œ$ C $æ˜¯blockè¾“å‡ºç‰¹å¾å›¾çš„å¤§å° $$ a_i^k(c) = \\begin{cases} \\frac{\\exp(G_i^c(s^k))}{\\sum_{j=1}^R \\exp(G_i^c(s^k))} \u0026 \\text{if } R \u003e 1 \\\\ \\frac{1}{1 + \\exp(-G_i^c(s^k))} \u0026 \\text{if } R = 1 \\end{cases} $$ Gï¼šæ³¨æ„åŠ›æƒé‡å‡½æ•°Gæ˜¯ä¸¤ä¸ªå…¨è¿æ¥å±‚(Dense)å¤–åŠ reluæ¿€æ´»å‡½æ•°ï¼›å¦‚æœR=1çš„è¯å°±æ˜¯å¯¹è¯¥Cardinalä¸­çš„æ‰€æœ‰é€šé“è§†ä¸ºä¸€ä¸ªæ•´ä½“ $$ V_c^k=\\sum_{i=1}^R a_i^k(c)U_{R(k-1)+1}\\\\ V =Concat\\{V^1,V^2,...,V^K\\} $$ $\\hat V^k\\in R^{H\\times W\\times C/K}$ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:10:3","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Radix-major Split-Attention Block è½¬æ¢æˆè¿™ä¸€å½¢å¼æ˜¯ä¸ºäº†ä¾¿äºä½¿ç”¨æ ‡å‡†çš„CNNè¿›è¡ŒåŠ é€Ÿï¼ˆåƒgroup convolutionï¼Œ group fully connectd layerç­‰ï¼‰ åœ¨ channel ç»´åº¦ä¸Šè¢«åˆ†ä¸º cardinal ä¸ªä¸åŒçš„ç»„ï¼Œæ¯ä¸ªç»„å« cardinal groupsã€‚å¯ä»¥æŠŠè¿™ä¸ª cardinal group ç»§ç»­åˆ†æˆ radix ä¸ªå°ç»„ã€‚è¿™æ ·æ¯ä¸ªç»„éƒ½ä¸€ä¸ª cardinal çš„åºå·ï¼Œå’Œ radix çš„åºå·ã€‚ ä»£ç æµ‹è¯• Radix-major implementation of ResNeSt block å±•ç¤ºå‡ºä» cardinality-major åˆ° radix-major çš„å˜åŒ–è¿‡ç¨‹ cardinality-major ä¸­é—´å˜æ¢ radix-major Channel/group shuffling equivariant: å…¨å±€å¹³å‡æ± åŒ–å±‚ï¼šæŠŠ channel ç»´åº¦ä»»æ„æ‰“ä¹±ï¼Œå†é€šè¿‡å…¨å±€å¹³å‡æ± åŒ–å±‚ï¼Œç„¶åå†æŠŠ channel é¡ºåºè¿˜åŸ æ‰¹é‡å½’ä¸€åŒ– (Batch Normalization)ï¼šæ‰“ä¹± channelï¼Œç„¶åå†è¿˜åŸï¼Œä¿è¯ BN å±‚çš„ gamma å’Œ beta ä¹Ÿç›¸åº”è°ƒæ•´é¡ºåº åˆ†ç»„å·ç§¯ 1x1 å·ç§¯ä¸å…¨è¿æ¥å±‚ï¼š1x1 çš„åˆ†ç»„å·ç§¯æ¥å®ç°å¤šä¸ªå¹¶è¡Œçš„å…¨è¿æ¥å±‚ If several consecutive modules are shuffling-equivariant, then the entire block is shuffling-equivariant. import torch import torch.nn as nn from torch.nn import functional as F # https://github.com/zhanghang1989/ResNeSt/issues/66 class rSoftMax(nn.Module): def __init__(self, radix, cardinality): super().__init__() assert radix \u003e 0 self.radix = radix self.cardinality = cardinality def forward(self, x): batch = x.size(0) if self.radix \u003e 1: x = x.view(batch, self.cardinality, self.radix, -1).transpose(1, 2) x = F.softmax(x, dim=1) x = x.reshape(batch, -1) else: x = torch.sigmoid(x) return x class Splat(nn.Module): def __init__(self, channels, radix, cardinality, reduction_factor=4): super(Splat, self).__init__() self.radix = radix self.cardinality = cardinality self.channels = channels inter_channels = max(channels*radix//reduction_factor, 32) self.fc1 = nn.Conv2d(channels//radix, inter_channels, 1, groups=cardinality) self.bn1 = nn.BatchNorm2d(inter_channels) self.relu = nn.ReLU(inplace=True) self.fc2 = nn.Conv2d(inter_channels, channels*radix, 1, groups=cardinality) self.rsoftmax = rSoftMax(radix, cardinality) def forward(self, x): batch, rchannel = x.shape[:2] if self.radix \u003e 1: splited = torch.split(x, rchannel//self.radix, dim=1) gap = sum(splited) else: gap = x gap = F.adaptive_avg_pool2d(gap, 1) gap = self.fc1(gap) gap = self.bn1(gap) gap = self.relu(gap) atten = self.fc2(gap) atten = self.rsoftmax(atten).view(batch, -1, 1, 1) if self.radix \u003e 1: attens = torch.split(atten, rchannel//self.radix, dim=1) out = sum([att*split for (att, split) in zip(attens, splited)]) else: out = atten * x return out.contiguous() ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:10:4","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Network and Training Network Tweaks å¹³å‡ä¸‹é‡‡æ ·: å¯¹äºæ£€æµ‹å’Œåˆ†å‰²ä»»åŠ¡ï¼Œä¸‹é‡‡æ ·è¿‡ç¨‹å¯¹äºä¿æŒç©ºé—´ä¿¡æ¯éå¸¸é‡è¦ï¼ŒResNeSté‡‡ç”¨çš„æ˜¯å¹³å‡æ± åŒ–æ–¹æ³•ï¼Œä½¿ç”¨$3\\times3$çš„kernelæ¥å¾ˆå¥½çš„ä¿æŒç©ºé—´ä¿¡æ¯ã€‚ ä»ResNet-Dä¸­å­¦åˆ°çš„ç­–ç•¥ï¼šç”¨3ä¸ª$3\\times3$å·ç§¯æ›¿ä»£ä¸€ä¸ª$7\\times7$å·ç§¯ï¼›åŠ äº†ä¸€ä¸ª$2\\times2$çš„å¹³å‡æ± åŒ–åˆ°skip connectioné‡Œå»ã€‚ Training Strategy å¤§å‹å°æ‰¹é‡åˆ†å¸ƒå¼è®­ç»ƒï¼š$\\eta =\\frac{B}{256}\\eta_{base}$ï¼› B ç‚ºä¸ºmini-batch sizeã€base learning rate è®¾å®šä¸º0.1ï¼›åœ¨å‰äº”å€‹ä¸ªepoch ä½¿ç”¨ warm-up strategy é€æ¸å¢åŠ  learning rate Label Smoothing Auto Augmentation Mixup Training åˆ™åŒ–ï¼šå¯ä»¥é€‰æ‹©dropoutã€DropBlockã€L2æ­£åˆ™åŒ–æ–¹æ³•ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:11:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Ablation Study breakdown of improvement radix vs. cardinality under ResNeSt-fast setting è¡¥å……æ¥æº setting #P GFLOPs PyTorch Gluon ResNeSt-50-fast 1s1x64d 26.3M 4.34 80.33 80.35 ResNeSt-50-fast 2s1x64d 27.5M 4.34 80.53 80.65 ResNeSt-50-fast 4s1x64d 31.9M 4.35 80.76 80.90 ResNeSt-50-fast 1s2x40d 25.9M 4.38 80.59 80.72 ResNeSt-50-fast 2s2x40d 26.9M 4.38 80.61 80.84 ResNeSt-50-fast 4s2x40d 30.4M 4.41 81.14 81.17 ResNeSt-50-fast 1s4x24d 25.7M 4.42 80.99 80.97 2s2x40d ï¼šradix=2, cardinality=2 and width=40 ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:12:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» å¼ èˆª-ResNeStï¼šæ‹†åˆ†æ³¨æ„åŠ›ç½‘ç»œ å…³äºResNeStçš„ç‚¹æ»´ç–‘æƒ‘ ResNeSt å®ç°æœ‰è¯¯ï¼Ÿ ç­‰ä»·å›¾ç‰‡æ¥æº https://github.com/zhanghang1989/ResNeSt/issues/74 https://github.com/zhanghang1989/ResNeSt/issues/4 https://github.com/zhanghang1989/ResNeSt/issues/41 ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:13:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"DenseNet æ–‡ç« æ ‡é¢˜ï¼šDensely Connected Convolutional Networks ä½œè€…ï¼šGao Huang, Zhuang Liu, Laurens van der Maaten, Kilian Q. Weinberger å‘è¡¨æ—¶é—´ï¼š(CVPR 2017) Official Code ç¨ å¯†è¿æ¥ç½‘ç»œï¼ˆDenseNetï¼‰åœ¨æŸç§ç¨‹åº¦ä¸Šæ˜¯ResNetçš„é€»è¾‘æ‰©å±• ç›¸æ¯” ResNet ä¸­çš„ bottleneckï¼Œdense-block è®¾è®¡äº†ä¸€ä¸ªæ›´æ¿€è¿›çš„å¯†é›†è¿æ¥æœºåˆ¶ï¼Œå³äº’ç›¸è¿æ¥æ‰€æœ‰çš„å±‚ï¼Œæ¯ä¸ªå±‚éƒ½ä¼šæ¥å—å…¶å‰é¢æ‰€æœ‰å±‚ä½œä¸ºå…¶é¢å¤–çš„è¾“å…¥ã€‚ DenseNet å°†æ‰€æœ‰çš„ dense-block å †å ï¼Œç»„åˆæˆäº†ä¸€ä¸ªå¯†é›†è¿æ¥å‹ç½‘ç»œã€‚ å¯†é›†çš„è¿æ¥æ–¹å¼ä½¿å¾— DenseNetæ›´å®¹æ˜“è¿›è¡Œæ¢¯åº¦çš„åå‘ä¼ æ’­ï¼Œä½¿å¾—ç½‘ç»œæ›´å®¹æ˜“è®­ç»ƒã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:14:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"MotivationåŠ¨æœº DenseNets ä¸æ˜¯ä»ææ·±æˆ–æå®½çš„æ¶æ„ä¸­æ±²å–è¡¨å¾èƒ½åŠ›ï¼Œè€Œæ˜¯é€šè¿‡ç‰¹å¾é‡ç”¨æ¥åˆ©ç”¨ç½‘ç»œçš„æ½œåŠ›ã€‚ Q:ä»è¾“å…¥å±‚åˆ°è¾“å‡ºå±‚çš„ä¿¡æ¯è·¯å¾„ï¼ˆä»¥åŠç›¸åæ–¹å‘çš„æ¢¯åº¦ï¼‰å˜å¾—å¾ˆå¤§ï¼Œä»¥è‡³äºå®ƒä»¬å¯èƒ½åœ¨åˆ°è¾¾å¦ä¸€è¾¹ä¹‹å‰å°±æ¶ˆå¤±äº†ã€‚ åªéœ€å°†æ¯ä¸€å±‚ç›´æ¥ç›¸äº’è¿æ¥èµ·æ¥ï¼šè§£å†³äº†ç¡®ä¿æœ€å¤§ä¿¡æ¯ï¼ˆå’Œæ¢¯åº¦ï¼‰æµåŠ¨çš„é—®é¢˜ã€‚ æ¯ä¸€å±‚éƒ½å¯ä»¥ç›´æ¥è®¿é—®æŸå¤±å‡½æ•°å’ŒåŸå§‹è¾“å…¥å›¾åƒçš„æ¢¯åº¦ã€‚ ç¼ºç‚¹ï¼šåå‘ä¼ æ’­è™½ç„¶å®¹æ˜“ï¼Œä½†æ˜¯è®¡ç®—å¤æ‚ Qï¼šDenseNets æ¯”ç­‰æ•ˆçš„ä¼ ç»Ÿ CNN éœ€è¦æ›´å°‘çš„å‚æ•° ä¸éœ€è¦å­¦ä¹ å†—ä½™ç‰¹å¾å›¾ï¼šå¯¹äºæ—§çš„ç‰¹å¾å›¾(feature-map)æ˜¯ä¸éœ€è¦å†å»é‡æ–°å­¦ä¹ çš„ ç‰¹å¾é‡ç”¨ç¼ºç‚¹ï¼šè®­ç»ƒæ¨¡å‹æ—¶RAMä¼šçˆ†ç‚¸ growth-rateä¸ç”¨è®¾å¾ˆå¤§ï¼Œæ‰€ä»¥å‡å°‘è®¸å¤šå‚æ•°ã€‚ growth-rateï¼šå·ç§¯å±‚ä¸­å·ç§¯æ ¸çš„æ•°é‡(k)ï¼ŒDenseNetï¼šk=12 å·ç§¯å—çš„é€šé“æ•°æ§åˆ¶äº†è¾“å‡ºé€šé“æ•°ç›¸å¯¹äºè¾“å…¥é€šé“æ•°çš„å¢é•¿ï¼Œå› æ­¤ä¹Ÿè¢«ç§°ä¸ºå¢é•¿ç‡ Memory-Efficient Implementation of DenseNets Memory-Efficient Implementation of DenseNets ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:15:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"DenseNet å‡å¦‚æˆ‘ä»¬æœ‰$L$å±‚å·ç§¯ç¥ç»ç½‘è·¯ï¼Œé‚£å°±æœ‰$L$ä¸ª(å±‚ä¸å±‚ä¹‹é—´çš„)è¿ç»“ã€‚ä½†æ˜¯DenseNetè®¾è®¡æˆæœ‰$\\frac{L(L+1)}{2}$ä¸ªè¿ç»“ã€‚ DenseNet ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:16:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"ç¨ å¯†å—ï¼ˆdense blockï¼‰ ä¸€ä¸ªç¨ å¯†å—ç”±å¤šä¸ªå·ç§¯å—ç»„æˆï¼Œæ¯ä¸ªå·ç§¯å—ä½¿ç”¨ç›¸åŒæ•°é‡çš„è¾“å‡ºé€šé“ã€‚åœ¨å‰å‘ä¼ æ’­ä¸­ï¼Œæˆ‘ä»¬å°†æ¯ä¸ªå·ç§¯å—çš„è¾“å…¥å’Œè¾“å‡ºåœ¨é€šé“ç»´ä¸Šè¿ç»“ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:16:1","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"è¿‡æ¸¡å±‚ï¼ˆtransition layerï¼‰ è¿‡æ¸¡å±‚å¯ä»¥ç”¨æ¥æ§åˆ¶æ¨¡å‹å¤æ‚åº¦ã€‚é€šè¿‡$1\\times1$å·ç§¯å±‚æ¥å‡å°é€šé“æ•°ï¼Œå¹¶ä½¿ç”¨æ­¥å¹…ä¸º2çš„å¹³å‡æ±‡èšå±‚å‡åŠé«˜å’Œå®½ï¼Œä»è€Œè¿›ä¸€æ­¥é™ä½æ¨¡å‹å¤æ‚åº¦ã€‚ ä¸ºä»€ä¹ˆåœ¨è¿‡æ¸¡å±‚ä½¿ç”¨å¹³å‡æ±‡èšå±‚è€Œä¸æ˜¯æœ€å¤§æ±‡èšå±‚ï¼Ÿ å‚è€ƒï¼šå¹³å‡æ± åŒ–çš„ç‰¹ç‚¹æ˜¯ä¿ç•™èƒŒæ™¯ä¿¡æ¯è®©æ¯ä¸€ä¸ªä¿¡æ¯å¯¹æœ€åçš„è¾“å‡ºéƒ½æœ‰å¸®åŠ©ï¼Œæœ€å¤§æ± åŒ–çš„ç‰¹ç‚¹æ˜¯æå–ç‰¹å¾åªä¿ç•™ç‰¹å¾æœ€æ˜æ˜¾çš„ä¿¡æ¯ï¼Œå½“æˆ‘ä»¬è´¹åŠ²å¿ƒåŠ›æŠŠä¸åŒå±‚çš„ä¿¡æ¯å åœ¨äº†ä¸€èµ·ä»¥åç”¨æœ€å¤§æ± åŒ–ç­‰äºå‰é¢éƒ½åšäº†æ— ç”¨åŠŸ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:16:2","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Model DenseNet DenseNet-121æ˜¯æŒ‡ç½‘ç»œæ€»å…±æœ‰121å±‚ï¼š(6+12+24+16)*2 + 3(transition layer) + 1(7x7 Conv) + 1(Classification layer) = 121ã€‚ DenseNeté¦–å…ˆä½¿ç”¨åŒResNetä¸€æ ·çš„å•å·ç§¯å±‚å’Œæœ€å¤§æ±‡èšå±‚ã€‚ ç±»ä¼¼äºResNetä½¿ç”¨çš„4ä¸ªæ®‹å·®å—ï¼ŒDenseNetä½¿ç”¨çš„æ˜¯4ä¸ªç¨ å¯†å—ã€‚ åœ¨æ¯ä¸ªæ¨¡å—ä¹‹é—´ï¼ŒResNeté€šè¿‡æ­¥å¹…ä¸º2çš„æ®‹å·®å—å‡å°é«˜å’Œå®½ï¼ŒDenseNetåˆ™ä½¿ç”¨è¿‡æ¸¡å±‚æ¥å‡åŠé«˜å’Œå®½ï¼Œå¹¶å‡åŠé€šé“æ•°ã€‚ ä¸ResNetç±»ä¼¼ï¼Œæœ€åæ¥ä¸Šå…¨å±€æ±‡èšå±‚å’Œå…¨è¿æ¥å±‚æ¥è¾“å‡ºç»“æœã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:16:3","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» DenseNet Architecture Explained with PyTorch Implementation from TorchVision Understanding and visualizing DenseNets åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ï¼š7.7. ç¨ å¯†è¿æ¥ç½‘ç»œï¼ˆDenseNetï¼‰ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:17:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"DPN æ–‡ç« æ ‡é¢˜ï¼šDual Path Networks ä½œè€…ï¼šYunpeng Chen, Jianan Li, Huaxin Xiao, Xiaojie Jin, Shuicheng Yan, Jiashi Feng å‘è¡¨æ—¶é—´ï¼š(NIPS 2017) DPN,DPN çš„å…¨ç§°æ˜¯ Dual Path Networksï¼Œå³åŒé€šé“ç½‘ç»œã€‚ è¯¥ç½‘ç»œæ˜¯ç”± DenseNet å’Œ ResNet ç»“åˆçš„ä¸€ä¸ªç½‘ç»œï¼Œåˆ©ç”¨æ®‹å·®ç½‘ç»œçš„è·³è·ƒè¿æ¥å¯¹ç‰¹å¾è¿›è¡Œå¤ç”¨ï¼Œåˆå¯ä»¥åˆ©ç”¨å¯†é›†è¿æ¥è·¯å¾„æŒç»­æ¢ç´¢æ–°ç‰¹å¾ã€‚ DenseNet æŠŠæ¯ä¸€å±‚çš„è¾“å‡ºéƒ½æ‹¼æ¥ï¼ˆconcatenateï¼‰åˆ°å…¶åæ¯ä¸€å±‚çš„è¾“å…¥ä¸Šï¼Œä»é å‰çš„å±‚çº§ä¸­æå–åˆ°æ–°çš„ç‰¹å¾ã€‚ å–„äºæŒ–æ˜æ–°ç‰¹å¾ï¼Œå†—ä½™åº¦é«˜ ResNet æŠŠè¾“å…¥ç›´æ¥åŠ åˆ°ï¼ˆelement-wise addingï¼‰å·ç§¯çš„è¾“å‡ºä¸Šæ˜¯å¯¹ä¹‹å‰å±‚çº§ä¸­å·²æå–ç‰¹å¾çš„å¤ç”¨ã€‚å–„äºå¤ç”¨ç‰¹å¾ï¼Œå†—ä½™åº¦ä½ $[W_1 \\ W_2][X_1;X_2]=W_1X_1+W_2X_2$ï¼šå¦‚æœä¸¤ç»„convï¼Œè¾“å‡ºçš„filterä¸ªæ•°æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆåœ¨input channelä¸Šconcatæ˜¯å¯ä»¥ç­‰ä»·äºåˆ†åˆ«ä¸¤ç»„convæ±‚å’Œçš„å½¢å¼ DPN_block (a) æ®‹å·®ç½‘ç»œã€‚ (b) å¯†é›†è¿æ¥çš„ç½‘ç»œï¼Œå…¶ä¸­æ¯ä¸€å±‚éƒ½å¯ä»¥è®¿é—®æ‰€æœ‰å…ˆå‰å¾®å—çš„è¾“å‡ºã€‚åœ¨è¿™é‡Œï¼Œä¸ºäº†ä¸ï¼ˆaï¼‰ä¸­çš„å¾®å—è®¾è®¡ä¿æŒä¸€è‡´ï¼Œæ·»åŠ äº†ä¸€ä¸ª 1Ã—1 å·ç§¯å±‚ï¼ˆä¸‹åˆ’çº¿ï¼‰ã€‚ (c) é€šè¿‡åœ¨ (b) ä¸­çš„å¾®å—ä¹‹é—´å…±äº«ç›¸åŒè¾“å‡ºçš„ç¬¬ä¸€ä¸ª 1Ã—1 è¿æ¥ï¼Œå¯†é›†è¿æ¥çš„ç½‘ç»œé€€åŒ–ä¸ºæ®‹å·®ç½‘ç»œã€‚(c) ä¸­çš„è™šçº¿çŸ©å½¢çªå‡ºæ˜¾ç¤ºäº†æ®‹å·®å•å…ƒã€‚ (d) åŒè·¯å¾„æ¶æ„ï¼ŒDPNã€‚ (e) ä»å®ç°çš„è§’åº¦çœ‹(d)çš„ç­‰ä»·å½¢å¼ï¼Œå…¶ä¸­ç¬¦å·â€œ~â€è¡¨ç¤ºæ‹†åˆ†æ“ä½œï¼Œâ€œ+â€è¡¨ç¤ºé€å…ƒç´ åŠ æ³• DPN $3\\times3$ çš„å·ç§¯å±‚é‡‡ç”¨çš„æ˜¯ group convolution $1Ã—1Ã—256(+16) $ä¸­çš„ 256 ä»£è¡¨çš„æ˜¯ ResNet çš„é€šé“æ•°ï¼Œ16 ä»£è¡¨çš„æ˜¯ DenseNet ä¸€å±‚çš„è¾“å‡ºé€šé“æ•°ï¼Œå°†ç»“æœåˆ†æˆ 256 å’Œ 16 ä¸¤éƒ¨åˆ†ï¼Œ256 çš„ element-wise çš„åŠ åˆ° ResNet é€šé“ï¼Œ16 çš„ concat åˆ° DenseNet é€šé“ï¼Œç„¶åç»§ç»­ä¸‹ä¸€ä¸ª blockï¼ŒåŒæ ·è¾“å‡º 256 + 16 ä¸ªé€šé“ï¼Œé‡å¤æ“ä½œã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:18:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» ä»£ç  DPNSä»£ç  çŸ¥ä¹ï¼šè§£è¯»Dual Path Networksï¼ˆDPNï¼ŒåŸåˆ›ï¼‰ çŸ¥ä¹ï¼šå·ç§¯ç¥ç»ç½‘ç»œå­¦ä¹ è·¯çº¿ï¼ˆåäº”ï¼‰ | NIPS 2017 Dual Path Network ã€è®ºæ–‡é˜…è¯»ã€‘â€”â€” Dual Path Network ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:19:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"HarDNet æ–‡ç« æ ‡é¢˜ï¼šHarDNet: A Low Memory Traffic Network ä½œè€…ï¼šPing Chao, Chao-Yang Kao, Yu-Shan Ruan, Chien-Hsiang Huang, Youn-Long Lin å‘è¡¨æ—¶é—´ï¼š(ICCV 2019) å®˜æ–¹ä»£ç  HarDNet,HarDNetï¼ˆHarmonic DenseNetï¼‰æ˜¯ 2019 å¹´ç”±å›½ç«‹æ¸…åå¤§å­¦æå‡ºçš„ä¸€ç§å…¨æ–°çš„ç¥ç»ç½‘ç»œï¼Œåœ¨ä½ MAC å’Œå†…å­˜æµé‡çš„æ¡ä»¶ä¸‹å®ç°äº†é«˜æ•ˆç‡ã€‚ä¸ FC-DenseNet-103ï¼ŒDenseNet-264ï¼ŒResNet-50ï¼ŒResNet-152 å’Œ SSD-VGG ç›¸æ¯”ï¼Œæ–°ç½‘ç»œçš„æ¨ç†æ—¶é—´å‡å°‘äº† 35%ï¼Œ36%ï¼Œ30%ï¼Œ32% å’Œ 45%ã€‚ä½¿ç”¨äº†åŒ…æ‹¬ Nvidia Profiler å’Œ ARM Scale-Sim åœ¨å†…çš„å·¥å…·æ¥æµ‹é‡å†…å­˜æµé‡ï¼Œå¹¶éªŒè¯æ¨ç†å»¶è¿Ÿç¡®å®ä¸å†…å­˜æµé‡æ¶ˆè€—æˆæ­£æ¯”ï¼Œå¹¶ä¸”æ‰€æè®®çš„ç½‘ç»œæ¶ˆè€—çš„å†…å­˜æµé‡å¾ˆä½ã€‚ è¯„ä»·æŒ‡æ ‡ Nvidia profilerè·å–DRAMè¯»/å†™çš„å­—èŠ‚æ•°ã€‚ ARM Scale Simè·å–æ¯ä¸ªCNNæ¡†æ¶çš„æµé‡æ•°æ®å’Œæ¨ç†æ¬¡æ•°ã€‚ Convolutional Input/Output (CIO)ï¼šæ¯ä¸ªå·ç§¯å±‚çš„è¾“å…¥å’Œè¾“å‡ºå°ºå¯¸ä¹‹å’Œã€‚CIOæ˜¯DRAMæµé‡çš„è¿‘ä¼¼å¤„ç†ã€‚ MoCï¼ˆMACs over CIOï¼‰ã€‚åœ¨MoCä½äºæŸä¸ªå€¼æ—¶ï¼ŒCIOæ‰ä¼šåœ¨æ¨ç†æ—¶é—´ä¸­å ä¸»å¯¼åœ°ä½ã€‚ å¯¹æ¯ä¸€å±‚çš„MoCæ–½åŠ ä¸€ä¸ªè½¯çº¦æŸï¼Œä»¥è®¾è®¡ä¸€ä¸ªä½CIOç½‘ç»œæ¨¡å‹ï¼Œå¹¶åˆç†å¢åŠ MACsã€‚ é¦–å…ˆå‡å°‘æ¥è‡ªDenseNetçš„å¤§éƒ¨åˆ†å±‚è¿æ¥ï¼Œä»¥é™ä½çº§è”æŸè€—ã€‚ç„¶åï¼Œé€šè¿‡å¢åŠ å±‚çš„é€šé“å®½åº¦æ¥å¹³è¡¡è¾“å…¥/è¾“å‡ºé€šé“æ¯”ç‡ã€‚ Block é‡‡ç”¨çš„ç¨€ç–è¿æ¥æ–¹å¼ï¼šå½“$k$èƒ½è¢«$2^n$æ•´é™¤ï¼Œè®©$k$å±‚å’Œ$k-2^n$å±‚ç›¸è¿ï¼Œå…¶ä¸­$n$ä¸ºéè´Ÿæ•´æ•°ï¼›å¹¶ä¸”è¿˜éœ€æ»¡è¶³$k-2^{n} \\ge 0$ã€‚ $l$å±‚åˆå§‹åŒ–growth-rate k å·ç§¯å±‚ä¸­å·ç§¯æ ¸çš„æ•°é‡(k)ï¼ŒDenseNetï¼šk=12 m ç”¨ä½œä½ç»´å‹ç¼©å› å­ é€šé“æ•°ï¼š$k\\times m^n$ï¼Œnæ˜¯$l$é™¤ä»¥$2^n$æ—¶çš„æœ€å¤§æ•° (a) Inverted transition down module, (b) Depthwise-separable convolution for HarDNet åœ¨HDBåè¿æ¥ä¸€ä¸ª1x1 convå±‚ï¼Œä½œä¸ºtrainsitionã€‚æ­¤å¤–ï¼Œè®¾ç½®HDBçš„æ·±åº¦ä¸º$L=2^n$ï¼Œè¿™æ ·ä¸€ä¸ªHDBçš„æœ€åä¸€å±‚å°±æœ‰æœ€å¤§çš„é€šé“æ•°ï¼Œæ¢¯åº¦æœ€å¤šèƒ½ä¼ è¾“$\\text{log}L$å±‚ã€‚ä¸ºäº†ç¼“è§£è¿™ç§æ¢¯åº¦æ¶ˆå¤±ï¼Œå°†ä¸€ä¸ªHDBçš„è¾“å‡ºè®¾ç½®ä¸ºç¬¬Lå±‚å’Œå®ƒå‰é¢æ‰€æœ‰å¥‡æ•°å±‚çš„çº§è”ã€‚å½“å®ŒæˆHDBä»¥åï¼Œå°±å¯ä»¥ä¸¢å¼ƒä»2è‡³L-2çš„æ‰€æœ‰å¶æ•°å±‚ã€‚å½“m=1.6-1.9æ—¶ï¼Œè¿™äº›å¶æ•°å±‚çš„å†…å­˜å ç”¨æ˜¯å¥‡æ•°å±‚çš„2è‡³3å€ã€‚ HarDNet 3x3, 64ï¼š64ä¸ªè¾“å‡ºé€šé“çš„Conv3x3å±‚ 8,k=14,t=256ï¼šæœ‰8å±‚çš„HDBï¼Œå¢é•¿ç‡kå’Œä¸€ä¸ªæœ‰tä¸ªè¾“å‡ºé€šé“çš„trainsitionè¿‡æ¸¡å±‚ conv1x1 m ï¼šä½ç»´å‹ç¼©å› å­ æ‰€æœ‰å±‚çš„Conv-BN-ReLUï¼Œè€Œä¸æ˜¯DenseNetä¸­ä½¿ç”¨çš„BN-ReLU-Conv å®ç°æŠ˜å æ‰¹é‡æ ‡å‡†åŒ– HardNet-68 ä¸­æ¯ä¸ª HDB çš„ä¸“ç”¨å¢é•¿ç‡ k æé«˜äº† CIO æ•ˆç‡ã€‚ ç”±äºæ·±åº¦ HDB å…·æœ‰æ›´å¤šçš„è¾“å…¥é€šé“ï¼Œå› æ­¤æ›´å¤§çš„å¢é•¿ç‡æœ‰åŠ©äºå¹³è¡¡å±‚çš„è¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„é€šé“æ¯”ç‡ï¼Œä»¥æ»¡è¶³å¯¹MoC çº¦æŸã€‚ å¯¹äºå±‚åˆ†å¸ƒï¼Œæ²¡æœ‰é›†ä¸­åœ¨å¤§å¤šæ•° CNN æ¨¡å‹é‡‡ç”¨çš„ stride16 ä¸Šï¼Œè€Œæ˜¯è®© stride8 åœ¨ HardNet-68 ä¸­æ‹¥æœ‰æœ€å¤šçš„å±‚ï¼Œ æé«˜äº†å±€éƒ¨ç‰¹å¾å­¦ä¹ ï¼Œæœ‰åˆ©äºå°è§„æ¨¡ç›®æ ‡æ£€æµ‹ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œåˆ†ç±»ä»»åŠ¡æ›´å¤šåœ°ä¾èµ–å…¨å±€ç‰¹å¾å­¦ä¹ ï¼Œå› æ­¤ä¸“æ³¨äºä½åˆ†è¾¨ç‡å¯ä»¥è·å¾—æ›´é«˜çš„å‡†ç¡®åº¦å’Œæ›´ä½çš„è®¡ç®—å¤æ‚åº¦ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:20:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» HarDNetç®€æ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:21:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"ResNet_D æ–‡ç« æ ‡é¢˜ï¼šBag of Tricks for Image Classification with Convolutional Neural Networks ä½œè€…ï¼šTong He, Zhi Zhang, Hang Zhang, Zhongyue Zhang, Junyuan Xie, Mu Li å‘è¡¨æ—¶é—´ï¼š(CVPR 2019) Official Code ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:22:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Basline Implemention é¢„å¤„ç†ä¸æ•°æ®å¢å¼º éšæœºsampleå¹¶ä¸”è½¬åŒ–ä¸º[0,255]ä¹‹é—´çš„32ä½å®½æµ®ç‚¹æ•° éšæœºCropçš„é«˜å®½æ¯”åœ¨3/4åˆ°4/3ï¼›é¢ç§¯å æ¯”å¤§å°ä»8~100%ï¼›æœ€åè¢«Resizeåˆ°[224,224] 50%æ¦‚ç‡æ°´å¹³ç¿»è½¬ ç¼©æ”¾è‰²è°ƒï¼Œé¥±å’Œåº¦å’Œäº®åº¦ï¼Œå–[0.6,1.4] åŠ ä¸ŠPCA Noise æœ€åNormalizeæ•´ä¸ªå›¾ç‰‡ (å¯¹æµ‹è¯•çš„æ—¶å€™,ä¸åšå¢å¼º,é¦–å…ˆå¯¹å›¾ç‰‡æŒ‰ç…§çŸ­è¾¹resizeåˆ°256,å†éšæœºCropåˆ°244,ç„¶åNormalize) é‡‡ç”¨Xavieråˆå§‹åŒ– ä½¿ç”¨åŠ NesterovåŠ é€Ÿçš„SGD(NAG) batch-size: 256 å…±è®­ç»ƒ120 epoch lr 0.1(30,60,90 epochä¸Šé™¤ä»¥10) ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:23:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Efficient Training ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:24:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Large-batch training ä¸å°æ‰¹é‡è®­ç»ƒçš„æ¨¡å‹ç›¸æ¯”ï¼Œä½¿ç”¨å¤§æ‰¹é‡è®­ç»ƒè®­ç»ƒçš„æ¨¡å‹çš„éªŒè¯ç²¾åº¦é™ä½ å¦‚ä½•è§£å†³ï¼šå››ç§å¯å‘å¼æ–¹æ³•ï¼Œæœ‰åŠ©äºæ‰©å¤§å•æœºè®­ç»ƒçš„æ‰¹å¤„ç†è§„æ¨¡ Linear scaling learning rate çº¿æ€§ç¼©æ”¾å­¦ä¹ ç‡ã€‚ åœ¨å°æ‰¹é‡SGDä¸­ï¼Œæ¢¯åº¦ä¸‹é™æ˜¯ä¸€ä¸ªéšæœºè¿‡ç¨‹ï¼Œå› ä¸ºæ¯æ‰¹æ ·æœ¬éƒ½æ˜¯éšæœºé€‰å–çš„ã€‚å¢åŠ æ‰¹å¤„ç†å¤§å°å¹¶ä¸ä¼šæ”¹å˜éšæœºæ¢¯åº¦çš„æœŸæœ›ï¼Œä½†ä¼šé™ä½å…¶æ–¹å·®ã€‚æ¢å¥è¯è¯´ï¼Œå¤§çš„batch sizeä¼šé™ä½gradientä¸­çš„noiseã€‚ éšæ‰¹å¤§å°çº¿æ€§å¢åŠ å­¦ä¹ ç‡å¯¹ResNet-50è®­ç»ƒæœ‰æ•ˆã€‚é€‰å–0.1ä½œä¸ºæ‰¹é‡å¤§å°ä¸º256çš„åˆå§‹å­¦ä¹ ç‡ï¼Œé‚£ä¹ˆå½“æ‰¹é‡å¤§å°ä¸ºbæ—¶ï¼Œæˆ‘ä»¬å°†åˆå§‹å­¦ä¹ ç‡æé«˜åˆ°0.1 Ã— b/256ã€‚ learning rate warmup ä¸€å¼€å§‹ä½¿ç”¨è¾ƒå°çš„å­¦ä¹ ç‡ï¼Œç„¶ååœ¨è®­ç»ƒè¿‡ç¨‹ç¨³å®šæ—¶åˆ‡æ¢å›åˆå§‹å­¦ä¹ ç‡ã€‚ ä¸€ç§æ¸è¿›çš„é¢„çƒ­ç­–ç•¥ï¼Œå°†å­¦ä¹ ç‡ä»0çº¿æ€§å¢åŠ åˆ°åˆå§‹å­¦ä¹ ç‡ã€‚ Zero $\\gamma$ BN çš„$\\gamma$å’Œ$\\beta$ä¸€èˆ¬åˆ†åˆ«åˆå§‹åŒ–ä¸º1å’Œ0 Zero $\\gamma$ï¼šå¯¹ä½äºæ®‹å·®å—æœ«ç«¯çš„æ‰€æœ‰BNå±‚åˆå§‹åŒ–$\\gamma=0$ã€‚ å› æ­¤ï¼Œæ‰€æœ‰çš„æ®‹å·®å—éƒ½åªæ˜¯è¿”å›å®ƒä»¬çš„è¾“å…¥ï¼Œæ¨¡æ‹Ÿçš„ç½‘ç»œï¼Œå®ƒçš„å±‚æ•°è¾ƒå°‘ï¼Œåœ¨åˆå§‹é˜¶æ®µæ›´å®¹æ˜“è®­ç»ƒã€‚Therefore, all residual blocks just return their inputs, mimics network that has less number of layers and is easier to train at the initial stage. No bias decay å°†æƒå€¼è¡°å‡åº”ç”¨äºå·ç§¯å±‚å’Œå…¨è¿æ¥å±‚ä¸­çš„æƒå€¼ã€‚å…¶ä»–å‚æ•°ï¼ŒåŒ…æ‹¬åç½®å’Œåœ¨BNå±‚çš„Î³å’ŒÎ²ï¼Œä¿æŒä¸æ­£åˆ™åŒ– ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:24:1","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Low-precision training å°†æ‰€æœ‰å‚æ•°å’Œæ¿€æ´»å­˜å‚¨åœ¨FP16ä¸­ï¼Œå¹¶ä½¿ç”¨FP16è®¡ç®—æ¢¯åº¦ã€‚åŒæ—¶ï¼Œæ‰€æœ‰å‚æ•°åœ¨FP32ä¸­éƒ½æœ‰ä¸€ä¸ªå‰¯æœ¬ï¼Œç”¨äºå‚æ•°æ›´æ–°ã€‚æ­¤å¤–ï¼Œå°†ä¸€ä¸ªæ ‡é‡ä¹˜ä»¥æŸå¤±ï¼Œä»¥æ›´å¥½åœ°å°†æ¢¯åº¦èŒƒå›´å¯¹é½åˆ°FP16 ç»“è®º Efficient_Training ä¸åŸºçº¿æ¨¡å‹ç›¸æ¯”ï¼Œ1024æ‰¹å¤§å°å’ŒFP16è®­ç»ƒçš„æ¨¡å‹ç”šè‡³ç•¥å¾®æé«˜äº†0.5%çš„top-1ç²¾åº¦ã€‚ ä»…é€šè¿‡çº¿æ€§ç¼©æ”¾å­¦ä¹ ç‡å°†æ‰¹é‡å¤§å°ä»256å¢åŠ åˆ°1024ä¼šå¯¼è‡´top-1å‡†ç¡®ç‡ä¸‹é™0.9%ï¼Œè€Œå †å å…¶ä½™ä¸‰ä¸ªå¯å‘å¼æ–¹æ³•å¯ä»¥å¼¥è¡¥è¿™ä¸€å·®è·ã€‚è®­ç»ƒç»“æŸæ—¶ä»FP32åˆ‡æ¢åˆ°FP16ä¸ä¼šå½±å“ç²¾åº¦ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:24:2","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Model Tweaks Resnet50 ResnetB-C-D ResNet-Bï¼šå‰ä¸¤ä¸ªå·ç§¯çš„æ­¥é•¿è¿›è¡Œäº†åˆ‡æ¢ Path Aä¸­çš„å·ç§¯å¿½ç•¥äº†å››åˆ†ä¹‹ä¸‰çš„è¾“å…¥ç‰¹å¾æ˜ å°„ï¼Œå› ä¸ºå®ƒä½¿ç”¨äº†ä¸€ä¸ªè·¨æ­¥ä¸º2çš„å†…æ ¸å¤§å°1Ã—1ã€‚ ResNet-Cï¼šInput stem çš„$7\\times7$å·ç§¯æ›¿æ¢æˆ3ä¸ª$3\\times 3$ ResNet-Bï¼šResNet-BåŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªstrideä¸º2çš„2Ã—2å¹³å‡æ± åŒ–å±‚ï¼Œå°†$1\\times1$å·ç§¯strideæ”¹ä¸º1 Path Bä¸­çš„å·ç§¯å¿½ç•¥äº†å››åˆ†ä¹‹ä¸‰çš„è¾“å…¥ç‰¹å¾æ˜ å°„ï¼Œå› ä¸ºå®ƒä½¿ç”¨äº†ä¸€ä¸ªè·¨æ­¥ä¸º2çš„å†…æ ¸å¤§å°1Ã—1ã€‚ model_conclusion ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:25:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Training Refinements Cosine learning rate decay $\\eta_{t}=\\frac{1}{2}\\left(1+\\cos \\left(\\frac{t \\pi}{T}\\right)\\right) \\eta $ï¼Œå…¶ä¸­æ˜¯$\\eta$åˆå§‹åŒ–å­¦ä¹ ç‡ã€‚ label smoothing é€šå¸¸åˆ†ç±»ä»»åŠ¡ä¸­æ¯å¼ å›¾ç‰‡çš„æ ‡ç­¾æ˜¯one hotå½¢å¼çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªå‘é‡åœ¨å…¶å¯¹åº”ç±»åˆ«ç´¢å¼•ä¸Šè®¾ç½®ä¸º1ï¼Œå…¶ä»–ä½ç½®ä¸º0ï¼Œå½¢å¦‚[0,0,0,1,0,0]ã€‚ label smoothingå°±æ˜¯å°†ç±»åˆ«åˆ†å¸ƒå˜å¾—å¹³æ»‘ä¸€ç‚¹ï¼Œå³ $q_{i}=\\left{\\begin{array}{ll}{1-\\varepsilon} \u0026 {\\text { if } i=y} \\ {\\varepsilon /(K-1)} \u0026 {\\text { otherwise }}\\end{array}\\right. $ å…¶ä¸­$q_{i}$å°±ä»£è¡¨æŸä¸€ç±»çš„ground truthï¼Œä¾‹å¦‚å¦‚æœ\\(i==y\\)ï¼Œé‚£ä¹ˆå…¶æœ€ç»ˆçœŸå®å€¼å°±æ˜¯$1-\\varepsilon$ï¼Œå…¶å®ƒä½ç½®è®¾ç½®ä¸º$\\varepsilon /(K-1)$,è€Œä¸å†æ˜¯ã€‚è¿™é‡Œçš„$\\varepsilon$=0.1 Knowledge Distillation T=20 Mixup æ¯æ¬¡éšæœºæŠ½å–ä¸¤ä¸ªæ ·æœ¬è¿›è¡ŒåŠ æƒæ±‚å’Œå¾—åˆ°æ–°çš„æ ·æœ¬ï¼Œæ ‡ç­¾åŒæ ·åšåŠ æƒæ“ä½œã€‚å…¬å¼ä¸­çš„$\\lambda\\in[0,1]$æ˜¯ä¸€ä¸ªéšæœºæ•°ï¼Œæœä»$\\text{Beta}(\\alpha,\\alpha)$åˆ†å¸ƒã€‚$\\alpha=0.2$ $\\begin{aligned} \\hat{x} \u0026=\\lambda x_{i}+(1-\\lambda) x_{j} \\ \\hat{y} \u0026=\\lambda y_{i}+(1-\\lambda) y_{j} \\end{aligned} $ training_refinements è’¸é¦åœ¨ResNetä¸Šå·¥ä½œå¾—å¾ˆå¥½ï¼Œç„¶è€Œï¼Œå®ƒåœ¨Inception-V3å’ŒMobileNetä¸Šä¸å¤ªå¥½ã€‚ å¯èƒ½è§£é‡Šæ˜¯ï¼šæ•™å¸ˆæ¨¡å‹ä¸æ˜¯æ¥è‡ªäºå­¦ç”Ÿçš„åŒä¸€å®¶åº­ï¼Œå› æ­¤åœ¨é¢„æµ‹ä¸­åˆ†å¸ƒä¸åŒï¼Œç»™æ¨¡å‹å¸¦æ¥äº†è´Ÿé¢å½±å“ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:26:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» Bag of tricks for image classification with convolutional neural networks review [cdm] ResNet strikes back: An improved training procedure in timm Top-1ï¼š80.4% ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:27:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"Res2Net æ–‡ç« æ ‡é¢˜ï¼šRes2Net: A New Multi-scale Backbone Architecture ä½œè€…ï¼šShang-Hua Gao, Ming-Ming Cheng, Kai Zhao, Xin-Yu Zhang, Ming-Hsuan Yang, Philip Torr å‘è¡¨æ—¶é—´ï¼š(TPAMI 2020) å®˜æ–¹æºç  é€šè¿‡åœ¨ä¸€ä¸ªæ®‹å·®å—ä¸­æ„ç­‘ç±»ä¼¼æ®‹å·®åˆ†å±‚çš„æ–¹å¼è¿›è¡Œè¿æ¥ã€‚Res2Net å¯ä»¥åœ¨æ›´ç»†ç²’åº¦çº§åˆ«è¡¨è¾¾å¤šå°ºåº¦ç‰¹å¾ï¼Œå¹¶ä¸”å¯ä»¥å¢åŠ æ¯å±‚ç½‘ç»œçš„æ„Ÿå—é‡å¤§å°ã€‚ Res2Net æ­ç¤ºäº†ä¸€ä¸ªæ–°çš„æå‡æ¨¡å‹ç²¾åº¦çš„ç»´åº¦ï¼Œå³ scaleï¼Œå…¶æ˜¯é™¤äº†æ·±åº¦ã€å®½åº¦å’ŒåŸºæ•°çš„ç°æœ‰ç»´åº¦ä¹‹å¤–å¦å¤–ä¸€ä¸ªå¿…ä¸å¯å°‘çš„æ›´æœ‰æ•ˆçš„å› ç´ ã€‚ Res2Net_Moduleï¼šs=4 Res2Net_Module + group_conv + SE_blocké›†æˆ åœ¨$1\\times1$å·ç§¯å±‚åé¢ï¼Œå°†ç‰¹å¾å›¾åˆ†ä¸ºsä¸ªå­é›†ï¼ˆ$s$ä¸ºå°ºåº¦ï¼ˆscaleï¼‰ç»´åº¦ï¼‰ åŸæœ‰çš„$n$é€šé“$3\\times3$æ»¤æ³¢å™¨æ›¿æ¢ä¸ºä¸€ç³»åˆ—æœ‰$w$é€šé“çš„æ›´å°çš„æ»¤æ³¢å™¨ç»„ï¼ˆé¿å…æŸå¤±ï¼Œä»¤$n = s Ã— w$ï¼‰;å­é›†æœ‰ç€å’ŒåŸå§‹ç‰¹å¾å›¾é›†ç›¸åŒçš„ç©ºé—´å¤§å°ã€‚ æ¯ä¸€ç»„æ»¤æ³¢å™¨å…ˆä»ä¸€ç»„è¾“å…¥ç‰¹å¾å›¾ä¸­è¿›è¡Œç‰¹å¾æå–ï¼Œç„¶åä¸å…ˆå‰ç»„ç”Ÿæˆçš„ç‰¹å¾å›¾å’Œå¦ä¸€ç»„è¾“å…¥çš„ç‰¹å¾å›¾ä¸€èµ·è¢«é€åˆ°ä¸‹ä¸€ç»„å·ç§¯æ ¸è¿›è¡Œå¤„ç†ã€‚ å°æ»¤æ³¢å™¨ç»„ä»¥ç±»ä¼¼äºæ®‹å·®çš„æ¨¡å¼è¢«é€å±‚è¿æ¥ï¼Œè¿™æ ·å¯ä»¥å¢åŠ è¾“å‡ºç‰¹å¾èƒ½è¡¨è¾¾çš„ä¸åŒå°ºåº¦çš„æ•°é‡ã€‚ æœ€ç»ˆï¼Œæ‰€æœ‰ç‰¹å¾å›¾å°†è¢«æ‹¼æ¥åœ¨ä¸€èµ·å¹¶è¢«é€åˆ°ä¸€ç»„$1\\times1$çš„å·ç§¯æ ¸å¤„è¿›è¡Œä¿¡æ¯èåˆã€‚ å¿½ç•¥äº†ç¬¬ä¸€ä¸ªåˆ†ç»„çš„å·ç§¯å±‚ï¼šè¿™ä¹Ÿæ˜¯ä¸€ç§ç‰¹å¾å¤ç”¨çš„å½¢å¼ï¼Œå‡å°‘å‚æ•°å¹¶å¢åŠ $s $çš„æ•°é‡ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:28:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» ä½œè€…åšå®¢ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:29:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"RedNet æ–‡ç« æ ‡é¢˜ï¼šInvolution: Inverting the Inherence of Convolution for Visual Recognition ä½œè€…ï¼šDuo Li, Jie Hu, Changhu Wang, Xiangtai Li, Qi She, Lei Zhu, Tong Zhang, Qifeng Chen å‘è¡¨æ—¶é—´ï¼š(CVPR 2021) å®˜æ–¹æºç  æ™®é€šconvolution ç©ºé—´ä¸å˜æ€§ï¼ˆspatial-agnosticï¼‰ å¹³ç§»ç­‰ä»·æ€§ å¤§å°ä¸€èˆ¬3x3ï¼Œåå° é€šé“ç‰¹å¼‚æ€§ï¼ˆchannel-specificï¼‰ ä¸åŒé€šé“åŒ…å«ä¸åŒè¯­ä¹‰ä¿¡æ¯ ä¸åŒé€šé“çš„å·ç§¯æ ¸å­˜åœ¨å†—ä½™ å¸Œæœ›å…·æœ‰ï¼šè‡ªé€‚åº”é•¿è·ç¦»å…³ç³»å»ºæ¨¡ involution é€šé“ä¸å˜æ€§ï¼ˆchannel-agnosticï¼‰: kernel privatized for different positions ç©ºé—´ç‰¹å¼‚æ€§ï¼ˆspatial-specificï¼‰: kernel shared across different channels kernelï¼š$H\\in R^{H\\times W \\times K\\times K \\times G}$ #groupsï¼š G RedNet_involution é’ˆå¯¹è¾“å…¥feature mapçš„ä¸€ä¸ªåæ ‡ç‚¹ä¸Šçš„ç‰¹å¾å‘é‡ï¼Œå…ˆé€šè¿‡ $\\phi$ (FC-BN-ReLU-FC)å’Œreshape (channel-to-space)å˜æ¢å±•å¼€æˆkernelçš„å½¢çŠ¶ï¼Œä»è€Œå¾—åˆ°è¿™ä¸ªåæ ‡ç‚¹ä¸Šå¯¹åº”çš„involution kernelï¼Œå†å’Œè¾“å…¥feature mapä¸Šè¿™ä¸ªåæ ‡ç‚¹é‚»åŸŸçš„ç‰¹å¾å‘é‡è¿›è¡ŒMultiply-Addå¾—åˆ°æœ€ç»ˆè¾“å‡ºçš„feature mapã€‚ RedNet_involution åœ¨ ResNetçš„stemä¸­ï¼ˆä½¿ç”¨$3\\times 3$æˆ–$7\\times7$ involutionè¿›è¡Œåˆ†ç±»æˆ–å¯†é›†é¢„æµ‹ï¼‰å’Œtrunkï¼ˆå¯¹æ‰€æœ‰ä»»åŠ¡ä½¿ç”¨$7\\times7$ involutionï¼‰ä½ç½®ä¸­çš„æ‰€æœ‰bottleneckä½ç½®ä¸Šæ›¿æ¢æ‰äº†$3\\times 3$å·ç§¯ï¼Œä½†ä¿ç•™äº†æ‰€æœ‰çš„$1\\times 1$å·ç§¯ç”¨äºé€šé“æ˜ å°„å’Œèåˆã€‚è¿™äº›ç²¾å¿ƒé‡æ–°è®¾è®¡çš„å®ä½“è”åˆèµ·æ¥ï¼Œå½¢æˆäº†ä¸€ç§æ–°çš„é«˜æ•ˆ Backbone ç½‘ç»œï¼Œç§°ä¸º RedNetã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:30:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» è¶…è¶Šå·ç§¯ã€è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼šå¼ºå¤§çš„ç¥ç»ç½‘ç»œæ–°ç®—å­involution è®ºæ–‡ç¬”è®° ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:31:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"DCDC æ–‡ç« æ ‡é¢˜ï¼šDual Complementary Dynamic Convolution for Image Recognition ä½œè€…ï¼šLongbin Yan, Yunxiao Qin, Shumin Liu, Jie Chen å‘è¡¨æ—¶é—´ï¼š( 2022) åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ–°é¢–åœ°å°†ç‰¹å¾å»ºæ¨¡ä¸ºå±€éƒ¨ç©ºé—´è‡ªé€‚åº”**(LSA)å’Œå…¨å±€ä½ç§»ä¸å˜[GSI]**éƒ¨åˆ†çš„ç»„åˆï¼Œç„¶åæå‡ºäº†ä¸€ä¸ªåŒåˆ†æ”¯åŒäº’è¡¥åŠ¨æ€å·ç§¯ç®—å­æ¥æ­£ç¡®å¤„ç†è¿™ä¸¤ç±»ç‰¹å¾ï¼Œæ˜¾ç€å¢å¼ºäº†ä»£è¡¨èƒ½åŠ›ã€‚åŸºäºæ‰€æå‡ºçš„ç®—å­æ„å»ºçš„ DCDC-ResNets çš„æ€§èƒ½æ˜æ˜¾ä¼˜äº ResNet åŸºçº¿å’Œå¤§å¤šæ•°æœ€å…ˆè¿›çš„åŠ¨æ€å·ç§¯ç½‘ç»œï¼ŒåŒæ—¶å…·æœ‰æ›´å°‘çš„å‚æ•°å’Œ FLOPã€‚æˆ‘ä»¬è¿˜å¯¹ç›®æ ‡æ£€æµ‹ã€å®ä¾‹å’Œå…¨æ™¯åˆ†å‰²ç­‰ä¸‹æ¸¸è§†è§‰ä»»åŠ¡è¿›è¡Œäº†è¿ç§»å®éªŒï¼Œä»¥è¯„ä¼°æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œå®éªŒç»“æœæ˜¾ç¤ºå‡ºæ˜¾ç€çš„æ€§èƒ½æå‡ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/resnet/:32:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"ResNet","uri":"/posts/deeplearning/image-classification/resnet/"},{"categories":["Deep Learning"],"content":"SENet","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/senet/","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"SENet","uri":"/posts/deeplearning/image-classification/senet/"},{"categories":["Deep Learning"],"content":"SENet æ–‡ç« æ ‡é¢˜ï¼šSqueeze-and-Excitation Networks ä½œè€…ï¼šJie Hu, Li Shen, Samuel Albanie, Gang Sun, Enhua Wu å‘è¡¨æ—¶é—´ï¼š(CVPR 2018) Official Code External-Attention-pytorch senet.pytorch ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/senet/:1:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"SENet","uri":"/posts/deeplearning/image-classification/senet/"},{"categories":["Deep Learning"],"content":"Squeeze-and-Excitation blocks å…³æ³¨channelä¹‹é—´çš„å…³ç³»ï¼Œå¸Œæœ›æ¨¡å‹å¯ä»¥è‡ªåŠ¨å­¦ä¹ åˆ°ä¸åŒchannelç‰¹å¾çš„é‡è¦ç¨‹åº¦ Diagram of a Squeeze-and-Excitation building block. $$ u_c=v_c*X=\\sum_{s=1}^{C'}v_c^s*x^s $$ è¾“å…¥ï¼š$X=[x^1,x^2,â€¦,x^{Câ€™}]$ è¾“å‡ºï¼š$U=[u_1,u_2,â€¦,u_C]$ $v_c=[v_c^1,v_c^2,â€¦,v_c^{Câ€™}] $ï¼›$v_c^s$æ˜¯ä¸€ä¸ªäºŒç»´ç©ºé—´å†…æ ¸ï¼Œè¡¨ç¤ºä½œç”¨äº $X $çš„ç›¸åº”é€šé“çš„ $v_c$çš„å•ä¸ªé€šé“ã€‚ å·ç§¯æ ¸çš„é›†åˆï¼š$V=[v_1,v_2,â€¦,v_C]$ å‹ç¼©ï¼ˆSqueezeï¼‰ï¼šç»è¿‡ï¼ˆå…¨å±€å¹³å‡æ± åŒ–ï¼‰å‹ç¼©æ“ä½œåç‰¹å¾å›¾è¢«å‹ç¼©ä¸º1Ã—1Ã—Cå‘é‡;ä¹Ÿå¯ä»¥é‡‡ç”¨æ›´å¤æ‚çš„ç­–ç•¥ å·ç§¯è®¡ç®—ï¼šå‚æ•°é‡æ¯”è¾ƒå¤§ æœ€å¤§æ± åŒ–ï¼šå¯èƒ½ç”¨äºæ£€æµ‹ç­‰å…¶ä»–ä»»åŠ¡ï¼Œè¾“å…¥çš„ç‰¹å¾å›¾æ˜¯å˜åŒ–çš„ï¼Œèƒ½é‡æ— æ³•ä¿æŒ $$ z_c=F_{sq}(u_c)=\\frac{1}{H\\times W}\\sum_{i=1}^H\\sum_{j=1}^Wu_c(i,j) $$ $$ s=F_{ex}(z,W)=\\sigma(g(z,W)) =\\sigma(W_2\\delta(W_1z)) $$ $\\delta$ï¼šReLUï¼›$\\sigma$ï¼šsigmoidæ¿€æ´»ï¼Œ$W_1\\in R^{\\frac{C}{r}\\times C}$ï¼šé™ç»´å±‚ï¼›$W_2\\in R^{C \\times\\frac{C}{r}}$ï¼šå‡ç»´å±‚ æ¯”ç›´æ¥ç”¨ä¸€ä¸ª Fully Connected å±‚çš„å¥½å¤„åœ¨äº 1ï¼‰å…·æœ‰æ›´å¤šçš„éçº¿æ€§ï¼Œå¯ä»¥æ›´å¥½åœ°æ‹Ÿåˆé€šé“é—´å¤æ‚çš„ç›¸å…³æ€§ï¼› 2ï¼‰æå¤§åœ°å‡å°‘äº†å‚æ•°é‡å’Œè®¡ç®—é‡ cå¯èƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥éœ€è¦é™ç»´ scaleæ“ä½œï¼šæœ€åé€šè¿‡ä¸€ä¸ª Scale çš„æ“ä½œæ¥å°†å½’ä¸€åŒ–åçš„æƒé‡åŠ æƒåˆ°æ¯ä¸ªé€šé“çš„ç‰¹å¾ä¸Š $$ \\tilde x_c = F_{scale}(u_c,s_c)=s_cu_c $$ from torch import nn class SELayer(nn.Module): def __init__(self, channel, reduction=16): super(SELayer, self).__init__() self.avg_pool = nn.AdaptiveAvgPool2d(1) self.fc = nn.Sequential( nn.Linear(channel, channel // reduction, bias=False), nn.ReLU(inplace=True), nn.Linear(channel // reduction, channel, bias=False), nn.Sigmoid() ) def forward(self, x): b, c, _, _ = x.size() y = self.avg_pool(x).view(b, c) y = self.fc(y).view(b, c, 1, 1) return x * y.expand_as(x) SE-Inception-module SE-ResNet-module ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/senet/:2:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"SENet","uri":"/posts/deeplearning/image-classification/senet/"},{"categories":["Deep Learning"],"content":"Model and computational complexity SENet reductionä¸º16. $fc,[16,256]$ï¼š16ä¸ºç¬¬ä¸€ä¸ªå…¨è¿æ¥å±‚çš„è¾“å‡ºé€šé“æ•°ï¼›256ä¸ºç¬¬äºŒä¸ªå…¨è¿æ¥å±‚çš„è¾“å‡ºé€šé“æ•°ï¼› $$ \\frac{2}{r}\\sum_{s=1}^SN_s\\cdot C_s^2 $$$r$è¡¨ç¤ºé™ç»´æ¯”ï¼›$S$ï¼šç¬¬å‡ ä¸ªstageï¼›$C_s$ è¡¨ç¤ºè¾“å‡ºé€šé“çš„ç»´åº¦ï¼›$N_s $è¡¨ç¤ºç¬¬$s$ä¸ªstageçš„é‡å¤å—çš„æ•°é‡ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/senet/:3:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"SENet","uri":"/posts/deeplearning/image-classification/senet/"},{"categories":["Deep Learning"],"content":"Ablation study ä¸åŒReduction ratioä¹Ÿè¿›è¡Œäº†æ¶ˆèå®éªŒã€‚ Squeeze Operatorä¸åŒæ“ä½œ(å¦‚Max,Avg)ä¹Ÿè¿›è¡Œäº†æ¶ˆèå®éªŒã€‚ Excitation Operatorä¸åŒæ¿€æ´»å‡½æ•°æ“ä½œ(å¦‚ReLU,Tanh,Sigmoid)ä¹Ÿè¿›è¡Œäº†æ¶ˆèå®éªŒã€‚ SE blockåœ¨ä¸åŒstageä¹Ÿè¿›è¡Œäº†æ¶ˆèå®éªŒã€‚ Integration strategyè¿›è¡Œæ¶ˆèå®éªŒã€‚ SE block integration designs explored in the ablation study Effect of different SE block integration strategies with ResNet-50 on ImageNet SEçš„ä¸‰ç§å˜ä½“ï¼šSE å•å…ƒåœ¨åˆ†æ”¯èšåˆä¹‹å‰åº”ç”¨äº§ç”Ÿçš„æ€§èƒ½æ”¹è¿›å¯¹å…¶ä½ç½®ç›¸å½“ç¨³å¥ å¦‚æœå¯¹ Addition åä¸»æ”¯ä¸Šçš„ç‰¹å¾è¿›è¡Œé‡æ ‡å®šï¼Œç”±äºåœ¨ä¸»å¹²ä¸Šå­˜åœ¨ 0~1 çš„ scale æ“ä½œï¼Œåœ¨ç½‘ç»œè¾ƒæ·± BP ä¼˜åŒ–æ—¶å°±ä¼šåœ¨é è¿‘è¾“å…¥å±‚å®¹æ˜“å‡ºç°æ¢¯åº¦æ¶ˆæ•£çš„æƒ…å†µï¼Œå¯¼è‡´æ¨¡å‹éš¾ä»¥ä¼˜åŒ–ã€‚ Effect of integrating SE blocks at the 3x3 convolutional layer of each residual branch in ResNet-50 on ImageNet å¦ä¸€ç§è®¾è®¡å˜ä½“ï¼šå°† SE å—ç§»åŠ¨åˆ°æ®‹å·®å•å…ƒå†…ï¼Œå°†å…¶ç›´æ¥æ”¾åœ¨ 3Ã—3 å·ç§¯å±‚ä¹‹åã€‚ ä»¥æ›´å°‘çš„å‚æ•°å®ç°äº†å¯æ¯”çš„åˆ†ç±»ç²¾åº¦ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/senet/:4:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"SENet","uri":"/posts/deeplearning/image-classification/senet/"},{"categories":["Deep Learning"],"content":"Role of SE blocks Effect of Squeezeï¼šå¼ºè°ƒäº†æŒ¤å‹æ“ä½œçš„é‡è¦ï¼Œä½œä¸ºå¯¹æ¯”ï¼Œå®ƒæ·»åŠ äº†ç›¸åŒæ•°é‡çš„å‚æ•°ï¼Œåˆ é™¤äº†æ± åŒ–æ“ä½œï¼Œç”¨å…·æœ‰ç›¸åŒé€šé“ç»´åº¦çš„ç›¸åº” $1\\times1 $å·ç§¯æ›¿æ¢äº†ä¸¤ä¸ª FC å±‚ï¼Œå³ NoSqueezeï¼Œå…¶ä¸­æ¿€åŠ±è¾“å‡ºä¿æŒç©ºé—´ç»´åº¦ä½œä¸ºè¾“å…¥ã€‚ Effect of Squeezet Role of Excitation Role of Excitation $$ SE\\_5\\_2ï¼šSE\\_{stageID}\\_{blockID} $$ä¸åŒç±»åˆ«çš„åˆ†å¸ƒåœ¨ç½‘ç»œçš„æ—©æœŸå±‚éå¸¸ç›¸ä¼¼ï¼Œè¡¨æ˜ç‰¹å¾é€šé“çš„é‡è¦æ€§å¾ˆå¯èƒ½åœ¨æ—©æœŸç”±ä¸åŒçš„ç±»åˆ«å…±äº« åé¢çš„å±‚ç‰¹å¾è¡¨ç°å‡ºæ›´é«˜æ°´å¹³çš„ç‰¹å¼‚æ€§ SE_5_2è¡¨ç°å‡ºä¸€ç§æœ‰è¶£çš„è¶‹å‘äºé¥±å’ŒçŠ¶æ€çš„è¶‹åŠ¿ï¼Œå¤§å¤šæ•°æ¿€æ´»éƒ½æ¥è¿‘äº 1 SE_5_3 çš„ç½‘ç»œæœ«ç«¯ï¼ˆç´§éšå…¶åçš„æ˜¯åˆ†ç±»å™¨ä¹‹å‰çš„å…¨å±€æ± ï¼‰ï¼Œåœ¨ä¸åŒçš„ç±»ä¸­å‡ºç°äº†ç±»ä¼¼çš„æ¨¡å¼ ä¸ºç½‘ç»œæä¾›é‡æ–°æ ¡å‡†æ–¹é¢ä¸å¦‚ä¹‹å‰çš„å—é‡è¦ï¼Œé€šè¿‡ç§»é™¤æœ€åé˜¶æ®µçš„ SE å—ï¼Œå¯ä»¥æ˜¾ç€å‡å°‘é¢å¤–çš„å‚æ•°è®¡æ•°ï¼Œè€Œæ€§èƒ½åªæœ‰è¾¹é™…æŸå¤± ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/senet/:5:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"SENet","uri":"/posts/deeplearning/image-classification/senet/"},{"categories":["Deep Learning"],"content":"è®­ç»ƒç»†èŠ‚ æ¯ä¸ªç“¶é¢ˆæ„å»ºå—çš„å‰$ 1\\times1 $å·ç§¯é€šé“çš„æ•°é‡å‡åŠä»¥é™ä½æ¨¡å‹çš„è®¡ç®—æˆæœ¬æ€§èƒ½ä¸‹é™æœ€å°ã€‚ ç¬¬ä¸€ä¸ª$ 7 \\times 7 $å·ç§¯å±‚è¢«ä¸‰ä¸ªè¿ç»­çš„ $3 \\times3 $å·ç§¯å±‚æ›¿æ¢ã€‚ï¼ˆInceptionï¼‰ å…·æœ‰æ­¥é•¿ä¸º2 çš„ $1 \\times 1 $ä¸‹é‡‡æ ·å·ç§¯è¢«æ›¿æ¢ä¸º$ 3 \\times 3$ æ­¥é•¿ä¸º2çš„ å·ç§¯ä»¥ä¿ç•™ä¿¡æ¯ã€‚ åœ¨åˆ†ç±»å±‚ä¹‹å‰æ’å…¥ä¸€ä¸ª dropout å±‚ï¼ˆdropout æ¯”ä¸º 0.2ï¼‰ä»¥å‡å°‘è¿‡åº¦æ‹Ÿåˆã€‚ åœ¨è®­ç»ƒæœŸé—´ä½¿ç”¨äº†æ ‡ç­¾å¹³æ»‘æ­£åˆ™åŒ–ï¼ˆã€‚ åœ¨æœ€åå‡ ä¸ªè®­ç»ƒæ—¶æœŸï¼Œæ‰€æœ‰ BN å±‚çš„å‚æ•°éƒ½è¢«å†»ç»“ï¼Œä»¥ç¡®ä¿è®­ç»ƒå’Œæµ‹è¯•ä¹‹é—´çš„ä¸€è‡´æ€§ã€‚ ä½¿ç”¨ 8 ä¸ªæœåŠ¡å™¨ï¼ˆ64 ä¸ª GPUï¼‰å¹¶è¡Œè¿›è¡Œè®­ç»ƒï¼Œä»¥å®ç°å¤§æ‰¹é‡ï¼ˆ2048 ä¸ªï¼‰ã€‚åˆå§‹å­¦ä¹ ç‡è®¾ç½®ä¸º 1.0 ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/senet/:6:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"SENet","uri":"/posts/deeplearning/image-classification/senet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» CV27 Momentaç ”å‘æ€»ç›‘ å­™åˆš Squeeze and Excitation Networksä¸Š CV27 Momentaç ”å‘æ€»ç›‘ å­™åˆš Squeeze and Excitation Networksä¸‹ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/senet/:7:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"SENet","uri":"/posts/deeplearning/image-classification/senet/"},{"categories":["Deep Learning"],"content":"SKNet æ–‡ç« æ ‡é¢˜ï¼šSelective Kernel Networks ä½œè€…ï¼šXiang Li, Wenhai Wang, Xiaolin Hu, Jian Yang å‘è¡¨æ—¶é—´ï¼š(CVPR 2019) Official Code ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/senet/:8:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"SENet","uri":"/posts/deeplearning/image-classification/senet/"},{"categories":["Deep Learning"],"content":"Selective Kernel Convolution ç”¨multiple scale featureæ±‡æ€»çš„informationæ¥channel-wiseåœ°æŒ‡å¯¼å¦‚ä½•åˆ†é…ä¾§é‡ä½¿ç”¨å“ªä¸ªkernelçš„è¡¨å¾ ä¸€ç§éçº¿æ€§æ–¹æ³•æ¥èšåˆæ¥è‡ªå¤šä¸ªå†…æ ¸çš„ä¿¡æ¯ï¼Œä»¥å®ç°ç¥ç»å…ƒçš„è‡ªé€‚åº”æ„Ÿå—é‡å¤§å° Selective Kernel Convolution Splitï¼šç”Ÿæˆå…·æœ‰ä¸åŒå†…æ ¸å¤§å°çš„å¤šæ¡è·¯å¾„ï¼Œè¿™äº›è·¯å¾„å¯¹åº”äºä¸åŒæ„Ÿå—é‡(RFï¼Œreceptive field) å¤§å°çš„ç¥ç»å…ƒ $X\\in R^{Hâ€™\\times Wâ€™\\times Câ€™} $ $\\tilde F:X\\to \\tilde U \\in R^{H\\times W\\times C} $ kernel size $3\\times3$ $\\hat F:X\\to \\hat U \\in R^{H\\times W\\times C}$ kernel size $5\\times5$ï¼šä½¿ç”¨ç©ºæ´å·ç§¯$3\\times3$,ç©ºæ´ç³»æ•°ä¸º2ã€‚ Fuseï¼šèšåˆæ¥è‡ªå¤šä¸ªè·¯å¾„çš„ä¿¡æ¯ï¼Œä»¥è·å¾—é€‰æ‹©æƒé‡çš„å…¨å±€å’Œç»¼åˆè¡¨ç¤ºã€‚ $$ U=\\tilde U+\\hat U\\\\ s_c=F_{gp}(U_c)=\\frac{1}{H\\times W}\\sum_{i=1}^H\\sum_{j=1}^WU_c(i,j)\\\\ z=F_{fc}(s)=\\delta(B(Ws)) é™ç»´å¤„ç†\\\\ $$ $s\\in R^c$ï¼›$\\delta$ï¼šReLUï¼›$z\\in R^{d\\times1}$ï¼›$W\\in R^{d\\times C}$ï¼šæ‰¹é‡å½’ä¸€åŒ–ï¼› $d=max(C/r,L)$ Lï¼šdçš„æœ€å°å€¼ï¼Œæœ¬æ–‡è®¾ç½®32 Selectï¼šæ ¹æ®é€‰æ‹©æƒé‡èšåˆä¸åŒå¤§å°å†…æ ¸çš„ç‰¹å¾å›¾ $$ a_c=\\frac{e^{A_cz}}{e^{A_cz}+e^{B_cz}}\\\\ b_c=\\frac{e^{B_cz}}{e^{A_cz}+e^{B_cz}}\\\\ $$$$ V_c=a_c\\cdot\\tilde U_c + b_c\\cdot \\hat U_c\\\\\\ a_c+b_c=1\\\\ V_c\\in R^{H\\times W} $$ Selective Kernel Convolutionä¸‰åˆ†æ”¯ $SK[M,G,r]\\to SK[2,32,16]$ Mï¼šç¡®å®šè¦èšåˆçš„ä¸åŒå†…æ ¸çš„é€‰æ‹©æ•°é‡ Gï¼šæ§åˆ¶æ¯æ¡è·¯å¾„çš„åŸºæ•°çš„ç»„å· rï¼šreduction ratio import numpy as np import torch from torch import nn from torch.nn import init from collections import OrderedDict class SKAttention(nn.Module): def __init__(self, channel=512,kernels=[1,3,5,7],reduction=16,group=1,L=32): super().__init__() self.d=max(L,channel//reduction) self.convs=nn.ModuleList([]) for k in kernels: self.convs.append( nn.Sequential(OrderedDict([ ('conv',nn.Conv2d(channel,channel,kernel_size=k,padding=k//2,groups=group)), ('bn',nn.BatchNorm2d(channel)), ('relu',nn.ReLU()) ])) ) self.fc=nn.Linear(channel,self.d) self.fcs=nn.ModuleList([]) for i in range(len(kernels)): self.fcs.append(nn.Linear(self.d,channel)) self.softmax=nn.Softmax(dim=0) def forward(self, x): bs, c, _, _ = x.size() conv_outs=[] ### split for conv in self.convs: conv_outs.append(conv(x)) feats=torch.stack(conv_outs,0)#k,bs,channel,h,w ### fuse U=sum(conv_outs) #bs,c,h,w ### reduction channel S=U.mean(-1).mean(-1) #bs,c Z=self.fc(S) #bs,d ### calculate attention weight weights=[] for fc in self.fcs: weight=fc(Z) weights.append(weight.view(bs,c,1,1)) #bs,channel attention_weights=torch.stack(weights,0)#k,bs,channel,1,1 attention_weights=self.softmax(attention_weights)#k,bs,channel,1,1 ### fuse V=(attention_weights*feats).sum(0) return V ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/senet/:9:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"SENet","uri":"/posts/deeplearning/image-classification/senet/"},{"categories":["Deep Learning"],"content":"Network Architecture SKNet ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/senet/:10:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"SENet","uri":"/posts/deeplearning/image-classification/senet/"},{"categories":["Deep Learning"],"content":"Ablation Studies The dilation D and group number The dilation D and group number Combination of different kernels The dilation D and group number k3 è¡¨ç¤º 3x3 convï¼Œk5 è¡¨ç¤º 3x3 conv with 2 dilatedï¼Œk7 è¡¨ç¤º 3x3 conv with 3 dilatedã€‚ Dilated æ˜¯ä¸€ç§åœ¨ä¸æ”¹å˜å‚æ•°æ•°é‡çš„æƒ…å†µä¸‹æ‰©å¤§æ„Ÿå—åŒºåŸŸçš„æ–¹æ³•ï¼Œä¸»è¦ç”¨äºåˆ†å‰²ã€‚ (1) å½“è·¯å¾„ M çš„æ•°é‡å¢åŠ æ—¶ï¼Œè¯†åˆ«è¯¯å·®é€šå¸¸ä¼šå‡å°ã€‚ (2) æ— è®º M = 2 è¿˜æ˜¯ 3ï¼ŒåŸºäº SK æ³¨æ„åŠ›çš„å¤šè·¯å¾„èšåˆæ€»æ˜¯æ¯”ç®€å•èšåˆæ–¹æ³•ï¼ˆæœ´ç´ åŸºçº¿æ¨¡å‹ï¼‰å®ç°æ›´ä½çš„ top-1 è¯¯å·®ã€‚ (3) ä½¿ç”¨ SK attentionï¼Œæ¨¡å‹ä» M = 2 åˆ° M = 3 çš„æ€§èƒ½å¢ç›Šæ˜¯å¾®ä¸è¶³é“çš„ï¼ˆtop-1 error ä» 20.79% ä¸‹é™åˆ° 20.76%ï¼‰ã€‚ä¸ºäº†æ›´å¥½åœ°æƒè¡¡æ€§èƒ½å’Œæ•ˆç‡ï¼ŒM = 2 æ˜¯é¦–é€‰ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/senet/:11:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"SENet","uri":"/posts/deeplearning/image-classification/senet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» SKNetâ€”â€”SENetå­ªç”Ÿå…„å¼Ÿç¯‡ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/senet/:12:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"SENet","uri":"/posts/deeplearning/image-classification/senet/"},{"categories":["Deep Learning"],"content":"VGGNet","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/vggnet/","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"VGGNet","uri":"/posts/deeplearning/image-classification/vggnet/"},{"categories":["Deep Learning"],"content":"VGGNet æ–‡ç« æ ‡é¢˜ï¼šVery Deep Convolutional Networks for Large-Scale Visual Recognition ä½œè€…ï¼šSimonyan K, Zisserman A. V å‘è¡¨æ—¶é—´ï¼š(ICLR 2015) è®ºæ–‡ä¸»é¡µ VGGæ˜¯2014å¹´ImageNetå›¾åƒåˆ†ç±»ç«èµ›äºšå†›ï¼Œå®šä½ç«èµ›å† å†›ï¼Œç”±ç‰›æ´¥å¤§å­¦è§†è§‰ç»„æå‡ºã€‚ VGG16å’ŒVGG19ç»å¸¸ä½œä¸ºå„ç±»è®¡ç®—æœºè§†è§‰ä»»åŠ¡çš„è¿ç§»å­¦ä¹ éª¨å¹²ç½‘ç»œã€‚ VGGå°†LeNetå’ŒAlexNetå¥ å®šçš„ç»å…¸ä¸²è¡Œå·ç§¯ç¥ç»ç½‘ç»œç»“æ„çš„æ·±åº¦å’Œæ€§èƒ½å‘æŒ¥åˆ°æè‡´ã€‚ å°†æ‰€æœ‰å·ç§¯æ ¸è®¾ç½®ä¸º3 x 3ï¼Œå‡å°‘å‚æ•°é‡å’Œè®¡ç®—é‡ï¼Œå…±è®¾ç½®5ä¸ªblockï¼Œæ¯è¿›å…¥æ–°çš„blockï¼Œå·ç§¯æ ¸ä¸ªæ•°ç¿»å€ã€‚ VGGæ¨¡å‹ç»“æ„è™½ç„¶ç®€å•ï¼Œä½†è‡ƒè‚¿å¤æ‚ï¼Œå‚æ•°è¿‡å¤šï¼ˆè¶…è¿‡ä¸€äº¿ä¸ªï¼‰ï¼Œé€Ÿåº¦æ…¢ï¼Œç¬¬ä¸€ä¸ªå…¨è¿æ¥å±‚å æ®äº†å¤§é‡å‚æ•°ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/vggnet/:1:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"VGGNet","uri":"/posts/deeplearning/image-classification/vggnet/"},{"categories":["Deep Learning"],"content":"Architecture VGGNet16 VGGNet 2å±‚$3\\times3$å·ç§¯çš„æ„Ÿå—é‡ç›¸å½“äº$5\\times5$ï¼›3å±‚$3\\times3$å·ç§¯çš„æ„Ÿå—é‡ç›¸å½“äº$7\\times7$ã€‚ VGGNet16å‚æ•°è®¡ç®— å‰ä¸¤å±‚å·ç§¯å æ®ç»å¤§éƒ¨åˆ†å†…å­˜ï¼›ç¬¬ä¸€å±‚å…¨è¿æ¥å±‚å æ®ç»å¤§éƒ¨åˆ†å‚æ•°ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/vggnet/:2:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"VGGNet","uri":"/posts/deeplearning/image-classification/vggnet/"},{"categories":["Deep Learning"],"content":"Training æ›´å¿«æ”¶æ•›ï¼šå°çš„å·ç§¯æ ¸å’Œæ·±çš„ç½‘ç»œèµ·åˆ°éšå¼çš„æ­£åˆ™åŒ–ï¼›å¯¹æŸäº›å±‚è¿›è¡Œæƒé‡åˆå§‹åŒ–ç­–ç•¥ è®­ç»ƒå›¾ç‰‡å°ºå¯¸ï¼š$S$ä¸ºç»è¿‡å„å‘åŒæ€§ç¼©æ”¾çš„è®­ç»ƒå›¾åƒçš„çŸ­è¾¹ï¼Œä½œä¸ºè®­ç»ƒå›¾ç‰‡å°ºåº¦ã€‚ï¼ˆAlexNetæ•°æ®å¢å¼ºéƒ¨åˆ†ç¼©æ”¾å°ºåº¦$S$ä¸º$256\\times256$ï¼‰ å›ºå®š$S$ $S=256$æˆ–$S=384$ å¤šå°ºåº¦$S$ éšæœºä»[256,512]é€‰å– ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/vggnet/:3:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"VGGNet","uri":"/posts/deeplearning/image-classification/vggnet/"},{"categories":["Deep Learning"],"content":"Tseting ä¸‹é¢è®¾ç¼©æ”¾åå›¾ç‰‡çŸ­è¾¹ä¸º$Q$ å…¨å·ç§¯ï¼šå…ˆå°†ç½‘ç»œä¸­çš„FCå±‚å…¨è½¬æ¢æˆå·ç§¯å±‚ï¼ˆç¬¬ä¸€ä¸ªFC -\u003e 7 x 7çš„å·ç§¯å±‚ï¼Œåé¢ä¸¤ä¸ªFC -\u003e 1 x 1çš„å·ç§¯å±‚ï¼‰ï¼Œå› æ­¤é¢„æµ‹æ—¶æ— éœ€è£å‰ªæˆ224 x 224äº†ï¼ˆå› ä¸ºç°åœ¨æ˜¯å…¨å·ç§¯ç½‘ç»œï¼‰ï¼Œå¯ä»¥å°†æ•´ä¸ªå›¾ç‰‡å–‚å…¥ã€‚Softmaxå±‚ä¹‹å‰çš„è¾“å‡ºï¼ˆclass score mapï¼‰ï¼šfeature mapä¸ªæ•° = ç±»åˆ«æ•°ï¼Œä¸ºäº†èƒ½ç»è¿‡Softmaxå±‚ï¼Œè¿™é‡Œå¯¹æ¯ä¸ªfeature mapæ±‚å…¨å±€å¹³å‡æ± åŒ–GPAï¼ˆglobal average poolingï¼‰ã€‚ å…¨å·ç§¯ è£å‰ªï¼šè¿˜æ˜¯AlexNetçš„æ€è·¯ï¼Œä½œè€…æ¯ä¸ªå°ºåº¦è£å‰ª50å¼ å›¾ç‰‡ï¼Œä¸‰ä¸ªå°ºåº¦ä¸€å…±150å¼ å›¾ç‰‡ï¼ˆæ³¨æ„è¿™é‡Œè¿˜æ˜¯éœ€è¦è£å‰ªå‡º224 x 224çš„ï¼‰ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/vggnet/:4:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"VGGNet","uri":"/posts/deeplearning/image-classification/vggnet/"},{"categories":["Deep Learning"],"content":"Experiments $Q$ä¸ºå›ºå®šå€¼ LRNåœ¨è¿™é‡Œä¸èµ·ä½œç”¨ è®­ç»ƒå¤šå°ºåº¦å¾ˆæœ‰æ•ˆã€‚ trainå¤šå°ºåº¦ï¼Œtestå•å°ºåº¦ï¼ˆå…¨å·ç§¯ï¼‰ $Q$ä¸ºèŒƒå›´å€¼ è‹¥$S$ä¸ºå›ºå®šå€¼ï¼š$Q={S-32,S,S+32}$ è‹¥$S$ä¸ºèŒƒå›´å€¼ï¼š$Q={S_{min},\\frac{S_{min}+S_{max}}{2},S_{max}}$ trainï¼Œtestå¤šå°ºåº¦ï¼ˆå…¨å·ç§¯ï¼‰ å…¨å·ç§¯å’Œè£å‰ª è£å‰ªçš„æ•ˆæœæ›´å¥½ï¼Œå½“ç„¶ä¸¤è€…é›†æˆä¹‹åæ›´å¥½ trainï¼Œtestå¤šå°ºåº¦ï¼ˆå…¨å·ç§¯å’Œè£å‰ªï¼‰ * æ¨¡å‹é›†æˆ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/vggnet/:5:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"VGGNet","uri":"/posts/deeplearning/image-classification/vggnet/"},{"categories":["Deep Learning"],"content":"Localisation Localisationå®šä½é—®é¢˜ï¼ˆå¯çœ‹æˆç›®æ ‡æ£€æµ‹çš„ç‰¹ä¾‹ï¼‰ï¼ˆæ¨¡å‹é¢„æµ‹æ˜¯bboxä¸Ground Truthçš„IoUå¤§äº0.5å³å¯ï¼‰ï¼šVGGNetæ”¹æˆé¢„æµ‹bounding boxï¼ˆä¸‹é¢éƒ½ç®€ç§°ä¸ºbboxï¼‰çš„æ¨¡å‹ï¼Œä¸€ä¸ªbboxç”¨ä¸­å¿ƒåæ ‡ã€é•¿ã€å®½å››ä¸ªæ•°ç¡®å®šï¼Œæœ€åä¸€ä¸ªFCå±‚æ¢æˆ4ç»´ï¼ˆsingle-class regressionï¼ŒSCRï¼Œå¯¹æ‰€æœ‰ç±»åˆ«ä¸åŒºåˆ†å¯¹å¾…ï¼Œå³è®­ç»ƒ1ä¸ªbboxï¼‰æˆ–4000ç»´çš„å‘é‡ï¼ˆper-class regressionï¼ŒPCRï¼Œæ¯ä¸ªç±»åˆ«åŒºåˆ†å¯¹å¾…ï¼Œå³è®­ç»ƒ1000ä¸ªbboxï¼‰ã€‚SoftmaxæŸå¤±æ¢æˆL2æŸå¤±ï¼Œè®­ç»ƒå•å°ºåº¦æ¨¡å‹ï¼Œæ¨¡å‹åˆå§‹åŒ–ä½¿ç”¨ä¹‹å‰çš„åˆ†ç±»çš„æ¨¡å‹ï¼Œæœ€åä¸€å±‚FCå±‚éšæœºåˆå§‹åŒ–ã€‚ é¢„æµ‹æ—¶ï¼šç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä»…è£å‰ªå‡ºå›¾ç‰‡ä¸­é—´çš„ä¸€å—ï¼›ç¬¬äºŒç§æ–¹æ³•æ˜¯ç”¨å‰é¢çš„å…¨å·ç§¯ï¼Œè¿™ç§æƒ…å†µä¸‹æœ€åä¼šè¾“å‡ºä¸€å †bboxï¼Œäºæ˜¯å¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œåˆå¹¶ï¼ˆåŸºäºå‰é¢åˆ†ç±»çš„ç»“æœåˆå¹¶ï¼‰ã€‚è¿™é‡Œæ²¡æœ‰ä½¿ç”¨å¯ä»¥è¿›ä¸€æ­¥æé«˜ç»“æœçš„multiple pooling offsetså’Œresolution enhancement techniqueï¼ˆæœ‰å¾…ç ”ç©¶ï¼‰ã€‚ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/vggnet/:6:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"VGGNet","uri":"/posts/deeplearning/image-classification/vggnet/"},{"categories":["Deep Learning"],"content":"æ‹“å±•é˜…è¯» ç‰›æ´¥å¤§å­¦è§†è§‰ç»„ï¼ˆVGGï¼‰å®˜æ–¹ç½‘ç«™ VGGåŸç‰ˆSlides VGGè¯¦è§£ å¯è§†åŒ–VGG-16ç½‘ç»œç»“æ„ ç»å…¸ç¥ç»ç½‘ç»œç»“æ„å¯è§†åŒ– Convolutional neural networks on the iPhone with VGGNet ç¿»è¯‘åšå®¢ ","date":"2023-06-02","objectID":"/posts/deeplearning/image-classification/vggnet/:7:0","tags":["Deep Learning","å›¾åƒåˆ†ç±»æ¨¡å‹"],"title":"VGGNet","uri":"/posts/deeplearning/image-classification/vggnet/"},{"categories":["Deep Learning"],"content":"Deep Learning Paper","date":"2023-06-01","objectID":"/posts/deeplearning/paper/","tags":["Deep Learning"],"title":"Deep Learning Paper","uri":"/posts/deeplearning/paper/"},{"categories":["Deep Learning"],"content":"Paper ","date":"2023-06-01","objectID":"/posts/deeplearning/paper/:1:0","tags":["Deep Learning"],"title":"Deep Learning Paper","uri":"/posts/deeplearning/paper/"},{"categories":["Deep Learning"],"content":"Image Classification ALexNetï¼šImageNet Classification with Deep Convolutional Neural Networks (NIPS 2012) ZFNetï¼šVisualizing and Understanding Convolutional Networks (ECCV 2014) GoogLeNetï¼šGoing Deeper with Convolutions (CVPR 2015) Network In Network $1\\times1$å·ç§¯ Provable Bounds for Learning Some Deep Representations ç”¨ç¨€ç–ã€åˆ†æ•£çš„ç½‘ç»œå–ä»£ä»¥å‰åºå¤§å¯†é›†è‡ƒè‚¿çš„ç½‘ç»œ InceptionV2ï¼šBatch Normalization: Accelerating Deep Network Training by Reducing Internal Covariate Shift (ICML 2015) InceptionV3ï¼šRethinking the Inception Architecture for Computer Vision (CVPR 2016) InceptionV4ï¼šInception-ResNet and the Impact of Residual Connections on Learning (AAAI 2017) Xceptionï¼šXception: Deep Learning with Depthwise Separable Convolutions (CVPR 2017) VGGNetï¼šVery Deep Convolutional Networks for Large-Scale Visual Recognition (ICLR 2015) ResNetï¼šDeep Residual Learning for Image Recognition(CVPR 2016) ResNeXtï¼šggregated Residual Transformations for Deep Neural Networks-2017 DenseNetï¼šDensely Connected Convolutional Networks ","date":"2023-06-01","objectID":"/posts/deeplearning/paper/:2:0","tags":["Deep Learning"],"title":"Deep Learning Paper","uri":"/posts/deeplearning/paper/"},{"categories":["Deep Learning"],"content":"Object Detection ","date":"2023-06-01","objectID":"/posts/deeplearning/paper/:3:0","tags":["Deep Learning"],"title":"Deep Learning Paper","uri":"/posts/deeplearning/paper/"},{"categories":["Deep Learning"],"content":"Dense Prediction (one-stage) anchor based SSDï¼šSSD: Single Shot MultiBox Detector (ECCV 2016) YOLOï¼šYou Only Look Once:Unified, Real-Time Object Detection (CVPR 2016) YOLOV2ï¼šYOLO9000: Better, Faster, Stronger (CVPR 2017) YOLOV3ï¼šYOLOv3: An Incremental Improvement (CVPR 2018) YOLOV4ï¼šYOLOv4: Optimal Speed and Accuracy of Object Detection (CVPR 2020) Scaled-YOLOv4ï¼šScaled-YOLOv4: Scaling Cross Stage Partial Network (CVPR 2021) IOU_Loss(2016)-\u003eGIOU_Loss(2019)-\u003eDIOU_Loss(2020)-\u003eCIOU_Loss(2020) YOLOXï¼šYOLOX: Exceeding YOLO Series in 2021 YOLOV5ï¼š Alpha-IoU:A Family of Power Intersection over Union Losses for Bounding Box Regression ï¼ˆNIPS 2021ï¼‰ RetinaNetï¼šFocal Loss for Dense Object Detection (ICCV 2017) anchor free CornerNetï¼šCornerNet: Detecting Objects as Paired Keypoints](https://arxiv.org/abs/1808.01244) (ECCV 2018) CornerNet-Lite: Efficient Keypoint Based Object Detection (BMVC 2020) CenterNetï¼šCenterNet: Keypoint Triplets for Object Detection ï¼ˆICCV 2019) MatrixNetï¼šMatrix Nets: A New Deep Architecture for Object Detectionï¼ˆICCV 2019) FCOSï¼šFCOS: Fully Convolutional One-Stage Object Detection (ICCV 2019) ","date":"2023-06-01","objectID":"/posts/deeplearning/paper/:3:1","tags":["Deep Learning"],"title":"Deep Learning Paper","uri":"/posts/deeplearning/paper/"},{"categories":["Deep Learning"],"content":"Sparse Prediction (two-stage) anchor based R-CNNï¼š[Rich feature hierarchies for accurate object detection and semantic segmentation (CVPR 2014) Selective Search for Object Recognitionï¼ˆIJCV 2012ï¼‰ [Path-aggregation blocks-FPN](####Path-aggregation blocks) [Additional blocks-SPP](####Additional blocks) Fast R-CNNï¼šFast R-CNN (ICCV 2015) Faster R-CNNï¼šFaster R-CNN: Towards Real-Time Object Detection with Region Proposal Networks (NIPS 2015) R-FCNï¼šR-FCN: Object Detection via Region-based Fully Convolutional Networks (NIPS 2016) Mask R-CNNï¼šMask R-CNN (ICCV 2017) Libra R-CNN: Libra R-CNN: Towards Balanced Learning for Object Detection (CVPR 2019) Sparse R-CNNï¼šSparse R-CNN: End-to-End Object Detection with Learnable Proposals (CVPR 2021) anchor free RepPointsï¼šRepPoints: Point Set Representation for Object Detection (ICCV 2019) ","date":"2023-06-01","objectID":"/posts/deeplearning/paper/:3:2","tags":["Deep Learning"],"title":"Deep Learning Paper","uri":"/posts/deeplearning/paper/"},{"categories":["Deep Learning"],"content":"Neck Additional blocks SPPï¼šSpatial Pyramid Pooling in Deep Convolutional Networks for Visual Recognition (TPAMI 2015) ASPPï¼šDeepLab: Semantic Image Segmentation with Deep Convolutional Nets, Atrous Convolution, and Fully Connected CRFs (TPAMI 2017) RFBï¼šReceptive Field Block Net for Accurate and Fast Object Detection (ECCV 2018) SAMï¼šCBAM: Convolutional Block Attention Module (ECCV 2018) Path-aggregation blocks FPNï¼šFeature Pyramid Networks for Object Detection (CVPR 2017) PANï¼šPath Aggregation Network for Instance Segmentation (CVPR 2018) NAS-FPNï¼šNAS-FPN: Learning Scalable Feature Pyramid Architecture for Object Detection (CVPR 2019) BiFPNï¼šEfficientDet: Scalable and Efficient Object Detection (CVPR 2020) ASFFï¼šLearning Spatial Fusion for Single-Shot Object Detection (2019) SFAMï¼š M2Det: A Single-Shot Object Detector based on Multi-Level Feature Pyramid Network (AAAI 2019) ","date":"2023-06-01","objectID":"/posts/deeplearning/paper/:3:3","tags":["Deep Learning"],"title":"Deep Learning Paper","uri":"/posts/deeplearning/paper/"},{"categories":["Deep Learning"],"content":"Image Segmentation ","date":"2023-06-01","objectID":"/posts/deeplearning/paper/:4:0","tags":["Deep Learning"],"title":"Deep Learning Paper","uri":"/posts/deeplearning/paper/"},{"categories":["Deep Learning"],"content":"è½»é‡åŒ–CNN SqueezeNetï¼šSqueezeNet: AlexNet-level accuracy with 50x fewer parameters and \u003c0.5MB model size (2016) SqueezeNext: Hardware-Aware Neural Network Design (2018) MobileNetï¼šMobileNets: Efficient Convolutional Neural Networks for Mobile Vision Applications (2017) MobileNetV2ï¼šMobileNetV2: Inverted Residuals and Linear Bottlenecks (2018) MobileNetV3ï¼šSearching for MobileNetV3 (2019) MnasNet: Platform-Aware Neural Architecture Search for Mobile (CVPR 2019) ShuffleNetï¼šShuffleNet: An Extremely Efficient Convolutional Neural Network for Mobile Devices (2017) ShuffleNetV2ï¼šShuffleNet V2: Practical Guidelines for Efficient CNN Architecture Design (2018) PeleeNetï¼šPelee: A Real-Time Object Detection System on Mobile Devices (2018) Shift-Aï¼šShift: A Zero FLOP, Zero Parameter Alternative to Spatial Convolutions (2018) GhostNetï¼š GhostNet: More Features from Cheap Operations (2020) ","date":"2023-06-01","objectID":"/posts/deeplearning/paper/:5:0","tags":["Deep Learning"],"title":"Deep Learning Paper","uri":"/posts/deeplearning/paper/"},{"categories":["Deep Learning"],"content":"GAN GANï¼šGenerative Adversarial Networks ","date":"2023-06-01","objectID":"/posts/deeplearning/paper/:6:0","tags":["Deep Learning"],"title":"Deep Learning Paper","uri":"/posts/deeplearning/paper/"},{"categories":["Deep Learning"],"content":"å¦‚ä½•è¯»è®ºæ–‡ ææ² ç¬¬ä¸€éï¼šå…³æ³¨æ ‡é¢˜å’Œæ‘˜è¦ï¼›ç»“è®ºã€‚å®éªŒéƒ¨åˆ†å’Œæ–¹æ³•çš„å›¾è¡¨ï¼›çœ‹çœ‹é€‚ä¸é€‚åˆã€‚æµ·é€‰ ç¬¬äºŒéï¼šå…¨è¿‡ä¸€éï¼Œå›¾è¡¨ã€æµç¨‹å›¾å…·ä½“åˆ°æ¯ä¸ªéƒ¨åˆ†ï¼›ç›¸å…³æ–‡çŒ®åœˆå‡ºæ¥ã€‚ç²¾é€‰ ç¬¬ä¸‰éï¼šçŸ¥é“æ¯å¥è¯ï¼Œæ¯æ®µè¯åœ¨è¯´ä»€ä¹ˆï¼Œæ¢ä½æ€è€ƒã€‚è„‘è¡¥è¿‡ç¨‹ã€‚é‡ç‚¹ç ”è¯» ","date":"2023-06-01","objectID":"/posts/deeplearning/paper/:7:0","tags":["Deep Learning"],"title":"Deep Learning Paper","uri":"/posts/deeplearning/paper/"}]